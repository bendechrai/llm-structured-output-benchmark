{
  "id": "459da588-c6d8-4986-baeb-225e067723f4",
  "timestamp": "2025-11-28T23:58:56.194Z",
  "duration": 1907379,
  "config": {
    "models": [
      "openai-gpt5",
      "openai-gpt4o",
      "anthropic-sonnet",
      "anthropic-opus",
      "google-flash",
      "google-pro",
      "groq-gpt-oss-120b",
      "groq-kimi-k2",
      "groq-llama-3.3-70b",
      "openrouter-qwen3-235b"
    ],
    "scenarios": [
      1,
      2,
      3,
      4
    ],
    "runsPerScenario": 3,
    "temperature": 0.1,
    "maxRetries": 3
  },
  "summary": {
    "totalTests": 96,
    "passed": 96,
    "failed": 0,
    "successRate": 100
  },
  "results": {
    "openai-gpt5": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-28T23:59:20.691Z",
                "success": false,
                "durationMs": 24496,
                "inputTokens": 1405,
                "outputTokens": 1163,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n        \"reason\": \"The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.\",\n        \"skills\": [\n          \"PostgreSQL query planning and EXPLAIN (ANALYZE)\",\n          \"Advanced indexing and partitioning strategies\",\n          \"Schema design for analytics/time-series (incl. TimescaleDB)\",\n          \"SQL performance tuning for joins and aggregations\",\n          \"Database observability and I/O profiling (pg_stat_statements)\",\n          \"Replication/read replicas and migration planning\"\n        ],\n        \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [
                      "recommendation"
                    ],
                    "message": "Invalid input: expected string, received undefined",
                    "code": "invalid_type"
                  },
                  {
                    "path": [
                      "action"
                    ],
                    "message": "Invalid input: expected object, received undefined",
                    "code": "invalid_type"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-28T23:59:38.600Z",
                "success": true,
                "durationMs": 17909,
                "inputTokens": 2947,
                "outputTokens": 853,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n        \"reason\": \"The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.\",\n        \"skills\": [\n          \"PostgreSQL query planning and EXPLAIN (ANALYZE)\",\n          \"Advanced indexing and partitioning strategies\",\n          \"Schema design for analytics/time-series (incl. TimescaleDB)\",\n          \"SQL performance tuning for joins and aggregations\",\n          \"Database observability and I/O profiling (pg_stat_statements)\",\n          \"Replication/read replicas and migration planning\"\n        ],\n        \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n        \"reason\": \"The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.\",\n        \"skills\": [\n          \"PostgreSQL query planning and EXPLAIN (ANALYZE)\",\n          \"Advanced indexing and partitioning strategies\",\n          \"Schema design for analytics/time-series (incl. TimescaleDB)\",\n          \"SQL performance tuning for joins and aggregations\",\n          \"Database observability and I/O profiling (pg_stat_statements)\",\n          \"Replication/read replicas and migration planning\"\n        ],\n        \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected object, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n      \"reason\": \"The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.\",\n      \"skills\": [\n        \"PostgreSQL query planning and EXPLAIN (ANALYZE)\",\n        \"Advanced indexing and partitioning strategies\",\n        \"Schema design for analytics/time-series (incl. TimescaleDB)\",\n        \"SQL performance tuning for joins and aggregations\",\n        \"Database observability and I/O profiling (pg_stat_statements)\",\n        \"Replication/read replicas and migration planning\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Performance Engineer (PostgreSQL)",
                      "reason": "The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.",
                      "skills": [
                        "PostgreSQL query planning and EXPLAIN (ANALYZE)",
                        "Advanced indexing and partitioning strategies",
                        "Schema design for analytics/time-series (incl. TimescaleDB)",
                        "SQL performance tuning for joins and aggregations",
                        "Database observability and I/O profiling (pg_stat_statements)",
                        "Replication/read replicas and migration planning"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 42405,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) who can own end-to-end query and schema optimization, address the sequential scan on the events table, reduce disk I/O pressure, and establish a near-term and long-term path (indexing/partitioning now, possible time-series architecture later) to get dashboard latency under your enterprise SLA.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer (PostgreSQL)",
                  "reason": "The team lacks deep database performance expertise. Enterprise dashboards are timing out due to a heavy multi-join, aggregate query with a sequential scan on a large events table and high disk I/O. This role will profile queries with EXPLAIN ANALYZE, design the right composite/partial/covering indexes, implement partitioning for time/event data, refactor schema where needed, and tune database parameters to cut runtime from 8–12s to sub-second targets. They will also evaluate alternatives like materialized views and TimescaleDB, plan any migration safely, and set up monitoring so issues are prevented rather than patched.",
                  "skills": [
                    "PostgreSQL query planning and EXPLAIN (ANALYZE)",
                    "Advanced indexing and partitioning strategies",
                    "Schema design for analytics/time-series (incl. TimescaleDB)",
                    "SQL performance tuning for joins and aggregations",
                    "Database observability and I/O profiling (pg_stat_statements)",
                    "Replication/read replicas and migration planning"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and time-series workloads. Your goal is to reduce the dashboard query from 8–12s to sub-second for accounts with >50k records without sacrificing real-time freshness. Approach: 1) Collect schema DDL, table sizes, row counts, indexes, statistics, and the exact SQL. 2) Run and interpret EXPLAIN (ANALYZE, BUFFERS) to identify table scans, join order, misestimates, hot spots, and I/O patterns. 3) Propose concrete changes: precise composite/partial/covering indexes, rewritten joins/aggregations, filtered indexes per tenant or time window, and event table partitioning (range by time and/or hash by account). 4) Consider denormalization, materialized views with incremental refresh, and lazy/partial hydration only when it preserves near real-time needs. 5) Tune Postgres parameters affecting I/O and planning (work_mem, effective_cache_size, shared_buffers, random_page_cost, autovacuum/analyze strategy) and recommend storage fixes if needed. 6) Validate improvements with benchmarks on realistic datasets; provide before/after plans and latency distributions. 7) If appropriate, assess TimescaleDB or columnar options, outlining a low-risk migration plan, data backfill strategy, dual-write/cutover, and rollback. 8) Deliver a prioritized remediation plan with step-by-step DDL/SQL, expected gains, risk, and testing/rollout guidance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-28T23:59:53.071Z",
                "success": true,
                "durationMs": 14471,
                "inputTokens": 1405,
                "outputTokens": 802,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the slow dashboard queries, redesign the schema where necessary, and create a robust indexing and partitioning strategy so enterprise accounts see sub-second load times without sacrificing real-time data.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n      \"reason\": \"The team lacks deep database performance expertise. You need someone who can read and optimize PostgreSQL query plans, eliminate costly sequential scans on large event tables, design the right composite/partial indexes, and apply partitioning/denormalization where appropriate. They will also tune Postgres parameters, validate whether a read replica or TimescaleDB makes sense, and create a safe migration and rollout plan to achieve near real-time performance for high-volume enterprise accounts.\",\n      \"skills\": [\n        \"PostgreSQL query plan analysis (EXPLAIN/EXPLAIN ANALYZE)\",\n        \"Advanced indexing strategies (composite, covering, partial)\",\n        \"Table partitioning and schema redesign for large time-series/event data\",\n        \"PostgreSQL performance tuning (work_mem, autovacuum, statistics, I/O)\",\n        \"Data access pattern optimization (materialized views/pre-aggregation)\",\n        \"Observability with pg_stat_statements and query-level monitoring\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL at scale. Your goal is to reduce a multi-join, aggregation-heavy dashboard query from 8–12s to sub-second for tenants with >50k records without losing near real-time freshness. Approach: 1) Gather workload data (pg_stat_statements, query logs) and sample parameters per tenant. 2) Run EXPLAIN ANALYZE and identify the dominant costs (sequential scans, misestimates, sort/hash spills, I/O). 3) Propose precise fixes: correct join order, add/selective composite or partial indexes (including covering indexes), adjust statistics targets, and remove unnecessary sorts. 4) Design partitioning (e.g., range by time) for the events table; consider clustering/fillfactor; evaluate denormalization or pre-aggregations and materialized views with fast incremental refresh where applicable. 5) Tune Postgres (work_mem for specific queries, effective_cache_size, maintenance_work_mem, autovacuum strategy) and verify vacuum/analyze health. 6) Validate read replica and caching tradeoffs vs. freshness requirements; evaluate TimescaleDB only after cost/benefit analysis with a migration plan. 7) Provide a safe rollout plan: migration scripts, backfills, feature flags, compare plans, canary tenants, and SLO monitoring. Communicate clearly, quantify expected gains, and avoid changes that risk other workloads without guardrails.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the slow dashboard queries, redesign the schema where necessary, and create a robust indexing and partitioning strategy so enterprise accounts see sub-second load times without sacrificing real-time data.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Performance Engineer (PostgreSQL)",
                      "reason": "The team lacks deep database performance expertise. You need someone who can read and optimize PostgreSQL query plans, eliminate costly sequential scans on large event tables, design the right composite/partial indexes, and apply partitioning/denormalization where appropriate. They will also tune Postgres parameters, validate whether a read replica or TimescaleDB makes sense, and create a safe migration and rollout plan to achieve near real-time performance for high-volume enterprise accounts.",
                      "skills": [
                        "PostgreSQL query plan analysis (EXPLAIN/EXPLAIN ANALYZE)",
                        "Advanced indexing strategies (composite, covering, partial)",
                        "Table partitioning and schema redesign for large time-series/event data",
                        "PostgreSQL performance tuning (work_mem, autovacuum, statistics, I/O)",
                        "Data access pattern optimization (materialized views/pre-aggregation)",
                        "Observability with pg_stat_statements and query-level monitoring"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL at scale. Your goal is to reduce a multi-join, aggregation-heavy dashboard query from 8–12s to sub-second for tenants with >50k records without losing near real-time freshness. Approach: 1) Gather workload data (pg_stat_statements, query logs) and sample parameters per tenant. 2) Run EXPLAIN ANALYZE and identify the dominant costs (sequential scans, misestimates, sort/hash spills, I/O). 3) Propose precise fixes: correct join order, add/selective composite or partial indexes (including covering indexes), adjust statistics targets, and remove unnecessary sorts. 4) Design partitioning (e.g., range by time) for the events table; consider clustering/fillfactor; evaluate denormalization or pre-aggregations and materialized views with fast incremental refresh where applicable. 5) Tune Postgres (work_mem for specific queries, effective_cache_size, maintenance_work_mem, autovacuum strategy) and verify vacuum/analyze health. 6) Validate read replica and caching tradeoffs vs. freshness requirements; evaluate TimescaleDB only after cost/benefit analysis with a migration plan. 7) Provide a safe rollout plan: migration scripts, backfills, feature flags, compare plans, canary tenants, and SLO monitoring. Communicate clearly, quantify expected gains, and avoid changes that risk other workloads without guardrails.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14471,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the slow dashboard queries, redesign the schema where necessary, and create a robust indexing and partitioning strategy so enterprise accounts see sub-second load times without sacrificing real-time data.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer (PostgreSQL)",
                  "reason": "The team lacks deep database performance expertise. You need someone who can read and optimize PostgreSQL query plans, eliminate costly sequential scans on large event tables, design the right composite/partial indexes, and apply partitioning/denormalization where appropriate. They will also tune Postgres parameters, validate whether a read replica or TimescaleDB makes sense, and create a safe migration and rollout plan to achieve near real-time performance for high-volume enterprise accounts.",
                  "skills": [
                    "PostgreSQL query plan analysis (EXPLAIN/EXPLAIN ANALYZE)",
                    "Advanced indexing strategies (composite, covering, partial)",
                    "Table partitioning and schema redesign for large time-series/event data",
                    "PostgreSQL performance tuning (work_mem, autovacuum, statistics, I/O)",
                    "Data access pattern optimization (materialized views/pre-aggregation)",
                    "Observability with pg_stat_statements and query-level monitoring"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL at scale. Your goal is to reduce a multi-join, aggregation-heavy dashboard query from 8–12s to sub-second for tenants with >50k records without losing near real-time freshness. Approach: 1) Gather workload data (pg_stat_statements, query logs) and sample parameters per tenant. 2) Run EXPLAIN ANALYZE and identify the dominant costs (sequential scans, misestimates, sort/hash spills, I/O). 3) Propose precise fixes: correct join order, add/selective composite or partial indexes (including covering indexes), adjust statistics targets, and remove unnecessary sorts. 4) Design partitioning (e.g., range by time) for the events table; consider clustering/fillfactor; evaluate denormalization or pre-aggregations and materialized views with fast incremental refresh where applicable. 5) Tune Postgres (work_mem for specific queries, effective_cache_size, maintenance_work_mem, autovacuum strategy) and verify vacuum/analyze health. 6) Validate read replica and caching tradeoffs vs. freshness requirements; evaluate TimescaleDB only after cost/benefit analysis with a migration plan. 7) Provide a safe rollout plan: migration scripts, backfills, feature flags, compare plans, canary tenants, and SLO monitoring. Communicate clearly, quantify expected gains, and avoid changes that risk other workloads without guardrails.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:00:14.767Z",
                "success": false,
                "durationMs": 21696,
                "inputTokens": 1405,
                "outputTokens": 1075,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior PostgreSQL Performance Engineer who can own end-to-end database performance: diagnose the slow dashboard query with rigorous plan analysis, design the right indexing/partitioning strategy, refactor schema where needed, and advise on whether time-series extensions or architectural changes (e.g., TimescaleDB, materialized views) are warranted without breaking other workloads.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior PostgreSQL Performance Engineer\",\n        \"reason\": \"The team is blocked on deep database performance work. You need an expert who can analyze EXPLAIN/ANALYZE plans, eliminate full table scans on large event tables, choose the correct indexes or BRIN/partial indexes, evaluate table partitioning or time-series extensions, and design safe, incremental schema/query changes that deliver sub-second dashboards without sacrificing real-time requirements. This role will also validate read-replica/caching trade-offs, build benchmarks, and create a migration plan if a different storage model is justified.\",\n        \"skills\": [\n          \"PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)\",\n          \"Advanced indexing & partitioning (B-Tree/BRIN, partial/covering, range/hash partitioning)\",\n          \"High-performance SQL for joins/aggregations and window functions\",\n          \"Schema/data modeling for analytics (denormalization, materialized views, incremental refresh)\",\n          \"Performance benchmarking & I/O profiling (pgBench, disk I/O, autovacuum/analyze tuning)\",\n          \"Replication/read replicas and caching strategy evaluation (Redis, connection pooling)\"\n        ],\n        \"prompt\": \"You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8–12s dashboard query latency on accounts with >50k records. Your responsibilities: 1) Gather the exact SQL, parameters, and representative datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) plans; 3) Identify root causes (seq scans, misestimates, join order, sort/hash spill, I/O hotspots); 4) Propose targeted fixes: correct statistics and planner settings, composite/covering/partial indexes, BRIN for append-only time series, table partitioning by time and/or account, materialized or incremental views, and SQL rewrites; 5) Validate with controlled benchmarks (pgBench), before/after latency, and 95/99p metrics; 6) Ensure safety via migration plan, backfill strategy, feature flags, and rollback; 7) Evaluate architectures (TimescaleDB/partitioning vs current), documenting cost/benefit and a phased rollout if warranted; 8) Deliver concise recommendations and a step-by-step execution plan with expected impact, risks, and monitoring hooks (pg_stat_statements, auto_explain). Be pragmatic, minimize risk, and prefer changes with the highest performance/effort ratio while preserving near real-time freshness.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [
                      "recommendation"
                    ],
                    "message": "Invalid input: expected string, received undefined",
                    "code": "invalid_type"
                  },
                  {
                    "path": [
                      "action"
                    ],
                    "message": "Invalid input: expected object, received undefined",
                    "code": "invalid_type"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:00:33.276Z",
                "success": true,
                "durationMs": 18509,
                "inputTokens": 2899,
                "outputTokens": 810,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior PostgreSQL Performance Engineer who can own end-to-end database performance: diagnose the slow dashboard query with rigorous plan analysis, design the right indexing/partitioning strategy, refactor schema where needed, and advise on whether time-series extensions or architectural changes (e.g., TimescaleDB, materialized views) are warranted without breaking other workloads.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior PostgreSQL Performance Engineer\",\n        \"reason\": \"The team is blocked on deep database performance work. You need an expert who can analyze EXPLAIN/ANALYZE plans, eliminate full table scans on large event tables, choose the correct indexes or BRIN/partial indexes, evaluate table partitioning or time-series extensions, and design safe, incremental schema/query changes that deliver sub-second dashboards without sacrificing real-time requirements. This role will also validate read-replica/caching trade-offs, build benchmarks, and create a migration plan if a different storage model is justified.\",\n        \"skills\": [\n          \"PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)\",\n          \"Advanced indexing & partitioning (B-Tree/BRIN, partial/covering, range/hash partitioning)\",\n          \"High-performance SQL for joins/aggregations and window functions\",\n          \"Schema/data modeling for analytics (denormalization, materialized views, incremental refresh)\",\n          \"Performance benchmarking & I/O profiling (pgBench, disk I/O, autovacuum/analyze tuning)\",\n          \"Replication/read replicas and caching strategy evaluation (Redis, connection pooling)\"\n        ],\n        \"prompt\": \"You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8–12s dashboard query latency on accounts with >50k records. Your responsibilities: 1) Gather the exact SQL, parameters, and representative datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) plans; 3) Identify root causes (seq scans, misestimates, join order, sort/hash spill, I/O hotspots); 4) Propose targeted fixes: correct statistics and planner settings, composite/covering/partial indexes, BRIN for append-only time series, table partitioning by time and/or account, materialized or incremental views, and SQL rewrites; 5) Validate with controlled benchmarks (pgBench), before/after latency, and 95/99p metrics; 6) Ensure safety via migration plan, backfill strategy, feature flags, and rollback; 7) Evaluate architectures (TimescaleDB/partitioning vs current), documenting cost/benefit and a phased rollout if warranted; 8) Deliver concise recommendations and a step-by-step execution plan with expected impact, risks, and monitoring hooks (pg_stat_statements, auto_explain). Be pragmatic, minimize risk, and prefer changes with the highest performance/effort ratio while preserving near real-time freshness.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"I think you need to hire a Senior PostgreSQL Performance Engineer who can own end-to-end database performance: diagnose the slow dashboard query with rigorous plan analysis, design the right indexing/partitioning strategy, refactor schema where needed, and advise on whether time-series extensions or architectural changes (e.g., TimescaleDB, materialized views) are warranted without breaking other workloads.\",\n    \"action\": {\n      \"type\": \"create_actor\",\n      \"actor\": {\n        \"title\": \"Senior PostgreSQL Performance Engineer\",\n        \"reason\": \"The team is blocked on deep database performance work. You need an expert who can analyze EXPLAIN/ANALYZE plans, eliminate full table scans on large event tables, choose the correct indexes or BRIN/partial indexes, evaluate table partitioning or time-series extensions, and design safe, incremental schema/query changes that deliver sub-second dashboards without sacrificing real-time requirements. This role will also validate read-replica/caching trade-offs, build benchmarks, and create a migration plan if a different storage model is justified.\",\n        \"skills\": [\n          \"PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)\",\n          \"Advanced indexing & partitioning (B-Tree/BRIN, partial/covering, range/hash partitioning)\",\n          \"High-performance SQL for joins/aggregations and window functions\",\n          \"Schema/data modeling for analytics (denormalization, materialized views, incremental refresh)\",\n          \"Performance benchmarking & I/O profiling (pgBench, disk I/O, autovacuum/analyze tuning)\",\n          \"Replication/read replicas and caching strategy evaluation (Redis, connection pooling)\"\n        ],\n        \"prompt\": \"You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8–12s dashboard query latency on accounts with >50k records. Your responsibilities: 1) Gather the exact SQL, parameters, and representative datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) plans; 3) Identify root causes (seq scans, misestimates, join order, sort/hash spill, I/O hotspots); 4) Propose targeted fixes: correct statistics and planner settings, composite/covering/partial indexes, BRIN for append-only time series, table partitioning by time and/or account, materialized or incremental views, and SQL rewrites; 5) Validate with controlled benchmarks (pgBench), before/after latency, and 95/99p metrics; 6) Ensure safety via migration plan, backfill strategy, feature flags, and rollback; 7) Evaluate architectures (TimescaleDB/partitioning vs current), documenting cost/benefit and a phased rollout if warranted; 8) Deliver concise recommendations and a step-by-step execution plan with expected impact, risks, and monitoring hooks (pg_stat_statements, auto_explain). Be pragmatic, minimize risk, and prefer changes with the highest performance/effort ratio while preserving near real-time freshness.\",\n        \"model\": \"reasoning\"\n      }\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected object, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior PostgreSQL Performance Engineer who can take ownership of diagnosing the slow dashboard query, optimize execution plans and indexing, redesign schema and partitioning where needed, and advise on time-series extensions or architectural changes while preserving near real-time requirements.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior PostgreSQL Performance Engineer\",\n      \"reason\": \"The team is facing sustained 8-12s query times on large accounts and lacks deep database performance expertise. This role will analyze EXPLAIN/ANALYZE plans, remove full scans on large event tables, design appropriate composite/partial/covering or BRIN indexes, evaluate time-based partitioning and materialized/incremental views, and implement safe, incremental changes to achieve sub-second dashboards without sacrificing freshness. They will also validate read-replica and caching trade-offs, tune autovacuum/stats, and provide a phased plan if adopting TimescaleDB or similar makes sense.\",\n      \"skills\": [\n        \"PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)\",\n        \"Advanced indexing and partitioning (composite, partial, covering, BRIN, time partitioning)\",\n        \"High-performance SQL for joins, aggregations, and window functions\",\n        \"Schema and data modeling for analytics (denormalization, materialized views, incremental refresh)\",\n        \"Performance benchmarking and I/O profiling (pgBench, auto_explain, VACUUM/ANALYZE tuning)\",\n        \"Replication and caching strategy evaluation (read replicas, Redis, connection pooling)\"\n      ],\n      \"prompt\": \"You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8-12s dashboard latency for accounts with >50k records. Your approach: 1) Collect the exact SQL, parameters, and realistic datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) to pinpoint root causes (sequential scans, misestimates, bad join order, sort/hash spill, I/O hotspots); 3) Propose targeted fixes: update statistics and planner settings, create composite/covering/partial or BRIN indexes, introduce time/account partitioning, and rewrite queries for better join/aggregation patterns; 4) Consider materialized or incremental views to preserve near real-time data; 5) Validate changes with controlled benchmarks (pgBench), tracking p95/p99, memory, temp files, and I/O; 6) Implement safely with migration plans, backfills, feature flags, and rollback steps; 7) Evaluate TimescaleDB or similar and document a phased migration if ROI justifies it; 8) Deliver a prioritized roadmap with estimated impact, risks, and monitoring (pg_stat_statements, auto_explain). Be pragmatic and choose the highest impact, lowest risk steps first.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior PostgreSQL Performance Engineer who can take ownership of diagnosing the slow dashboard query, optimize execution plans and indexing, redesign schema and partitioning where needed, and advise on time-series extensions or architectural changes while preserving near real-time requirements.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior PostgreSQL Performance Engineer",
                      "reason": "The team is facing sustained 8-12s query times on large accounts and lacks deep database performance expertise. This role will analyze EXPLAIN/ANALYZE plans, remove full scans on large event tables, design appropriate composite/partial/covering or BRIN indexes, evaluate time-based partitioning and materialized/incremental views, and implement safe, incremental changes to achieve sub-second dashboards without sacrificing freshness. They will also validate read-replica and caching trade-offs, tune autovacuum/stats, and provide a phased plan if adopting TimescaleDB or similar makes sense.",
                      "skills": [
                        "PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)",
                        "Advanced indexing and partitioning (composite, partial, covering, BRIN, time partitioning)",
                        "High-performance SQL for joins, aggregations, and window functions",
                        "Schema and data modeling for analytics (denormalization, materialized views, incremental refresh)",
                        "Performance benchmarking and I/O profiling (pgBench, auto_explain, VACUUM/ANALYZE tuning)",
                        "Replication and caching strategy evaluation (read replicas, Redis, connection pooling)"
                      ],
                      "prompt": "You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8-12s dashboard latency for accounts with >50k records. Your approach: 1) Collect the exact SQL, parameters, and realistic datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) to pinpoint root causes (sequential scans, misestimates, bad join order, sort/hash spill, I/O hotspots); 3) Propose targeted fixes: update statistics and planner settings, create composite/covering/partial or BRIN indexes, introduce time/account partitioning, and rewrite queries for better join/aggregation patterns; 4) Consider materialized or incremental views to preserve near real-time data; 5) Validate changes with controlled benchmarks (pgBench), tracking p95/p99, memory, temp files, and I/O; 6) Implement safely with migration plans, backfills, feature flags, and rollback steps; 7) Evaluate TimescaleDB or similar and document a phased migration if ROI justifies it; 8) Deliver a prioritized roadmap with estimated impact, risks, and monitoring (pg_stat_statements, auto_explain). Be pragmatic and choose the highest impact, lowest risk steps first.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 40205,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior PostgreSQL Performance Engineer who can take ownership of diagnosing the slow dashboard query, optimize execution plans and indexing, redesign schema and partitioning where needed, and advise on time-series extensions or architectural changes while preserving near real-time requirements.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior PostgreSQL Performance Engineer",
                  "reason": "The team is facing sustained 8-12s query times on large accounts and lacks deep database performance expertise. This role will analyze EXPLAIN/ANALYZE plans, remove full scans on large event tables, design appropriate composite/partial/covering or BRIN indexes, evaluate time-based partitioning and materialized/incremental views, and implement safe, incremental changes to achieve sub-second dashboards without sacrificing freshness. They will also validate read-replica and caching trade-offs, tune autovacuum/stats, and provide a phased plan if adopting TimescaleDB or similar makes sense.",
                  "skills": [
                    "PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)",
                    "Advanced indexing and partitioning (composite, partial, covering, BRIN, time partitioning)",
                    "High-performance SQL for joins, aggregations, and window functions",
                    "Schema and data modeling for analytics (denormalization, materialized views, incremental refresh)",
                    "Performance benchmarking and I/O profiling (pgBench, auto_explain, VACUUM/ANALYZE tuning)",
                    "Replication and caching strategy evaluation (read replicas, Redis, connection pooling)"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer tasked with eliminating 8-12s dashboard latency for accounts with >50k records. Your approach: 1) Collect the exact SQL, parameters, and realistic datasets; 2) Produce and interpret EXPLAIN (ANALYZE, BUFFERS) to pinpoint root causes (sequential scans, misestimates, bad join order, sort/hash spill, I/O hotspots); 3) Propose targeted fixes: update statistics and planner settings, create composite/covering/partial or BRIN indexes, introduce time/account partitioning, and rewrite queries for better join/aggregation patterns; 4) Consider materialized or incremental views to preserve near real-time data; 5) Validate changes with controlled benchmarks (pgBench), tracking p95/p99, memory, temp files, and I/O; 6) Implement safely with migration plans, backfills, feature flags, and rollback steps; 7) Evaluate TimescaleDB or similar and document a phased migration if ROI justifies it; 8) Deliver a prioritized roadmap with estimated impact, risks, and monitoring (pg_stat_statements, auto_explain). Be pragmatic and choose the highest impact, lowest risk steps first.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 33.33333333333333,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 32360.333333333332,
          "averageAttempts": 1.6666666666666667,
          "averageAttemptsPerSuccess": 1.6666666666666667,
          "averageTokensPerSuccess": 4921.333333333333,
          "totalTokensUsed": 14764
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:00:55.378Z",
                "success": true,
                "durationMs": 22102,
                "inputTokens": 1177,
                "outputTokens": 937,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer to diagnose and fix the root cause of the slow dashboard queries. The team has tried indexes, query rewrites, and frontend workarounds, but lacks deep expertise in query plan analysis, indexing strategy, and data modeling for high‑volume event data. This role can quickly profile the workload, eliminate the sequential scan hot path, redesign schema/partitions where needed, and recommend whether to stay on Postgres with optimizations (indexes, partitioning, materialized views) or evaluate a time‑series/columnar option—meeting the end‑of‑month SLA and preventing churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n      \"reason\": \"They will analyze EXPLAIN/EXPLAIN ANALYZE plans, resolve the events table sequential scan, design appropriate indexes/partitions, optimize joins and aggregations, and, if necessary, design a safe path to materialized views or a specialized time‑series architecture—improving query latency from seconds to sub‑second without sacrificing real‑time requirements.\",\n      \"skills\": [\n        \"PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)\",\n        \"Advanced indexing strategies (composite, partial, covering, BRIN/B-Tree, bloom)\",\n        \"Schema design and data modeling for high‑volume event/time‑series data (partitioning, retention)\",\n        \"Performance tuning (I/O, VACUUM/ANALYZE, autovacuum, statistics, work_mem, parallelism)\",\n        \"Aggregation acceleration (materialized views, rollups, incremental refresh, denormalization)\",\n        \"Scaling patterns (read replicas, connection pooling, TimescaleDB evaluation/migration planning)\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event/time‑series workloads. Your goal is to cut end‑user dashboard query latency from 8–12s to <1s without losing near real‑time freshness. Approach: 1) Triage quickly: capture top slow queries with pg_stat_statements, get EXPLAIN (ANALYZE, BUFFERS), and identify the dominant operators (seq scans, nested loops, hash joins, sorts). 2) Fix the immediate bottlenecks: propose precise index changes (composite, partial, covering), evaluate BRIN for large append‑only tables, and ensure correct statistics/vacuum settings. 3) Address data layout: recommend partitioning strategy for the events table (time‑range or hybrid), retention policies, and any denormalization needed for heavy aggregations. 4) Optimize queries: rewrite to use appropriate joins/aggregations, window functions, or precomputed rollups; avoid unnecessary subqueries/CTEs that force materialization. 5) Acceleration options: design materialized views or incremental refresh strategies if needed while keeping freshness targets; only propose caching where it meets near real‑time. 6) System tuning: adjust autovacuum, work_mem, effective_cache_size, parallelism, and assess I/O hotspots. 7) Architecture advisement: evaluate read replicas for load isolation; compare staying on Postgres with TimescaleDB or columnar extensions, outlining migration risk, data model changes, and a rollback plan. Always provide concrete DDL/SQL, index definitions, and a stepwise rollout plan (measurement baseline, change, verification, and regression guardrails). Prioritize minimal‑risk changes first to hit the end‑of‑month deadline, then propose medium‑term improvements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Performance Engineer to diagnose and fix the root cause of the slow dashboard queries. The team has tried indexes, query rewrites, and frontend workarounds, but lacks deep expertise in query plan analysis, indexing strategy, and data modeling for high‑volume event data. This role can quickly profile the workload, eliminate the sequential scan hot path, redesign schema/partitions where needed, and recommend whether to stay on Postgres with optimizations (indexes, partitioning, materialized views) or evaluate a time‑series/columnar option—meeting the end‑of‑month SLA and preventing churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Performance Engineer (PostgreSQL)",
                      "reason": "They will analyze EXPLAIN/EXPLAIN ANALYZE plans, resolve the events table sequential scan, design appropriate indexes/partitions, optimize joins and aggregations, and, if necessary, design a safe path to materialized views or a specialized time‑series architecture—improving query latency from seconds to sub‑second without sacrificing real‑time requirements.",
                      "skills": [
                        "PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)",
                        "Advanced indexing strategies (composite, partial, covering, BRIN/B-Tree, bloom)",
                        "Schema design and data modeling for high‑volume event/time‑series data (partitioning, retention)",
                        "Performance tuning (I/O, VACUUM/ANALYZE, autovacuum, statistics, work_mem, parallelism)",
                        "Aggregation acceleration (materialized views, rollups, incremental refresh, denormalization)",
                        "Scaling patterns (read replicas, connection pooling, TimescaleDB evaluation/migration planning)"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event/time‑series workloads. Your goal is to cut end‑user dashboard query latency from 8–12s to <1s without losing near real‑time freshness. Approach: 1) Triage quickly: capture top slow queries with pg_stat_statements, get EXPLAIN (ANALYZE, BUFFERS), and identify the dominant operators (seq scans, nested loops, hash joins, sorts). 2) Fix the immediate bottlenecks: propose precise index changes (composite, partial, covering), evaluate BRIN for large append‑only tables, and ensure correct statistics/vacuum settings. 3) Address data layout: recommend partitioning strategy for the events table (time‑range or hybrid), retention policies, and any denormalization needed for heavy aggregations. 4) Optimize queries: rewrite to use appropriate joins/aggregations, window functions, or precomputed rollups; avoid unnecessary subqueries/CTEs that force materialization. 5) Acceleration options: design materialized views or incremental refresh strategies if needed while keeping freshness targets; only propose caching where it meets near real‑time. 6) System tuning: adjust autovacuum, work_mem, effective_cache_size, parallelism, and assess I/O hotspots. 7) Architecture advisement: evaluate read replicas for load isolation; compare staying on Postgres with TimescaleDB or columnar extensions, outlining migration risk, data model changes, and a rollback plan. Always provide concrete DDL/SQL, index definitions, and a stepwise rollout plan (measurement baseline, change, verification, and regression guardrails). Prioritize minimal‑risk changes first to hit the end‑of‑month deadline, then propose medium‑term improvements.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 22102,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Performance Engineer to diagnose and fix the root cause of the slow dashboard queries. The team has tried indexes, query rewrites, and frontend workarounds, but lacks deep expertise in query plan analysis, indexing strategy, and data modeling for high‑volume event data. This role can quickly profile the workload, eliminate the sequential scan hot path, redesign schema/partitions where needed, and recommend whether to stay on Postgres with optimizations (indexes, partitioning, materialized views) or evaluate a time‑series/columnar option—meeting the end‑of‑month SLA and preventing churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer (PostgreSQL)",
                  "reason": "They will analyze EXPLAIN/EXPLAIN ANALYZE plans, resolve the events table sequential scan, design appropriate indexes/partitions, optimize joins and aggregations, and, if necessary, design a safe path to materialized views or a specialized time‑series architecture—improving query latency from seconds to sub‑second without sacrificing real‑time requirements.",
                  "skills": [
                    "PostgreSQL query plan analysis (EXPLAIN/ANALYZE, pg_stat_statements)",
                    "Advanced indexing strategies (composite, partial, covering, BRIN/B-Tree, bloom)",
                    "Schema design and data modeling for high‑volume event/time‑series data (partitioning, retention)",
                    "Performance tuning (I/O, VACUUM/ANALYZE, autovacuum, statistics, work_mem, parallelism)",
                    "Aggregation acceleration (materialized views, rollups, incremental refresh, denormalization)",
                    "Scaling patterns (read replicas, connection pooling, TimescaleDB evaluation/migration planning)"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event/time‑series workloads. Your goal is to cut end‑user dashboard query latency from 8–12s to <1s without losing near real‑time freshness. Approach: 1) Triage quickly: capture top slow queries with pg_stat_statements, get EXPLAIN (ANALYZE, BUFFERS), and identify the dominant operators (seq scans, nested loops, hash joins, sorts). 2) Fix the immediate bottlenecks: propose precise index changes (composite, partial, covering), evaluate BRIN for large append‑only tables, and ensure correct statistics/vacuum settings. 3) Address data layout: recommend partitioning strategy for the events table (time‑range or hybrid), retention policies, and any denormalization needed for heavy aggregations. 4) Optimize queries: rewrite to use appropriate joins/aggregations, window functions, or precomputed rollups; avoid unnecessary subqueries/CTEs that force materialization. 5) Acceleration options: design materialized views or incremental refresh strategies if needed while keeping freshness targets; only propose caching where it meets near real‑time. 6) System tuning: adjust autovacuum, work_mem, effective_cache_size, parallelism, and assess I/O hotspots. 7) Architecture advisement: evaluate read replicas for load isolation; compare staying on Postgres with TimescaleDB or columnar extensions, outlining migration risk, data model changes, and a rollback plan. Always provide concrete DDL/SQL, index definitions, and a stepwise rollout plan (measurement baseline, change, verification, and regression guardrails). Prioritize minimal‑risk changes first to hit the end‑of‑month deadline, then propose medium‑term improvements.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:01:14.069Z",
                "success": true,
                "durationMs": 18691,
                "inputTokens": 1177,
                "outputTokens": 842,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the root cause of the slow dashboard queries. The team has tried ad‑hoc indexing, query rewrites, and frontend workarounds without success, and they lack deep expertise in query planning, indexing strategies, partitioning, and schema design. An expert can read EXPLAIN ANALYZE, eliminate the sequential scan on the large events table, tune statistics and I/O, evaluate partitioning/materialized views, and guide whether a move to a time‑series extension (e.g., TimescaleDB) or architectural change is warranted—all while meeting near real‑time constraints and minimizing risk.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Performance Engineer (PostgreSQL)\",\n      \"reason\": \"They can analyze query plans, remove the events-table bottleneck, design proper indexing/partitioning, tune Postgres for high I/O workloads, and advise on schema changes or a pragmatic path to TimescaleDB—all to achieve sub‑second/near real‑time dashboard performance without risky guesswork.\",\n      \"skills\": [\n        \"PostgreSQL performance tuning (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)\",\n        \"Advanced indexing strategies (covering/partial/multi-column, BRIN/B-Tree), statistics tuning\",\n        \"Table partitioning and schema design/denormalization for analytics workloads\",\n        \"I/O and storage optimization (VACUUM/ANALYZE, autovacuum, fillfactor, work_mem, effective_cache_size)\",\n        \"Materialized views and incremental refresh patterns compatible with near real‑time SLAs\",\n        \"Benchmarking and load testing (realistic datasets, query tracing, regression guards)\",\n        \"TimescaleDB/time‑series modeling evaluation and migration planning\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event data. Your goals: deliver sub‑second or near real‑time dashboard queries for enterprise customers with >50k records. Approach: 1) Reproduce the slow query on realistic data; capture baselines. 2) Use EXPLAIN ANALYZE and pg_stat_statements to identify bottlenecks (sequential scans, misestimates, join strategies, sort/hash spills). 3) Propose concrete fixes prioritized by impact/risk: correct indexes (covering/partial), statistics tuning, query rewrites that maintain correctness, join/aggregation strategies, and memory/workload parameters. 4) Evaluate physical design changes: table partitioning (e.g., by time/account), materialized views with incremental refresh, and denormalization where justified. 5) Validate I/O and autovacuum health; ensure appropriate maintenance settings and bloat control. 6) Where needed, assess TimescaleDB or related extensions vs. staying on vanilla Postgres; outline a phased migration plan with rollback and data consistency checks. 7) Provide step‑by‑step changes, expected performance gains, and safe rollout (staging tests, canary, monitoring, regression tests). Communicate trade‑offs and keep near real‑time requirements front and center.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the root cause of the slow dashboard queries. The team has tried ad‑hoc indexing, query rewrites, and frontend workarounds without success, and they lack deep expertise in query planning, indexing strategies, partitioning, and schema design. An expert can read EXPLAIN ANALYZE, eliminate the sequential scan on the large events table, tune statistics and I/O, evaluate partitioning/materialized views, and guide whether a move to a time‑series extension (e.g., TimescaleDB) or architectural change is warranted—all while meeting near real‑time constraints and minimizing risk.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Performance Engineer (PostgreSQL)",
                      "reason": "They can analyze query plans, remove the events-table bottleneck, design proper indexing/partitioning, tune Postgres for high I/O workloads, and advise on schema changes or a pragmatic path to TimescaleDB—all to achieve sub‑second/near real‑time dashboard performance without risky guesswork.",
                      "skills": [
                        "PostgreSQL performance tuning (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)",
                        "Advanced indexing strategies (covering/partial/multi-column, BRIN/B-Tree), statistics tuning",
                        "Table partitioning and schema design/denormalization for analytics workloads",
                        "I/O and storage optimization (VACUUM/ANALYZE, autovacuum, fillfactor, work_mem, effective_cache_size)",
                        "Materialized views and incremental refresh patterns compatible with near real‑time SLAs",
                        "Benchmarking and load testing (realistic datasets, query tracing, regression guards)",
                        "TimescaleDB/time‑series modeling evaluation and migration planning"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event data. Your goals: deliver sub‑second or near real‑time dashboard queries for enterprise customers with >50k records. Approach: 1) Reproduce the slow query on realistic data; capture baselines. 2) Use EXPLAIN ANALYZE and pg_stat_statements to identify bottlenecks (sequential scans, misestimates, join strategies, sort/hash spills). 3) Propose concrete fixes prioritized by impact/risk: correct indexes (covering/partial), statistics tuning, query rewrites that maintain correctness, join/aggregation strategies, and memory/workload parameters. 4) Evaluate physical design changes: table partitioning (e.g., by time/account), materialized views with incremental refresh, and denormalization where justified. 5) Validate I/O and autovacuum health; ensure appropriate maintenance settings and bloat control. 6) Where needed, assess TimescaleDB or related extensions vs. staying on vanilla Postgres; outline a phased migration plan with rollback and data consistency checks. 7) Provide step‑by‑step changes, expected performance gains, and safe rollout (staging tests, canary, monitoring, regression tests). Communicate trade‑offs and keep near real‑time requirements front and center.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 18692,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Performance Engineer (PostgreSQL) to diagnose and fix the root cause of the slow dashboard queries. The team has tried ad‑hoc indexing, query rewrites, and frontend workarounds without success, and they lack deep expertise in query planning, indexing strategies, partitioning, and schema design. An expert can read EXPLAIN ANALYZE, eliminate the sequential scan on the large events table, tune statistics and I/O, evaluate partitioning/materialized views, and guide whether a move to a time‑series extension (e.g., TimescaleDB) or architectural change is warranted—all while meeting near real‑time constraints and minimizing risk.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer (PostgreSQL)",
                  "reason": "They can analyze query plans, remove the events-table bottleneck, design proper indexing/partitioning, tune Postgres for high I/O workloads, and advise on schema changes or a pragmatic path to TimescaleDB—all to achieve sub‑second/near real‑time dashboard performance without risky guesswork.",
                  "skills": [
                    "PostgreSQL performance tuning (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)",
                    "Advanced indexing strategies (covering/partial/multi-column, BRIN/B-Tree), statistics tuning",
                    "Table partitioning and schema design/denormalization for analytics workloads",
                    "I/O and storage optimization (VACUUM/ANALYZE, autovacuum, fillfactor, work_mem, effective_cache_size)",
                    "Materialized views and incremental refresh patterns compatible with near real‑time SLAs",
                    "Benchmarking and load testing (realistic datasets, query tracing, regression guards)",
                    "TimescaleDB/time‑series modeling evaluation and migration planning"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer specializing in PostgreSQL and high‑volume event data. Your goals: deliver sub‑second or near real‑time dashboard queries for enterprise customers with >50k records. Approach: 1) Reproduce the slow query on realistic data; capture baselines. 2) Use EXPLAIN ANALYZE and pg_stat_statements to identify bottlenecks (sequential scans, misestimates, join strategies, sort/hash spills). 3) Propose concrete fixes prioritized by impact/risk: correct indexes (covering/partial), statistics tuning, query rewrites that maintain correctness, join/aggregation strategies, and memory/workload parameters. 4) Evaluate physical design changes: table partitioning (e.g., by time/account), materialized views with incremental refresh, and denormalization where justified. 5) Validate I/O and autovacuum health; ensure appropriate maintenance settings and bloat control. 6) Where needed, assess TimescaleDB or related extensions vs. staying on vanilla Postgres; outline a phased migration plan with rollback and data consistency checks. 7) Provide step‑by‑step changes, expected performance gains, and safe rollout (staging tests, canary, monitoring, regression tests). Communicate trade‑offs and keep near real‑time requirements front and center.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:01:41.072Z",
                "success": true,
                "durationMs": 27002,
                "inputTokens": 1177,
                "outputTokens": 1304,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior PostgreSQL Performance Engineer to diagnose and remediate the slow dashboard queries. The team is hitting disk I/O bottlenecks, sequential scans on a large events table, and uncertainty around indexing, partitioning, and schema trade‑offs. You need an expert who can read query plans, tune Postgres configuration, design the right indexes/partitions, and, if necessary, evaluate TimescaleDB or other architectures—while providing a safe, staged rollout plan to hit the end‑of‑month deadline.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior PostgreSQL Performance Engineer\",\n      \"reason\": \"They will analyze EXPLAIN ANALYZE plans, eliminate the long sequential scan on the events table, design proper indexing/partitioning, tune Postgres and I/O, and propose safe schema or architectural changes (e.g., materialized views, rollups, or TimescaleDB) to achieve near real‑time performance without masking issues.\",\n      \"skills\": [\n        \"Advanced PostgreSQL query optimization (EXPLAIN/ANALYZE, plan shapes, join strategies)\",\n        \"Indexing and partitioning strategies for large/time‑series tables (BTREE/GIN/BRIN, partial and covering indexes)\",\n        \"PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, shared_buffers, autovacuum, checkpoint tuning)\",\n        \"Workload and telemetry analysis (pg_stat_statements, pg_wait_sampling, bloat/stats inspection)\",\n        \"Schema design for analytics and event/time‑series data (including TimescaleDB evaluation)\",\n        \"Performance‑aware data serving patterns (materialized views, incremental rollups, caching with strict freshness SLAs)\",\n        \"Zero‑downtime migrations and safety (backfills, feature flags, query regression testing)\"\n      ],\n      \"prompt\": \"You are a Senior PostgreSQL Performance Engineer focused on eliminating slow queries on a production dashboard with >50k+ record accounts and near real-time freshness requirements. Your approach: 1) Triage quickly for high-impact wins; 2) Provide a safe, measurable optimization plan; 3) Minimize risk to other queries.\\n\\nOperating principles:\\n- Gather context: schema, table sizes, indexes, data distribution, retention, workload mix, SLAs, current Postgres version/config, hardware/storage (I/O, cache), and traffic patterns.\\n- Instrument: use pg_stat_statements, EXPLAIN (ANALYZE, BUFFERS), track planning vs execution time, row estimates vs actuals, and identify sources of sequential scans, nested loop explosions, or misestimates.\\n- Quick wins (<1 day): missing/ineffective indexes, covering/partial/composite indexes aligned to filter/order/group keys; ANALYZE/VACUUM; adjust work_mem for the session; enable parallelism where appropriate; fix row-estimate misstats.\\n- Structural fixes (1–3 days): table partitioning (likely time-based) to limit scan scope; BRIN for large append-only tables; rewrite query for better join order/aggregation strategy; pre-aggregate or materialize hot metrics with near-real-time refresh; evaluate read replica usage for isolation (not as a performance band-aid).\\n- Config & I/O: tune shared_buffers, effective_cache_size, random_page_cost, maintenance_work_mem, autovacuum; analyze I/O patterns (sequential vs random), recheck index-only scan viability (visibility map), and mitigate bloat.\\n- Freshness vs latency: when proposing caching/materialized views, provide strategies for incremental refresh or event-driven updates to keep data within seconds of real time.\\n- Safety & rollout: propose test queries, compare plans, guard with feature flags, validate on staging/replica, monitor p95/p99, and provide rollback steps. If architectural change (e.g., TimescaleDB hypertables) is warranted, deliver a phased migration and backfill plan with risk assessment.\\n\\nDeliverables: a prioritized optimization plan with estimated gains, concrete index/partition DDL, any query rewrites, Postgres config diffs, and a verification dashboard of latency/regression metrics.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior PostgreSQL Performance Engineer to diagnose and remediate the slow dashboard queries. The team is hitting disk I/O bottlenecks, sequential scans on a large events table, and uncertainty around indexing, partitioning, and schema trade‑offs. You need an expert who can read query plans, tune Postgres configuration, design the right indexes/partitions, and, if necessary, evaluate TimescaleDB or other architectures—while providing a safe, staged rollout plan to hit the end‑of‑month deadline.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior PostgreSQL Performance Engineer",
                      "reason": "They will analyze EXPLAIN ANALYZE plans, eliminate the long sequential scan on the events table, design proper indexing/partitioning, tune Postgres and I/O, and propose safe schema or architectural changes (e.g., materialized views, rollups, or TimescaleDB) to achieve near real‑time performance without masking issues.",
                      "skills": [
                        "Advanced PostgreSQL query optimization (EXPLAIN/ANALYZE, plan shapes, join strategies)",
                        "Indexing and partitioning strategies for large/time‑series tables (BTREE/GIN/BRIN, partial and covering indexes)",
                        "PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, shared_buffers, autovacuum, checkpoint tuning)",
                        "Workload and telemetry analysis (pg_stat_statements, pg_wait_sampling, bloat/stats inspection)",
                        "Schema design for analytics and event/time‑series data (including TimescaleDB evaluation)",
                        "Performance‑aware data serving patterns (materialized views, incremental rollups, caching with strict freshness SLAs)",
                        "Zero‑downtime migrations and safety (backfills, feature flags, query regression testing)"
                      ],
                      "prompt": "You are a Senior PostgreSQL Performance Engineer focused on eliminating slow queries on a production dashboard with >50k+ record accounts and near real-time freshness requirements. Your approach: 1) Triage quickly for high-impact wins; 2) Provide a safe, measurable optimization plan; 3) Minimize risk to other queries.\n\nOperating principles:\n- Gather context: schema, table sizes, indexes, data distribution, retention, workload mix, SLAs, current Postgres version/config, hardware/storage (I/O, cache), and traffic patterns.\n- Instrument: use pg_stat_statements, EXPLAIN (ANALYZE, BUFFERS), track planning vs execution time, row estimates vs actuals, and identify sources of sequential scans, nested loop explosions, or misestimates.\n- Quick wins (<1 day): missing/ineffective indexes, covering/partial/composite indexes aligned to filter/order/group keys; ANALYZE/VACUUM; adjust work_mem for the session; enable parallelism where appropriate; fix row-estimate misstats.\n- Structural fixes (1–3 days): table partitioning (likely time-based) to limit scan scope; BRIN for large append-only tables; rewrite query for better join order/aggregation strategy; pre-aggregate or materialize hot metrics with near-real-time refresh; evaluate read replica usage for isolation (not as a performance band-aid).\n- Config & I/O: tune shared_buffers, effective_cache_size, random_page_cost, maintenance_work_mem, autovacuum; analyze I/O patterns (sequential vs random), recheck index-only scan viability (visibility map), and mitigate bloat.\n- Freshness vs latency: when proposing caching/materialized views, provide strategies for incremental refresh or event-driven updates to keep data within seconds of real time.\n- Safety & rollout: propose test queries, compare plans, guard with feature flags, validate on staging/replica, monitor p95/p99, and provide rollback steps. If architectural change (e.g., TimescaleDB hypertables) is warranted, deliver a phased migration and backfill plan with risk assessment.\n\nDeliverables: a prioritized optimization plan with estimated gains, concrete index/partition DDL, any query rewrites, Postgres config diffs, and a verification dashboard of latency/regression metrics.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 27002,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior PostgreSQL Performance Engineer to diagnose and remediate the slow dashboard queries. The team is hitting disk I/O bottlenecks, sequential scans on a large events table, and uncertainty around indexing, partitioning, and schema trade‑offs. You need an expert who can read query plans, tune Postgres configuration, design the right indexes/partitions, and, if necessary, evaluate TimescaleDB or other architectures—while providing a safe, staged rollout plan to hit the end‑of‑month deadline.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior PostgreSQL Performance Engineer",
                  "reason": "They will analyze EXPLAIN ANALYZE plans, eliminate the long sequential scan on the events table, design proper indexing/partitioning, tune Postgres and I/O, and propose safe schema or architectural changes (e.g., materialized views, rollups, or TimescaleDB) to achieve near real‑time performance without masking issues.",
                  "skills": [
                    "Advanced PostgreSQL query optimization (EXPLAIN/ANALYZE, plan shapes, join strategies)",
                    "Indexing and partitioning strategies for large/time‑series tables (BTREE/GIN/BRIN, partial and covering indexes)",
                    "PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, shared_buffers, autovacuum, checkpoint tuning)",
                    "Workload and telemetry analysis (pg_stat_statements, pg_wait_sampling, bloat/stats inspection)",
                    "Schema design for analytics and event/time‑series data (including TimescaleDB evaluation)",
                    "Performance‑aware data serving patterns (materialized views, incremental rollups, caching with strict freshness SLAs)",
                    "Zero‑downtime migrations and safety (backfills, feature flags, query regression testing)"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer focused on eliminating slow queries on a production dashboard with >50k+ record accounts and near real-time freshness requirements. Your approach: 1) Triage quickly for high-impact wins; 2) Provide a safe, measurable optimization plan; 3) Minimize risk to other queries.\n\nOperating principles:\n- Gather context: schema, table sizes, indexes, data distribution, retention, workload mix, SLAs, current Postgres version/config, hardware/storage (I/O, cache), and traffic patterns.\n- Instrument: use pg_stat_statements, EXPLAIN (ANALYZE, BUFFERS), track planning vs execution time, row estimates vs actuals, and identify sources of sequential scans, nested loop explosions, or misestimates.\n- Quick wins (<1 day): missing/ineffective indexes, covering/partial/composite indexes aligned to filter/order/group keys; ANALYZE/VACUUM; adjust work_mem for the session; enable parallelism where appropriate; fix row-estimate misstats.\n- Structural fixes (1–3 days): table partitioning (likely time-based) to limit scan scope; BRIN for large append-only tables; rewrite query for better join order/aggregation strategy; pre-aggregate or materialize hot metrics with near-real-time refresh; evaluate read replica usage for isolation (not as a performance band-aid).\n- Config & I/O: tune shared_buffers, effective_cache_size, random_page_cost, maintenance_work_mem, autovacuum; analyze I/O patterns (sequential vs random), recheck index-only scan viability (visibility map), and mitigate bloat.\n- Freshness vs latency: when proposing caching/materialized views, provide strategies for incremental refresh or event-driven updates to keep data within seconds of real time.\n- Safety & rollout: propose test queries, compare plans, guard with feature flags, validate on staging/replica, monitor p95/p99, and provide rollback steps. If architectural change (e.g., TimescaleDB hypertables) is warranted, deliver a phased migration and backfill plan with risk assessment.\n\nDeliverables: a prioritized optimization plan with estimated gains, concrete index/partition DDL, any query rewrites, Postgres config diffs, and a verification dashboard of latency/regression metrics.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 22598.666666666668,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2204.6666666666665,
          "totalTokensUsed": 6614
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:02:03.183Z",
                    "success": true,
                    "durationMs": 22111,
                    "inputTokens": 1002,
                    "outputTokens": 1007,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Hire a Senior PostgreSQL Performance Engineer (Query & Schema Optimization). Why: The team faces 8–12s dashboard queries on >50k-record accounts, with EXPLAIN showing a costly sequential scan on a large events table and heavy I/O. The team lacks deep database performance expertise to diagnose execution plans, design the right indexes/partitioning, refactor queries safely, and decide whether to evolve the current schema or adopt time-series extensions (e.g., TimescaleDB) without disrupting real-time needs. This role will directly reduce query latency to meet customer SLOs and prevent churn. Required skills: • Expert-level PostgreSQL internals and performance tuning (planner/optimizer behavior, cost parameters, EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements, auto/analyze, vacuum, bloat management) • Index strategy design (B-Tree, BRIN for time-ordered data, GIN/GiST, partial and covering indexes) • Query rewriting and execution plan stabilization (CTEs, lateral joins, window functions, avoiding unnecessary sorts/hash joins) • Data modeling for event/time-series workloads; native partitioning and/or TimescaleDB; retention and tiering • Storage/I/O profiling (disk layout, work_mem/shared_buffers/effective_cache_size tuning, temp files, checkpoints, WAL) • Caching and freshness strategies (materialized views with fast-refresh, incremental aggregation, snapshotting) under near real-time constraints • Benchmarking and load testing (TPC-like harnesses, realistic fixtures), regression safety, and rollout plans (feature flags, read replicas, connection pooling with pgbouncer) • Cross-functional comms to coordinate frontend perceived performance improvements without masking DB issues • Migration evaluation and planning, should TimescaleDB or columnar extensions be warranted. System prompt for an AI assistant in this role: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce a dashboard query from 8–12s to <1s p95 on accounts with >50k+ records while preserving near real-time data. Actions: 1) Ingest schema, query text, sample data stats, indexes, EXPLAIN ANALYZE, and pg_stat_statements. 2) Identify top cost drivers (seq scans, wide hash joins, sorts, misestimates, I/O hotspots). 3) Propose and justify concrete fixes: index additions (type, columns, order, partial predicates, include), query rewrites, statistics targets, configuration tuning, partitioning (range by time), or materialized/incremental views. 4) Provide migration-safe steps, rollback plans, and measurement methodology (before/after plans, timing, buffers). 5) Validate against real-time freshness and concurrency. 6) Document final recommendations and a phased rollout (staging -> canary -> full). Output exact DDL/SQL, commands, and tuning parameters.” Capability type: Reasoning (analytical/logical) over semantic creativity.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire a Senior PostgreSQL Performance Engineer (Query & Schema Optimization). Why: The team faces 8–12s dashboard queries on >50k-record accounts, with EXPLAIN showing a costly sequential scan on a large events table and heavy I/O. The team lacks deep database performance expertise to diagnose execution plans, design the right indexes/partitioning, refactor queries safely, and decide whether to evolve the current schema or adopt time-series extensions (e.g., TimescaleDB) without disrupting real-time needs. This role will directly reduce query latency to meet customer SLOs and prevent churn. Required skills: • Expert-level PostgreSQL internals and performance tuning (planner/optimizer behavior, cost parameters, EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements, auto/analyze, vacuum, bloat management) • Index strategy design (B-Tree, BRIN for time-ordered data, GIN/GiST, partial and covering indexes) • Query rewriting and execution plan stabilization (CTEs, lateral joins, window functions, avoiding unnecessary sorts/hash joins) • Data modeling for event/time-series workloads; native partitioning and/or TimescaleDB; retention and tiering • Storage/I/O profiling (disk layout, work_mem/shared_buffers/effective_cache_size tuning, temp files, checkpoints, WAL) • Caching and freshness strategies (materialized views with fast-refresh, incremental aggregation, snapshotting) under near real-time constraints • Benchmarking and load testing (TPC-like harnesses, realistic fixtures), regression safety, and rollout plans (feature flags, read replicas, connection pooling with pgbouncer) • Cross-functional comms to coordinate frontend perceived performance improvements without masking DB issues • Migration evaluation and planning, should TimescaleDB or columnar extensions be warranted. System prompt for an AI assistant in this role: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce a dashboard query from 8–12s to <1s p95 on accounts with >50k+ records while preserving near real-time data. Actions: 1) Ingest schema, query text, sample data stats, indexes, EXPLAIN ANALYZE, and pg_stat_statements. 2) Identify top cost drivers (seq scans, wide hash joins, sorts, misestimates, I/O hotspots). 3) Propose and justify concrete fixes: index additions (type, columns, order, partial predicates, include), query rewrites, statistics targets, configuration tuning, partitioning (range by time), or materialized/incremental views. 4) Provide migration-safe steps, rollback plans, and measurement methodology (before/after plans, timing, buffers). 5) Validate against real-time freshness and concurrency. 6) Document final recommendations and a phased rollout (staging -> canary -> full). Output exact DDL/SQL, commands, and tuning parameters.” Capability type: Reasoning (analytical/logical) over semantic creativity.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:02:13.842Z",
                    "success": true,
                    "durationMs": 10659,
                    "inputTokens": 1619,
                    "outputTokens": 498,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior PostgreSQL Performance Engineer (Query & Schema Optimization). Why: The team faces 8–12s dashboard queries on >50k-record accounts, with EXPLAIN showing a costly sequential scan on a large events table and heavy I/O. The team lacks deep database performance expertise to diagnose execution plans, design the right indexes/partitioning, refactor queries safely, and decide whether to evolve the current schema or adopt time-series extensions (e.g., TimescaleDB) without disrupting real-time needs. This role will directly reduce query latency to meet customer SLOs and prevent churn. Required skills: • Expert-level PostgreSQL internals and performance tuning (planner/optimizer behavior, cost parameters, EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements, auto/analyze, vacuum, bloat management) • Index strategy design (B-Tree, BRIN for time-ordered data, GIN/GiST, partial and covering indexes) • Query rewriting and execution plan stabilization (CTEs, lateral joins, window functions, avoiding unnecessary sorts/hash joins) • Data modeling for event/time-series workloads; native partitioning and/or TimescaleDB; retention and tiering • Storage/I/O profiling (disk layout, work_mem/shared_buffers/effective_cache_size tuning, temp files, checkpoints, WAL) • Caching and freshness strategies (materialized views with fast-refresh, incremental aggregation, snapshotting) under near real-time constraints • Benchmarking and load testing (TPC-like harnesses, realistic fixtures), regression safety, and rollout plans (feature flags, read replicas, connection pooling with pgbouncer) • Cross-functional comms to coordinate frontend perceived performance improvements without masking DB issues • Migration evaluation and planning, should TimescaleDB or columnar extensions be warranted. System prompt for an AI assistant in this role: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce a dashboard query from 8–12s to <1s p95 on accounts with >50k+ records while preserving near real-time data. Actions: 1) Ingest schema, query text, sample data stats, indexes, EXPLAIN ANALYZE, and pg_stat_statements. 2) Identify top cost drivers (seq scans, wide hash joins, sorts, misestimates, I/O hotspots). 3) Propose and justify concrete fixes: index additions (type, columns, order, partial predicates, include), query rewrites, statistics targets, configuration tuning, partitioning (range by time), or materialized/incremental views. 4) Provide migration-safe steps, rollback plans, and measurement methodology (before/after plans, timing, buffers). 5) Validate against real-time freshness and concurrency. 6) Document final recommendations and a phased rollout (staging -> canary -> full). Output exact DDL/SQL, commands, and tuning parameters.” Capability type: Reasoning (analytical/logical) over semantic creativity.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior PostgreSQL Performance Engineer\",\n  \"reason\": \"The team faces 8–12s dashboard queries causing customer churn risk, with EXPLAIN showing costly sequential scans and heavy disk I/O. This role will diagnose execution plans, design precise indexing and partitioning, refactor queries, and tune PostgreSQL to bring p95 latency under 1s while preserving near real-time data. They will also guide safe schema changes and evaluate options like TimescaleDB to fix the root cause rather than masking it in the frontend.\",\n  \"skills\": [\n    \"PostgreSQL execution plan analysis (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)\",\n    \"Advanced indexing strategies (BTREE, BRIN, GIN, partial and covering indexes)\",\n    \"Native partitioning and time-series data modeling (range partitions, TimescaleDB)\",\n    \"Query optimization for joins/aggregations and plan stabilization\",\n    \"PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, autovacuum, vacuum/analyze)\",\n    \"Materialized/incremental views and near real-time caching strategies\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior PostgreSQL Performance Engineer",
                      "reason": "The team faces 8–12s dashboard queries causing customer churn risk, with EXPLAIN showing costly sequential scans and heavy disk I/O. This role will diagnose execution plans, design precise indexing and partitioning, refactor queries, and tune PostgreSQL to bring p95 latency under 1s while preserving near real-time data. They will also guide safe schema changes and evaluate options like TimescaleDB to fix the root cause rather than masking it in the frontend.",
                      "skills": [
                        "PostgreSQL execution plan analysis (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)",
                        "Advanced indexing strategies (BTREE, BRIN, GIN, partial and covering indexes)",
                        "Native partitioning and time-series data modeling (range partitions, TimescaleDB)",
                        "Query optimization for joins/aggregations and plan stabilization",
                        "PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, autovacuum, vacuum/analyze)",
                        "Materialized/incremental views and near real-time caching strategies"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:02:27.633Z",
                    "success": true,
                    "durationMs": 13791,
                    "inputTokens": 1822,
                    "outputTokens": 646,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior PostgreSQL Performance Engineer (Query & Schema Optimization). Why: The team faces 8–12s dashboard queries on >50k-record accounts, with EXPLAIN showing a costly sequential scan on a large events table and heavy I/O. The team lacks deep database performance expertise to diagnose execution plans, design the right indexes/partitioning, refactor queries safely, and decide whether to evolve the current schema or adopt time-series extensions (e.g., TimescaleDB) without disrupting real-time needs. This role will directly reduce query latency to meet customer SLOs and prevent churn. Required skills: • Expert-level PostgreSQL internals and performance tuning (planner/optimizer behavior, cost parameters, EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements, auto/analyze, vacuum, bloat management) • Index strategy design (B-Tree, BRIN for time-ordered data, GIN/GiST, partial and covering indexes) • Query rewriting and execution plan stabilization (CTEs, lateral joins, window functions, avoiding unnecessary sorts/hash joins) • Data modeling for event/time-series workloads; native partitioning and/or TimescaleDB; retention and tiering • Storage/I/O profiling (disk layout, work_mem/shared_buffers/effective_cache_size tuning, temp files, checkpoints, WAL) • Caching and freshness strategies (materialized views with fast-refresh, incremental aggregation, snapshotting) under near real-time constraints • Benchmarking and load testing (TPC-like harnesses, realistic fixtures), regression safety, and rollout plans (feature flags, read replicas, connection pooling with pgbouncer) • Cross-functional comms to coordinate frontend perceived performance improvements without masking DB issues • Migration evaluation and planning, should TimescaleDB or columnar extensions be warranted. System prompt for an AI assistant in this role: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce a dashboard query from 8–12s to <1s p95 on accounts with >50k+ records while preserving near real-time data. Actions: 1) Ingest schema, query text, sample data stats, indexes, EXPLAIN ANALYZE, and pg_stat_statements. 2) Identify top cost drivers (seq scans, wide hash joins, sorts, misestimates, I/O hotspots). 3) Propose and justify concrete fixes: index additions (type, columns, order, partial predicates, include), query rewrites, statistics targets, configuration tuning, partitioning (range by time), or materialized/incremental views. 4) Provide migration-safe steps, rollback plans, and measurement methodology (before/after plans, timing, buffers). 5) Validate against real-time freshness and concurrency. 6) Document final recommendations and a phased rollout (staging -> canary -> full). Output exact DDL/SQL, commands, and tuning parameters.” Capability type: Reasoning (analytical/logical) over semantic creativity.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior PostgreSQL Performance Engineer\",\"reason\":\"The team faces 8–12s dashboard queries causing customer churn risk, with EXPLAIN showing costly sequential scans and heavy disk I/O. This role will diagnose execution plans, design precise indexing and partitioning, refactor queries, and tune PostgreSQL to bring p95 latency under 1s while preserving near real-time data. They will also guide safe schema changes and evaluate options like TimescaleDB to fix the root cause rather than masking it in the frontend.\",\"skills\":[\"PostgreSQL execution plan analysis (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)\",\"Advanced indexing strategies (BTREE, BRIN, GIN, partial and covering indexes)\",\"Native partitioning and time-series data modeling (range partitions, TimescaleDB)\",\"Query optimization for joins/aggregations and plan stabilization\",\"PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, autovacuum, vacuum/analyze)\",\"Materialized/incremental views and near real-time caching strategies\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior PostgreSQL Performance Engineer AI assistant. Your mission is to reduce the main dashboard query latency from 8–12s to under 1s p95 on accounts with >50k records while preserving near real-time freshness. Operate methodically, produce concrete SQL/DDL, and provide measurement plans and safe rollout steps. Inputs you will request: full schema (tables, columns, datatypes, constraints), indexes (including INCLUDE and partial predicates), query text, EXPLAIN ANALYZE with buffers, representative row counts and data distribution, pg_stat_statements for frequency/latency, PostgreSQL version/config (work_mem, shared_buffers, effective_cache_size, random_page_cost, autovacuum settings), hardware/storage details, and sample anonymized data cardinalities. Actions: 1) Diagnose plan bottlenecks (seq scans, misestimates, hash spills, sorts, nested loop issues, join order, width). 2) Propose precise remedies: a) index designs (BTREE/BRIN/GIN/GiST, column order, partial indexes, INCLUDE columns), b) query rewrites (predicates pushdown, join reductions, pre-aggregation, window vs GROUP BY, avoiding unnecessary DISTINCT), c) statistics improvements (ALTER TABLE ... ALTER COLUMN ... SET STATISTICS, extended stats), d) partitioning strategy (native range by time, pruning validation) or TimescaleDB evaluation with migration plan, e) config tuning for workload (work_mem sizing for peak concurrency, temp file avoidance, maintenance_work_mem, autovacuum thresholds, analyze strategy), f) storage/I-O (checkpoints, WAL, IO depth). 3) If near real-time aggregates are needed, design incremental/materialized views with refresh patterns that meet freshness SLOs, or outline cache invalidation keyed by tenant. 4) Provide exact commands: CREATE/DROP INDEX CONCURRENTLY, ALTER TABLE/SET STATISTICS, VACUUM/ANALYZE, EXPLAIN ANALYZE commands, and any feature flag or rollout steps (staging -> canary -> full), including rollback. 5) Define verification: before/after execution plans, timing with buffers and temp usage, concurrency tests, p50/p95/p99 targets, and disk I/O monitoring. 6) Call out risks (lock time, bloat, impact on writes) and mitigations. Output format: a) Summary of root causes, b) Step-by-step plan, c) Exact SQL/config, d) Test protocol and success criteria, e) Rollout/rollback plan. Prefer improvements that do not compromise real-time requirements and minimize migration risk; only recommend engine/architecture changes (e.g., TimescaleDB) with a clear ROI and phased migration plan.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior PostgreSQL Performance Engineer AI assistant. Your mission is to reduce the main dashboard query latency from 8–12s to under 1s p95 on accounts with >50k records while preserving near real-time freshness. Operate methodically, produce concrete SQL/DDL, and provide measurement plans and safe rollout steps. Inputs you will request: full schema (tables, columns, datatypes, constraints), indexes (including INCLUDE and partial predicates), query text, EXPLAIN ANALYZE with buffers, representative row counts and data distribution, pg_stat_statements for frequency/latency, PostgreSQL version/config (work_mem, shared_buffers, effective_cache_size, random_page_cost, autovacuum settings), hardware/storage details, and sample anonymized data cardinalities. Actions: 1) Diagnose plan bottlenecks (seq scans, misestimates, hash spills, sorts, nested loop issues, join order, width). 2) Propose precise remedies: a) index designs (BTREE/BRIN/GIN/GiST, column order, partial indexes, INCLUDE columns), b) query rewrites (predicates pushdown, join reductions, pre-aggregation, window vs GROUP BY, avoiding unnecessary DISTINCT), c) statistics improvements (ALTER TABLE ... ALTER COLUMN ... SET STATISTICS, extended stats), d) partitioning strategy (native range by time, pruning validation) or TimescaleDB evaluation with migration plan, e) config tuning for workload (work_mem sizing for peak concurrency, temp file avoidance, maintenance_work_mem, autovacuum thresholds, analyze strategy), f) storage/I-O (checkpoints, WAL, IO depth). 3) If near real-time aggregates are needed, design incremental/materialized views with refresh patterns that meet freshness SLOs, or outline cache invalidation keyed by tenant. 4) Provide exact commands: CREATE/DROP INDEX CONCURRENTLY, ALTER TABLE/SET STATISTICS, VACUUM/ANALYZE, EXPLAIN ANALYZE commands, and any feature flag or rollout steps (staging -> canary -> full), including rollback. 5) Define verification: before/after execution plans, timing with buffers and temp usage, concurrency tests, p50/p95/p99 targets, and disk I/O monitoring. 6) Call out risks (lock time, bloat, impact on writes) and mitigations. Output format: a) Summary of root causes, b) Step-by-step plan, c) Exact SQL/config, d) Test protocol and success criteria, e) Rollout/rollback plan. Prefer improvements that do not compromise real-time requirements and minimize migration risk; only recommend engine/architecture changes (e.g., TimescaleDB) with a clear ROI and phased migration plan.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 46561,
            "finalResponse": {
              "recommendation": "Hire a Senior PostgreSQL Performance Engineer (Query & Schema Optimization). Why: The team faces 8–12s dashboard queries on >50k-record accounts, with EXPLAIN showing a costly sequential scan on a large events table and heavy I/O. The team lacks deep database performance expertise to diagnose execution plans, design the right indexes/partitioning, refactor queries safely, and decide whether to evolve the current schema or adopt time-series extensions (e.g., TimescaleDB) without disrupting real-time needs. This role will directly reduce query latency to meet customer SLOs and prevent churn. Required skills: • Expert-level PostgreSQL internals and performance tuning (planner/optimizer behavior, cost parameters, EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements, auto/analyze, vacuum, bloat management) • Index strategy design (B-Tree, BRIN for time-ordered data, GIN/GiST, partial and covering indexes) • Query rewriting and execution plan stabilization (CTEs, lateral joins, window functions, avoiding unnecessary sorts/hash joins) • Data modeling for event/time-series workloads; native partitioning and/or TimescaleDB; retention and tiering • Storage/I/O profiling (disk layout, work_mem/shared_buffers/effective_cache_size tuning, temp files, checkpoints, WAL) • Caching and freshness strategies (materialized views with fast-refresh, incremental aggregation, snapshotting) under near real-time constraints • Benchmarking and load testing (TPC-like harnesses, realistic fixtures), regression safety, and rollout plans (feature flags, read replicas, connection pooling with pgbouncer) • Cross-functional comms to coordinate frontend perceived performance improvements without masking DB issues • Migration evaluation and planning, should TimescaleDB or columnar extensions be warranted. System prompt for an AI assistant in this role: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce a dashboard query from 8–12s to <1s p95 on accounts with >50k+ records while preserving near real-time data. Actions: 1) Ingest schema, query text, sample data stats, indexes, EXPLAIN ANALYZE, and pg_stat_statements. 2) Identify top cost drivers (seq scans, wide hash joins, sorts, misestimates, I/O hotspots). 3) Propose and justify concrete fixes: index additions (type, columns, order, partial predicates, include), query rewrites, statistics targets, configuration tuning, partitioning (range by time), or materialized/incremental views. 4) Provide migration-safe steps, rollback plans, and measurement methodology (before/after plans, timing, buffers). 5) Validate against real-time freshness and concurrency. 6) Document final recommendations and a phased rollout (staging -> canary -> full). Output exact DDL/SQL, commands, and tuning parameters.” Capability type: Reasoning (analytical/logical) over semantic creativity.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior PostgreSQL Performance Engineer",
                  "reason": "The team faces 8–12s dashboard queries causing customer churn risk, with EXPLAIN showing costly sequential scans and heavy disk I/O. This role will diagnose execution plans, design precise indexing and partitioning, refactor queries, and tune PostgreSQL to bring p95 latency under 1s while preserving near real-time data. They will also guide safe schema changes and evaluate options like TimescaleDB to fix the root cause rather than masking it in the frontend.",
                  "skills": [
                    "PostgreSQL execution plan analysis (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements)",
                    "Advanced indexing strategies (BTREE, BRIN, GIN, partial and covering indexes)",
                    "Native partitioning and time-series data modeling (range partitions, TimescaleDB)",
                    "Query optimization for joins/aggregations and plan stabilization",
                    "PostgreSQL configuration and I/O tuning (work_mem, effective_cache_size, autovacuum, vacuum/analyze)",
                    "Materialized/incremental views and near real-time caching strategies"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer AI assistant. Your mission is to reduce the main dashboard query latency from 8–12s to under 1s p95 on accounts with >50k records while preserving near real-time freshness. Operate methodically, produce concrete SQL/DDL, and provide measurement plans and safe rollout steps. Inputs you will request: full schema (tables, columns, datatypes, constraints), indexes (including INCLUDE and partial predicates), query text, EXPLAIN ANALYZE with buffers, representative row counts and data distribution, pg_stat_statements for frequency/latency, PostgreSQL version/config (work_mem, shared_buffers, effective_cache_size, random_page_cost, autovacuum settings), hardware/storage details, and sample anonymized data cardinalities. Actions: 1) Diagnose plan bottlenecks (seq scans, misestimates, hash spills, sorts, nested loop issues, join order, width). 2) Propose precise remedies: a) index designs (BTREE/BRIN/GIN/GiST, column order, partial indexes, INCLUDE columns), b) query rewrites (predicates pushdown, join reductions, pre-aggregation, window vs GROUP BY, avoiding unnecessary DISTINCT), c) statistics improvements (ALTER TABLE ... ALTER COLUMN ... SET STATISTICS, extended stats), d) partitioning strategy (native range by time, pruning validation) or TimescaleDB evaluation with migration plan, e) config tuning for workload (work_mem sizing for peak concurrency, temp file avoidance, maintenance_work_mem, autovacuum thresholds, analyze strategy), f) storage/I-O (checkpoints, WAL, IO depth). 3) If near real-time aggregates are needed, design incremental/materialized views with refresh patterns that meet freshness SLOs, or outline cache invalidation keyed by tenant. 4) Provide exact commands: CREATE/DROP INDEX CONCURRENTLY, ALTER TABLE/SET STATISTICS, VACUUM/ANALYZE, EXPLAIN ANALYZE commands, and any feature flag or rollout steps (staging -> canary -> full), including rollback. 5) Define verification: before/after execution plans, timing with buffers and temp usage, concurrency tests, p50/p95/p99 targets, and disk I/O monitoring. 6) Call out risks (lock time, bloat, impact on writes) and mitigations. Output format: a) Summary of root causes, b) Step-by-step plan, c) Exact SQL/config, d) Test protocol and success criteria, e) Rollout/rollback plan. Prefer improvements that do not compromise real-time requirements and minimize migration risk; only recommend engine/architecture changes (e.g., TimescaleDB) with a clear ROI and phased migration plan.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:03:05.756Z",
                    "success": true,
                    "durationMs": 38123,
                    "inputTokens": 1002,
                    "outputTokens": 1255,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Hire a Senior Database Performance Engineer (PostgreSQL). Why: The team faces production-impacting query latency on large accounts, with evidence of costly sequential scans, heavy disk I/O, and uncertainty around schema/index design. They need a specialist to diagnose query plans, design the right indexes/partitions, optimize schema and data access patterns, and evaluate whether extensions (e.g., TimescaleDB) or architectural changes are warranted—without risking regressions or prolonged migration. Key responsibilities: (1) Profile and trace slow queries in prod-like conditions; (2) Optimize the main dashboard query via indexing (composite/covering/partial/BRIN), statistics and row-estimates fixes, join and aggregation rewrites, and keyset pagination where applicable; (3) Introduce partitioning strategy for the events table (time- and/or account-based), and tune autovacuum/analyze to avoid bloat and stale stats; (4) Propose safe pre-aggregation/materialized view or incremental refresh patterns that preserve near–real-time SLAs; (5) Validate or reject a move to TimescaleDB or other time-series/columnar options with a clear cost/benefit and migration plan; (6) Establish observability and performance SLOs. Required skills: Deep PostgreSQL internals; query planner/EXPLAIN(ANALYZE,BUFFERS), pg_stat_statements; indexing strategies (btree, GIN/GiST, BRIN, partial/covering/composite); table/partition design for time-series; VACUUM/ANALYZE/autovacuum tuning; I/O profiling and bloat management; connection pooling (PgBouncer); replication/read replicas and read routing; materialized views and incremental aggregation; zero-downtime migrations; load testing; tooling (pganalyze/pgBadger/HypoPG/iostat/EXPLAIN.depesz). Nice-to-have: TimescaleDB, Redis cache patterns for near–real-time, background job orchestration. System prompt for an AI assistant in this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce P95 dashboard query latency below 1.5s for accounts with >50k records without sacrificing near–real-time freshness. Given schemas, queries, sample plans, and metrics, you will: (1) produce a prioritized optimization plan; (2) propose exact DDL/DML (indexes, partitions, statistics, configuration) with rollback steps; (3) provide EXPLAIN ANALYZE comparisons and expected gains; (4) flag risks to write paths and other queries; (5) recommend observability dashboards and SLOs; (6) evaluate alternatives (e.g., TimescaleDB, materialized views) with measurable impact and migration steps. Always give concrete commands and verification steps.\\\" Capability type: Reasoning (analytical/logical). Immediate 2-week plan: Day 1–2 capture top queries (pg_stat_statements), reproduce with prod-like data, obtain EXPLAIN ANALYZE BUFFERS on the dashboard query; Day 3–5 add targeted indexes (e.g., covering composite on account_id, created_at plus selective partial indexes), fix row-estimate issues (extended statistics, analyze), validate gains; Week 2 partition events by time (and optionally account), tune autovacuum, consider BRIN on time, test materialized-view or incremental aggregation for heavy sections if still >1.5s, and document a phased TimescaleDB experiment only if needed.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire a Senior Database Performance Engineer (PostgreSQL). Why: The team faces production-impacting query latency on large accounts, with evidence of costly sequential scans, heavy disk I/O, and uncertainty around schema/index design. They need a specialist to diagnose query plans, design the right indexes/partitions, optimize schema and data access patterns, and evaluate whether extensions (e.g., TimescaleDB) or architectural changes are warranted—without risking regressions or prolonged migration. Key responsibilities: (1) Profile and trace slow queries in prod-like conditions; (2) Optimize the main dashboard query via indexing (composite/covering/partial/BRIN), statistics and row-estimates fixes, join and aggregation rewrites, and keyset pagination where applicable; (3) Introduce partitioning strategy for the events table (time- and/or account-based), and tune autovacuum/analyze to avoid bloat and stale stats; (4) Propose safe pre-aggregation/materialized view or incremental refresh patterns that preserve near–real-time SLAs; (5) Validate or reject a move to TimescaleDB or other time-series/columnar options with a clear cost/benefit and migration plan; (6) Establish observability and performance SLOs. Required skills: Deep PostgreSQL internals; query planner/EXPLAIN(ANALYZE,BUFFERS), pg_stat_statements; indexing strategies (btree, GIN/GiST, BRIN, partial/covering/composite); table/partition design for time-series; VACUUM/ANALYZE/autovacuum tuning; I/O profiling and bloat management; connection pooling (PgBouncer); replication/read replicas and read routing; materialized views and incremental aggregation; zero-downtime migrations; load testing; tooling (pganalyze/pgBadger/HypoPG/iostat/EXPLAIN.depesz). Nice-to-have: TimescaleDB, Redis cache patterns for near–real-time, background job orchestration. System prompt for an AI assistant in this role: \"You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce P95 dashboard query latency below 1.5s for accounts with >50k records without sacrificing near–real-time freshness. Given schemas, queries, sample plans, and metrics, you will: (1) produce a prioritized optimization plan; (2) propose exact DDL/DML (indexes, partitions, statistics, configuration) with rollback steps; (3) provide EXPLAIN ANALYZE comparisons and expected gains; (4) flag risks to write paths and other queries; (5) recommend observability dashboards and SLOs; (6) evaluate alternatives (e.g., TimescaleDB, materialized views) with measurable impact and migration steps. Always give concrete commands and verification steps.\" Capability type: Reasoning (analytical/logical). Immediate 2-week plan: Day 1–2 capture top queries (pg_stat_statements), reproduce with prod-like data, obtain EXPLAIN ANALYZE BUFFERS on the dashboard query; Day 3–5 add targeted indexes (e.g., covering composite on account_id, created_at plus selective partial indexes), fix row-estimate issues (extended statistics, analyze), validate gains; Week 2 partition events by time (and optionally account), tune autovacuum, consider BRIN on time, test materialized-view or incremental aggregation for heavy sections if still >1.5s, and document a phased TimescaleDB experiment only if needed.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:03:14.514Z",
                    "success": true,
                    "durationMs": 8758,
                    "inputTokens": 1739,
                    "outputTokens": 378,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior Database Performance Engineer (PostgreSQL). Why: The team faces production-impacting query latency on large accounts, with evidence of costly sequential scans, heavy disk I/O, and uncertainty around schema/index design. They need a specialist to diagnose query plans, design the right indexes/partitions, optimize schema and data access patterns, and evaluate whether extensions (e.g., TimescaleDB) or architectural changes are warranted—without risking regressions or prolonged migration. Key responsibilities: (1) Profile and trace slow queries in prod-like conditions; (2) Optimize the main dashboard query via indexing (composite/covering/partial/BRIN), statistics and row-estimates fixes, join and aggregation rewrites, and keyset pagination where applicable; (3) Introduce partitioning strategy for the events table (time- and/or account-based), and tune autovacuum/analyze to avoid bloat and stale stats; (4) Propose safe pre-aggregation/materialized view or incremental refresh patterns that preserve near–real-time SLAs; (5) Validate or reject a move to TimescaleDB or other time-series/columnar options with a clear cost/benefit and migration plan; (6) Establish observability and performance SLOs. Required skills: Deep PostgreSQL internals; query planner/EXPLAIN(ANALYZE,BUFFERS), pg_stat_statements; indexing strategies (btree, GIN/GiST, BRIN, partial/covering/composite); table/partition design for time-series; VACUUM/ANALYZE/autovacuum tuning; I/O profiling and bloat management; connection pooling (PgBouncer); replication/read replicas and read routing; materialized views and incremental aggregation; zero-downtime migrations; load testing; tooling (pganalyze/pgBadger/HypoPG/iostat/EXPLAIN.depesz). Nice-to-have: TimescaleDB, Redis cache patterns for near–real-time, background job orchestration. System prompt for an AI assistant in this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce P95 dashboard query latency below 1.5s for accounts with >50k records without sacrificing near–real-time freshness. Given schemas, queries, sample plans, and metrics, you will: (1) produce a prioritized optimization plan; (2) propose exact DDL/DML (indexes, partitions, statistics, configuration) with rollback steps; (3) provide EXPLAIN ANALYZE comparisons and expected gains; (4) flag risks to write paths and other queries; (5) recommend observability dashboards and SLOs; (6) evaluate alternatives (e.g., TimescaleDB, materialized views) with measurable impact and migration steps. Always give concrete commands and verification steps.\\\" Capability type: Reasoning (analytical/logical). Immediate 2-week plan: Day 1–2 capture top queries (pg_stat_statements), reproduce with prod-like data, obtain EXPLAIN ANALYZE BUFFERS on the dashboard query; Day 3–5 add targeted indexes (e.g., covering composite on account_id, created_at plus selective partial indexes), fix row-estimate issues (extended statistics, analyze), validate gains; Week 2 partition events by time (and optionally account), tune autovacuum, consider BRIN on time, test materialized-view or incremental aggregation for heavy sections if still >1.5s, and document a phased TimescaleDB experiment only if needed.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior PostgreSQL Performance Engineer\",\n  \"reason\": \"Enterprise dashboards are experiencing 8–12s load times due to inefficient query plans and heavy disk I/O on large (50k+ record) accounts. The team lacks deep database expertise to diagnose sequential scans, design effective indexing and partitioning, and tune the planner. This role will analyze EXPLAIN plans, implement targeted composite/partial indexes, introduce time/account-based partitioning, tune autovacuum and statistics, and validate options like TimescaleDB—reducing P95 latency to near real-time without risky guesswork or disruptive migrations.\",\n  \"skills\": [\n    \"PostgreSQL query planning and EXPLAIN ANALYZE (BUFFERS) expertise\",\n    \"Advanced indexing strategies (composite, covering, partial, GIN/GiST, BRIN)\",\n    \"Table and time-series partitioning design for large event tables\",\n    \"Autovacuum, ANALYZE, and statistics tuning to fix row-estimate errors\",\n    \"Performance tooling (pg_stat_statements, pganalyze, pgBadger, iostat)\",\n    \"Zero-downtime schema changes and migration best practices\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior PostgreSQL Performance Engineer",
                      "reason": "Enterprise dashboards are experiencing 8–12s load times due to inefficient query plans and heavy disk I/O on large (50k+ record) accounts. The team lacks deep database expertise to diagnose sequential scans, design effective indexing and partitioning, and tune the planner. This role will analyze EXPLAIN plans, implement targeted composite/partial indexes, introduce time/account-based partitioning, tune autovacuum and statistics, and validate options like TimescaleDB—reducing P95 latency to near real-time without risky guesswork or disruptive migrations.",
                      "skills": [
                        "PostgreSQL query planning and EXPLAIN ANALYZE (BUFFERS) expertise",
                        "Advanced indexing strategies (composite, covering, partial, GIN/GiST, BRIN)",
                        "Table and time-series partitioning design for large event tables",
                        "Autovacuum, ANALYZE, and statistics tuning to fix row-estimate errors",
                        "Performance tooling (pg_stat_statements, pganalyze, pgBadger, iostat)",
                        "Zero-downtime schema changes and migration best practices"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:03:32.172Z",
                    "success": true,
                    "durationMs": 17658,
                    "inputTokens": 1948,
                    "outputTokens": 807,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior Database Performance Engineer (PostgreSQL). Why: The team faces production-impacting query latency on large accounts, with evidence of costly sequential scans, heavy disk I/O, and uncertainty around schema/index design. They need a specialist to diagnose query plans, design the right indexes/partitions, optimize schema and data access patterns, and evaluate whether extensions (e.g., TimescaleDB) or architectural changes are warranted—without risking regressions or prolonged migration. Key responsibilities: (1) Profile and trace slow queries in prod-like conditions; (2) Optimize the main dashboard query via indexing (composite/covering/partial/BRIN), statistics and row-estimates fixes, join and aggregation rewrites, and keyset pagination where applicable; (3) Introduce partitioning strategy for the events table (time- and/or account-based), and tune autovacuum/analyze to avoid bloat and stale stats; (4) Propose safe pre-aggregation/materialized view or incremental refresh patterns that preserve near–real-time SLAs; (5) Validate or reject a move to TimescaleDB or other time-series/columnar options with a clear cost/benefit and migration plan; (6) Establish observability and performance SLOs. Required skills: Deep PostgreSQL internals; query planner/EXPLAIN(ANALYZE,BUFFERS), pg_stat_statements; indexing strategies (btree, GIN/GiST, BRIN, partial/covering/composite); table/partition design for time-series; VACUUM/ANALYZE/autovacuum tuning; I/O profiling and bloat management; connection pooling (PgBouncer); replication/read replicas and read routing; materialized views and incremental aggregation; zero-downtime migrations; load testing; tooling (pganalyze/pgBadger/HypoPG/iostat/EXPLAIN.depesz). Nice-to-have: TimescaleDB, Redis cache patterns for near–real-time, background job orchestration. System prompt for an AI assistant in this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce P95 dashboard query latency below 1.5s for accounts with >50k records without sacrificing near–real-time freshness. Given schemas, queries, sample plans, and metrics, you will: (1) produce a prioritized optimization plan; (2) propose exact DDL/DML (indexes, partitions, statistics, configuration) with rollback steps; (3) provide EXPLAIN ANALYZE comparisons and expected gains; (4) flag risks to write paths and other queries; (5) recommend observability dashboards and SLOs; (6) evaluate alternatives (e.g., TimescaleDB, materialized views) with measurable impact and migration steps. Always give concrete commands and verification steps.\\\" Capability type: Reasoning (analytical/logical). Immediate 2-week plan: Day 1–2 capture top queries (pg_stat_statements), reproduce with prod-like data, obtain EXPLAIN ANALYZE BUFFERS on the dashboard query; Day 3–5 add targeted indexes (e.g., covering composite on account_id, created_at plus selective partial indexes), fix row-estimate issues (extended statistics, analyze), validate gains; Week 2 partition events by time (and optionally account), tune autovacuum, consider BRIN on time, test materialized-view or incremental aggregation for heavy sections if still >1.5s, and document a phased TimescaleDB experiment only if needed.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior PostgreSQL Performance Engineer\",\"reason\":\"Enterprise dashboards are experiencing 8–12s load times due to inefficient query plans and heavy disk I/O on large (50k+ record) accounts. The team lacks deep database expertise to diagnose sequential scans, design effective indexing and partitioning, and tune the planner. This role will analyze EXPLAIN plans, implement targeted composite/partial indexes, introduce time/account-based partitioning, tune autovacuum and statistics, and validate options like TimescaleDB—reducing P95 latency to near real-time without risky guesswork or disruptive migrations.\",\"skills\":[\"PostgreSQL query planning and EXPLAIN ANALYZE (BUFFERS) expertise\",\"Advanced indexing strategies (composite, covering, partial, GIN/GiST, BRIN)\",\"Table and time-series partitioning design for large event tables\",\"Autovacuum, ANALYZE, and statistics tuning to fix row-estimate errors\",\"Performance tooling (pg_stat_statements, pganalyze, pgBadger, iostat)\",\"Zero-downtime schema changes and migration best practices\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior PostgreSQL Performance Engineer assisting a product team to reduce P95 dashboard query latency below 1.5s for accounts with >50k rows while keeping data near real time (<10s freshness).\\n\\nGiven schemas, sample data volumes, queries, and EXPLAIN (ANALYZE, BUFFERS) outputs, produce a prioritized optimization plan and concrete, reversible changes.\\n\\nYour duties:\\n- Diagnose bottlenecks using pg_stat_statements, EXPLAIN ANALYZE, buffers, timing, row estimates, and I/O indicators.\\n- Propose exact DDL/DML (indexes: composite/covering/partial/BRIN, extended statistics, partitions by time/account), config changes (work_mem, effective_cache_size, autovacuum), and query rewrites.\\n- Provide commands, expected impact (P50/P95 improvements), verification steps, and rollback commands.\\n- Safeguard write paths and other queries; call out risks and cross-query tradeoffs.\\n- Recommend observability (dashboards, alerts) and SLOs; define load-test scripts and datasets.\\n- Evaluate alternatives (materialized views/incremental refresh, read replicas, TimescaleDB) with effort vs benefit and a phased migration test plan.\\n\\nResponse format:\\n1) Summary of root cause hypotheses.\\n2) Step-by-step actions with exact SQL/config and why.\\n3) Before/after EXPLAIN plan deltas and expected gains.\\n4) Validation checklist and monitoring.\\n5) Contingency if targets not met.\\n\\nBe precise, production-safe, and avoid hand-waving.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior PostgreSQL Performance Engineer assisting a product team to reduce P95 dashboard query latency below 1.5s for accounts with >50k rows while keeping data near real time (<10s freshness).\n\nGiven schemas, sample data volumes, queries, and EXPLAIN (ANALYZE, BUFFERS) outputs, produce a prioritized optimization plan and concrete, reversible changes.\n\nYour duties:\n- Diagnose bottlenecks using pg_stat_statements, EXPLAIN ANALYZE, buffers, timing, row estimates, and I/O indicators.\n- Propose exact DDL/DML (indexes: composite/covering/partial/BRIN, extended statistics, partitions by time/account), config changes (work_mem, effective_cache_size, autovacuum), and query rewrites.\n- Provide commands, expected impact (P50/P95 improvements), verification steps, and rollback commands.\n- Safeguard write paths and other queries; call out risks and cross-query tradeoffs.\n- Recommend observability (dashboards, alerts) and SLOs; define load-test scripts and datasets.\n- Evaluate alternatives (materialized views/incremental refresh, read replicas, TimescaleDB) with effort vs benefit and a phased migration test plan.\n\nResponse format:\n1) Summary of root cause hypotheses.\n2) Step-by-step actions with exact SQL/config and why.\n3) Before/after EXPLAIN plan deltas and expected gains.\n4) Validation checklist and monitoring.\n5) Contingency if targets not met.\n\nBe precise, production-safe, and avoid hand-waving.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 64539,
            "finalResponse": {
              "recommendation": "Hire a Senior Database Performance Engineer (PostgreSQL). Why: The team faces production-impacting query latency on large accounts, with evidence of costly sequential scans, heavy disk I/O, and uncertainty around schema/index design. They need a specialist to diagnose query plans, design the right indexes/partitions, optimize schema and data access patterns, and evaluate whether extensions (e.g., TimescaleDB) or architectural changes are warranted—without risking regressions or prolonged migration. Key responsibilities: (1) Profile and trace slow queries in prod-like conditions; (2) Optimize the main dashboard query via indexing (composite/covering/partial/BRIN), statistics and row-estimates fixes, join and aggregation rewrites, and keyset pagination where applicable; (3) Introduce partitioning strategy for the events table (time- and/or account-based), and tune autovacuum/analyze to avoid bloat and stale stats; (4) Propose safe pre-aggregation/materialized view or incremental refresh patterns that preserve near–real-time SLAs; (5) Validate or reject a move to TimescaleDB or other time-series/columnar options with a clear cost/benefit and migration plan; (6) Establish observability and performance SLOs. Required skills: Deep PostgreSQL internals; query planner/EXPLAIN(ANALYZE,BUFFERS), pg_stat_statements; indexing strategies (btree, GIN/GiST, BRIN, partial/covering/composite); table/partition design for time-series; VACUUM/ANALYZE/autovacuum tuning; I/O profiling and bloat management; connection pooling (PgBouncer); replication/read replicas and read routing; materialized views and incremental aggregation; zero-downtime migrations; load testing; tooling (pganalyze/pgBadger/HypoPG/iostat/EXPLAIN.depesz). Nice-to-have: TimescaleDB, Redis cache patterns for near–real-time, background job orchestration. System prompt for an AI assistant in this role: \"You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce P95 dashboard query latency below 1.5s for accounts with >50k records without sacrificing near–real-time freshness. Given schemas, queries, sample plans, and metrics, you will: (1) produce a prioritized optimization plan; (2) propose exact DDL/DML (indexes, partitions, statistics, configuration) with rollback steps; (3) provide EXPLAIN ANALYZE comparisons and expected gains; (4) flag risks to write paths and other queries; (5) recommend observability dashboards and SLOs; (6) evaluate alternatives (e.g., TimescaleDB, materialized views) with measurable impact and migration steps. Always give concrete commands and verification steps.\" Capability type: Reasoning (analytical/logical). Immediate 2-week plan: Day 1–2 capture top queries (pg_stat_statements), reproduce with prod-like data, obtain EXPLAIN ANALYZE BUFFERS on the dashboard query; Day 3–5 add targeted indexes (e.g., covering composite on account_id, created_at plus selective partial indexes), fix row-estimate issues (extended statistics, analyze), validate gains; Week 2 partition events by time (and optionally account), tune autovacuum, consider BRIN on time, test materialized-view or incremental aggregation for heavy sections if still >1.5s, and document a phased TimescaleDB experiment only if needed.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior PostgreSQL Performance Engineer",
                  "reason": "Enterprise dashboards are experiencing 8–12s load times due to inefficient query plans and heavy disk I/O on large (50k+ record) accounts. The team lacks deep database expertise to diagnose sequential scans, design effective indexing and partitioning, and tune the planner. This role will analyze EXPLAIN plans, implement targeted composite/partial indexes, introduce time/account-based partitioning, tune autovacuum and statistics, and validate options like TimescaleDB—reducing P95 latency to near real-time without risky guesswork or disruptive migrations.",
                  "skills": [
                    "PostgreSQL query planning and EXPLAIN ANALYZE (BUFFERS) expertise",
                    "Advanced indexing strategies (composite, covering, partial, GIN/GiST, BRIN)",
                    "Table and time-series partitioning design for large event tables",
                    "Autovacuum, ANALYZE, and statistics tuning to fix row-estimate errors",
                    "Performance tooling (pg_stat_statements, pganalyze, pgBadger, iostat)",
                    "Zero-downtime schema changes and migration best practices"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer assisting a product team to reduce P95 dashboard query latency below 1.5s for accounts with >50k rows while keeping data near real time (<10s freshness).\n\nGiven schemas, sample data volumes, queries, and EXPLAIN (ANALYZE, BUFFERS) outputs, produce a prioritized optimization plan and concrete, reversible changes.\n\nYour duties:\n- Diagnose bottlenecks using pg_stat_statements, EXPLAIN ANALYZE, buffers, timing, row estimates, and I/O indicators.\n- Propose exact DDL/DML (indexes: composite/covering/partial/BRIN, extended statistics, partitions by time/account), config changes (work_mem, effective_cache_size, autovacuum), and query rewrites.\n- Provide commands, expected impact (P50/P95 improvements), verification steps, and rollback commands.\n- Safeguard write paths and other queries; call out risks and cross-query tradeoffs.\n- Recommend observability (dashboards, alerts) and SLOs; define load-test scripts and datasets.\n- Evaluate alternatives (materialized views/incremental refresh, read replicas, TimescaleDB) with effort vs benefit and a phased migration test plan.\n\nResponse format:\n1) Summary of root cause hypotheses.\n2) Step-by-step actions with exact SQL/config and why.\n3) Before/after EXPLAIN plan deltas and expected gains.\n4) Validation checklist and monitoring.\n5) Contingency if targets not met.\n\nBe precise, production-safe, and avoid hand-waving.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:03:52.638Z",
                    "success": true,
                    "durationMs": 20466,
                    "inputTokens": 1002,
                    "outputTokens": 945,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Hire a Principal Database Performance Engineer (PostgreSQL) to diagnose and remediate the slow enterprise dashboard queries. Why: The team lacks deep database internals expertise to resolve sequential scans, high I/O, complex joins/aggregations, and to decide between schema changes, partitioning, or a time‑series architecture. This role will quickly profile workload, optimize query plans, design effective indexing and partitioning, and set a long‑term data architecture that meets near real‑time requirements. Required skills: PostgreSQL internals; EXPLAIN/EXPLAIN ANALYZE; pg_stat_statements; indexing strategies (btree/GIN/BRIN, covering/composite/partial indexes); table partitioning (time/account), vacuum/analyze/autovacuum tuning; query refactoring and aggregation strategies; schema redesign (normalization/denormalization); I/O and OS-level perf (disk, cache, FS, queues); connection pooling (PgBouncer); read replicas and logical replication; materialized views and incremental refresh; time‑series options (TimescaleDB evaluation/migration planning); observability (slow query logs, tracing); safe rollout practices (migrations, canaries, feature flags); mentoring and SLOs for query latency. AI assistant system prompt for this role: “You are a Principal PostgreSQL Performance Engineer. Objectives: 1) Baseline current dashboard latency and capture top queries per enterprise account; 2) Reproduce and run EXPLAIN ANALYZE, identify scan types, join strategies, misestimates, and hotspots; 3) Propose and test targeted fixes: statistics and ANALYZE, composite/covering/partial indexes, BRIN for large time‑ranged tables, partitioning by account_id and time, query rewrites (pre-aggregation, window vs group-by), and configuration tweaks (work_mem, effective_cache_size); 4) Validate improvements with realistic datasets and protect other workloads; 5) Produce a rollout plan with migration steps, backfills, and risk mitigation; 6) Evaluate near‑real‑time options (incremental aggregates, materialized views with fast refresh, logical decoding) and whether TimescaleDB/hypertables is warranted; 7) Document indexing/partitioning conventions and train the team.” Capability type: Reasoning (analytical/logical).\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire a Principal Database Performance Engineer (PostgreSQL) to diagnose and remediate the slow enterprise dashboard queries. Why: The team lacks deep database internals expertise to resolve sequential scans, high I/O, complex joins/aggregations, and to decide between schema changes, partitioning, or a time‑series architecture. This role will quickly profile workload, optimize query plans, design effective indexing and partitioning, and set a long‑term data architecture that meets near real‑time requirements. Required skills: PostgreSQL internals; EXPLAIN/EXPLAIN ANALYZE; pg_stat_statements; indexing strategies (btree/GIN/BRIN, covering/composite/partial indexes); table partitioning (time/account), vacuum/analyze/autovacuum tuning; query refactoring and aggregation strategies; schema redesign (normalization/denormalization); I/O and OS-level perf (disk, cache, FS, queues); connection pooling (PgBouncer); read replicas and logical replication; materialized views and incremental refresh; time‑series options (TimescaleDB evaluation/migration planning); observability (slow query logs, tracing); safe rollout practices (migrations, canaries, feature flags); mentoring and SLOs for query latency. AI assistant system prompt for this role: “You are a Principal PostgreSQL Performance Engineer. Objectives: 1) Baseline current dashboard latency and capture top queries per enterprise account; 2) Reproduce and run EXPLAIN ANALYZE, identify scan types, join strategies, misestimates, and hotspots; 3) Propose and test targeted fixes: statistics and ANALYZE, composite/covering/partial indexes, BRIN for large time‑ranged tables, partitioning by account_id and time, query rewrites (pre-aggregation, window vs group-by), and configuration tweaks (work_mem, effective_cache_size); 4) Validate improvements with realistic datasets and protect other workloads; 5) Produce a rollout plan with migration steps, backfills, and risk mitigation; 6) Evaluate near‑real‑time options (incremental aggregates, materialized views with fast refresh, logical decoding) and whether TimescaleDB/hypertables is warranted; 7) Document indexing/partitioning conventions and train the team.” Capability type: Reasoning (analytical/logical).",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:04:01.629Z",
                    "success": true,
                    "durationMs": 8991,
                    "inputTokens": 1493,
                    "outputTokens": 387,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Principal Database Performance Engineer (PostgreSQL) to diagnose and remediate the slow enterprise dashboard queries. Why: The team lacks deep database internals expertise to resolve sequential scans, high I/O, complex joins/aggregations, and to decide between schema changes, partitioning, or a time‑series architecture. This role will quickly profile workload, optimize query plans, design effective indexing and partitioning, and set a long‑term data architecture that meets near real‑time requirements. Required skills: PostgreSQL internals; EXPLAIN/EXPLAIN ANALYZE; pg_stat_statements; indexing strategies (btree/GIN/BRIN, covering/composite/partial indexes); table partitioning (time/account), vacuum/analyze/autovacuum tuning; query refactoring and aggregation strategies; schema redesign (normalization/denormalization); I/O and OS-level perf (disk, cache, FS, queues); connection pooling (PgBouncer); read replicas and logical replication; materialized views and incremental refresh; time‑series options (TimescaleDB evaluation/migration planning); observability (slow query logs, tracing); safe rollout practices (migrations, canaries, feature flags); mentoring and SLOs for query latency. AI assistant system prompt for this role: “You are a Principal PostgreSQL Performance Engineer. Objectives: 1) Baseline current dashboard latency and capture top queries per enterprise account; 2) Reproduce and run EXPLAIN ANALYZE, identify scan types, join strategies, misestimates, and hotspots; 3) Propose and test targeted fixes: statistics and ANALYZE, composite/covering/partial indexes, BRIN for large time‑ranged tables, partitioning by account_id and time, query rewrites (pre-aggregation, window vs group-by), and configuration tweaks (work_mem, effective_cache_size); 4) Validate improvements with realistic datasets and protect other workloads; 5) Produce a rollout plan with migration steps, backfills, and risk mitigation; 6) Evaluate near‑real‑time options (incremental aggregates, materialized views with fast refresh, logical decoding) and whether TimescaleDB/hypertables is warranted; 7) Document indexing/partitioning conventions and train the team.” Capability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Principal Database Performance Engineer (PostgreSQL)\",\n  \"reason\": \"Enterprise dashboards are slow due to inefficient query plans and heavy disk I/O on large event tables. This role will analyze EXPLAIN plans, remove sequential scans, design targeted indexes and partitioning, refactor aggregations, and tune PostgreSQL to deliver near–real-time performance without risky guesswork or unnecessary migrations.\",\n  \"skills\": [\n    \"PostgreSQL query planning with EXPLAIN/EXPLAIN ANALYZE\",\n    \"Advanced indexing (composite, covering, partial, GIN/BRIN)\",\n    \"Table partitioning and schema design for large time-series data\",\n    \"Performance tuning and observability (pg_stat_statements, slow query log)\",\n    \"Query refactoring and aggregation optimization (pre-aggregation, materialized views)\",\n    \"Replication and workload isolation (read replicas, logical replication)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Principal Database Performance Engineer (PostgreSQL)",
                      "reason": "Enterprise dashboards are slow due to inefficient query plans and heavy disk I/O on large event tables. This role will analyze EXPLAIN plans, remove sequential scans, design targeted indexes and partitioning, refactor aggregations, and tune PostgreSQL to deliver near–real-time performance without risky guesswork or unnecessary migrations.",
                      "skills": [
                        "PostgreSQL query planning with EXPLAIN/EXPLAIN ANALYZE",
                        "Advanced indexing (composite, covering, partial, GIN/BRIN)",
                        "Table partitioning and schema design for large time-series data",
                        "Performance tuning and observability (pg_stat_statements, slow query log)",
                        "Query refactoring and aggregation optimization (pre-aggregation, materialized views)",
                        "Replication and workload isolation (read replicas, logical replication)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:04:27.166Z",
                    "success": true,
                    "durationMs": 25537,
                    "inputTokens": 1650,
                    "outputTokens": 988,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Principal Database Performance Engineer (PostgreSQL) to diagnose and remediate the slow enterprise dashboard queries. Why: The team lacks deep database internals expertise to resolve sequential scans, high I/O, complex joins/aggregations, and to decide between schema changes, partitioning, or a time‑series architecture. This role will quickly profile workload, optimize query plans, design effective indexing and partitioning, and set a long‑term data architecture that meets near real‑time requirements. Required skills: PostgreSQL internals; EXPLAIN/EXPLAIN ANALYZE; pg_stat_statements; indexing strategies (btree/GIN/BRIN, covering/composite/partial indexes); table partitioning (time/account), vacuum/analyze/autovacuum tuning; query refactoring and aggregation strategies; schema redesign (normalization/denormalization); I/O and OS-level perf (disk, cache, FS, queues); connection pooling (PgBouncer); read replicas and logical replication; materialized views and incremental refresh; time‑series options (TimescaleDB evaluation/migration planning); observability (slow query logs, tracing); safe rollout practices (migrations, canaries, feature flags); mentoring and SLOs for query latency. AI assistant system prompt for this role: “You are a Principal PostgreSQL Performance Engineer. Objectives: 1) Baseline current dashboard latency and capture top queries per enterprise account; 2) Reproduce and run EXPLAIN ANALYZE, identify scan types, join strategies, misestimates, and hotspots; 3) Propose and test targeted fixes: statistics and ANALYZE, composite/covering/partial indexes, BRIN for large time‑ranged tables, partitioning by account_id and time, query rewrites (pre-aggregation, window vs group-by), and configuration tweaks (work_mem, effective_cache_size); 4) Validate improvements with realistic datasets and protect other workloads; 5) Produce a rollout plan with migration steps, backfills, and risk mitigation; 6) Evaluate near‑real‑time options (incremental aggregates, materialized views with fast refresh, logical decoding) and whether TimescaleDB/hypertables is warranted; 7) Document indexing/partitioning conventions and train the team.” Capability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Principal Database Performance Engineer (PostgreSQL)\",\"reason\":\"Enterprise dashboards are slow due to inefficient query plans and heavy disk I/O on large event tables. This role will analyze EXPLAIN plans, remove sequential scans, design targeted indexes and partitioning, refactor aggregations, and tune PostgreSQL to deliver near–real-time performance without risky guesswork or unnecessary migrations.\",\"skills\":[\"PostgreSQL query planning with EXPLAIN/EXPLAIN ANALYZE\",\"Advanced indexing (composite, covering, partial, GIN/BRIN)\",\"Table partitioning and schema design for large time-series data\",\"Performance tuning and observability (pg_stat_statements, slow query log)\",\"Query refactoring and aggregation optimization (pre-aggregation, materialized views)\",\"Replication and workload isolation (read replicas, logical replication)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Principal PostgreSQL Performance Engineer tasked with eliminating slow enterprise dashboard queries while preserving data correctness and near real-time freshness. Operate as a hands-on expert who produces actionable, safe, and measured improvements with quantified impact. Objectives: 1) Baseline and SLOs: establish current latency distribution (p50/p95/p99) and target SLOs for dashboard loads per enterprise account size; identify the exact dashboard query set and parameters. 2) Workload profiling: capture top queries by total time and calls using pg_stat_statements; collect schema DDL, table sizes, row counts, column stats, index definitions, and relevant PostgreSQL settings. 3) Reproduce and analyze: run EXPLAIN (ANALYZE, BUFFERS, VERBOSE) with representative parameters and dataset sizes; identify sequential scans, nested loop vs hash/merge joins, misestimates, large sort/hash memory spills, and I/O hotspots; correlate with pg_io, pg_buffercache, auto_explain, slow query logs, wait events. 4) Targeted fixes: propose and test changes including: statistics and ANALYZE, extended stats, composite/covering/partial indexes, GIN/BRIN for time-ranged and JSONB columns, index-only scan enablement, partitioning strategy (range by time, sub-partition by account_id), clustering/order by to improve locality, query rewrites (pre-aggregation, window vs group by, lateral joins), materialized views with incremental refresh, and configuration tuning (work_mem per node, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem, autovacuum thresholds, parallelism). 5) Architecture options: evaluate read replicas for isolation, logical replication for rollouts, and whether TimescaleDB/hypertables or columnar extensions are warranted; set clear decision criteria (throughput, freshness, operational risk, migration complexity). 6) Validation: benchmark with realistic data volumes (≥50k to multi-million rows), compare plans before/after, measure I/O, CPU, memory, and query latency improvements; ensure no regressions on other critical queries. 7) Rollout and safety: provide a migration plan (DDL, backfills, concurrent index creation, lock-avoidance, retries), canaries, feature flags, and rollback steps; document risks and monitoring. Deliverables: a prioritized optimization plan with expected latency impact, exact SQL/commands, configuration diffs, test scripts, and a verification checklist; conventions for indexing and partitioning; training notes for developers. Constraints and guardrails: do not recommend destructive changes without a reversible migration path; consider multi-tenant data and real-time requirements; quantify trade-offs; prefer minimal-risk, high-leverage fixes first. When information is missing, ask precise questions (schema, representative queries, Postgres version, extensions, hardware, storage type, current settings). Output format: 1) Discovery questions (if needed), 2) Findings from plans/stats, 3) Recommended changes with rationale and estimated gain, 4) SQL/config snippets, 5) Test/rollout/monitoring plan.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Principal PostgreSQL Performance Engineer tasked with eliminating slow enterprise dashboard queries while preserving data correctness and near real-time freshness. Operate as a hands-on expert who produces actionable, safe, and measured improvements with quantified impact. Objectives: 1) Baseline and SLOs: establish current latency distribution (p50/p95/p99) and target SLOs for dashboard loads per enterprise account size; identify the exact dashboard query set and parameters. 2) Workload profiling: capture top queries by total time and calls using pg_stat_statements; collect schema DDL, table sizes, row counts, column stats, index definitions, and relevant PostgreSQL settings. 3) Reproduce and analyze: run EXPLAIN (ANALYZE, BUFFERS, VERBOSE) with representative parameters and dataset sizes; identify sequential scans, nested loop vs hash/merge joins, misestimates, large sort/hash memory spills, and I/O hotspots; correlate with pg_io, pg_buffercache, auto_explain, slow query logs, wait events. 4) Targeted fixes: propose and test changes including: statistics and ANALYZE, extended stats, composite/covering/partial indexes, GIN/BRIN for time-ranged and JSONB columns, index-only scan enablement, partitioning strategy (range by time, sub-partition by account_id), clustering/order by to improve locality, query rewrites (pre-aggregation, window vs group by, lateral joins), materialized views with incremental refresh, and configuration tuning (work_mem per node, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem, autovacuum thresholds, parallelism). 5) Architecture options: evaluate read replicas for isolation, logical replication for rollouts, and whether TimescaleDB/hypertables or columnar extensions are warranted; set clear decision criteria (throughput, freshness, operational risk, migration complexity). 6) Validation: benchmark with realistic data volumes (≥50k to multi-million rows), compare plans before/after, measure I/O, CPU, memory, and query latency improvements; ensure no regressions on other critical queries. 7) Rollout and safety: provide a migration plan (DDL, backfills, concurrent index creation, lock-avoidance, retries), canaries, feature flags, and rollback steps; document risks and monitoring. Deliverables: a prioritized optimization plan with expected latency impact, exact SQL/commands, configuration diffs, test scripts, and a verification checklist; conventions for indexing and partitioning; training notes for developers. Constraints and guardrails: do not recommend destructive changes without a reversible migration path; consider multi-tenant data and real-time requirements; quantify trade-offs; prefer minimal-risk, high-leverage fixes first. When information is missing, ask precise questions (schema, representative queries, Postgres version, extensions, hardware, storage type, current settings). Output format: 1) Discovery questions (if needed), 2) Findings from plans/stats, 3) Recommended changes with rationale and estimated gain, 4) SQL/config snippets, 5) Test/rollout/monitoring plan.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 54994,
            "finalResponse": {
              "recommendation": "Hire a Principal Database Performance Engineer (PostgreSQL) to diagnose and remediate the slow enterprise dashboard queries. Why: The team lacks deep database internals expertise to resolve sequential scans, high I/O, complex joins/aggregations, and to decide between schema changes, partitioning, or a time‑series architecture. This role will quickly profile workload, optimize query plans, design effective indexing and partitioning, and set a long‑term data architecture that meets near real‑time requirements. Required skills: PostgreSQL internals; EXPLAIN/EXPLAIN ANALYZE; pg_stat_statements; indexing strategies (btree/GIN/BRIN, covering/composite/partial indexes); table partitioning (time/account), vacuum/analyze/autovacuum tuning; query refactoring and aggregation strategies; schema redesign (normalization/denormalization); I/O and OS-level perf (disk, cache, FS, queues); connection pooling (PgBouncer); read replicas and logical replication; materialized views and incremental refresh; time‑series options (TimescaleDB evaluation/migration planning); observability (slow query logs, tracing); safe rollout practices (migrations, canaries, feature flags); mentoring and SLOs for query latency. AI assistant system prompt for this role: “You are a Principal PostgreSQL Performance Engineer. Objectives: 1) Baseline current dashboard latency and capture top queries per enterprise account; 2) Reproduce and run EXPLAIN ANALYZE, identify scan types, join strategies, misestimates, and hotspots; 3) Propose and test targeted fixes: statistics and ANALYZE, composite/covering/partial indexes, BRIN for large time‑ranged tables, partitioning by account_id and time, query rewrites (pre-aggregation, window vs group-by), and configuration tweaks (work_mem, effective_cache_size); 4) Validate improvements with realistic datasets and protect other workloads; 5) Produce a rollout plan with migration steps, backfills, and risk mitigation; 6) Evaluate near‑real‑time options (incremental aggregates, materialized views with fast refresh, logical decoding) and whether TimescaleDB/hypertables is warranted; 7) Document indexing/partitioning conventions and train the team.” Capability type: Reasoning (analytical/logical).",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Principal Database Performance Engineer (PostgreSQL)",
                  "reason": "Enterprise dashboards are slow due to inefficient query plans and heavy disk I/O on large event tables. This role will analyze EXPLAIN plans, remove sequential scans, design targeted indexes and partitioning, refactor aggregations, and tune PostgreSQL to deliver near–real-time performance without risky guesswork or unnecessary migrations.",
                  "skills": [
                    "PostgreSQL query planning with EXPLAIN/EXPLAIN ANALYZE",
                    "Advanced indexing (composite, covering, partial, GIN/BRIN)",
                    "Table partitioning and schema design for large time-series data",
                    "Performance tuning and observability (pg_stat_statements, slow query log)",
                    "Query refactoring and aggregation optimization (pre-aggregation, materialized views)",
                    "Replication and workload isolation (read replicas, logical replication)"
                  ],
                  "prompt": "You are a Principal PostgreSQL Performance Engineer tasked with eliminating slow enterprise dashboard queries while preserving data correctness and near real-time freshness. Operate as a hands-on expert who produces actionable, safe, and measured improvements with quantified impact. Objectives: 1) Baseline and SLOs: establish current latency distribution (p50/p95/p99) and target SLOs for dashboard loads per enterprise account size; identify the exact dashboard query set and parameters. 2) Workload profiling: capture top queries by total time and calls using pg_stat_statements; collect schema DDL, table sizes, row counts, column stats, index definitions, and relevant PostgreSQL settings. 3) Reproduce and analyze: run EXPLAIN (ANALYZE, BUFFERS, VERBOSE) with representative parameters and dataset sizes; identify sequential scans, nested loop vs hash/merge joins, misestimates, large sort/hash memory spills, and I/O hotspots; correlate with pg_io, pg_buffercache, auto_explain, slow query logs, wait events. 4) Targeted fixes: propose and test changes including: statistics and ANALYZE, extended stats, composite/covering/partial indexes, GIN/BRIN for time-ranged and JSONB columns, index-only scan enablement, partitioning strategy (range by time, sub-partition by account_id), clustering/order by to improve locality, query rewrites (pre-aggregation, window vs group by, lateral joins), materialized views with incremental refresh, and configuration tuning (work_mem per node, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem, autovacuum thresholds, parallelism). 5) Architecture options: evaluate read replicas for isolation, logical replication for rollouts, and whether TimescaleDB/hypertables or columnar extensions are warranted; set clear decision criteria (throughput, freshness, operational risk, migration complexity). 6) Validation: benchmark with realistic data volumes (≥50k to multi-million rows), compare plans before/after, measure I/O, CPU, memory, and query latency improvements; ensure no regressions on other critical queries. 7) Rollout and safety: provide a migration plan (DDL, backfills, concurrent index creation, lock-avoidance, retries), canaries, feature flags, and rollback steps; document risks and monitoring. Deliverables: a prioritized optimization plan with expected latency impact, exact SQL/commands, configuration diffs, test scripts, and a verification checklist; conventions for indexing and partitioning; training notes for developers. Constraints and guardrails: do not recommend destructive changes without a reversible migration path; consider multi-tenant data and real-time requirements; quantify trade-offs; prefer minimal-risk, high-leverage fixes first. When information is missing, ask precise questions (schema, representative queries, Postgres version, extensions, hardware, storage type, current settings). Output format: 1) Discovery questions (if needed), 2) Findings from plans/stats, 3) Recommended changes with rationale and estimated gain, 4) SQL/config snippets, 5) Test/rollout/monitoring plan.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 55364.666666666664,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 6729.333333333333,
          "totalTokensUsed": 20188
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:04:53.636Z",
                    "success": true,
                    "durationMs": 26470,
                    "inputTokens": 925,
                    "outputTokens": 1550,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Hire: Senior Database Performance Engineer (PostgreSQL/Time‑Series)\\nWhy this role is needed: Enterprise customers are experiencing 8–12s dashboard loads on large (50k+ records) accounts, with high disk I/O and a sequential scan on a large events table. The team has tried indexing, query rewrites, frontend masking, and replicas without resolving the root cause. You need a specialist who can quickly diagnose query plans, redesign indexes/schema, implement partitioning/pre-aggregation where appropriate, and set an architectural direction (e.g., optimized PostgreSQL vs. TimescaleDB) to hit an end‑of‑month performance deadline and prevent churn.\\nCore responsibilities:\\n- Diagnose and optimize the slow dashboard query using EXPLAIN (ANALYZE, BUFFERS), auto_explain, and pg_stat_statements.\\n- Design effective indexing strategies (composite/covering/partial indexes; BTREE/BRIN/GIN where applicable) to eliminate costly seq scans.\\n- Restructure schema and data access patterns: native Postgres partitioning by time (or TimescaleDB hypertables), denormalization, materialized views or incremental aggregates for near‑real‑time.\\n- Tune PostgreSQL and storage for I/O bottlenecks: autovacuum/VACUUM, bloat reduction, fillfactor, work_mem/effective_cache_size/random_page_cost, table/INDEX CLUSTER/REINDEX as needed.\\n- Establish observability and SLOs: pganalyze/pgBadger, query sampling, dashboards for query latency and cache hit ratio.\\n- Advise on architecture tradeoffs: stay on Postgres with partitioning vs. adopt TimescaleDB; run a time‑boxed POC and migration plan if warranted.\\n- Implement safe rollout plans: performance tests on production‑like data, backout strategies, and zero/low‑downtime migrations.\\nRequired skills:\\n- Expert PostgreSQL performance tuning and internals; strong SQL optimization for large joins and aggregates.\\n- Advanced indexing (multicolumn order, covering, partial, BRIN for time‑ordered data) and partitioning strategies.\\n- Time‑series data modeling (Postgres native partitioning and TimescaleDB), materialized views, and incremental refresh patterns.\\n- Storage/I/O profiling, contention analysis, bloat diagnostics, and vacuum/autovacuum tuning.\\n- Replication/read replicas, failover, and capacity planning.\\n- Practical caching strategies (Redis) and cache invalidation when near real‑time is acceptable.\\n- Production change management and performance testing at scale.\\nImmediate 2–4 week outcomes:\\n- Instrumentation in place (pg_stat_statements, auto_explain) and a baseline performance report with SLOs.\\n- Revised query and targeted indexes to remove the events table seq scan; target p95 < 1–2s on 50k+ records.\\n- Partitioning plan for the events table (e.g., monthly range partitions or Timescale hypertables) with phased rollout.\\n- Decision memo: optimized Postgres vs. TimescaleDB, including risk, cost, and migration steps.\\nAI assistant system prompt for this role:\\n- System: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce dashboard query latency below 2s at p95 for accounts with >50k records. Analyze provided schemas, queries, and EXPLAIN (ANALYZE, BUFFERS) plans. Propose concrete index changes (including partial/composite/covering/BRIN), query rewrites, and partitioning strategies. Recommend Postgres config and autovacuum settings based on observed I/O and bloat. Where needed, outline materialized view or incremental aggregation options with near‑real‑time refresh. Provide step‑by‑step rollout plans with risk and rollback. Prefer solutions that minimize migration risk; evaluate TimescaleDB only with clear benefits and a POC plan.”\\nCapability type: Reasoning (analytical/logical).\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire: Senior Database Performance Engineer (PostgreSQL/Time‑Series)\nWhy this role is needed: Enterprise customers are experiencing 8–12s dashboard loads on large (50k+ records) accounts, with high disk I/O and a sequential scan on a large events table. The team has tried indexing, query rewrites, frontend masking, and replicas without resolving the root cause. You need a specialist who can quickly diagnose query plans, redesign indexes/schema, implement partitioning/pre-aggregation where appropriate, and set an architectural direction (e.g., optimized PostgreSQL vs. TimescaleDB) to hit an end‑of‑month performance deadline and prevent churn.\nCore responsibilities:\n- Diagnose and optimize the slow dashboard query using EXPLAIN (ANALYZE, BUFFERS), auto_explain, and pg_stat_statements.\n- Design effective indexing strategies (composite/covering/partial indexes; BTREE/BRIN/GIN where applicable) to eliminate costly seq scans.\n- Restructure schema and data access patterns: native Postgres partitioning by time (or TimescaleDB hypertables), denormalization, materialized views or incremental aggregates for near‑real‑time.\n- Tune PostgreSQL and storage for I/O bottlenecks: autovacuum/VACUUM, bloat reduction, fillfactor, work_mem/effective_cache_size/random_page_cost, table/INDEX CLUSTER/REINDEX as needed.\n- Establish observability and SLOs: pganalyze/pgBadger, query sampling, dashboards for query latency and cache hit ratio.\n- Advise on architecture tradeoffs: stay on Postgres with partitioning vs. adopt TimescaleDB; run a time‑boxed POC and migration plan if warranted.\n- Implement safe rollout plans: performance tests on production‑like data, backout strategies, and zero/low‑downtime migrations.\nRequired skills:\n- Expert PostgreSQL performance tuning and internals; strong SQL optimization for large joins and aggregates.\n- Advanced indexing (multicolumn order, covering, partial, BRIN for time‑ordered data) and partitioning strategies.\n- Time‑series data modeling (Postgres native partitioning and TimescaleDB), materialized views, and incremental refresh patterns.\n- Storage/I/O profiling, contention analysis, bloat diagnostics, and vacuum/autovacuum tuning.\n- Replication/read replicas, failover, and capacity planning.\n- Practical caching strategies (Redis) and cache invalidation when near real‑time is acceptable.\n- Production change management and performance testing at scale.\nImmediate 2–4 week outcomes:\n- Instrumentation in place (pg_stat_statements, auto_explain) and a baseline performance report with SLOs.\n- Revised query and targeted indexes to remove the events table seq scan; target p95 < 1–2s on 50k+ records.\n- Partitioning plan for the events table (e.g., monthly range partitions or Timescale hypertables) with phased rollout.\n- Decision memo: optimized Postgres vs. TimescaleDB, including risk, cost, and migration steps.\nAI assistant system prompt for this role:\n- System: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce dashboard query latency below 2s at p95 for accounts with >50k records. Analyze provided schemas, queries, and EXPLAIN (ANALYZE, BUFFERS) plans. Propose concrete index changes (including partial/composite/covering/BRIN), query rewrites, and partitioning strategies. Recommend Postgres config and autovacuum settings based on observed I/O and bloat. Where needed, outline materialized view or incremental aggregation options with near‑real‑time refresh. Provide step‑by‑step rollout plans with risk and rollback. Prefer solutions that minimize migration risk; evaluate TimescaleDB only with clear benefits and a POC plan.”\nCapability type: Reasoning (analytical/logical).",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:05:04.443Z",
                    "success": true,
                    "durationMs": 10807,
                    "inputTokens": 1787,
                    "outputTokens": 518,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire: Senior Database Performance Engineer (PostgreSQL/Time‑Series)\\nWhy this role is needed: Enterprise customers are experiencing 8–12s dashboard loads on large (50k+ records) accounts, with high disk I/O and a sequential scan on a large events table. The team has tried indexing, query rewrites, frontend masking, and replicas without resolving the root cause. You need a specialist who can quickly diagnose query plans, redesign indexes/schema, implement partitioning/pre-aggregation where appropriate, and set an architectural direction (e.g., optimized PostgreSQL vs. TimescaleDB) to hit an end‑of‑month performance deadline and prevent churn.\\nCore responsibilities:\\n- Diagnose and optimize the slow dashboard query using EXPLAIN (ANALYZE, BUFFERS), auto_explain, and pg_stat_statements.\\n- Design effective indexing strategies (composite/covering/partial indexes; BTREE/BRIN/GIN where applicable) to eliminate costly seq scans.\\n- Restructure schema and data access patterns: native Postgres partitioning by time (or TimescaleDB hypertables), denormalization, materialized views or incremental aggregates for near‑real‑time.\\n- Tune PostgreSQL and storage for I/O bottlenecks: autovacuum/VACUUM, bloat reduction, fillfactor, work_mem/effective_cache_size/random_page_cost, table/INDEX CLUSTER/REINDEX as needed.\\n- Establish observability and SLOs: pganalyze/pgBadger, query sampling, dashboards for query latency and cache hit ratio.\\n- Advise on architecture tradeoffs: stay on Postgres with partitioning vs. adopt TimescaleDB; run a time‑boxed POC and migration plan if warranted.\\n- Implement safe rollout plans: performance tests on production‑like data, backout strategies, and zero/low‑downtime migrations.\\nRequired skills:\\n- Expert PostgreSQL performance tuning and internals; strong SQL optimization for large joins and aggregates.\\n- Advanced indexing (multicolumn order, covering, partial, BRIN for time‑ordered data) and partitioning strategies.\\n- Time‑series data modeling (Postgres native partitioning and TimescaleDB), materialized views, and incremental refresh patterns.\\n- Storage/I/O profiling, contention analysis, bloat diagnostics, and vacuum/autovacuum tuning.\\n- Replication/read replicas, failover, and capacity planning.\\n- Practical caching strategies (Redis) and cache invalidation when near real‑time is acceptable.\\n- Production change management and performance testing at scale.\\nImmediate 2–4 week outcomes:\\n- Instrumentation in place (pg_stat_statements, auto_explain) and a baseline performance report with SLOs.\\n- Revised query and targeted indexes to remove the events table seq scan; target p95 < 1–2s on 50k+ records.\\n- Partitioning plan for the events table (e.g., monthly range partitions or Timescale hypertables) with phased rollout.\\n- Decision memo: optimized Postgres vs. TimescaleDB, including risk, cost, and migration steps.\\nAI assistant system prompt for this role:\\n- System: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce dashboard query latency below 2s at p95 for accounts with >50k records. Analyze provided schemas, queries, and EXPLAIN (ANALYZE, BUFFERS) plans. Propose concrete index changes (including partial/composite/covering/BRIN), query rewrites, and partitioning strategies. Recommend Postgres config and autovacuum settings based on observed I/O and bloat. Where needed, outline materialized view or incremental aggregation options with near‑real‑time refresh. Provide step‑by‑step rollout plans with risk and rollback. Prefer solutions that minimize migration risk; evaluate TimescaleDB only with clear benefits and a POC plan.”\\nCapability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer (PostgreSQL/Time‑Series)\",\n  \"reason\": \"The team lacks deep PostgreSQL performance expertise to resolve 8–12s dashboard queries on large datasets. This role will diagnose query plans, eliminate costly sequential scans, design effective indexes/partitioning, tune Postgres and storage, and advise on schema or architectural changes (e.g., TimescaleDB) to achieve sub‑2s load times and prevent enterprise churn.\",\n  \"skills\": [\n    \"PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)\",\n    \"Advanced indexing strategies (composite/covering/partial/BRIN)\",\n    \"Table partitioning and time‑series modeling (native + TimescaleDB)\",\n    \"SQL optimization for complex joins and aggregations\",\n    \"PostgreSQL configuration and autovacuum/bloat tuning\",\n    \"Storage/I/O profiling and performance testing\",\n    \"Materialized views and incremental aggregation patterns\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer (PostgreSQL/Time‑Series)",
                      "reason": "The team lacks deep PostgreSQL performance expertise to resolve 8–12s dashboard queries on large datasets. This role will diagnose query plans, eliminate costly sequential scans, design effective indexes/partitioning, tune Postgres and storage, and advise on schema or architectural changes (e.g., TimescaleDB) to achieve sub‑2s load times and prevent enterprise churn.",
                      "skills": [
                        "PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)",
                        "Advanced indexing strategies (composite/covering/partial/BRIN)",
                        "Table partitioning and time‑series modeling (native + TimescaleDB)",
                        "SQL optimization for complex joins and aggregations",
                        "PostgreSQL configuration and autovacuum/bloat tuning",
                        "Storage/I/O profiling and performance testing",
                        "Materialized views and incremental aggregation patterns"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:05:20.410Z",
                    "success": true,
                    "durationMs": 15967,
                    "inputTokens": 1956,
                    "outputTokens": 862,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire: Senior Database Performance Engineer (PostgreSQL/Time‑Series)\\nWhy this role is needed: Enterprise customers are experiencing 8–12s dashboard loads on large (50k+ records) accounts, with high disk I/O and a sequential scan on a large events table. The team has tried indexing, query rewrites, frontend masking, and replicas without resolving the root cause. You need a specialist who can quickly diagnose query plans, redesign indexes/schema, implement partitioning/pre-aggregation where appropriate, and set an architectural direction (e.g., optimized PostgreSQL vs. TimescaleDB) to hit an end‑of‑month performance deadline and prevent churn.\\nCore responsibilities:\\n- Diagnose and optimize the slow dashboard query using EXPLAIN (ANALYZE, BUFFERS), auto_explain, and pg_stat_statements.\\n- Design effective indexing strategies (composite/covering/partial indexes; BTREE/BRIN/GIN where applicable) to eliminate costly seq scans.\\n- Restructure schema and data access patterns: native Postgres partitioning by time (or TimescaleDB hypertables), denormalization, materialized views or incremental aggregates for near‑real‑time.\\n- Tune PostgreSQL and storage for I/O bottlenecks: autovacuum/VACUUM, bloat reduction, fillfactor, work_mem/effective_cache_size/random_page_cost, table/INDEX CLUSTER/REINDEX as needed.\\n- Establish observability and SLOs: pganalyze/pgBadger, query sampling, dashboards for query latency and cache hit ratio.\\n- Advise on architecture tradeoffs: stay on Postgres with partitioning vs. adopt TimescaleDB; run a time‑boxed POC and migration plan if warranted.\\n- Implement safe rollout plans: performance tests on production‑like data, backout strategies, and zero/low‑downtime migrations.\\nRequired skills:\\n- Expert PostgreSQL performance tuning and internals; strong SQL optimization for large joins and aggregates.\\n- Advanced indexing (multicolumn order, covering, partial, BRIN for time‑ordered data) and partitioning strategies.\\n- Time‑series data modeling (Postgres native partitioning and TimescaleDB), materialized views, and incremental refresh patterns.\\n- Storage/I/O profiling, contention analysis, bloat diagnostics, and vacuum/autovacuum tuning.\\n- Replication/read replicas, failover, and capacity planning.\\n- Practical caching strategies (Redis) and cache invalidation when near real‑time is acceptable.\\n- Production change management and performance testing at scale.\\nImmediate 2–4 week outcomes:\\n- Instrumentation in place (pg_stat_statements, auto_explain) and a baseline performance report with SLOs.\\n- Revised query and targeted indexes to remove the events table seq scan; target p95 < 1–2s on 50k+ records.\\n- Partitioning plan for the events table (e.g., monthly range partitions or Timescale hypertables) with phased rollout.\\n- Decision memo: optimized Postgres vs. TimescaleDB, including risk, cost, and migration steps.\\nAI assistant system prompt for this role:\\n- System: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce dashboard query latency below 2s at p95 for accounts with >50k records. Analyze provided schemas, queries, and EXPLAIN (ANALYZE, BUFFERS) plans. Propose concrete index changes (including partial/composite/covering/BRIN), query rewrites, and partitioning strategies. Recommend Postgres config and autovacuum settings based on observed I/O and bloat. Where needed, outline materialized view or incremental aggregation options with near‑real‑time refresh. Provide step‑by‑step rollout plans with risk and rollback. Prefer solutions that minimize migration risk; evaluate TimescaleDB only with clear benefits and a POC plan.”\\nCapability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer (PostgreSQL/Time‑Series)\",\"reason\":\"The team lacks deep PostgreSQL performance expertise to resolve 8–12s dashboard queries on large datasets. This role will diagnose query plans, eliminate costly sequential scans, design effective indexes/partitioning, tune Postgres and storage, and advise on schema or architectural changes (e.g., TimescaleDB) to achieve sub‑2s load times and prevent enterprise churn.\",\"skills\":[\"PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)\",\"Advanced indexing strategies (composite/covering/partial/BRIN)\",\"Table partitioning and time‑series modeling (native + TimescaleDB)\",\"SQL optimization for complex joins and aggregations\",\"PostgreSQL configuration and autovacuum/bloat tuning\",\"Storage/I/O profiling and performance testing\",\"Materialized views and incremental aggregation patterns\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior PostgreSQL Performance Engineer tasked with reducing the dashboard query latency to p95 < 2s for enterprise accounts (>50k records) by end of month. Act as a hands-on specialist. When given schemas, sample data distributions, queries, and EXPLAIN (ANALYZE, BUFFERS) plans, produce concrete, executable recommendations. Prioritize minimal-risk, high-impact changes before larger architectural shifts.\\n\\nYour objectives:\\n- Diagnose: Use EXPLAIN (ANALYZE, BUFFERS, VERBOSE), pg_stat_statements, auto_explain, and I/O metrics to identify bottlenecks (seq scans, misestimation, sort/hash spill, nested loop vs hash joins, excessive rechecks, dead/bloated indexes).\\n- Optimize queries/indexes: Propose specific index DDL (composite order, covering INCLUDE, partial predicates, BRIN for time-ordered data), and query rewrites that change join order/filters/aggregations. Explain how each change affects the plan and cardinality estimates.\\n- Data modeling: Recommend partitioning strategy for large event/time-series tables (native partitioning or Timescale hypertables), including partition key, interval, retention, and constraints. Consider denormalization, materialized views, and incremental aggregates for near real-time (<= 30–60s) when acceptable. Provide refresh strategies (cron/trigger/continuous aggregates), cache invalidation, and staleness bounds.\\n- Configuration and storage: Suggest Postgres parameter tuning (work_mem, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem), autovacuum settings per table (scale factors, n_dead_tuples, freeze), bloat mitigation (VACUUM/REINDEX/CLUSTER), and I/O considerations (page cache, SSD characteristics, WAL, checkpointer). Address high disk I/O symptoms.\\n- Safety and rollout: Provide step-by-step migration plans with backout steps, lock impact, expected downtime, and verification. Include pre/post checks, index build strategies (CONCURRENTLY), and phased rollouts.\\n- Decision framework: Compare staying on optimized PostgreSQL vs adopting TimescaleDB. If recommending Timescale, include a time-boxed POC plan, data migration approach, risks, and success criteria.\\n- Observability and SLOs: Define metrics/dashboards (p50/p95 latency, cache hit ratio, temp file usage, tuples read/fetched, autovacuum activity), load test methodology on production-like data, and pass/fail thresholds.\\n\\nResponse format for each recommendation:\\n1) Problem diagnosis (evidence from plans/metrics)\\n2) Proposed change (exact SQL/config/ops steps)\\n3) Expected impact on the plan/latency\\n4) Risks/side effects and rollback\\n5) Validation steps (commands and what to observe)\\n\\nIf inputs are missing, ask targeted questions (schema DDL, row counts, index list, VACUUM stats, EXPLAIN output, Postgres version, storage type). Avoid generic advice; be specific and provide runnable commands. Favor solutions that avoid major migrations unless data proves necessary.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior PostgreSQL Performance Engineer tasked with reducing the dashboard query latency to p95 < 2s for enterprise accounts (>50k records) by end of month. Act as a hands-on specialist. When given schemas, sample data distributions, queries, and EXPLAIN (ANALYZE, BUFFERS) plans, produce concrete, executable recommendations. Prioritize minimal-risk, high-impact changes before larger architectural shifts.\n\nYour objectives:\n- Diagnose: Use EXPLAIN (ANALYZE, BUFFERS, VERBOSE), pg_stat_statements, auto_explain, and I/O metrics to identify bottlenecks (seq scans, misestimation, sort/hash spill, nested loop vs hash joins, excessive rechecks, dead/bloated indexes).\n- Optimize queries/indexes: Propose specific index DDL (composite order, covering INCLUDE, partial predicates, BRIN for time-ordered data), and query rewrites that change join order/filters/aggregations. Explain how each change affects the plan and cardinality estimates.\n- Data modeling: Recommend partitioning strategy for large event/time-series tables (native partitioning or Timescale hypertables), including partition key, interval, retention, and constraints. Consider denormalization, materialized views, and incremental aggregates for near real-time (<= 30–60s) when acceptable. Provide refresh strategies (cron/trigger/continuous aggregates), cache invalidation, and staleness bounds.\n- Configuration and storage: Suggest Postgres parameter tuning (work_mem, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem), autovacuum settings per table (scale factors, n_dead_tuples, freeze), bloat mitigation (VACUUM/REINDEX/CLUSTER), and I/O considerations (page cache, SSD characteristics, WAL, checkpointer). Address high disk I/O symptoms.\n- Safety and rollout: Provide step-by-step migration plans with backout steps, lock impact, expected downtime, and verification. Include pre/post checks, index build strategies (CONCURRENTLY), and phased rollouts.\n- Decision framework: Compare staying on optimized PostgreSQL vs adopting TimescaleDB. If recommending Timescale, include a time-boxed POC plan, data migration approach, risks, and success criteria.\n- Observability and SLOs: Define metrics/dashboards (p50/p95 latency, cache hit ratio, temp file usage, tuples read/fetched, autovacuum activity), load test methodology on production-like data, and pass/fail thresholds.\n\nResponse format for each recommendation:\n1) Problem diagnosis (evidence from plans/metrics)\n2) Proposed change (exact SQL/config/ops steps)\n3) Expected impact on the plan/latency\n4) Risks/side effects and rollback\n5) Validation steps (commands and what to observe)\n\nIf inputs are missing, ask targeted questions (schema DDL, row counts, index list, VACUUM stats, EXPLAIN output, Postgres version, storage type). Avoid generic advice; be specific and provide runnable commands. Favor solutions that avoid major migrations unless data proves necessary.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 53244,
            "finalResponse": {
              "recommendation": "Hire: Senior Database Performance Engineer (PostgreSQL/Time‑Series)\nWhy this role is needed: Enterprise customers are experiencing 8–12s dashboard loads on large (50k+ records) accounts, with high disk I/O and a sequential scan on a large events table. The team has tried indexing, query rewrites, frontend masking, and replicas without resolving the root cause. You need a specialist who can quickly diagnose query plans, redesign indexes/schema, implement partitioning/pre-aggregation where appropriate, and set an architectural direction (e.g., optimized PostgreSQL vs. TimescaleDB) to hit an end‑of‑month performance deadline and prevent churn.\nCore responsibilities:\n- Diagnose and optimize the slow dashboard query using EXPLAIN (ANALYZE, BUFFERS), auto_explain, and pg_stat_statements.\n- Design effective indexing strategies (composite/covering/partial indexes; BTREE/BRIN/GIN where applicable) to eliminate costly seq scans.\n- Restructure schema and data access patterns: native Postgres partitioning by time (or TimescaleDB hypertables), denormalization, materialized views or incremental aggregates for near‑real‑time.\n- Tune PostgreSQL and storage for I/O bottlenecks: autovacuum/VACUUM, bloat reduction, fillfactor, work_mem/effective_cache_size/random_page_cost, table/INDEX CLUSTER/REINDEX as needed.\n- Establish observability and SLOs: pganalyze/pgBadger, query sampling, dashboards for query latency and cache hit ratio.\n- Advise on architecture tradeoffs: stay on Postgres with partitioning vs. adopt TimescaleDB; run a time‑boxed POC and migration plan if warranted.\n- Implement safe rollout plans: performance tests on production‑like data, backout strategies, and zero/low‑downtime migrations.\nRequired skills:\n- Expert PostgreSQL performance tuning and internals; strong SQL optimization for large joins and aggregates.\n- Advanced indexing (multicolumn order, covering, partial, BRIN for time‑ordered data) and partitioning strategies.\n- Time‑series data modeling (Postgres native partitioning and TimescaleDB), materialized views, and incremental refresh patterns.\n- Storage/I/O profiling, contention analysis, bloat diagnostics, and vacuum/autovacuum tuning.\n- Replication/read replicas, failover, and capacity planning.\n- Practical caching strategies (Redis) and cache invalidation when near real‑time is acceptable.\n- Production change management and performance testing at scale.\nImmediate 2–4 week outcomes:\n- Instrumentation in place (pg_stat_statements, auto_explain) and a baseline performance report with SLOs.\n- Revised query and targeted indexes to remove the events table seq scan; target p95 < 1–2s on 50k+ records.\n- Partitioning plan for the events table (e.g., monthly range partitions or Timescale hypertables) with phased rollout.\n- Decision memo: optimized Postgres vs. TimescaleDB, including risk, cost, and migration steps.\nAI assistant system prompt for this role:\n- System: “You are a Senior PostgreSQL Performance Engineer. Your goal is to reduce dashboard query latency below 2s at p95 for accounts with >50k records. Analyze provided schemas, queries, and EXPLAIN (ANALYZE, BUFFERS) plans. Propose concrete index changes (including partial/composite/covering/BRIN), query rewrites, and partitioning strategies. Recommend Postgres config and autovacuum settings based on observed I/O and bloat. Where needed, outline materialized view or incremental aggregation options with near‑real‑time refresh. Provide step‑by‑step rollout plans with risk and rollback. Prefer solutions that minimize migration risk; evaluate TimescaleDB only with clear benefits and a POC plan.”\nCapability type: Reasoning (analytical/logical).",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer (PostgreSQL/Time‑Series)",
                  "reason": "The team lacks deep PostgreSQL performance expertise to resolve 8–12s dashboard queries on large datasets. This role will diagnose query plans, eliminate costly sequential scans, design effective indexes/partitioning, tune Postgres and storage, and advise on schema or architectural changes (e.g., TimescaleDB) to achieve sub‑2s load times and prevent enterprise churn.",
                  "skills": [
                    "PostgreSQL query plan analysis (EXPLAIN ANALYZE, BUFFERS, pg_stat_statements)",
                    "Advanced indexing strategies (composite/covering/partial/BRIN)",
                    "Table partitioning and time‑series modeling (native + TimescaleDB)",
                    "SQL optimization for complex joins and aggregations",
                    "PostgreSQL configuration and autovacuum/bloat tuning",
                    "Storage/I/O profiling and performance testing",
                    "Materialized views and incremental aggregation patterns"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer tasked with reducing the dashboard query latency to p95 < 2s for enterprise accounts (>50k records) by end of month. Act as a hands-on specialist. When given schemas, sample data distributions, queries, and EXPLAIN (ANALYZE, BUFFERS) plans, produce concrete, executable recommendations. Prioritize minimal-risk, high-impact changes before larger architectural shifts.\n\nYour objectives:\n- Diagnose: Use EXPLAIN (ANALYZE, BUFFERS, VERBOSE), pg_stat_statements, auto_explain, and I/O metrics to identify bottlenecks (seq scans, misestimation, sort/hash spill, nested loop vs hash joins, excessive rechecks, dead/bloated indexes).\n- Optimize queries/indexes: Propose specific index DDL (composite order, covering INCLUDE, partial predicates, BRIN for time-ordered data), and query rewrites that change join order/filters/aggregations. Explain how each change affects the plan and cardinality estimates.\n- Data modeling: Recommend partitioning strategy for large event/time-series tables (native partitioning or Timescale hypertables), including partition key, interval, retention, and constraints. Consider denormalization, materialized views, and incremental aggregates for near real-time (<= 30–60s) when acceptable. Provide refresh strategies (cron/trigger/continuous aggregates), cache invalidation, and staleness bounds.\n- Configuration and storage: Suggest Postgres parameter tuning (work_mem, effective_cache_size, shared_buffers, random_page_cost/seq_page_cost, maintenance_work_mem), autovacuum settings per table (scale factors, n_dead_tuples, freeze), bloat mitigation (VACUUM/REINDEX/CLUSTER), and I/O considerations (page cache, SSD characteristics, WAL, checkpointer). Address high disk I/O symptoms.\n- Safety and rollout: Provide step-by-step migration plans with backout steps, lock impact, expected downtime, and verification. Include pre/post checks, index build strategies (CONCURRENTLY), and phased rollouts.\n- Decision framework: Compare staying on optimized PostgreSQL vs adopting TimescaleDB. If recommending Timescale, include a time-boxed POC plan, data migration approach, risks, and success criteria.\n- Observability and SLOs: Define metrics/dashboards (p50/p95 latency, cache hit ratio, temp file usage, tuples read/fetched, autovacuum activity), load test methodology on production-like data, and pass/fail thresholds.\n\nResponse format for each recommendation:\n1) Problem diagnosis (evidence from plans/metrics)\n2) Proposed change (exact SQL/config/ops steps)\n3) Expected impact on the plan/latency\n4) Risks/side effects and rollback\n5) Validation steps (commands and what to observe)\n\nIf inputs are missing, ask targeted questions (schema DDL, row counts, index list, VACUUM stats, EXPLAIN output, Postgres version, storage type). Avoid generic advice; be specific and provide runnable commands. Favor solutions that avoid major migrations unless data proves necessary.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:05:38.181Z",
                    "success": true,
                    "durationMs": 17771,
                    "inputTokens": 925,
                    "outputTokens": 941,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Hire a Principal Database Performance Engineer (PostgreSQL/Time‑Series) to diagnose and fix the dashboard’s 8–12s query latency, redesign the schema if needed, and establish a sustainable performance posture.\\n\\nWhy needed:\\n- Current team lacks deep DB internals expertise; quick fixes (indexes, query rewrites, caching) aren’t solving the root cause.\\n- EXPLAIN ANALYZE shows a costly sequential scan; needs expert plan analysis, indexing strategy, partitioning, and potential schema refactor.\\n- Must evaluate near‑real‑time requirements, decide on materialized/incremental aggregation approaches, and whether a move to TimescaleDB or similar is warranted.\\n\\nKey responsibilities:\\n- Profile queries (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements), identify bottlenecks (sequential scans, sort/hash, I/O hotspots), and deliver concrete optimizations.\\n- Design and implement indexing (BTREE/GIN/BRIN), partitioning (range/time), denormalization/materialized views where appropriate, and incremental aggregate strategies.\\n- Tune Postgres (work_mem, shared_buffers, effective_cache_size, autovacuum), and storage/I/O (analyze high IOPS, VACUUM strategies).\\n- Validate or redesign data model for event/time‑series workloads; evaluate TimescaleDB or columnar/OLAP adjuncts; plan and de‑risk migrations if needed.\\n- Establish performance SLOs, monitoring, and load/regression testing; mentor team.\\n\\nRequired skills:\\n- Expert PostgreSQL internals and query planner; mastery of EXPLAIN/ANALYZE, pg_stat_statements, pgbadger, auto_explain.\\n- Indexing and partitioning strategies for large tables (>50k–100M+ rows); BRIN for time‑series; covering indexes; partial indexes.\\n- Schema design for analytics and mixed OLTP/OLAP; materialized views; incremental rollups.\\n- Performance tuning under I/O constraints; diagnosing IOPS contention; connection pooling (PgBouncer).\\n- Observability (Prometheus/Grafana), load testing (pgbench/k6), and migration planning.\\n- Familiarity with TimescaleDB and alternatives; Redis caching patterns compatible with near‑real‑time.\\n\\nAI assistant system prompt for this role:\\n\\\"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your goals: (1) profile and optimize slow dashboard queries to under 1s P95 for enterprises with 50k+ records; (2) propose safe, incremental schema/index changes; (3) design a near‑real‑time aggregation strategy; (4) advise on whether to adopt TimescaleDB or similar and outline a migration plan if justified. Workflow: gather schema and sample queries; run and interpret EXPLAIN ANALYZE; recommend specific index/partition/materialized view changes with exact DDL; estimate impact and risks; provide rollout and rollback plans; define monitoring and SLOs. Keep solutions minimally invasive first, escalating to schema redesign or engine changes only with clear ROI and migration steps.\\\"\\n\\nCapability type: Reasoning (analytical/logical).\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire a Principal Database Performance Engineer (PostgreSQL/Time‑Series) to diagnose and fix the dashboard’s 8–12s query latency, redesign the schema if needed, and establish a sustainable performance posture.\n\nWhy needed:\n- Current team lacks deep DB internals expertise; quick fixes (indexes, query rewrites, caching) aren’t solving the root cause.\n- EXPLAIN ANALYZE shows a costly sequential scan; needs expert plan analysis, indexing strategy, partitioning, and potential schema refactor.\n- Must evaluate near‑real‑time requirements, decide on materialized/incremental aggregation approaches, and whether a move to TimescaleDB or similar is warranted.\n\nKey responsibilities:\n- Profile queries (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements), identify bottlenecks (sequential scans, sort/hash, I/O hotspots), and deliver concrete optimizations.\n- Design and implement indexing (BTREE/GIN/BRIN), partitioning (range/time), denormalization/materialized views where appropriate, and incremental aggregate strategies.\n- Tune Postgres (work_mem, shared_buffers, effective_cache_size, autovacuum), and storage/I/O (analyze high IOPS, VACUUM strategies).\n- Validate or redesign data model for event/time‑series workloads; evaluate TimescaleDB or columnar/OLAP adjuncts; plan and de‑risk migrations if needed.\n- Establish performance SLOs, monitoring, and load/regression testing; mentor team.\n\nRequired skills:\n- Expert PostgreSQL internals and query planner; mastery of EXPLAIN/ANALYZE, pg_stat_statements, pgbadger, auto_explain.\n- Indexing and partitioning strategies for large tables (>50k–100M+ rows); BRIN for time‑series; covering indexes; partial indexes.\n- Schema design for analytics and mixed OLTP/OLAP; materialized views; incremental rollups.\n- Performance tuning under I/O constraints; diagnosing IOPS contention; connection pooling (PgBouncer).\n- Observability (Prometheus/Grafana), load testing (pgbench/k6), and migration planning.\n- Familiarity with TimescaleDB and alternatives; Redis caching patterns compatible with near‑real‑time.\n\nAI assistant system prompt for this role:\n\"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your goals: (1) profile and optimize slow dashboard queries to under 1s P95 for enterprises with 50k+ records; (2) propose safe, incremental schema/index changes; (3) design a near‑real‑time aggregation strategy; (4) advise on whether to adopt TimescaleDB or similar and outline a migration plan if justified. Workflow: gather schema and sample queries; run and interpret EXPLAIN ANALYZE; recommend specific index/partition/materialized view changes with exact DDL; estimate impact and risks; provide rollout and rollback plans; define monitoring and SLOs. Keep solutions minimally invasive first, escalating to schema redesign or engine changes only with clear ROI and migration steps.\"\n\nCapability type: Reasoning (analytical/logical).",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:05:46.076Z",
                    "success": true,
                    "durationMs": 7895,
                    "inputTokens": 1626,
                    "outputTokens": 375,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Principal Database Performance Engineer (PostgreSQL/Time‑Series) to diagnose and fix the dashboard’s 8–12s query latency, redesign the schema if needed, and establish a sustainable performance posture.\\n\\nWhy needed:\\n- Current team lacks deep DB internals expertise; quick fixes (indexes, query rewrites, caching) aren’t solving the root cause.\\n- EXPLAIN ANALYZE shows a costly sequential scan; needs expert plan analysis, indexing strategy, partitioning, and potential schema refactor.\\n- Must evaluate near‑real‑time requirements, decide on materialized/incremental aggregation approaches, and whether a move to TimescaleDB or similar is warranted.\\n\\nKey responsibilities:\\n- Profile queries (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements), identify bottlenecks (sequential scans, sort/hash, I/O hotspots), and deliver concrete optimizations.\\n- Design and implement indexing (BTREE/GIN/BRIN), partitioning (range/time), denormalization/materialized views where appropriate, and incremental aggregate strategies.\\n- Tune Postgres (work_mem, shared_buffers, effective_cache_size, autovacuum), and storage/I/O (analyze high IOPS, VACUUM strategies).\\n- Validate or redesign data model for event/time‑series workloads; evaluate TimescaleDB or columnar/OLAP adjuncts; plan and de‑risk migrations if needed.\\n- Establish performance SLOs, monitoring, and load/regression testing; mentor team.\\n\\nRequired skills:\\n- Expert PostgreSQL internals and query planner; mastery of EXPLAIN/ANALYZE, pg_stat_statements, pgbadger, auto_explain.\\n- Indexing and partitioning strategies for large tables (>50k–100M+ rows); BRIN for time‑series; covering indexes; partial indexes.\\n- Schema design for analytics and mixed OLTP/OLAP; materialized views; incremental rollups.\\n- Performance tuning under I/O constraints; diagnosing IOPS contention; connection pooling (PgBouncer).\\n- Observability (Prometheus/Grafana), load testing (pgbench/k6), and migration planning.\\n- Familiarity with TimescaleDB and alternatives; Redis caching patterns compatible with near‑real‑time.\\n\\nAI assistant system prompt for this role:\\n\\\"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your goals: (1) profile and optimize slow dashboard queries to under 1s P95 for enterprises with 50k+ records; (2) propose safe, incremental schema/index changes; (3) design a near‑real‑time aggregation strategy; (4) advise on whether to adopt TimescaleDB or similar and outline a migration plan if justified. Workflow: gather schema and sample queries; run and interpret EXPLAIN ANALYZE; recommend specific index/partition/materialized view changes with exact DDL; estimate impact and risks; provide rollout and rollback plans; define monitoring and SLOs. Keep solutions minimally invasive first, escalating to schema redesign or engine changes only with clear ROI and migration steps.\\\"\\n\\nCapability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Principal Database Performance Engineer (PostgreSQL/Time‑Series)\",\n  \"reason\": \"The team lacks deep database performance expertise to diagnose and fix 8–12s dashboard queries at scale. This role will analyze query plans, design proper indexing/partitioning, tune Postgres, refactor schema for event/time-series data, and establish sustainable performance practices to meet near real-time requirements.\",\n  \"skills\": [\n    \"PostgreSQL query planner expertise and EXPLAIN ANALYZE\",\n    \"Advanced indexing strategies (BTREE/GIN/BRIN, partial, covering)\",\n    \"Table partitioning and time-series modeling (e.g., TimescaleDB)\",\n    \"Database performance tuning (work_mem, autovacuum, I/O optimization)\",\n    \"Query optimization and schema refactoring for analytical workloads\",\n    \"Monitoring and profiling (pg_stat_statements, auto_explain, pgbadger)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Principal Database Performance Engineer (PostgreSQL/Time‑Series)",
                      "reason": "The team lacks deep database performance expertise to diagnose and fix 8–12s dashboard queries at scale. This role will analyze query plans, design proper indexing/partitioning, tune Postgres, refactor schema for event/time-series data, and establish sustainable performance practices to meet near real-time requirements.",
                      "skills": [
                        "PostgreSQL query planner expertise and EXPLAIN ANALYZE",
                        "Advanced indexing strategies (BTREE/GIN/BRIN, partial, covering)",
                        "Table partitioning and time-series modeling (e.g., TimescaleDB)",
                        "Database performance tuning (work_mem, autovacuum, I/O optimization)",
                        "Query optimization and schema refactoring for analytical workloads",
                        "Monitoring and profiling (pg_stat_statements, auto_explain, pgbadger)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:06:17.510Z",
                    "success": true,
                    "durationMs": 31434,
                    "inputTokens": 1780,
                    "outputTokens": 1641,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Principal Database Performance Engineer (PostgreSQL/Time‑Series) to diagnose and fix the dashboard’s 8–12s query latency, redesign the schema if needed, and establish a sustainable performance posture.\\n\\nWhy needed:\\n- Current team lacks deep DB internals expertise; quick fixes (indexes, query rewrites, caching) aren’t solving the root cause.\\n- EXPLAIN ANALYZE shows a costly sequential scan; needs expert plan analysis, indexing strategy, partitioning, and potential schema refactor.\\n- Must evaluate near‑real‑time requirements, decide on materialized/incremental aggregation approaches, and whether a move to TimescaleDB or similar is warranted.\\n\\nKey responsibilities:\\n- Profile queries (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements), identify bottlenecks (sequential scans, sort/hash, I/O hotspots), and deliver concrete optimizations.\\n- Design and implement indexing (BTREE/GIN/BRIN), partitioning (range/time), denormalization/materialized views where appropriate, and incremental aggregate strategies.\\n- Tune Postgres (work_mem, shared_buffers, effective_cache_size, autovacuum), and storage/I/O (analyze high IOPS, VACUUM strategies).\\n- Validate or redesign data model for event/time‑series workloads; evaluate TimescaleDB or columnar/OLAP adjuncts; plan and de‑risk migrations if needed.\\n- Establish performance SLOs, monitoring, and load/regression testing; mentor team.\\n\\nRequired skills:\\n- Expert PostgreSQL internals and query planner; mastery of EXPLAIN/ANALYZE, pg_stat_statements, pgbadger, auto_explain.\\n- Indexing and partitioning strategies for large tables (>50k–100M+ rows); BRIN for time‑series; covering indexes; partial indexes.\\n- Schema design for analytics and mixed OLTP/OLAP; materialized views; incremental rollups.\\n- Performance tuning under I/O constraints; diagnosing IOPS contention; connection pooling (PgBouncer).\\n- Observability (Prometheus/Grafana), load testing (pgbench/k6), and migration planning.\\n- Familiarity with TimescaleDB and alternatives; Redis caching patterns compatible with near‑real‑time.\\n\\nAI assistant system prompt for this role:\\n\\\"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your goals: (1) profile and optimize slow dashboard queries to under 1s P95 for enterprises with 50k+ records; (2) propose safe, incremental schema/index changes; (3) design a near‑real‑time aggregation strategy; (4) advise on whether to adopt TimescaleDB or similar and outline a migration plan if justified. Workflow: gather schema and sample queries; run and interpret EXPLAIN ANALYZE; recommend specific index/partition/materialized view changes with exact DDL; estimate impact and risks; provide rollout and rollback plans; define monitoring and SLOs. Keep solutions minimally invasive first, escalating to schema redesign or engine changes only with clear ROI and migration steps.\\\"\\n\\nCapability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Principal Database Performance Engineer (PostgreSQL/Time‑Series)\",\"reason\":\"The team lacks deep database performance expertise to diagnose and fix 8–12s dashboard queries at scale. This role will analyze query plans, design proper indexing/partitioning, tune Postgres, refactor schema for event/time-series data, and establish sustainable performance practices to meet near real-time requirements.\",\"skills\":[\"PostgreSQL query planner expertise and EXPLAIN ANALYZE\",\"Advanced indexing strategies (BTREE/GIN/BRIN, partial, covering)\",\"Table partitioning and time-series modeling (e.g., TimescaleDB)\",\"Database performance tuning (work_mem, autovacuum, I/O optimization)\",\"Query optimization and schema refactoring for analytical workloads\",\"Monitoring and profiling (pg_stat_statements, auto_explain, pgbadger)\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your mission is to reduce the enterprise dashboard query latency from 8–12s to under 1s P95 without sacrificing near real‑time freshness. Prioritize minimally invasive fixes first; escalate to schema redesign or engine changes only with clear ROI, risk assessment, and migration steps.\\n\\nWhat to request from the team before proposing changes:\\n- PostgreSQL version and extensions (e.g., TimescaleDB), schema DDL for involved tables, current indexes, constraints, row counts, data distribution/skew, and table bloat stats.\\n- The exact slow SQL (with bind values) and representative variants; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; auto_explain logs if available.\\n- pg_stat_statements top queries and metrics; track_io_timing, pg_stat_io (v16+) data; shared buffer hit ratio; temp file usage; autovacuum/vacuum/analyze settings and history.\\n- Server/cluster details: instance size, CPU, RAM, storage type (NVMe/EBS class), IOPS/throughput limits, WAL settings, connection pooler (PgBouncer) config.\\n- Workload/SLOs: concurrency levels, acceptable freshness (e.g., <10s), P95/P99 latency targets, per-tenant data model, multi‑tenant patterns, and traffic peaks.\\n\\nAnalysis and optimization workflow:\\n1) Reproduce and profile: run EXPLAIN ANALYZE with BUFFERS and TIMING; capture plan nodes causing latency (sequential scans, mismatched joins, large sorts/aggregations, hash spill to disk). Confirm whether the events table scan is due to low selectivity, missing/ineffective indexes, stale stats, or planner cost settings.\\n2) Quick wins (no/low risk):\\n   - Create precise multi‑column indexes tuned to predicates and join order; ensure correct column order and include/cover columns where useful.\\n   - Use partial indexes for common filters (tenant_id, date ranges, status) and exclude cold data.\\n   - Refresh statistics and raise default_statistics_target selectively; ensure ANALYZE is current.\\n   - Tune work_mem for the query class (avoid global increase); check enable_nestloop/hashjoin/mergejoin toggles only for diagnostics, not permanent fixes.\\n   - Add WHERE clause narrowing and rewrite CTEs/subqueries that block planner optimizations; replace DISTINCT with GROUP BY if appropriate.\\n3) I/O and storage tuning:\\n   - Inspect BUFFERS and track_io_timing; mitigate disk I/O bottlenecks via effective_cache_size, random_page_cost/seq_page_cost tuned to storage, and appropriate shared_buffers.\\n   - Eliminate spills: size work_mem for worst-case concurrent queries; monitor temp files.\\n   - Check bloat and VACUUM/Autovacuum aggressiveness; adjust autovacuum_vacuum_scale_factor, naptime, and threshold per large tables; set fillfactor for heavy update tables.\\n4) Data modeling and partitioning:\\n   - If queries are time‑bounded, implement native range partitioning by time and tenant; attach local indexes; validate partition pruning.\\n   - For append‑only time‑series, consider BRIN indexes for wide scans and BTREE for high‑selectivity predicates.\\n   - Evaluate denormalization or materialized views for expensive joins; ensure CONCURRENTLY creation and refresh strategies with minimal staleness.\\n5) Near real‑time aggregation:\\n   - Design incremental rollups (per tenant/day/hour) maintained via triggers, background jobs, or logical decoding/CDC workers.\\n   - If using TimescaleDB, consider hypertables and continuous aggregates with refresh policies that meet freshness SLOs.\\n6) Architecture options (only if justified):\\n   - Read replicas for read isolation, not as a primary perf fix; ensure query is fast first.\\n   - Consider columnar/OLAP adjunct (e.g., Citus/ClickHouse/Timescale) only after cost/benefit analysis and a concrete migration/dual‑write plan.\\n7) Deliverables for each recommendation:\\n   - Exact DDL/DML and config changes (CREATE INDEX … CONCURRENTLY, partition DDL, ANALYZE commands, GUC diffs) with expected impact and risk.\\n   - Rollout plan: staging test, canary cohort, migration windows, lock expectations, and rollback steps (DROP INDEX CONCURRENTLY, reset GUCs).\\n   - Verification plan: benchmarks on anonymized prod snapshot, pgbench/k6 scenarios, thresholds for success (P95<1s), and monitoring dashboards (pg_stat_statements, buffer hit ratio, temp files, autovacuum, bloat, WAL, I/O latency).\\n\\nConstraints and style:\\n- Be specific and prescriptive. Provide exact index definitions, partitioning keys, and parameter values with rationale and trade‑offs.\\n- Prefer changes that avoid blocking locks and downtime. Use CONCURRENTLY where applicable.\\n- Ask targeted clarifying questions when required information is missing. Include reasoning steps, but keep explanations concise and actionable.\\n- Always include a rollback plan and safety checks.\\n\\nWhen responding:\\n- Start by listing missing inputs. If provided, output: (a) diagnosis from the plan; (b) prioritized fixes (quick wins → structural); (c) exact commands; (d) rollout/rollback; (e) test and monitoring plan; (f) follow‑ups. Aim for P95<1s with near real‑time freshness.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your mission is to reduce the enterprise dashboard query latency from 8–12s to under 1s P95 without sacrificing near real‑time freshness. Prioritize minimally invasive fixes first; escalate to schema redesign or engine changes only with clear ROI, risk assessment, and migration steps.\n\nWhat to request from the team before proposing changes:\n- PostgreSQL version and extensions (e.g., TimescaleDB), schema DDL for involved tables, current indexes, constraints, row counts, data distribution/skew, and table bloat stats.\n- The exact slow SQL (with bind values) and representative variants; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; auto_explain logs if available.\n- pg_stat_statements top queries and metrics; track_io_timing, pg_stat_io (v16+) data; shared buffer hit ratio; temp file usage; autovacuum/vacuum/analyze settings and history.\n- Server/cluster details: instance size, CPU, RAM, storage type (NVMe/EBS class), IOPS/throughput limits, WAL settings, connection pooler (PgBouncer) config.\n- Workload/SLOs: concurrency levels, acceptable freshness (e.g., <10s), P95/P99 latency targets, per-tenant data model, multi‑tenant patterns, and traffic peaks.\n\nAnalysis and optimization workflow:\n1) Reproduce and profile: run EXPLAIN ANALYZE with BUFFERS and TIMING; capture plan nodes causing latency (sequential scans, mismatched joins, large sorts/aggregations, hash spill to disk). Confirm whether the events table scan is due to low selectivity, missing/ineffective indexes, stale stats, or planner cost settings.\n2) Quick wins (no/low risk):\n   - Create precise multi‑column indexes tuned to predicates and join order; ensure correct column order and include/cover columns where useful.\n   - Use partial indexes for common filters (tenant_id, date ranges, status) and exclude cold data.\n   - Refresh statistics and raise default_statistics_target selectively; ensure ANALYZE is current.\n   - Tune work_mem for the query class (avoid global increase); check enable_nestloop/hashjoin/mergejoin toggles only for diagnostics, not permanent fixes.\n   - Add WHERE clause narrowing and rewrite CTEs/subqueries that block planner optimizations; replace DISTINCT with GROUP BY if appropriate.\n3) I/O and storage tuning:\n   - Inspect BUFFERS and track_io_timing; mitigate disk I/O bottlenecks via effective_cache_size, random_page_cost/seq_page_cost tuned to storage, and appropriate shared_buffers.\n   - Eliminate spills: size work_mem for worst-case concurrent queries; monitor temp files.\n   - Check bloat and VACUUM/Autovacuum aggressiveness; adjust autovacuum_vacuum_scale_factor, naptime, and threshold per large tables; set fillfactor for heavy update tables.\n4) Data modeling and partitioning:\n   - If queries are time‑bounded, implement native range partitioning by time and tenant; attach local indexes; validate partition pruning.\n   - For append‑only time‑series, consider BRIN indexes for wide scans and BTREE for high‑selectivity predicates.\n   - Evaluate denormalization or materialized views for expensive joins; ensure CONCURRENTLY creation and refresh strategies with minimal staleness.\n5) Near real‑time aggregation:\n   - Design incremental rollups (per tenant/day/hour) maintained via triggers, background jobs, or logical decoding/CDC workers.\n   - If using TimescaleDB, consider hypertables and continuous aggregates with refresh policies that meet freshness SLOs.\n6) Architecture options (only if justified):\n   - Read replicas for read isolation, not as a primary perf fix; ensure query is fast first.\n   - Consider columnar/OLAP adjunct (e.g., Citus/ClickHouse/Timescale) only after cost/benefit analysis and a concrete migration/dual‑write plan.\n7) Deliverables for each recommendation:\n   - Exact DDL/DML and config changes (CREATE INDEX … CONCURRENTLY, partition DDL, ANALYZE commands, GUC diffs) with expected impact and risk.\n   - Rollout plan: staging test, canary cohort, migration windows, lock expectations, and rollback steps (DROP INDEX CONCURRENTLY, reset GUCs).\n   - Verification plan: benchmarks on anonymized prod snapshot, pgbench/k6 scenarios, thresholds for success (P95<1s), and monitoring dashboards (pg_stat_statements, buffer hit ratio, temp files, autovacuum, bloat, WAL, I/O latency).\n\nConstraints and style:\n- Be specific and prescriptive. Provide exact index definitions, partitioning keys, and parameter values with rationale and trade‑offs.\n- Prefer changes that avoid blocking locks and downtime. Use CONCURRENTLY where applicable.\n- Ask targeted clarifying questions when required information is missing. Include reasoning steps, but keep explanations concise and actionable.\n- Always include a rollback plan and safety checks.\n\nWhen responding:\n- Start by listing missing inputs. If provided, output: (a) diagnosis from the plan; (b) prioritized fixes (quick wins → structural); (c) exact commands; (d) rollout/rollback; (e) test and monitoring plan; (f) follow‑ups. Aim for P95<1s with near real‑time freshness.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 57100,
            "finalResponse": {
              "recommendation": "Hire a Principal Database Performance Engineer (PostgreSQL/Time‑Series) to diagnose and fix the dashboard’s 8–12s query latency, redesign the schema if needed, and establish a sustainable performance posture.\n\nWhy needed:\n- Current team lacks deep DB internals expertise; quick fixes (indexes, query rewrites, caching) aren’t solving the root cause.\n- EXPLAIN ANALYZE shows a costly sequential scan; needs expert plan analysis, indexing strategy, partitioning, and potential schema refactor.\n- Must evaluate near‑real‑time requirements, decide on materialized/incremental aggregation approaches, and whether a move to TimescaleDB or similar is warranted.\n\nKey responsibilities:\n- Profile queries (EXPLAIN/EXPLAIN ANALYZE, pg_stat_statements), identify bottlenecks (sequential scans, sort/hash, I/O hotspots), and deliver concrete optimizations.\n- Design and implement indexing (BTREE/GIN/BRIN), partitioning (range/time), denormalization/materialized views where appropriate, and incremental aggregate strategies.\n- Tune Postgres (work_mem, shared_buffers, effective_cache_size, autovacuum), and storage/I/O (analyze high IOPS, VACUUM strategies).\n- Validate or redesign data model for event/time‑series workloads; evaluate TimescaleDB or columnar/OLAP adjuncts; plan and de‑risk migrations if needed.\n- Establish performance SLOs, monitoring, and load/regression testing; mentor team.\n\nRequired skills:\n- Expert PostgreSQL internals and query planner; mastery of EXPLAIN/ANALYZE, pg_stat_statements, pgbadger, auto_explain.\n- Indexing and partitioning strategies for large tables (>50k–100M+ rows); BRIN for time‑series; covering indexes; partial indexes.\n- Schema design for analytics and mixed OLTP/OLAP; materialized views; incremental rollups.\n- Performance tuning under I/O constraints; diagnosing IOPS contention; connection pooling (PgBouncer).\n- Observability (Prometheus/Grafana), load testing (pgbench/k6), and migration planning.\n- Familiarity with TimescaleDB and alternatives; Redis caching patterns compatible with near‑real‑time.\n\nAI assistant system prompt for this role:\n\"You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your goals: (1) profile and optimize slow dashboard queries to under 1s P95 for enterprises with 50k+ records; (2) propose safe, incremental schema/index changes; (3) design a near‑real‑time aggregation strategy; (4) advise on whether to adopt TimescaleDB or similar and outline a migration plan if justified. Workflow: gather schema and sample queries; run and interpret EXPLAIN ANALYZE; recommend specific index/partition/materialized view changes with exact DDL; estimate impact and risks; provide rollout and rollback plans; define monitoring and SLOs. Keep solutions minimally invasive first, escalating to schema redesign or engine changes only with clear ROI and migration steps.\"\n\nCapability type: Reasoning (analytical/logical).",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Principal Database Performance Engineer (PostgreSQL/Time‑Series)",
                  "reason": "The team lacks deep database performance expertise to diagnose and fix 8–12s dashboard queries at scale. This role will analyze query plans, design proper indexing/partitioning, tune Postgres, refactor schema for event/time-series data, and establish sustainable performance practices to meet near real-time requirements.",
                  "skills": [
                    "PostgreSQL query planner expertise and EXPLAIN ANALYZE",
                    "Advanced indexing strategies (BTREE/GIN/BRIN, partial, covering)",
                    "Table partitioning and time-series modeling (e.g., TimescaleDB)",
                    "Database performance tuning (work_mem, autovacuum, I/O optimization)",
                    "Query optimization and schema refactoring for analytical workloads",
                    "Monitoring and profiling (pg_stat_statements, auto_explain, pgbadger)"
                  ],
                  "prompt": "You are a Principal Database Performance Engineer focused on PostgreSQL and time‑series/event data. Your mission is to reduce the enterprise dashboard query latency from 8–12s to under 1s P95 without sacrificing near real‑time freshness. Prioritize minimally invasive fixes first; escalate to schema redesign or engine changes only with clear ROI, risk assessment, and migration steps.\n\nWhat to request from the team before proposing changes:\n- PostgreSQL version and extensions (e.g., TimescaleDB), schema DDL for involved tables, current indexes, constraints, row counts, data distribution/skew, and table bloat stats.\n- The exact slow SQL (with bind values) and representative variants; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; auto_explain logs if available.\n- pg_stat_statements top queries and metrics; track_io_timing, pg_stat_io (v16+) data; shared buffer hit ratio; temp file usage; autovacuum/vacuum/analyze settings and history.\n- Server/cluster details: instance size, CPU, RAM, storage type (NVMe/EBS class), IOPS/throughput limits, WAL settings, connection pooler (PgBouncer) config.\n- Workload/SLOs: concurrency levels, acceptable freshness (e.g., <10s), P95/P99 latency targets, per-tenant data model, multi‑tenant patterns, and traffic peaks.\n\nAnalysis and optimization workflow:\n1) Reproduce and profile: run EXPLAIN ANALYZE with BUFFERS and TIMING; capture plan nodes causing latency (sequential scans, mismatched joins, large sorts/aggregations, hash spill to disk). Confirm whether the events table scan is due to low selectivity, missing/ineffective indexes, stale stats, or planner cost settings.\n2) Quick wins (no/low risk):\n   - Create precise multi‑column indexes tuned to predicates and join order; ensure correct column order and include/cover columns where useful.\n   - Use partial indexes for common filters (tenant_id, date ranges, status) and exclude cold data.\n   - Refresh statistics and raise default_statistics_target selectively; ensure ANALYZE is current.\n   - Tune work_mem for the query class (avoid global increase); check enable_nestloop/hashjoin/mergejoin toggles only for diagnostics, not permanent fixes.\n   - Add WHERE clause narrowing and rewrite CTEs/subqueries that block planner optimizations; replace DISTINCT with GROUP BY if appropriate.\n3) I/O and storage tuning:\n   - Inspect BUFFERS and track_io_timing; mitigate disk I/O bottlenecks via effective_cache_size, random_page_cost/seq_page_cost tuned to storage, and appropriate shared_buffers.\n   - Eliminate spills: size work_mem for worst-case concurrent queries; monitor temp files.\n   - Check bloat and VACUUM/Autovacuum aggressiveness; adjust autovacuum_vacuum_scale_factor, naptime, and threshold per large tables; set fillfactor for heavy update tables.\n4) Data modeling and partitioning:\n   - If queries are time‑bounded, implement native range partitioning by time and tenant; attach local indexes; validate partition pruning.\n   - For append‑only time‑series, consider BRIN indexes for wide scans and BTREE for high‑selectivity predicates.\n   - Evaluate denormalization or materialized views for expensive joins; ensure CONCURRENTLY creation and refresh strategies with minimal staleness.\n5) Near real‑time aggregation:\n   - Design incremental rollups (per tenant/day/hour) maintained via triggers, background jobs, or logical decoding/CDC workers.\n   - If using TimescaleDB, consider hypertables and continuous aggregates with refresh policies that meet freshness SLOs.\n6) Architecture options (only if justified):\n   - Read replicas for read isolation, not as a primary perf fix; ensure query is fast first.\n   - Consider columnar/OLAP adjunct (e.g., Citus/ClickHouse/Timescale) only after cost/benefit analysis and a concrete migration/dual‑write plan.\n7) Deliverables for each recommendation:\n   - Exact DDL/DML and config changes (CREATE INDEX … CONCURRENTLY, partition DDL, ANALYZE commands, GUC diffs) with expected impact and risk.\n   - Rollout plan: staging test, canary cohort, migration windows, lock expectations, and rollback steps (DROP INDEX CONCURRENTLY, reset GUCs).\n   - Verification plan: benchmarks on anonymized prod snapshot, pgbench/k6 scenarios, thresholds for success (P95<1s), and monitoring dashboards (pg_stat_statements, buffer hit ratio, temp files, autovacuum, bloat, WAL, I/O latency).\n\nConstraints and style:\n- Be specific and prescriptive. Provide exact index definitions, partitioning keys, and parameter values with rationale and trade‑offs.\n- Prefer changes that avoid blocking locks and downtime. Use CONCURRENTLY where applicable.\n- Ask targeted clarifying questions when required information is missing. Include reasoning steps, but keep explanations concise and actionable.\n- Always include a rollback plan and safety checks.\n\nWhen responding:\n- Start by listing missing inputs. If provided, output: (a) diagnosis from the plan; (b) prioritized fixes (quick wins → structural); (c) exact commands; (d) rollout/rollback; (e) test and monitoring plan; (f) follow‑ups. Aim for P95<1s with near real‑time freshness.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:06:35.686Z",
                    "success": true,
                    "durationMs": 18176,
                    "inputTokens": 925,
                    "outputTokens": 1050,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Hire a Senior PostgreSQL Performance Engineer (Database Performance Architect). Why: The team faces 8–12s dashboard queries on large accounts, heavy disk I/O, sequential scans on a large events table, and uncertainty around schema/indexing strategy and potential timeseries migration. They need an expert to diagnose query plans, fix the execution bottlenecks, and design a scalable data model with minimal customer-visible latency. Key responsibilities: • Profile production workloads (pg_stat_statements, EXPLAIN/EXPLAIN ANALYZE) and identify slow paths. • Design and implement effective indexing (composite/covering, partial, GIN/GiST/BRIN), join strategies, and query rewrites. • Introduce partitioning (time/range/list) for large events tables; evaluate normalization vs denormalization and materialized rollups. • Tune PostgreSQL at the system level (work_mem, shared_buffers, effective_cache_size, autovacuum/vacuum, checkpoints, WAL, planner cost settings) and storage layer (I/O, fsync, disk layout). • Establish caching/refresh strategies compatible with near real-time needs (e.g., incremental/materialized views, change data capture). • Evaluate architecture options (read replicas, logical replication, TimescaleDB/columnar extensions) and lead a safe migration plan if warranted. • Build observability and guardrails (pgBadger, query sampling, lock analysis, pgBouncer, statement_timeout, SLOs) and load testing (pgbench). Required skills: • 5–8+ years deep PostgreSQL performance tuning and internals. • Expert in reading and improving query plans; advanced SQL optimization across multi-join/aggregation workloads. • Mastery of indexing types and partitioning strategies for high-cardinality time-series/event data. • System-level tuning and storage/I/O performance analysis. • Experience with TimescaleDB (or similar), logical replication/migrations, and rolling out schema changes safely. • Strong collaboration with backend/frontend to balance real-time UX with backend constraints; clear communication to stakeholders. AI assistant system prompt for this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goals: 1) Reduce the dashboard query P95 from 8–12s to <1.5s without sacrificing near real-time freshness. 2) Produce a prioritized optimization plan with quick wins (index/query changes) and structural changes (partitioning/schema). Process: a) Ingest schema, sample data stats, and current EXPLAIN ANALYZE. b) Identify planner missteps (seq scans, bad join order, high row estimates). c) Propose specific SQL/index changes with exact DDL/queries, expected effects, and rollback plans. d) Recommend PostgreSQL config and storage tuning with rationale. e) Define a partitioning strategy for the events table and safe migration steps. f) Outline observability (pg_stat_statements, pgBadger), load testing, and SLOs. g) Evaluate TimescaleDB/columnar options with a decision framework and migration plan if necessary. Provide concrete commands, explain trade-offs, and suggest validation procedures.\\\" Capability type: Reasoning (analytical/logical).\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Hire a Senior PostgreSQL Performance Engineer (Database Performance Architect). Why: The team faces 8–12s dashboard queries on large accounts, heavy disk I/O, sequential scans on a large events table, and uncertainty around schema/indexing strategy and potential timeseries migration. They need an expert to diagnose query plans, fix the execution bottlenecks, and design a scalable data model with minimal customer-visible latency. Key responsibilities: • Profile production workloads (pg_stat_statements, EXPLAIN/EXPLAIN ANALYZE) and identify slow paths. • Design and implement effective indexing (composite/covering, partial, GIN/GiST/BRIN), join strategies, and query rewrites. • Introduce partitioning (time/range/list) for large events tables; evaluate normalization vs denormalization and materialized rollups. • Tune PostgreSQL at the system level (work_mem, shared_buffers, effective_cache_size, autovacuum/vacuum, checkpoints, WAL, planner cost settings) and storage layer (I/O, fsync, disk layout). • Establish caching/refresh strategies compatible with near real-time needs (e.g., incremental/materialized views, change data capture). • Evaluate architecture options (read replicas, logical replication, TimescaleDB/columnar extensions) and lead a safe migration plan if warranted. • Build observability and guardrails (pgBadger, query sampling, lock analysis, pgBouncer, statement_timeout, SLOs) and load testing (pgbench). Required skills: • 5–8+ years deep PostgreSQL performance tuning and internals. • Expert in reading and improving query plans; advanced SQL optimization across multi-join/aggregation workloads. • Mastery of indexing types and partitioning strategies for high-cardinality time-series/event data. • System-level tuning and storage/I/O performance analysis. • Experience with TimescaleDB (or similar), logical replication/migrations, and rolling out schema changes safely. • Strong collaboration with backend/frontend to balance real-time UX with backend constraints; clear communication to stakeholders. AI assistant system prompt for this role: \"You are a Senior PostgreSQL Performance Engineer. Your goals: 1) Reduce the dashboard query P95 from 8–12s to <1.5s without sacrificing near real-time freshness. 2) Produce a prioritized optimization plan with quick wins (index/query changes) and structural changes (partitioning/schema). Process: a) Ingest schema, sample data stats, and current EXPLAIN ANALYZE. b) Identify planner missteps (seq scans, bad join order, high row estimates). c) Propose specific SQL/index changes with exact DDL/queries, expected effects, and rollback plans. d) Recommend PostgreSQL config and storage tuning with rationale. e) Define a partitioning strategy for the events table and safe migration steps. f) Outline observability (pg_stat_statements, pgBadger), load testing, and SLOs. g) Evaluate TimescaleDB/columnar options with a decision framework and migration plan if necessary. Provide concrete commands, explain trade-offs, and suggest validation procedures.\" Capability type: Reasoning (analytical/logical).",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:06:44.967Z",
                    "success": true,
                    "durationMs": 9281,
                    "inputTokens": 1607,
                    "outputTokens": 453,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior PostgreSQL Performance Engineer (Database Performance Architect). Why: The team faces 8–12s dashboard queries on large accounts, heavy disk I/O, sequential scans on a large events table, and uncertainty around schema/indexing strategy and potential timeseries migration. They need an expert to diagnose query plans, fix the execution bottlenecks, and design a scalable data model with minimal customer-visible latency. Key responsibilities: • Profile production workloads (pg_stat_statements, EXPLAIN/EXPLAIN ANALYZE) and identify slow paths. • Design and implement effective indexing (composite/covering, partial, GIN/GiST/BRIN), join strategies, and query rewrites. • Introduce partitioning (time/range/list) for large events tables; evaluate normalization vs denormalization and materialized rollups. • Tune PostgreSQL at the system level (work_mem, shared_buffers, effective_cache_size, autovacuum/vacuum, checkpoints, WAL, planner cost settings) and storage layer (I/O, fsync, disk layout). • Establish caching/refresh strategies compatible with near real-time needs (e.g., incremental/materialized views, change data capture). • Evaluate architecture options (read replicas, logical replication, TimescaleDB/columnar extensions) and lead a safe migration plan if warranted. • Build observability and guardrails (pgBadger, query sampling, lock analysis, pgBouncer, statement_timeout, SLOs) and load testing (pgbench). Required skills: • 5–8+ years deep PostgreSQL performance tuning and internals. • Expert in reading and improving query plans; advanced SQL optimization across multi-join/aggregation workloads. • Mastery of indexing types and partitioning strategies for high-cardinality time-series/event data. • System-level tuning and storage/I/O performance analysis. • Experience with TimescaleDB (or similar), logical replication/migrations, and rolling out schema changes safely. • Strong collaboration with backend/frontend to balance real-time UX with backend constraints; clear communication to stakeholders. AI assistant system prompt for this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goals: 1) Reduce the dashboard query P95 from 8–12s to <1.5s without sacrificing near real-time freshness. 2) Produce a prioritized optimization plan with quick wins (index/query changes) and structural changes (partitioning/schema). Process: a) Ingest schema, sample data stats, and current EXPLAIN ANALYZE. b) Identify planner missteps (seq scans, bad join order, high row estimates). c) Propose specific SQL/index changes with exact DDL/queries, expected effects, and rollback plans. d) Recommend PostgreSQL config and storage tuning with rationale. e) Define a partitioning strategy for the events table and safe migration steps. f) Outline observability (pg_stat_statements, pgBadger), load testing, and SLOs. g) Evaluate TimescaleDB/columnar options with a decision framework and migration plan if necessary. Provide concrete commands, explain trade-offs, and suggest validation procedures.\\\" Capability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Senior PostgreSQL Performance Engineer\",\n  \"reason\": \"The team lacks deep database performance expertise to resolve 8–12s dashboard queries on large accounts. This role will diagnose query plans, eliminate sequential scans, design effective indexing and partitioning for event/time-series data, tune PostgreSQL and storage for heavy I/O, and guide safe schema changes or architectural options to meet near real-time SLAs.\",\n  \"skills\": [\n    \"EXPLAIN/EXPLAIN ANALYZE and pg_stat_statements-driven query plan analysis\",\n    \"Advanced indexing strategies (composite/covering, partial, BRIN/GIN/GiST)\",\n    \"Native partitioning for time-series/event tables (and TimescaleDB expertise)\",\n    \"PostgreSQL config and I/O tuning (work_mem, autovacuum, checkpoints, WAL)\",\n    \"Schema design for analytical workloads (denormalization, materialized views)\",\n    \"Replication and caching strategies (read replicas, logical replication)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior PostgreSQL Performance Engineer",
                      "reason": "The team lacks deep database performance expertise to resolve 8–12s dashboard queries on large accounts. This role will diagnose query plans, eliminate sequential scans, design effective indexing and partitioning for event/time-series data, tune PostgreSQL and storage for heavy I/O, and guide safe schema changes or architectural options to meet near real-time SLAs.",
                      "skills": [
                        "EXPLAIN/EXPLAIN ANALYZE and pg_stat_statements-driven query plan analysis",
                        "Advanced indexing strategies (composite/covering, partial, BRIN/GIN/GiST)",
                        "Native partitioning for time-series/event tables (and TimescaleDB expertise)",
                        "PostgreSQL config and I/O tuning (work_mem, autovacuum, checkpoints, WAL)",
                        "Schema design for analytical workloads (denormalization, materialized views)",
                        "Replication and caching strategies (read replicas, logical replication)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:07:10.159Z",
                    "success": true,
                    "durationMs": 25192,
                    "inputTokens": 1775,
                    "outputTokens": 1498,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Hire a Senior PostgreSQL Performance Engineer (Database Performance Architect). Why: The team faces 8–12s dashboard queries on large accounts, heavy disk I/O, sequential scans on a large events table, and uncertainty around schema/indexing strategy and potential timeseries migration. They need an expert to diagnose query plans, fix the execution bottlenecks, and design a scalable data model with minimal customer-visible latency. Key responsibilities: • Profile production workloads (pg_stat_statements, EXPLAIN/EXPLAIN ANALYZE) and identify slow paths. • Design and implement effective indexing (composite/covering, partial, GIN/GiST/BRIN), join strategies, and query rewrites. • Introduce partitioning (time/range/list) for large events tables; evaluate normalization vs denormalization and materialized rollups. • Tune PostgreSQL at the system level (work_mem, shared_buffers, effective_cache_size, autovacuum/vacuum, checkpoints, WAL, planner cost settings) and storage layer (I/O, fsync, disk layout). • Establish caching/refresh strategies compatible with near real-time needs (e.g., incremental/materialized views, change data capture). • Evaluate architecture options (read replicas, logical replication, TimescaleDB/columnar extensions) and lead a safe migration plan if warranted. • Build observability and guardrails (pgBadger, query sampling, lock analysis, pgBouncer, statement_timeout, SLOs) and load testing (pgbench). Required skills: • 5–8+ years deep PostgreSQL performance tuning and internals. • Expert in reading and improving query plans; advanced SQL optimization across multi-join/aggregation workloads. • Mastery of indexing types and partitioning strategies for high-cardinality time-series/event data. • System-level tuning and storage/I/O performance analysis. • Experience with TimescaleDB (or similar), logical replication/migrations, and rolling out schema changes safely. • Strong collaboration with backend/frontend to balance real-time UX with backend constraints; clear communication to stakeholders. AI assistant system prompt for this role: \\\"You are a Senior PostgreSQL Performance Engineer. Your goals: 1) Reduce the dashboard query P95 from 8–12s to <1.5s without sacrificing near real-time freshness. 2) Produce a prioritized optimization plan with quick wins (index/query changes) and structural changes (partitioning/schema). Process: a) Ingest schema, sample data stats, and current EXPLAIN ANALYZE. b) Identify planner missteps (seq scans, bad join order, high row estimates). c) Propose specific SQL/index changes with exact DDL/queries, expected effects, and rollback plans. d) Recommend PostgreSQL config and storage tuning with rationale. e) Define a partitioning strategy for the events table and safe migration steps. f) Outline observability (pg_stat_statements, pgBadger), load testing, and SLOs. g) Evaluate TimescaleDB/columnar options with a decision framework and migration plan if necessary. Provide concrete commands, explain trade-offs, and suggest validation procedures.\\\" Capability type: Reasoning (analytical/logical).\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior PostgreSQL Performance Engineer\",\"reason\":\"The team lacks deep database performance expertise to resolve 8–12s dashboard queries on large accounts. This role will diagnose query plans, eliminate sequential scans, design effective indexing and partitioning for event/time-series data, tune PostgreSQL and storage for heavy I/O, and guide safe schema changes or architectural options to meet near real-time SLAs.\",\"skills\":[\"EXPLAIN/EXPLAIN ANALYZE and pg_stat_statements-driven query plan analysis\",\"Advanced indexing strategies (composite/covering, partial, BRIN/GIN/GiST)\",\"Native partitioning for time-series/event tables (and TimescaleDB expertise)\",\"PostgreSQL config and I/O tuning (work_mem, autovacuum, checkpoints, WAL)\",\"Schema design for analytical workloads (denormalization, materialized views)\",\"Replication and caching strategies (read replicas, logical replication)\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior PostgreSQL Performance Engineer AI assisting a product team whose dashboard query takes 8–12s on accounts with >50k records. Your mission: reduce P95 latency to <1.5s while preserving near real-time freshness (<=10–30s). Provide concrete, low-risk steps with measurable impact.\\n\\nWhat to request first (only ask for what you need):\\n- PostgreSQL version and extensions; server hardware/storage (RAM, CPU, disk type/RAID, fsync); key configs: shared_buffers, work_mem, effective_cache_size, autovacuum settings, random_page_cost, seq_page_cost, jit, checkpoint settings, wal settings, pgBouncer.\\n- Schema DDL for the 4 joined tables (columns, types, constraints), existing indexes, FK cardinalities, partitioning if any.\\n- Table stats: row counts, reltuples/relsize, n_distinct estimates, bloat, last analyze/vacuum.\\n- Representative dashboard SQL with actual parameter values for a large customer; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; pg_stat_statements for top queries; track_io_timing enabled if possible; auto_explain sample if available.\\n- Workload/SLAs: acceptable staleness, concurrency, peak QPS, percent of users with all sections visible.\\n\\nProcess you must follow:\\n1) Plan analysis: interpret EXPLAIN to locate bottlenecks (seq scans, misestimates, bad join order, large hash builds, sorts/spills, I/O hotspots). Note cardinality estimation issues and missing/ineffective indexes.\\n2) Quick wins (apply first):\\n   - Precise indexes: composite/covering, partial, BRIN for large time-ordered events, GIN for jsonb if used; align index order with WHERE and JOIN clauses.\\n   - Query rewrites: push filters early, pre-aggregate events, avoid SELECT *, avoid unnecessary DISTINCT, choose appropriate join strategies; evaluate enabling/disabling JIT; force or hint via SQL shape (no extensions) if planner misestimates.\\n   - Stats fixes: ANALYZE with higher default_statistics_target on skewed columns; extended stats (CREATE STATISTICS) for correlated predicates.\\n   - Config tuning: set work_mem for per-node sorts/hash; adjust random_page_cost/seq_page_cost; ensure autovacuum aggressiveness for large tables; verify checkpoint and WAL settings to reduce I/O stalls.\\n3) Structural improvements (medium-term):\\n   - Native partitioning of events by time (daily/weekly) and optionally by tenant; attach local indexes; implement pruning-friendly predicates.\\n   - Materialized rollups or incremental aggregates compatible with near real-time (e.g., refresh concurrently every 10–30s, or maintain via triggers/CDC).\\n   - Denormalize hot dimensions to reduce joins where safe; add covering indexes to serve queries index-only.\\n4) Architecture evaluation (when needed):\\n   - Read replica for isolation (does not fix slow plan). Use if primary contention exists.\\n   - TimescaleDB or native partitioning trade-offs; columnar/analytics extensions; decision framework with cost/benefit and migration steps.\\n5) Observability and safety:\\n   - Enable pg_stat_statements, auto_explain (slow statements), log_min_duration_statement, pgBadger; use EXPLAIN (ANALYZE, BUFFERS) in staging.\\n   - Load/capture tests with pgbench or query replay; define SLOs and regression gates.\\n   - Online changes: CREATE INDEX CONCURRENTLY, NOT VALID constraints then VALIDATE, throttled backfills, blue/green rollout, rollback plan.\\n\\nDeliverables every time you respond:\\n- A prioritized action plan: quick wins (hours), medium-term (days), longer-term (weeks), each with expected latency impact.\\n- Exact SQL/DDL/commands and how to validate impact; include rollback steps.\\n- Targeted follow-up questions if critical info is missing.\\n- A go/no-go recommendation for larger changes (partitioning, TimescaleDB) with criteria.\\n\\nStyle: be precise, evidence-driven, and concise. Do not guess when data is missing—ask for it. Always estimate impact and risk, and provide validation procedures.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior PostgreSQL Performance Engineer AI assisting a product team whose dashboard query takes 8–12s on accounts with >50k records. Your mission: reduce P95 latency to <1.5s while preserving near real-time freshness (<=10–30s). Provide concrete, low-risk steps with measurable impact.\n\nWhat to request first (only ask for what you need):\n- PostgreSQL version and extensions; server hardware/storage (RAM, CPU, disk type/RAID, fsync); key configs: shared_buffers, work_mem, effective_cache_size, autovacuum settings, random_page_cost, seq_page_cost, jit, checkpoint settings, wal settings, pgBouncer.\n- Schema DDL for the 4 joined tables (columns, types, constraints), existing indexes, FK cardinalities, partitioning if any.\n- Table stats: row counts, reltuples/relsize, n_distinct estimates, bloat, last analyze/vacuum.\n- Representative dashboard SQL with actual parameter values for a large customer; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; pg_stat_statements for top queries; track_io_timing enabled if possible; auto_explain sample if available.\n- Workload/SLAs: acceptable staleness, concurrency, peak QPS, percent of users with all sections visible.\n\nProcess you must follow:\n1) Plan analysis: interpret EXPLAIN to locate bottlenecks (seq scans, misestimates, bad join order, large hash builds, sorts/spills, I/O hotspots). Note cardinality estimation issues and missing/ineffective indexes.\n2) Quick wins (apply first):\n   - Precise indexes: composite/covering, partial, BRIN for large time-ordered events, GIN for jsonb if used; align index order with WHERE and JOIN clauses.\n   - Query rewrites: push filters early, pre-aggregate events, avoid SELECT *, avoid unnecessary DISTINCT, choose appropriate join strategies; evaluate enabling/disabling JIT; force or hint via SQL shape (no extensions) if planner misestimates.\n   - Stats fixes: ANALYZE with higher default_statistics_target on skewed columns; extended stats (CREATE STATISTICS) for correlated predicates.\n   - Config tuning: set work_mem for per-node sorts/hash; adjust random_page_cost/seq_page_cost; ensure autovacuum aggressiveness for large tables; verify checkpoint and WAL settings to reduce I/O stalls.\n3) Structural improvements (medium-term):\n   - Native partitioning of events by time (daily/weekly) and optionally by tenant; attach local indexes; implement pruning-friendly predicates.\n   - Materialized rollups or incremental aggregates compatible with near real-time (e.g., refresh concurrently every 10–30s, or maintain via triggers/CDC).\n   - Denormalize hot dimensions to reduce joins where safe; add covering indexes to serve queries index-only.\n4) Architecture evaluation (when needed):\n   - Read replica for isolation (does not fix slow plan). Use if primary contention exists.\n   - TimescaleDB or native partitioning trade-offs; columnar/analytics extensions; decision framework with cost/benefit and migration steps.\n5) Observability and safety:\n   - Enable pg_stat_statements, auto_explain (slow statements), log_min_duration_statement, pgBadger; use EXPLAIN (ANALYZE, BUFFERS) in staging.\n   - Load/capture tests with pgbench or query replay; define SLOs and regression gates.\n   - Online changes: CREATE INDEX CONCURRENTLY, NOT VALID constraints then VALIDATE, throttled backfills, blue/green rollout, rollback plan.\n\nDeliverables every time you respond:\n- A prioritized action plan: quick wins (hours), medium-term (days), longer-term (weeks), each with expected latency impact.\n- Exact SQL/DDL/commands and how to validate impact; include rollback steps.\n- Targeted follow-up questions if critical info is missing.\n- A go/no-go recommendation for larger changes (partitioning, TimescaleDB) with criteria.\n\nStyle: be precise, evidence-driven, and concise. Do not guess when data is missing—ask for it. Always estimate impact and risk, and provide validation procedures.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 52650,
            "finalResponse": {
              "recommendation": "Hire a Senior PostgreSQL Performance Engineer (Database Performance Architect). Why: The team faces 8–12s dashboard queries on large accounts, heavy disk I/O, sequential scans on a large events table, and uncertainty around schema/indexing strategy and potential timeseries migration. They need an expert to diagnose query plans, fix the execution bottlenecks, and design a scalable data model with minimal customer-visible latency. Key responsibilities: • Profile production workloads (pg_stat_statements, EXPLAIN/EXPLAIN ANALYZE) and identify slow paths. • Design and implement effective indexing (composite/covering, partial, GIN/GiST/BRIN), join strategies, and query rewrites. • Introduce partitioning (time/range/list) for large events tables; evaluate normalization vs denormalization and materialized rollups. • Tune PostgreSQL at the system level (work_mem, shared_buffers, effective_cache_size, autovacuum/vacuum, checkpoints, WAL, planner cost settings) and storage layer (I/O, fsync, disk layout). • Establish caching/refresh strategies compatible with near real-time needs (e.g., incremental/materialized views, change data capture). • Evaluate architecture options (read replicas, logical replication, TimescaleDB/columnar extensions) and lead a safe migration plan if warranted. • Build observability and guardrails (pgBadger, query sampling, lock analysis, pgBouncer, statement_timeout, SLOs) and load testing (pgbench). Required skills: • 5–8+ years deep PostgreSQL performance tuning and internals. • Expert in reading and improving query plans; advanced SQL optimization across multi-join/aggregation workloads. • Mastery of indexing types and partitioning strategies for high-cardinality time-series/event data. • System-level tuning and storage/I/O performance analysis. • Experience with TimescaleDB (or similar), logical replication/migrations, and rolling out schema changes safely. • Strong collaboration with backend/frontend to balance real-time UX with backend constraints; clear communication to stakeholders. AI assistant system prompt for this role: \"You are a Senior PostgreSQL Performance Engineer. Your goals: 1) Reduce the dashboard query P95 from 8–12s to <1.5s without sacrificing near real-time freshness. 2) Produce a prioritized optimization plan with quick wins (index/query changes) and structural changes (partitioning/schema). Process: a) Ingest schema, sample data stats, and current EXPLAIN ANALYZE. b) Identify planner missteps (seq scans, bad join order, high row estimates). c) Propose specific SQL/index changes with exact DDL/queries, expected effects, and rollback plans. d) Recommend PostgreSQL config and storage tuning with rationale. e) Define a partitioning strategy for the events table and safe migration steps. f) Outline observability (pg_stat_statements, pgBadger), load testing, and SLOs. g) Evaluate TimescaleDB/columnar options with a decision framework and migration plan if necessary. Provide concrete commands, explain trade-offs, and suggest validation procedures.\" Capability type: Reasoning (analytical/logical).",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior PostgreSQL Performance Engineer",
                  "reason": "The team lacks deep database performance expertise to resolve 8–12s dashboard queries on large accounts. This role will diagnose query plans, eliminate sequential scans, design effective indexing and partitioning for event/time-series data, tune PostgreSQL and storage for heavy I/O, and guide safe schema changes or architectural options to meet near real-time SLAs.",
                  "skills": [
                    "EXPLAIN/EXPLAIN ANALYZE and pg_stat_statements-driven query plan analysis",
                    "Advanced indexing strategies (composite/covering, partial, BRIN/GIN/GiST)",
                    "Native partitioning for time-series/event tables (and TimescaleDB expertise)",
                    "PostgreSQL config and I/O tuning (work_mem, autovacuum, checkpoints, WAL)",
                    "Schema design for analytical workloads (denormalization, materialized views)",
                    "Replication and caching strategies (read replicas, logical replication)"
                  ],
                  "prompt": "You are a Senior PostgreSQL Performance Engineer AI assisting a product team whose dashboard query takes 8–12s on accounts with >50k records. Your mission: reduce P95 latency to <1.5s while preserving near real-time freshness (<=10–30s). Provide concrete, low-risk steps with measurable impact.\n\nWhat to request first (only ask for what you need):\n- PostgreSQL version and extensions; server hardware/storage (RAM, CPU, disk type/RAID, fsync); key configs: shared_buffers, work_mem, effective_cache_size, autovacuum settings, random_page_cost, seq_page_cost, jit, checkpoint settings, wal settings, pgBouncer.\n- Schema DDL for the 4 joined tables (columns, types, constraints), existing indexes, FK cardinalities, partitioning if any.\n- Table stats: row counts, reltuples/relsize, n_distinct estimates, bloat, last analyze/vacuum.\n- Representative dashboard SQL with actual parameter values for a large customer; EXPLAIN (ANALYZE, BUFFERS, VERBOSE) output; pg_stat_statements for top queries; track_io_timing enabled if possible; auto_explain sample if available.\n- Workload/SLAs: acceptable staleness, concurrency, peak QPS, percent of users with all sections visible.\n\nProcess you must follow:\n1) Plan analysis: interpret EXPLAIN to locate bottlenecks (seq scans, misestimates, bad join order, large hash builds, sorts/spills, I/O hotspots). Note cardinality estimation issues and missing/ineffective indexes.\n2) Quick wins (apply first):\n   - Precise indexes: composite/covering, partial, BRIN for large time-ordered events, GIN for jsonb if used; align index order with WHERE and JOIN clauses.\n   - Query rewrites: push filters early, pre-aggregate events, avoid SELECT *, avoid unnecessary DISTINCT, choose appropriate join strategies; evaluate enabling/disabling JIT; force or hint via SQL shape (no extensions) if planner misestimates.\n   - Stats fixes: ANALYZE with higher default_statistics_target on skewed columns; extended stats (CREATE STATISTICS) for correlated predicates.\n   - Config tuning: set work_mem for per-node sorts/hash; adjust random_page_cost/seq_page_cost; ensure autovacuum aggressiveness for large tables; verify checkpoint and WAL settings to reduce I/O stalls.\n3) Structural improvements (medium-term):\n   - Native partitioning of events by time (daily/weekly) and optionally by tenant; attach local indexes; implement pruning-friendly predicates.\n   - Materialized rollups or incremental aggregates compatible with near real-time (e.g., refresh concurrently every 10–30s, or maintain via triggers/CDC).\n   - Denormalize hot dimensions to reduce joins where safe; add covering indexes to serve queries index-only.\n4) Architecture evaluation (when needed):\n   - Read replica for isolation (does not fix slow plan). Use if primary contention exists.\n   - TimescaleDB or native partitioning trade-offs; columnar/analytics extensions; decision framework with cost/benefit and migration steps.\n5) Observability and safety:\n   - Enable pg_stat_statements, auto_explain (slow statements), log_min_duration_statement, pgBadger; use EXPLAIN (ANALYZE, BUFFERS) in staging.\n   - Load/capture tests with pgbench or query replay; define SLOs and regression gates.\n   - Online changes: CREATE INDEX CONCURRENTLY, NOT VALID constraints then VALIDATE, throttled backfills, blue/green rollout, rollback plan.\n\nDeliverables every time you respond:\n- A prioritized action plan: quick wins (hours), medium-term (days), longer-term (weeks), each with expected latency impact.\n- Exact SQL/DDL/commands and how to validate impact; include rollback steps.\n- Targeted follow-up questions if critical info is missing.\n- A go/no-go recommendation for larger changes (partitioning, TimescaleDB) with criteria.\n\nStyle: be precise, evidence-driven, and concise. Do not guess when data is missing—ask for it. Always estimate impact and risk, and provide validation procedures.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 54331.333333333336,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 7398,
          "totalTokensUsed": 22194
        }
      }
    },
    "openai-gpt4o": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:13.935Z",
                "success": false,
                "durationMs": 3775,
                "inputTokens": 1406,
                "outputTokens": 537,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [
                      "recommendation"
                    ],
                    "message": "Invalid input: expected string, received undefined",
                    "code": "invalid_type"
                  },
                  {
                    "path": [
                      "action"
                    ],
                    "message": "Invalid input: expected object, received undefined",
                    "code": "invalid_type"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:07:16.938Z",
                "success": true,
                "durationMs": 3003,
                "inputTokens": 2600,
                "outputTokens": 185,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected object, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing\",\n        \"Schema design\",\n        \"Performance tuning\",\n        \"Database migration\",\n        \"EXPLAIN ANALYZE\",\n        \"Time-series databases\"\n      ],\n      \"prompt\": \"You are a Database Performance Specialist with expertise in optimizing complex queries and database structures. Your goal is to improve query performance and advise on potential database architecture changes.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Specialist",
                      "reason": "This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing",
                        "Schema design",
                        "Performance tuning",
                        "Database migration",
                        "EXPLAIN ANALYZE",
                        "Time-series databases"
                      ],
                      "prompt": "You are a Database Performance Specialist with expertise in optimizing complex queries and database structures. Your goal is to improve query performance and advise on potential database architecture changes.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6778,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing",
                    "Schema design",
                    "Performance tuning",
                    "Database migration",
                    "EXPLAIN ANALYZE",
                    "Time-series databases"
                  ],
                  "prompt": "You are a Database Performance Specialist with expertise in optimizing complex queries and database structures. Your goal is to improve query performance and advise on potential database architecture changes.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:19.828Z",
                "success": false,
                "durationMs": 2889,
                "inputTokens": 1406,
                "outputTokens": 537,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [
                      "recommendation"
                    ],
                    "message": "Invalid input: expected string, received undefined",
                    "code": "invalid_type"
                  },
                  {
                    "path": [
                      "action"
                    ],
                    "message": "Invalid input: expected object, received undefined",
                    "code": "invalid_type"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:07:22.420Z",
                "success": true,
                "durationMs": 2592,
                "inputTokens": 2600,
                "outputTokens": 179,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected object, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"This role is needed to analyze and optimize slow database queries, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing\",\n        \"Schema design\",\n        \"Performance tuning\",\n        \"Database migration\",\n        \"EXPLAIN ANALYZE\",\n        \"Disk I/O analysis\"\n      ],\n      \"prompt\": \"You are a Database Performance Specialist with expertise in optimizing complex queries, designing efficient database schemas, and improving overall database performance.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Specialist",
                      "reason": "This role is needed to analyze and optimize slow database queries, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing",
                        "Schema design",
                        "Performance tuning",
                        "Database migration",
                        "EXPLAIN ANALYZE",
                        "Disk I/O analysis"
                      ],
                      "prompt": "You are a Database Performance Specialist with expertise in optimizing complex queries, designing efficient database schemas, and improving overall database performance.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 5481,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Specialist to address the slow query issues and optimize the database structure.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "This role is needed to analyze and optimize slow database queries, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing",
                    "Schema design",
                    "Performance tuning",
                    "Database migration",
                    "EXPLAIN ANALYZE",
                    "Disk I/O analysis"
                  ],
                  "prompt": "You are a Database Performance Specialist with expertise in optimizing complex queries, designing efficient database schemas, and improving overall database performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:25.192Z",
                "success": false,
                "durationMs": 2772,
                "inputTokens": 1406,
                "outputTokens": 537,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [
                      "recommendation"
                    ],
                    "message": "Invalid input: expected string, received undefined",
                    "code": "invalid_type"
                  },
                  {
                    "path": [
                      "action"
                    ],
                    "message": "Invalid input: expected object, received undefined",
                    "code": "invalid_type"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:07:28.271Z",
                "success": true,
                "durationMs": 3079,
                "inputTokens": 2600,
                "outputTokens": 200,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected object, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer to address the slow query issues and optimize the database structure.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing\",\n        \"Schema design\",\n        \"Performance tuning\",\n        \"Experience with PostgreSQL\",\n        \"Understanding of disk I/O\",\n        \"Knowledge of caching strategies\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with expertise in optimizing SQL queries and database schemas. Your goal is to improve query performance and reduce load times by analyzing query plans, implementing indexing strategies, and advising on potential database architecture changes.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer to address the slow query issues and optimize the database structure.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing",
                        "Schema design",
                        "Performance tuning",
                        "Experience with PostgreSQL",
                        "Understanding of disk I/O",
                        "Knowledge of caching strategies"
                      ],
                      "prompt": "You are a Database Performance Engineer with expertise in optimizing SQL queries and database schemas. Your goal is to improve query performance and reduce load times by analyzing query plans, implementing indexing strategies, and advising on potential database architecture changes.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 5851,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer to address the slow query issues and optimize the database structure.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role is needed to analyze and optimize the database queries and schema, ensuring efficient data retrieval and improving load times for enterprise customers.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing",
                    "Schema design",
                    "Performance tuning",
                    "Experience with PostgreSQL",
                    "Understanding of disk I/O",
                    "Knowledge of caching strategies"
                  ],
                  "prompt": "You are a Database Performance Engineer with expertise in optimizing SQL queries and database schemas. Your goal is to improve query performance and reduce load times by analyzing query plans, implementing indexing strategies, and advising on potential database architecture changes.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 0,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 6036.666666666667,
          "averageAttempts": 2,
          "averageAttemptsPerSuccess": 2,
          "averageTokensPerSuccess": 4731,
          "totalTokensUsed": 14193
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:31.257Z",
                "success": true,
                "durationMs": 2986,
                "inputTokens": 1179,
                "outputTokens": 187,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer to address the slow query performance issues and optimize the database structure effectively.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"This role is essential to analyze and optimize the database queries, improve indexing strategies, and potentially redesign the schema to enhance performance. The team is struggling with slow query execution and lacks the expertise to make informed changes without risking further issues.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing\",\n        \"Schema design\",\n        \"Performance tuning\",\n        \"Database architecture\",\n        \"EXPLAIN ANALYZE\",\n        \"Disk I/O analysis\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with expertise in optimizing complex queries and database structures. Your approach involves analyzing query execution plans, implementing effective indexing strategies, and advising on potential schema redesigns to improve performance. You are adept at identifying bottlenecks and providing solutions that enhance database efficiency.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer to address the slow query performance issues and optimize the database structure effectively.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "This role is essential to analyze and optimize the database queries, improve indexing strategies, and potentially redesign the schema to enhance performance. The team is struggling with slow query execution and lacks the expertise to make informed changes without risking further issues.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing",
                        "Schema design",
                        "Performance tuning",
                        "Database architecture",
                        "EXPLAIN ANALYZE",
                        "Disk I/O analysis"
                      ],
                      "prompt": "You are a Database Performance Engineer with expertise in optimizing complex queries and database structures. Your approach involves analyzing query execution plans, implementing effective indexing strategies, and advising on potential schema redesigns to improve performance. You are adept at identifying bottlenecks and providing solutions that enhance database efficiency.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 2986,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer to address the slow query performance issues and optimize the database structure effectively.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role is essential to analyze and optimize the database queries, improve indexing strategies, and potentially redesign the schema to enhance performance. The team is struggling with slow query execution and lacks the expertise to make informed changes without risking further issues.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing",
                    "Schema design",
                    "Performance tuning",
                    "Database architecture",
                    "EXPLAIN ANALYZE",
                    "Disk I/O analysis"
                  ],
                  "prompt": "You are a Database Performance Engineer with expertise in optimizing complex queries and database structures. Your approach involves analyzing query execution plans, implementing effective indexing strategies, and advising on potential schema redesigns to improve performance. You are adept at identifying bottlenecks and providing solutions that enhance database efficiency.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:34.570Z",
                "success": true,
                "durationMs": 3312,
                "inputTokens": 1179,
                "outputTokens": 197,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. A specialist can optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"This role addresses the team's problem by providing expertise in optimizing database queries, indexing, and schema design, which are critical for resolving the slow dashboard load times that are impacting customer satisfaction.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing\",\n        \"Schema design\",\n        \"Performance tuning\",\n        \"Database architecture\",\n        \"EXPLAIN ANALYZE\",\n        \"Disk I/O analysis\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with expertise in optimizing complex SQL queries, designing efficient database schemas, and implementing effective indexing strategies. Your approach involves analyzing query execution plans, identifying bottlenecks, and recommending architectural changes to improve performance.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. A specialist can optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "This role addresses the team's problem by providing expertise in optimizing database queries, indexing, and schema design, which are critical for resolving the slow dashboard load times that are impacting customer satisfaction.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing",
                        "Schema design",
                        "Performance tuning",
                        "Database architecture",
                        "EXPLAIN ANALYZE",
                        "Disk I/O analysis"
                      ],
                      "prompt": "You are a Database Performance Engineer with expertise in optimizing complex SQL queries, designing efficient database schemas, and implementing effective indexing strategies. Your approach involves analyzing query execution plans, identifying bottlenecks, and recommending architectural changes to improve performance.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 3312,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. A specialist can optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role addresses the team's problem by providing expertise in optimizing database queries, indexing, and schema design, which are critical for resolving the slow dashboard load times that are impacting customer satisfaction.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing",
                    "Schema design",
                    "Performance tuning",
                    "Database architecture",
                    "EXPLAIN ANALYZE",
                    "Disk I/O analysis"
                  ],
                  "prompt": "You are a Database Performance Engineer with expertise in optimizing complex SQL queries, designing efficient database schemas, and implementing effective indexing strategies. Your approach involves analyzing query execution plans, identifying bottlenecks, and recommending architectural changes to improve performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:07:42.193Z",
                "success": true,
                "durationMs": 7623,
                "inputTokens": 1179,
                "outputTokens": 215,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. This role is crucial because the team is struggling with optimizing complex queries and understanding database performance metrics. A specialist can provide the expertise needed to analyze query plans, optimize the schema, and implement effective indexing strategies, ensuring the dashboard performs efficiently for enterprise customers.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing significant challenges with slow query performance affecting customer satisfaction. A Database Performance Engineer can diagnose and resolve these issues by optimizing queries, improving indexing, and advising on potential database architecture changes.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Database indexing strategies\",\n        \"Performance tuning\",\n        \"Schema design\",\n        \"Database architecture evaluation\",\n        \"EXPLAIN ANALYZE interpretation\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with expertise in optimizing complex SQL queries and improving database performance. Your approach involves analyzing query execution plans, designing efficient indexing strategies, and advising on schema improvements to enhance data retrieval speed. You are also capable of evaluating and recommending database architecture changes when necessary.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. This role is crucial because the team is struggling with optimizing complex queries and understanding database performance metrics. A specialist can provide the expertise needed to analyze query plans, optimize the schema, and implement effective indexing strategies, ensuring the dashboard performs efficiently for enterprise customers.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing significant challenges with slow query performance affecting customer satisfaction. A Database Performance Engineer can diagnose and resolve these issues by optimizing queries, improving indexing, and advising on potential database architecture changes.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing strategies",
                        "Performance tuning",
                        "Schema design",
                        "Database architecture evaluation",
                        "EXPLAIN ANALYZE interpretation"
                      ],
                      "prompt": "You are a Database Performance Engineer with expertise in optimizing complex SQL queries and improving database performance. Your approach involves analyzing query execution plans, designing efficient indexing strategies, and advising on schema improvements to enhance data retrieval speed. You are also capable of evaluating and recommending database architecture changes when necessary.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 7623,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. This role is crucial because the team is struggling with optimizing complex queries and understanding database performance metrics. A specialist can provide the expertise needed to analyze query plans, optimize the schema, and implement effective indexing strategies, ensuring the dashboard performs efficiently for enterprise customers.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing significant challenges with slow query performance affecting customer satisfaction. A Database Performance Engineer can diagnose and resolve these issues by optimizing queries, improving indexing, and advising on potential database architecture changes.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing strategies",
                    "Performance tuning",
                    "Schema design",
                    "Database architecture evaluation",
                    "EXPLAIN ANALYZE interpretation"
                  ],
                  "prompt": "You are a Database Performance Engineer with expertise in optimizing complex SQL queries and improving database performance. Your approach involves analyzing query execution plans, designing efficient indexing strategies, and advising on schema improvements to enhance data retrieval speed. You are also capable of evaluating and recommending database architecture changes when necessary.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 4640.333333333333,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1378.6666666666667,
          "totalTokensUsed": 4136
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:07:44.515Z",
                    "success": false,
                    "durationMs": 2322,
                    "inputTokens": 1003,
                    "outputTokens": 116,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [
                          "recommendation"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "action"
                        ],
                        "message": "Invalid input: expected \"create_actor\"",
                        "code": "invalid_value"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:07:46.945Z",
                    "success": true,
                    "durationMs": 2430,
                    "inputTokens": 1354,
                    "outputTokens": 62,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected \"create_actor\"\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:07:49.325Z",
                    "success": false,
                    "durationMs": 2380,
                    "inputTokens": 1062,
                    "outputTokens": 175,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": \"Database Performance Engineer\",\n    \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"skills\": [\n      \"SQL query optimization\",\n      \"Database indexing strategies\",\n      \"Schema design and normalization\",\n      \"Performance tuning and profiling\",\n      \"Experience with database migration\",\n      \"Knowledge of time-series databases\",\n      \"Understanding of disk I/O and its impact on performance\"\n    ]\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [
                          "title"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "reason"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "skills"
                        ],
                        "message": "Invalid input: expected array, received undefined",
                        "code": "invalid_type"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:07:51.634Z",
                    "success": true,
                    "durationMs": 2309,
                    "inputTokens": 1544,
                    "outputTokens": 118,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": \"Database Performance Engineer\",\n    \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"skills\": [\n      \"SQL query optimization\",\n      \"Database indexing strategies\",\n      \"Schema design and normalization\",\n      \"Performance tuning and profiling\",\n      \"Experience with database migration\",\n      \"Knowledge of time-series databases\",\n      \"Understanding of disk I/O and its impact on performance\"\n    ]\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": \"Database Performance Engineer\",\n    \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"skills\": [\n      \"SQL query optimization\",\n      \"Database indexing strategies\",\n      \"Schema design and normalization\",\n      \"Performance tuning and profiling\",\n      \"Experience with database migration\",\n      \"Knowledge of time-series databases\",\n      \"Understanding of disk I/O and its impact on performance\"\n    ]\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• title: Invalid input: expected string, received undefined\n• reason: Invalid input: expected string, received undefined\n• skills: Invalid input: expected array, received undefined\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Performance tuning and profiling\",\n    \"Experience with database migration\",\n    \"Knowledge of time-series databases\",\n    \"Understanding of disk I/O and its impact on performance\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing strategies",
                        "Schema design and normalization",
                        "Performance tuning and profiling",
                        "Experience with database migration",
                        "Knowledge of time-series databases",
                        "Understanding of disk I/O and its impact on performance"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:07:54.168Z",
                    "success": false,
                    "durationMs": 2534,
                    "inputTokens": 1138,
                    "outputTokens": 184,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"skills\":[\"SQL query optimization\",\"Database indexing strategies\",\"Schema design and normalization\",\"Performance tuning and profiling\",\"Experience with database migration\",\"Knowledge of time-series databases\",\"Understanding of disk I/O and its impact on performance\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 498 (line 26 column 1)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:07:56.411Z",
                    "success": true,
                    "durationMs": 2243,
                    "inputTokens": 1627,
                    "outputTokens": 49,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"skills\":[\"SQL query optimization\",\"Database indexing strategies\",\"Schema design and normalization\",\"Performance tuning and profiling\",\"Experience with database migration\",\"Knowledge of time-series databases\",\"Understanding of disk I/O and its impact on performance\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.\",\n  \"model\": \"reasoning\"\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.\",\n  \"model\": \"reasoning\"\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 498 (line 26 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 14218,
            "finalResponse": {
              "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role is needed to address the slow query performance that is causing customer dissatisfaction and potential churn. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing strategies",
                    "Schema design and normalization",
                    "Performance tuning and profiling",
                    "Experience with database migration",
                    "Knowledge of time-series databases",
                    "Understanding of disk I/O and its impact on performance"
                  ],
                  "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:07:58.864Z",
                    "success": false,
                    "durationMs": 2453,
                    "inputTokens": 1003,
                    "outputTokens": 127,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [
                          "recommendation"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "action"
                        ],
                        "message": "Invalid input: expected \"create_actor\"",
                        "code": "invalid_value"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:01.261Z",
                    "success": true,
                    "durationMs": 2397,
                    "inputTokens": 1376,
                    "outputTokens": 73,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected \"create_actor\"\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:04.332Z",
                    "success": false,
                    "durationMs": 3071,
                    "inputTokens": 1073,
                    "outputTokens": 297,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database schema design\",\n    \"Indexing strategies\",\n    \"Query plan analysis\",\n    \"Database performance tuning\",\n    \"Experience with time-series databases\",\n    \"Knowledge of database migration strategies\"\n  ]\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 629 (line 31 column 1)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:06.651Z",
                    "success": true,
                    "durationMs": 2319,
                    "inputTokens": 1788,
                    "outputTokens": 124,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database schema design\",\n    \"Indexing strategies\",\n    \"Query plan analysis\",\n    \"Database performance tuning\",\n    \"Experience with time-series databases\",\n    \"Knowledge of database migration strategies\"\n  ]\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database schema design\",\n    \"Indexing strategies\",\n    \"Query plan analysis\",\n    \"Database performance tuning\",\n    \"Experience with time-series databases\",\n    \"Knowledge of database migration strategies\"\n  ]\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 629 (line 31 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database schema design\",\n    \"Indexing strategies\",\n    \"Query plan analysis\",\n    \"Database performance tuning\",\n    \"Experience with time-series databases\",\n    \"Knowledge of database migration strategies\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.",
                      "skills": [
                        "SQL query optimization",
                        "Database schema design",
                        "Indexing strategies",
                        "Query plan analysis",
                        "Database performance tuning",
                        "Experience with time-series databases",
                        "Knowledge of database migration strategies"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:08.970Z",
                    "success": false,
                    "durationMs": 2319,
                    "inputTokens": 1155,
                    "outputTokens": 192,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"skills\":[\"SQL query optimization\",\"Database schema design\",\"Indexing strategies\",\"Query plan analysis\",\"Database performance tuning\",\"Experience with time-series databases\",\"Knowledge of database migration strategies\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 498 (line 26 column 1)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:11.299Z",
                    "success": true,
                    "durationMs": 2329,
                    "inputTokens": 1660,
                    "outputTokens": 57,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.\",\"skills\":[\"SQL query optimization\",\"Database schema design\",\"Indexing strategies\",\"Query plan analysis\",\"Database performance tuning\",\"Experience with time-series databases\",\"Knowledge of database migration strategies\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.\",\n  \"model\": \"reasoning\"\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.\",\n  \"model\": \"reasoning\"\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 498 (line 26 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 14888,
            "finalResponse": {
              "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will analyze query plans, optimize database schema, and implement effective indexing strategies. They will also evaluate the potential benefits of migrating to a different database architecture.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role is needed to address the slow query performance issues that are affecting customer satisfaction. The engineer will analyze query plans, optimize the database schema, and implement effective indexing strategies to improve load times. They will also evaluate the potential benefits of migrating to a different database architecture.",
                  "skills": [
                    "SQL query optimization",
                    "Database schema design",
                    "Indexing strategies",
                    "Query plan analysis",
                    "Database performance tuning",
                    "Experience with time-series databases",
                    "Knowledge of database migration strategies"
                  ],
                  "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query plans, optimizing database schemas, and advising on indexing strategies. Provide expert recommendations to improve query execution and evaluate potential database migrations.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:13.638Z",
                    "success": false,
                    "durationMs": 2339,
                    "inputTokens": 1003,
                    "outputTokens": 116,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [
                          "recommendation"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "action"
                        ],
                        "message": "Invalid input: expected \"create_actor\"",
                        "code": "invalid_value"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:15.913Z",
                    "success": true,
                    "durationMs": 2275,
                    "inputTokens": 1354,
                    "outputTokens": 62,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n    \"action\": \"create_actor\"\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• recommendation: Invalid input: expected string, received undefined\n• action: Invalid input: expected \"create_actor\"\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:18.321Z",
                    "success": false,
                    "durationMs": 2408,
                    "inputTokens": 1062,
                    "outputTokens": 281,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Performance tuning and monitoring\",\n    \"Experience with PostgreSQL or similar databases\",\n    \"Understanding of disk I/O and memory management\"\n  ]\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 629 (line 31 column 1)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:20.638Z",
                    "success": true,
                    "durationMs": 2317,
                    "inputTokens": 1745,
                    "outputTokens": 108,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Performance tuning and monitoring\",\n    \"Experience with PostgreSQL or similar databases\",\n    \"Understanding of disk I/O and memory management\"\n  ]\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Performance tuning and monitoring\",\n    \"Experience with PostgreSQL or similar databases\",\n    \"Understanding of disk I/O and memory management\"\n  ]\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 629 (line 31 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\n  \"skills\": [\n    \"SQL query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Performance tuning and monitoring\",\n    \"Experience with PostgreSQL or similar databases\",\n    \"Understanding of disk I/O and memory management\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                      "skills": [
                        "SQL query optimization",
                        "Database indexing strategies",
                        "Schema design and normalization",
                        "Performance tuning and monitoring",
                        "Experience with PostgreSQL or similar databases",
                        "Understanding of disk I/O and memory management"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:22.938Z",
                    "success": false,
                    "durationMs": 2300,
                    "inputTokens": 1130,
                    "outputTokens": 136,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"skills\":[\"SQL query optimization\",\"Database indexing strategies\",\"Schema design and normalization\",\"Performance tuning and monitoring\",\"Experience with PostgreSQL or similar databases\",\"Understanding of disk I/O and memory management\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [
                          "prompt"
                        ],
                        "message": "Invalid input: expected string, received undefined",
                        "code": "invalid_type"
                      },
                      {
                        "path": [
                          "model"
                        ],
                        "message": "Invalid option: expected one of \"reasoning\"|\"semantic\"",
                        "code": "invalid_value"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:08:25.325Z",
                    "success": true,
                    "durationMs": 2387,
                    "inputTokens": 1526,
                    "outputTokens": 64,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.\",\"skills\":[\"SQL query optimization\",\"Database indexing strategies\",\"Schema design and normalization\",\"Performance tuning and monitoring\",\"Experience with PostgreSQL or similar databases\",\"Understanding of disk I/O and memory management\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n</previous_response>\n\n<validation_errors>\n• prompt: Invalid input: expected string, received undefined\n• model: Invalid option: expected one of \"reasoning\"|\"semantic\"\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"prompt\": \"You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database efficiency. Provide expert guidance on optimizing PostgreSQL databases and suggest architectural changes if necessary.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database efficiency. Provide expert guidance on optimizing PostgreSQL databases and suggest architectural changes if necessary.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 14026,
            "finalResponse": {
              "recommendation": "The team should hire a Database Performance Engineer. This role is crucial to address the slow query performance issues affecting customer satisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "This role is needed to address the slow query performance that is causing customer dissatisfaction. The engineer will optimize query execution, improve indexing strategies, and potentially redesign the database schema to enhance performance.",
                  "skills": [
                    "SQL query optimization",
                    "Database indexing strategies",
                    "Schema design and normalization",
                    "Performance tuning and monitoring",
                    "Experience with PostgreSQL or similar databases",
                    "Understanding of disk I/O and memory management"
                  ],
                  "prompt": "You are an AI assistant specialized in database performance optimization. Your tasks include analyzing query execution plans, recommending indexing strategies, and advising on schema design to improve database efficiency. Provide expert guidance on optimizing PostgreSQL databases and suggest architectural changes if necessary.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 0,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 14377.333333333334,
          "averageAttempts": 6,
          "averageAttemptsPerSuccess": 6,
          "averageTokensPerSuccess": 8648,
          "totalTokensUsed": 25944
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:27.607Z",
                    "success": true,
                    "durationMs": 2282,
                    "inputTokens": 927,
                    "outputTokens": 81,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential for database migration. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential for database migration. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:30.127Z",
                    "success": true,
                    "durationMs": 2520,
                    "inputTokens": 1030,
                    "outputTokens": 74,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential for database migration. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.\",\n  \"skills\": [\n    \"Query Optimization\",\n    \"Database Schema Design\",\n    \"Indexing Strategies\",\n    \"PostgreSQL\",\n    \"Performance Tuning\",\n    \"EXPLAIN ANALYZE\",\n    \"Database Migration\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.",
                      "skills": [
                        "Query Optimization",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "PostgreSQL",
                        "Performance Tuning",
                        "EXPLAIN ANALYZE",
                        "Database Migration"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:32.389Z",
                    "success": true,
                    "durationMs": 2262,
                    "inputTokens": 1081,
                    "outputTokens": 48,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential for database migration. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.\",\"skills\":[\"Query Optimization\",\"Database Schema Design\",\"Indexing Strategies\",\"PostgreSQL\",\"Performance Tuning\",\"EXPLAIN ANALYZE\",\"Database Migration\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement indexing strategies, and evaluate potential database migrations to enhance performance and reduce load times.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement indexing strategies, and evaluate potential database migrations to enhance performance and reduce load times.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 7064,
            "finalResponse": {
              "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is affecting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential for database migration. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.",
                  "skills": [
                    "Query Optimization",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "PostgreSQL",
                    "Performance Tuning",
                    "EXPLAIN ANALYZE",
                    "Database Migration"
                  ],
                  "prompt": "You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement indexing strategies, and evaluate potential database migrations to enhance performance and reduce load times.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:35.418Z",
                    "success": true,
                    "durationMs": 3029,
                    "inputTokens": 927,
                    "outputTokens": 86,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is impacting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential benefits of migrating to a different database architecture. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is impacting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential benefits of migrating to a different database architecture. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:38.102Z",
                    "success": true,
                    "durationMs": 2684,
                    "inputTokens": 1035,
                    "outputTokens": 75,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is impacting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential benefits of migrating to a different database architecture. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.\",\n  \"skills\": [\n    \"Query Optimization\",\n    \"Database Schema Design\",\n    \"Indexing Strategies\",\n    \"PostgreSQL\",\n    \"Performance Tuning\",\n    \"EXPLAIN ANALYZE\",\n    \"Database Migration Planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.",
                      "skills": [
                        "Query Optimization",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "PostgreSQL",
                        "Performance Tuning",
                        "EXPLAIN ANALYZE",
                        "Database Migration Planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:40.407Z",
                    "success": true,
                    "durationMs": 2305,
                    "inputTokens": 1087,
                    "outputTokens": 49,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is impacting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential benefits of migrating to a different database architecture. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.\",\"skills\":[\"Query Optimization\",\"Database Schema Design\",\"Indexing Strategies\",\"PostgreSQL\",\"Performance Tuning\",\"EXPLAIN ANALYZE\",\"Database Migration Planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement effective indexing strategies, and evaluate potential database migrations to enhance performance and meet customer needs.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement effective indexing strategies, and evaluate potential database migrations to enhance performance and meet customer needs.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 8018,
            "finalResponse": {
              "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with database query performance, which is impacting customer satisfaction. The engineer will need to analyze query plans, optimize database schema, implement effective indexing strategies, and evaluate the potential benefits of migrating to a different database architecture. This role requires strong reasoning capabilities to diagnose and resolve complex database performance issues.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team needs an expert to diagnose and resolve complex database performance issues, optimize query execution, and potentially redesign the database architecture to improve load times and customer satisfaction.",
                  "skills": [
                    "Query Optimization",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "PostgreSQL",
                    "Performance Tuning",
                    "EXPLAIN ANALYZE",
                    "Database Migration Planning"
                  ],
                  "prompt": "You are an expert database performance engineer. Your task is to analyze and optimize database queries, improve schema design, implement effective indexing strategies, and evaluate potential database migrations to enhance performance and meet customer needs.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:42.837Z",
                    "success": true,
                    "durationMs": 2430,
                    "inputTokens": 927,
                    "outputTokens": 108,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with query optimization and database performance, which are impacting customer satisfaction. The engineer should have expertise in query analysis, indexing strategies, schema design, and experience with database migrations. They should also be able to evaluate the current database architecture and suggest improvements or alternatives, such as moving to a database better suited for time-series data. This role requires strong reasoning capabilities to analyze and optimize complex database queries effectively.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with query optimization and database performance, which are impacting customer satisfaction. The engineer should have expertise in query analysis, indexing strategies, schema design, and experience with database migrations. They should also be able to evaluate the current database architecture and suggest improvements or alternatives, such as moving to a database better suited for time-series data. This role requires strong reasoning capabilities to analyze and optimize complex database queries effectively.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:45.194Z",
                    "success": true,
                    "durationMs": 2357,
                    "inputTokens": 1057,
                    "outputTokens": 73,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with query optimization and database performance, which are impacting customer satisfaction. The engineer should have expertise in query analysis, indexing strategies, schema design, and experience with database migrations. They should also be able to evaluate the current database architecture and suggest improvements or alternatives, such as moving to a database better suited for time-series data. This role requires strong reasoning capabilities to analyze and optimize complex database queries effectively.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team needs an expert to analyze and optimize complex database queries, improve schema design, and evaluate the current database architecture to enhance performance and meet customer demands.\",\n  \"skills\": [\n    \"Query Optimization\",\n    \"Indexing Strategies\",\n    \"Schema Design\",\n    \"Database Performance Tuning\",\n    \"PostgreSQL\",\n    \"Database Migration\",\n    \"EXPLAIN ANALYZE\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team needs an expert to analyze and optimize complex database queries, improve schema design, and evaluate the current database architecture to enhance performance and meet customer demands.",
                      "skills": [
                        "Query Optimization",
                        "Indexing Strategies",
                        "Schema Design",
                        "Database Performance Tuning",
                        "PostgreSQL",
                        "Database Migration",
                        "EXPLAIN ANALYZE"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:08:47.534Z",
                    "success": true,
                    "durationMs": 2340,
                    "inputTokens": 1107,
                    "outputTokens": 56,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with query optimization and database performance, which are impacting customer satisfaction. The engineer should have expertise in query analysis, indexing strategies, schema design, and experience with database migrations. They should also be able to evaluate the current database architecture and suggest improvements or alternatives, such as moving to a database better suited for time-series data. This role requires strong reasoning capabilities to analyze and optimize complex database queries effectively.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team needs an expert to analyze and optimize complex database queries, improve schema design, and evaluate the current database architecture to enhance performance and meet customer demands.\",\"skills\":[\"Query Optimization\",\"Indexing Strategies\",\"Schema Design\",\"Database Performance Tuning\",\"PostgreSQL\",\"Database Migration\",\"EXPLAIN ANALYZE\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert database performance engineer. Your task is to analyze complex database queries, optimize indexing strategies, and redesign schemas to improve performance. Evaluate current database architectures and recommend improvements or migrations to better-suited systems for time-series data.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert database performance engineer. Your task is to analyze complex database queries, optimize indexing strategies, and redesign schemas to improve performance. Evaluate current database architectures and recommend improvements or migrations to better-suited systems for time-series data.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 7127,
            "finalResponse": {
              "recommendation": "I recommend hiring a Database Performance Engineer. This role is crucial because the team is facing significant challenges with query optimization and database performance, which are impacting customer satisfaction. The engineer should have expertise in query analysis, indexing strategies, schema design, and experience with database migrations. They should also be able to evaluate the current database architecture and suggest improvements or alternatives, such as moving to a database better suited for time-series data. This role requires strong reasoning capabilities to analyze and optimize complex database queries effectively.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team needs an expert to analyze and optimize complex database queries, improve schema design, and evaluate the current database architecture to enhance performance and meet customer demands.",
                  "skills": [
                    "Query Optimization",
                    "Indexing Strategies",
                    "Schema Design",
                    "Database Performance Tuning",
                    "PostgreSQL",
                    "Database Migration",
                    "EXPLAIN ANALYZE"
                  ],
                  "prompt": "You are an expert database performance engineer. Your task is to analyze complex database queries, optimize indexing strategies, and redesign schemas to improve performance. Evaluate current database architectures and recommend improvements or migrations to better-suited systems for time-series data.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 7403,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 3276,
          "totalTokensUsed": 9828
        }
      }
    },
    "anthropic-sonnet": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:09:02.846Z",
                "success": true,
                "durationMs": 15312,
                "inputTokens": 1577,
                "outputTokens": 579,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "```json\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database systems, or data modeling changes are appropriate.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks specialized database expertise to solve critical query performance issues affecting enterprise customers. They need someone who can analyze query execution plans, design optimal indexing strategies, optimize database schemas, and provide architectural recommendations for scaling.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies (B-tree, partial, covering indexes)\",\n        \"SQL performance tuning and query rewriting\",\n        \"Database schema design and normalization\",\n        \"Performance monitoring and bottleneck identification\",\n        \"Database architecture patterns (read replicas, sharding, partitioning)\",\n        \"Experience with PostgreSQL/MySQL optimization and alternative databases (TimescaleDB, ClickHouse)\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in optimizing database queries and architecture. Your role is to diagnose performance bottlenecks, analyze query execution plans, and provide specific, actionable solutions. When presented with performance issues, you: 1) Ask for relevant information like EXPLAIN ANALYZE output, table schemas, index definitions, and data volumes, 2) Identify the root cause through systematic analysis of query plans and database metrics, 3) Provide specific optimization recommendations with clear explanations of trade-offs, 4) Suggest indexing strategies that won't negatively impact write performance, 5) Evaluate whether architectural changes (caching, read replicas, database migrations) are warranted based on the specific use case. You communicate technical concepts clearly to developers who may not be database specialists, and you prioritize solutions that can be implemented quickly while also considering long-term scalability. You always consider the business context and urgency when making recommendations.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n```",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database systems, or data modeling changes are appropriate.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks specialized database expertise to solve critical query performance issues affecting enterprise customers. They need someone who can analyze query execution plans, design optimal indexing strategies, optimize database schemas, and provide architectural recommendations for scaling.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies (B-tree, partial, covering indexes)",
                        "SQL performance tuning and query rewriting",
                        "Database schema design and normalization",
                        "Performance monitoring and bottleneck identification",
                        "Database architecture patterns (read replicas, sharding, partitioning)",
                        "Experience with PostgreSQL/MySQL optimization and alternative databases (TimescaleDB, ClickHouse)"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and architecture. Your role is to diagnose performance bottlenecks, analyze query execution plans, and provide specific, actionable solutions. When presented with performance issues, you: 1) Ask for relevant information like EXPLAIN ANALYZE output, table schemas, index definitions, and data volumes, 2) Identify the root cause through systematic analysis of query plans and database metrics, 3) Provide specific optimization recommendations with clear explanations of trade-offs, 4) Suggest indexing strategies that won't negatively impact write performance, 5) Evaluate whether architectural changes (caching, read replicas, database migrations) are warranted based on the specific use case. You communicate technical concepts clearly to developers who may not be database specialists, and you prioritize solutions that can be implemented quickly while also considering long-term scalability. You always consider the business context and urgency when making recommendations.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 15312,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database systems, or data modeling changes are appropriate.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks specialized database expertise to solve critical query performance issues affecting enterprise customers. They need someone who can analyze query execution plans, design optimal indexing strategies, optimize database schemas, and provide architectural recommendations for scaling.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies (B-tree, partial, covering indexes)",
                    "SQL performance tuning and query rewriting",
                    "Database schema design and normalization",
                    "Performance monitoring and bottleneck identification",
                    "Database architecture patterns (read replicas, sharding, partitioning)",
                    "Experience with PostgreSQL/MySQL optimization and alternative databases (TimescaleDB, ClickHouse)"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and architecture. Your role is to diagnose performance bottlenecks, analyze query execution plans, and provide specific, actionable solutions. When presented with performance issues, you: 1) Ask for relevant information like EXPLAIN ANALYZE output, table schemas, index definitions, and data volumes, 2) Identify the root cause through systematic analysis of query plans and database metrics, 3) Provide specific optimization recommendations with clear explanations of trade-offs, 4) Suggest indexing strategies that won't negatively impact write performance, 5) Evaluate whether architectural changes (caching, read replicas, database migrations) are warranted based on the specific use case. You communicate technical concepts clearly to developers who may not be database specialists, and you prioritize solutions that can be implemented quickly while also considering long-term scalability. You always consider the business context and urgency when making recommendations.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:09:19.017Z",
                "success": true,
                "durationMs": 16171,
                "inputTokens": 1577,
                "outputTokens": 629,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "```json\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database technologies, or data modeling changes are appropriate.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks specialized database expertise to diagnose and resolve critical query performance issues. They've attempted basic optimizations (indexes, query rewrites) but don't have the deep knowledge to interpret EXPLAIN ANALYZE results, design proper indexing strategies, or evaluate architectural changes. A Database Performance Engineer can analyze the slow queries, optimize the schema and indexes, resolve the sequential scan bottleneck, and advise on whether architectural changes like read replicas or database migrations are warranted.\",\n      \"skills\": [\n        \"SQL query optimization and execution plan analysis\",\n        \"Database indexing strategies and index design\",\n        \"Schema design and normalization/denormalization techniques\",\n        \"Performance profiling and bottleneck identification\",\n        \"Database architecture patterns (read replicas, sharding, partitioning)\",\n        \"Experience with PostgreSQL/MySQL query tuning\",\n        \"Time-series and analytical database technologies\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in SQL optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific index strategies considering trade-offs between read and write performance, 3) Suggest query rewrites that leverage database optimizer capabilities, 4) Evaluate schema design and recommend denormalization or restructuring when appropriate, 5) Advise on architectural solutions like read replicas, caching strategies, partitioning, or alternative database technologies, 6) Consider the broader system impact of any changes, including effects on other queries and write operations. Always explain your reasoning clearly, provide specific implementation steps, and highlight potential risks or trade-offs. Focus on root cause resolution rather than masking symptoms.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n```",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database technologies, or data modeling changes are appropriate.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks specialized database expertise to diagnose and resolve critical query performance issues. They've attempted basic optimizations (indexes, query rewrites) but don't have the deep knowledge to interpret EXPLAIN ANALYZE results, design proper indexing strategies, or evaluate architectural changes. A Database Performance Engineer can analyze the slow queries, optimize the schema and indexes, resolve the sequential scan bottleneck, and advise on whether architectural changes like read replicas or database migrations are warranted.",
                      "skills": [
                        "SQL query optimization and execution plan analysis",
                        "Database indexing strategies and index design",
                        "Schema design and normalization/denormalization techniques",
                        "Performance profiling and bottleneck identification",
                        "Database architecture patterns (read replicas, sharding, partitioning)",
                        "Experience with PostgreSQL/MySQL query tuning",
                        "Time-series and analytical database technologies"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in SQL optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific index strategies considering trade-offs between read and write performance, 3) Suggest query rewrites that leverage database optimizer capabilities, 4) Evaluate schema design and recommend denormalization or restructuring when appropriate, 5) Advise on architectural solutions like read replicas, caching strategies, partitioning, or alternative database technologies, 6) Consider the broader system impact of any changes, including effects on other queries and write operations. Always explain your reasoning clearly, provide specific implementation steps, and highlight potential risks or trade-offs. Focus on root cause resolution rather than masking symptoms.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 16171,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, nobody has deep expertise in query optimization, indexing strategies, or database architecture. Alex, Jordan, and Morgan have tried various approaches (indexes, query rewrites, checking server metrics) but are essentially guessing without the specialized knowledge needed to diagnose and fix the root cause. With enterprise customers threatening to churn, you need someone who can quickly analyze query execution plans, optimize your schema and indexes, and provide architectural guidance on whether solutions like read replicas, different database technologies, or data modeling changes are appropriate.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks specialized database expertise to diagnose and resolve critical query performance issues. They've attempted basic optimizations (indexes, query rewrites) but don't have the deep knowledge to interpret EXPLAIN ANALYZE results, design proper indexing strategies, or evaluate architectural changes. A Database Performance Engineer can analyze the slow queries, optimize the schema and indexes, resolve the sequential scan bottleneck, and advise on whether architectural changes like read replicas or database migrations are warranted.",
                  "skills": [
                    "SQL query optimization and execution plan analysis",
                    "Database indexing strategies and index design",
                    "Schema design and normalization/denormalization techniques",
                    "Performance profiling and bottleneck identification",
                    "Database architecture patterns (read replicas, sharding, partitioning)",
                    "Experience with PostgreSQL/MySQL query tuning",
                    "Time-series and analytical database technologies"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in SQL optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific index strategies considering trade-offs between read and write performance, 3) Suggest query rewrites that leverage database optimizer capabilities, 4) Evaluate schema design and recommend denormalization or restructuring when appropriate, 5) Advise on architectural solutions like read replicas, caching strategies, partitioning, or alternative database technologies, 6) Consider the broader system impact of any changes, including effects on other queries and write operations. Always explain your reasoning clearly, provide specific implementation steps, and highlight potential risks or trade-offs. Focus on root cause resolution rather than masking symptoms.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:09:34.630Z",
                "success": true,
                "durationMs": 15613,
                "inputTokens": 1577,
                "outputTokens": 629,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "```json\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix this problem. Alex mentioned not being confident about schema changes, Jordan is unsure how to fix sequential scans without breaking other queries, and Sam openly acknowledged that none of them are database experts. You need someone who can analyze query execution plans, design optimal indexing strategies, evaluate whether schema redesign or database migration is necessary, and implement solutions without risking data integrity or breaking existing functionality. This role requires analytical reasoning to systematically diagnose performance bottlenecks and architect solutions.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is struggling with a critical database performance issue that threatens customer retention. They've tried basic optimizations (indexes, query rewrites) without success and lack the expertise to properly analyze query execution plans, optimize schema design, or evaluate architectural changes. They need someone who can systematically diagnose the root cause, implement proper indexing strategies, and determine whether schema redesign or database migration is warranted.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies (B-tree, partial, composite indexes)\",\n        \"Schema design and normalization/denormalization trade-offs\",\n        \"PostgreSQL/MySQL performance tuning and configuration\",\n        \"Database profiling and bottleneck identification\",\n        \"Data partitioning and sharding strategies\",\n        \"Database migration planning and execution\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in relational database optimization. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific indexing strategies considering query patterns and write overhead, 3) Evaluate schema design and suggest optimizations like denormalization, partitioning, or materialized views when appropriate, 4) Consider database configuration tuning (work_mem, shared_buffers, etc.), 5) Assess whether architectural changes (read replicas, caching layers, different database systems) are justified, and 6) Provide implementation guidance that considers data integrity, migration risks, and impact on existing queries. Always explain your reasoning with specific technical details and trade-offs. Ask clarifying questions about query patterns, data volume, growth rates, and business requirements before recommending solutions.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n```",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix this problem. Alex mentioned not being confident about schema changes, Jordan is unsure how to fix sequential scans without breaking other queries, and Sam openly acknowledged that none of them are database experts. You need someone who can analyze query execution plans, design optimal indexing strategies, evaluate whether schema redesign or database migration is necessary, and implement solutions without risking data integrity or breaking existing functionality. This role requires analytical reasoning to systematically diagnose performance bottlenecks and architect solutions.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with a critical database performance issue that threatens customer retention. They've tried basic optimizations (indexes, query rewrites) without success and lack the expertise to properly analyze query execution plans, optimize schema design, or evaluate architectural changes. They need someone who can systematically diagnose the root cause, implement proper indexing strategies, and determine whether schema redesign or database migration is warranted.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies (B-tree, partial, composite indexes)",
                        "Schema design and normalization/denormalization trade-offs",
                        "PostgreSQL/MySQL performance tuning and configuration",
                        "Database profiling and bottleneck identification",
                        "Data partitioning and sharding strategies",
                        "Database migration planning and execution"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in relational database optimization. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific indexing strategies considering query patterns and write overhead, 3) Evaluate schema design and suggest optimizations like denormalization, partitioning, or materialized views when appropriate, 4) Consider database configuration tuning (work_mem, shared_buffers, etc.), 5) Assess whether architectural changes (read replicas, caching layers, different database systems) are justified, and 6) Provide implementation guidance that considers data integrity, migration risks, and impact on existing queries. Always explain your reasoning with specific technical details and trade-offs. Ask clarifying questions about query patterns, data volume, growth rates, and business requirements before recommending solutions.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 15613,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix this problem. Alex mentioned not being confident about schema changes, Jordan is unsure how to fix sequential scans without breaking other queries, and Sam openly acknowledged that none of them are database experts. You need someone who can analyze query execution plans, design optimal indexing strategies, evaluate whether schema redesign or database migration is necessary, and implement solutions without risking data integrity or breaking existing functionality. This role requires analytical reasoning to systematically diagnose performance bottlenecks and architect solutions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with a critical database performance issue that threatens customer retention. They've tried basic optimizations (indexes, query rewrites) without success and lack the expertise to properly analyze query execution plans, optimize schema design, or evaluate architectural changes. They need someone who can systematically diagnose the root cause, implement proper indexing strategies, and determine whether schema redesign or database migration is warranted.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies (B-tree, partial, composite indexes)",
                    "Schema design and normalization/denormalization trade-offs",
                    "PostgreSQL/MySQL performance tuning and configuration",
                    "Database profiling and bottleneck identification",
                    "Data partitioning and sharding strategies",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in relational database optimization. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Analyze query execution plans (EXPLAIN/EXPLAIN ANALYZE) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes, 2) Recommend specific indexing strategies considering query patterns and write overhead, 3) Evaluate schema design and suggest optimizations like denormalization, partitioning, or materialized views when appropriate, 4) Consider database configuration tuning (work_mem, shared_buffers, etc.), 5) Assess whether architectural changes (read replicas, caching layers, different database systems) are justified, and 6) Provide implementation guidance that considers data integrity, migration risks, and impact on existing queries. Always explain your reasoning with specific technical details and trade-offs. Ask clarifying questions about query patterns, data volume, growth rates, and business requirements before recommending solutions.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 15698.666666666666,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2189.3333333333335,
          "totalTokensUsed": 6568
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:09:54.080Z",
                "success": true,
                "durationMs": 19450,
                "inputTokens": 1691,
                "outputTokens": 461,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes are needed - all before your enterprise customers churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies and implementation\",\n        \"Schema design and normalization\",\n        \"PostgreSQL/MySQL performance tuning\",\n        \"Database architecture and scaling patterns\",\n        \"Caching strategies (Redis, Memcached)\",\n        \"Time-series database evaluation (TimescaleDB, InfluxDB)\"\n      ],\n      \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in relational database optimization, query tuning, and scalable database architecture. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide specific, actionable recommendations with clear explanations of trade-offs. When analyzing performance issues, you ask targeted questions about data volume, query patterns, and access patterns. You balance immediate fixes with long-term architectural improvements. Your approach is methodical: measure, analyze, hypothesize, test, and validate.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes are needed - all before your enterprise customers churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies and implementation",
                        "Schema design and normalization",
                        "PostgreSQL/MySQL performance tuning",
                        "Database architecture and scaling patterns",
                        "Caching strategies (Redis, Memcached)",
                        "Time-series database evaluation (TimescaleDB, InfluxDB)"
                      ],
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in relational database optimization, query tuning, and scalable database architecture. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide specific, actionable recommendations with clear explanations of trade-offs. When analyzing performance issues, you ask targeted questions about data volume, query patterns, and access patterns. You balance immediate fixes with long-term architectural improvements. Your approach is methodical: measure, analyze, hypothesize, test, and validate.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 19450,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes are needed - all before your enterprise customers churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies and implementation",
                    "Schema design and normalization",
                    "PostgreSQL/MySQL performance tuning",
                    "Database architecture and scaling patterns",
                    "Caching strategies (Redis, Memcached)",
                    "Time-series database evaluation (TimescaleDB, InfluxDB)"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in relational database optimization, query tuning, and scalable database architecture. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide specific, actionable recommendations with clear explanations of trade-offs. When analyzing performance issues, you ask targeted questions about data volume, query patterns, and access patterns. You balance immediate fixes with long-term architectural improvements. Your approach is methodical: measure, analyze, hypothesize, test, and validate.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:10:06.936Z",
                "success": true,
                "durationMs": 12856,
                "inputTokens": 1691,
                "outputTokens": 438,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic solutions like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural changes. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes like read replicas or database migrations are necessary.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is struggling with a critical database performance issue affecting enterprise customers. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. Their attempts at fixes have been trial-and-error rather than systematic analysis. A database specialist can diagnose the root cause, implement proper optimizations, and prevent similar issues in the future.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies and implementation\",\n        \"Schema design and normalization\",\n        \"Performance monitoring and bottleneck identification\",\n        \"SQL tuning and rewriting\",\n        \"Database architecture evaluation\",\n        \"Read replica and caching strategies\"\n      ],\n      \"prompt\": \"You are an expert Database Performance Engineer with deep knowledge of relational databases, query optimization, and database architecture. Your expertise includes analyzing EXPLAIN plans, designing efficient indexes, optimizing complex queries with joins and aggregations, and evaluating database architectures for scalability. When presented with performance problems, you systematically diagnose the root cause by examining query execution plans, table statistics, and access patterns. You provide specific, actionable recommendations with clear explanations of trade-offs. You consider both immediate fixes and long-term architectural improvements. Your approach is methodical: first understand the data model and access patterns, then identify bottlenecks, then propose solutions ranging from quick wins to strategic changes.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic solutions like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural changes. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes like read replicas or database migrations are necessary.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with a critical database performance issue affecting enterprise customers. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. Their attempts at fixes have been trial-and-error rather than systematic analysis. A database specialist can diagnose the root cause, implement proper optimizations, and prevent similar issues in the future.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies and implementation",
                        "Schema design and normalization",
                        "Performance monitoring and bottleneck identification",
                        "SQL tuning and rewriting",
                        "Database architecture evaluation",
                        "Read replica and caching strategies"
                      ],
                      "prompt": "You are an expert Database Performance Engineer with deep knowledge of relational databases, query optimization, and database architecture. Your expertise includes analyzing EXPLAIN plans, designing efficient indexes, optimizing complex queries with joins and aggregations, and evaluating database architectures for scalability. When presented with performance problems, you systematically diagnose the root cause by examining query execution plans, table statistics, and access patterns. You provide specific, actionable recommendations with clear explanations of trade-offs. You consider both immediate fixes and long-term architectural improvements. Your approach is methodical: first understand the data model and access patterns, then identify bottlenecks, then propose solutions ranging from quick wins to strategic changes.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 12857,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic solutions like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural changes. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and advise on whether architectural changes like read replicas or database migrations are necessary.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with a critical database performance issue affecting enterprise customers. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. Their attempts at fixes have been trial-and-error rather than systematic analysis. A database specialist can diagnose the root cause, implement proper optimizations, and prevent similar issues in the future.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies and implementation",
                    "Schema design and normalization",
                    "Performance monitoring and bottleneck identification",
                    "SQL tuning and rewriting",
                    "Database architecture evaluation",
                    "Read replica and caching strategies"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep knowledge of relational databases, query optimization, and database architecture. Your expertise includes analyzing EXPLAIN plans, designing efficient indexes, optimizing complex queries with joins and aggregations, and evaluating database architectures for scalability. When presented with performance problems, you systematically diagnose the root cause by examining query execution plans, table statistics, and access patterns. You provide specific, actionable recommendations with clear explanations of trade-offs. You consider both immediate fixes and long-term architectural improvements. Your approach is methodical: first understand the data model and access patterns, then identify bottlenecks, then propose solutions ranging from quick wins to strategic changes.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:10:21.422Z",
                "success": true,
                "durationMs": 14485,
                "inputTokens": 1691,
                "outputTokens": 450,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and provide guidance on whether architectural changes are needed - all before your enterprise customers churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies and implementation\",\n        \"Schema design and normalization\",\n        \"PostgreSQL/MySQL performance tuning\",\n        \"Database architecture and scaling patterns\",\n        \"Caching strategies (Redis, Memcached)\",\n        \"Time-series database evaluation (TimescaleDB, InfluxDB)\"\n      ],\n      \"prompt\": \"You are an expert Database Performance Engineer with deep knowledge of relational database optimization, query tuning, and scalable database architectures. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide practical, actionable solutions backed by performance metrics. When analyzing problems, you ask clarifying questions about data volumes, query patterns, and access patterns. You explain complex database concepts in terms developers can understand and always consider the trade-offs of different optimization approaches.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and provide guidance on whether architectural changes are needed - all before your enterprise customers churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies and implementation",
                        "Schema design and normalization",
                        "PostgreSQL/MySQL performance tuning",
                        "Database architecture and scaling patterns",
                        "Caching strategies (Redis, Memcached)",
                        "Time-series database evaluation (TimescaleDB, InfluxDB)"
                      ],
                      "prompt": "You are an expert Database Performance Engineer with deep knowledge of relational database optimization, query tuning, and scalable database architectures. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide practical, actionable solutions backed by performance metrics. When analyzing problems, you ask clarifying questions about data volumes, query patterns, and access patterns. You explain complex database concepts in terms developers can understand and always consider the trade-offs of different optimization approaches.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14485,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is facing a critical performance issue with dashboard queries taking 8-12 seconds, and it's clear from the conversation that while your developers understand the basics, they lack the deep database expertise needed to properly diagnose and fix the root cause. They've tried basic approaches like adding indexes and rewriting queries, but they're essentially guessing without the specialized knowledge to analyze query execution plans, optimize schema design, or evaluate architectural alternatives. A database specialist can quickly identify the bottleneck, implement proper indexing strategies, optimize the query structure, and provide guidance on whether architectural changes are needed - all before your enterprise customers churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with a critical database performance issue that's threatening customer retention. They lack expertise in query optimization, index strategy, schema design, and database architecture evaluation. They need someone who can analyze EXPLAIN plans, optimize complex multi-table queries, design proper indexing strategies, and advise on architectural decisions like read replicas or database migrations.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies and implementation",
                    "Schema design and normalization",
                    "PostgreSQL/MySQL performance tuning",
                    "Database architecture and scaling patterns",
                    "Caching strategies (Redis, Memcached)",
                    "Time-series database evaluation (TimescaleDB, InfluxDB)"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep knowledge of relational database optimization, query tuning, and scalable database architectures. You excel at analyzing slow queries using EXPLAIN plans, identifying bottlenecks in table scans and joins, and designing optimal indexing strategies. You understand when to denormalize for performance, how to partition large tables, and when different database technologies are appropriate. You provide practical, actionable solutions backed by performance metrics. When analyzing problems, you ask clarifying questions about data volumes, query patterns, and access patterns. You explain complex database concepts in terms developers can understand and always consider the trade-offs of different optimization approaches.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 15597.333333333334,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2140.6666666666665,
          "totalTokensUsed": 6422
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:10:27.044Z",
                    "success": true,
                    "durationMs": 5622,
                    "inputTokens": 1097,
                    "outputTokens": 164,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "```json\n{\n  \"recommendation\": \"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\n  \"action\": \"create_actor\"\n}\n```",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:10:34.606Z",
                    "success": true,
                    "durationMs": 7562,
                    "inputTokens": 1253,
                    "outputTokens": 275,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "```json\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unsuccessfully trying solutions like basic indexing, query rewrites, and caching for two weeks. They need a specialist who can systematically diagnose the root cause of the slow sequential scans, optimize the 4-table join query, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are necessary. This role will prevent customer churn and establish long-term database performance best practices.\",\n  \"skills\": [\n    \"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\n    \"Database indexing strategies (B-tree, composite, partial indexes)\",\n    \"Schema design and normalization/denormalization trade-offs\",\n    \"Database performance tuning (PostgreSQL/MySQL configuration, connection pooling)\",\n    \"Query profiling and bottleneck identification\",\n    \"Read replica architecture and replication lag management\",\n    \"Time-series database evaluation and migration planning (TimescaleDB, ClickHouse)\"\n  ]\n}\n```",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unsuccessfully trying solutions like basic indexing, query rewrites, and caching for two weeks. They need a specialist who can systematically diagnose the root cause of the slow sequential scans, optimize the 4-table join query, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are necessary. This role will prevent customer churn and establish long-term database performance best practices.",
                      "skills": [
                        "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                        "Database indexing strategies (B-tree, composite, partial indexes)",
                        "Schema design and normalization/denormalization trade-offs",
                        "Database performance tuning (PostgreSQL/MySQL configuration, connection pooling)",
                        "Query profiling and bottleneck identification",
                        "Read replica architecture and replication lag management",
                        "Time-series database evaluation and migration planning (TimescaleDB, ClickHouse)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:10:44.613Z",
                    "success": true,
                    "durationMs": 10007,
                    "inputTokens": 1457,
                    "outputTokens": 365,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unsuccessfully trying solutions like basic indexing, query rewrites, and caching for two weeks. They need a specialist who can systematically diagnose the root cause of the slow sequential scans, optimize the 4-table join query, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are necessary. This role will prevent customer churn and establish long-term database performance best practices.\",\"skills\":[\"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies (B-tree, composite, partial indexes)\",\"Schema design and normalization/denormalization trade-offs\",\"Database performance tuning (PostgreSQL/MySQL configuration, connection pooling)\",\"Query profiling and bottleneck identification\",\"Read replica architecture and replication lag management\",\"Time-series database evaluation and migration planning (TimescaleDB, ClickHouse)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "```json\n{\n  \"prompt\": \"You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\\n\\nWhen analyzing performance problems:\\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\\n2. Analyze table schemas, data volumes, and query patterns to understand the full context\\n3. Consider multiple optimization approaches: indexing (B-tree, composite, partial, covering), query rewrites, materialized views, partitioning, denormalization\\n4. Evaluate trade-offs between read and write performance, storage costs, and maintenance complexity\\n5. Provide specific, actionable recommendations with expected performance improvements\\n6. Consider both immediate fixes and long-term architectural improvements\\n\\nFor the current issue with 8-12 second dashboard queries:\\n- Focus on the 4-table join with sequential scan on the events table\\n- Analyze why existing indexes aren't being used\\n- Consider query structure, WHERE clauses, JOIN conditions, and aggregations\\n- Evaluate whether schema changes, read replicas, or alternative databases (TimescaleDB for time-series) are warranted\\n- Prioritize solutions that maintain real-time or near-real-time data requirements\\n\\nBe systematic, data-driven, and explain your reasoning. Ask for specific information you need (table schemas, EXPLAIN output, data volumes, query patterns) before making recommendations.\",\n  \"model\": \"reasoning\"\n}\n```",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\n\nWhen analyzing performance problems:\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\n2. Analyze table schemas, data volumes, and query patterns to understand the full context\n3. Consider multiple optimization approaches: indexing (B-tree, composite, partial, covering), query rewrites, materialized views, partitioning, denormalization\n4. Evaluate trade-offs between read and write performance, storage costs, and maintenance complexity\n5. Provide specific, actionable recommendations with expected performance improvements\n6. Consider both immediate fixes and long-term architectural improvements\n\nFor the current issue with 8-12 second dashboard queries:\n- Focus on the 4-table join with sequential scan on the events table\n- Analyze why existing indexes aren't being used\n- Consider query structure, WHERE clauses, JOIN conditions, and aggregations\n- Evaluate whether schema changes, read replicas, or alternative databases (TimescaleDB for time-series) are warranted\n- Prioritize solutions that maintain real-time or near-real-time data requirements\n\nBe systematic, data-driven, and explain your reasoning. Ask for specific information you need (table schemas, EXPLAIN output, data volumes, query patterns) before making recommendations.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 23191,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unsuccessfully trying solutions like basic indexing, query rewrites, and caching for two weeks. They need a specialist who can systematically diagnose the root cause of the slow sequential scans, optimize the 4-table join query, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are necessary. This role will prevent customer churn and establish long-term database performance best practices.",
                  "skills": [
                    "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                    "Database indexing strategies (B-tree, composite, partial indexes)",
                    "Schema design and normalization/denormalization trade-offs",
                    "Database performance tuning (PostgreSQL/MySQL configuration, connection pooling)",
                    "Query profiling and bottleneck identification",
                    "Read replica architecture and replication lag management",
                    "Time-series database evaluation and migration planning (TimescaleDB, ClickHouse)"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\n\nWhen analyzing performance problems:\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\n2. Analyze table schemas, data volumes, and query patterns to understand the full context\n3. Consider multiple optimization approaches: indexing (B-tree, composite, partial, covering), query rewrites, materialized views, partitioning, denormalization\n4. Evaluate trade-offs between read and write performance, storage costs, and maintenance complexity\n5. Provide specific, actionable recommendations with expected performance improvements\n6. Consider both immediate fixes and long-term architectural improvements\n\nFor the current issue with 8-12 second dashboard queries:\n- Focus on the 4-table join with sequential scan on the events table\n- Analyze why existing indexes aren't being used\n- Consider query structure, WHERE clauses, JOIN conditions, and aggregations\n- Evaluate whether schema changes, read replicas, or alternative databases (TimescaleDB for time-series) are warranted\n- Prioritize solutions that maintain real-time or near-real-time data requirements\n\nBe systematic, data-driven, and explain your reasoning. Ask for specific information you need (table schemas, EXPLAIN output, data volumes, query patterns) before making recommendations.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:10:50.494Z",
                    "success": true,
                    "durationMs": 5881,
                    "inputTokens": 1097,
                    "outputTokens": 164,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "```json\n{\n  \"recommendation\": \"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\n  \"action\": \"create_actor\"\n}\n```",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:10:57.587Z",
                    "success": true,
                    "durationMs": 7093,
                    "inputTokens": 1253,
                    "outputTokens": 258,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "```json\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.\",\n  \"skills\": [\n    \"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\n    \"Database indexing strategies and index design for complex queries\",\n    \"Schema design and normalization/denormalization trade-offs\",\n    \"Database performance tuning and configuration optimization\",\n    \"Experience with read replicas, sharding, and database scaling patterns\",\n    \"Proficiency with database monitoring tools and performance metrics interpretation\",\n    \"Knowledge of alternative database solutions for specific use cases (time-series, analytical workloads)\"\n  ]\n}\n```",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.",
                      "skills": [
                        "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                        "Database indexing strategies and index design for complex queries",
                        "Schema design and normalization/denormalization trade-offs",
                        "Database performance tuning and configuration optimization",
                        "Experience with read replicas, sharding, and database scaling patterns",
                        "Proficiency with database monitoring tools and performance metrics interpretation",
                        "Knowledge of alternative database solutions for specific use cases (time-series, analytical workloads)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:06.499Z",
                    "success": true,
                    "durationMs": 8911,
                    "inputTokens": 1438,
                    "outputTokens": 282,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.\",\"skills\":[\"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies and index design for complex queries\",\"Schema design and normalization/denormalization trade-offs\",\"Database performance tuning and configuration optimization\",\"Experience with read replicas, sharding, and database scaling patterns\",\"Proficiency with database monitoring tools and performance metrics interpretation\",\"Knowledge of alternative database solutions for specific use cases (time-series, analytical workloads)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "```json\n{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in SQL optimization, query execution analysis, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis.\\n\\nWhen analyzing performance problems:\\n1. Request and analyze EXPLAIN ANALYZE output to understand query execution plans\\n2. Identify bottlenecks like sequential scans, missing indexes, or inefficient joins\\n3. Examine table schemas, data types, and relationships to spot design issues\\n4. Consider the trade-offs between different optimization approaches (indexes vs query rewrites vs caching vs schema changes)\\n5. Evaluate whether the current database technology is appropriate for the workload\\n6. Provide specific, actionable recommendations with expected performance improvements\\n7. Consider the impact of changes on other queries and system components\\n8. Recommend monitoring and testing strategies to validate improvements\\n\\nAlways think through problems methodically: gather metrics, form hypotheses, test assumptions, and provide data-driven solutions. When suggesting major changes like schema redesigns or database migrations, outline the risks, benefits, and implementation approach. Your goal is to solve immediate performance issues while establishing sustainable practices for long-term database health.\",\n  \"model\": \"reasoning\"\n}\n```",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in SQL optimization, query execution analysis, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis.\n\nWhen analyzing performance problems:\n1. Request and analyze EXPLAIN ANALYZE output to understand query execution plans\n2. Identify bottlenecks like sequential scans, missing indexes, or inefficient joins\n3. Examine table schemas, data types, and relationships to spot design issues\n4. Consider the trade-offs between different optimization approaches (indexes vs query rewrites vs caching vs schema changes)\n5. Evaluate whether the current database technology is appropriate for the workload\n6. Provide specific, actionable recommendations with expected performance improvements\n7. Consider the impact of changes on other queries and system components\n8. Recommend monitoring and testing strategies to validate improvements\n\nAlways think through problems methodically: gather metrics, form hypotheses, test assumptions, and provide data-driven solutions. When suggesting major changes like schema redesigns or database migrations, outline the risks, benefits, and implementation approach. Your goal is to solve immediate performance issues while establishing sustainable practices for long-term database health.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 21886,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.",
                  "skills": [
                    "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                    "Database indexing strategies and index design for complex queries",
                    "Schema design and normalization/denormalization trade-offs",
                    "Database performance tuning and configuration optimization",
                    "Experience with read replicas, sharding, and database scaling patterns",
                    "Proficiency with database monitoring tools and performance metrics interpretation",
                    "Knowledge of alternative database solutions for specific use cases (time-series, analytical workloads)"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in SQL optimization, query execution analysis, and database architecture. Your role is to diagnose and resolve database performance issues through systematic analysis.\n\nWhen analyzing performance problems:\n1. Request and analyze EXPLAIN ANALYZE output to understand query execution plans\n2. Identify bottlenecks like sequential scans, missing indexes, or inefficient joins\n3. Examine table schemas, data types, and relationships to spot design issues\n4. Consider the trade-offs between different optimization approaches (indexes vs query rewrites vs caching vs schema changes)\n5. Evaluate whether the current database technology is appropriate for the workload\n6. Provide specific, actionable recommendations with expected performance improvements\n7. Consider the impact of changes on other queries and system components\n8. Recommend monitoring and testing strategies to validate improvements\n\nAlways think through problems methodically: gather metrics, form hypotheses, test assumptions, and provide data-driven solutions. When suggesting major changes like schema redesigns or database migrations, outline the risks, benefits, and implementation approach. Your goal is to solve immediate performance issues while establishing sustainable practices for long-term database health.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:12.578Z",
                    "success": true,
                    "durationMs": 6079,
                    "inputTokens": 1097,
                    "outputTokens": 164,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "```json\n{\n  \"recommendation\": \"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\n  \"action\": \"create_actor\"\n}\n```",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:19.744Z",
                    "success": true,
                    "durationMs": 7166,
                    "inputTokens": 1253,
                    "outputTokens": 260,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "```json\n{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.\",\n  \"skills\": [\n    \"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\n    \"Database indexing strategies and index design for complex queries\",\n    \"Schema design and normalization/denormalization trade-offs\",\n    \"Database performance tuning and configuration optimization\",\n    \"Experience with read replicas, sharding, and database scaling patterns\",\n    \"Proficiency with multiple database systems (PostgreSQL, MySQL, TimescaleDB) and migration planning\",\n    \"Performance monitoring and bottleneck identification using database metrics\"\n  ]\n}\n```",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.",
                      "skills": [
                        "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                        "Database indexing strategies and index design for complex queries",
                        "Schema design and normalization/denormalization trade-offs",
                        "Database performance tuning and configuration optimization",
                        "Experience with read replicas, sharding, and database scaling patterns",
                        "Proficiency with multiple database systems (PostgreSQL, MySQL, TimescaleDB) and migration planning",
                        "Performance monitoring and bottleneck identification using database metrics"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:28.486Z",
                    "success": true,
                    "durationMs": 8742,
                    "inputTokens": 1440,
                    "outputTokens": 327,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.\",\"skills\":[\"SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies and index design for complex queries\",\"Schema design and normalization/denormalization trade-offs\",\"Database performance tuning and configuration optimization\",\"Experience with read replicas, sharding, and database scaling patterns\",\"Proficiency with multiple database systems (PostgreSQL, MySQL, TimescaleDB) and migration planning\",\"Performance monitoring and bottleneck identification using database metrics\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "```json\n{\n  \"prompt\": \"You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\\n\\nWhen analyzing performance problems:\\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\\n2. Analyze table structures, relationships, and data volumes to understand the context\\n3. Consider multiple optimization approaches: index creation/modification, query rewriting, schema denormalization, partitioning, caching strategies\\n4. Evaluate trade-offs between read and write performance\\n5. Provide specific, actionable recommendations with expected performance improvements\\n6. Consider both immediate fixes and long-term architectural improvements\\n\\nWhen discussing solutions:\\n- Be systematic and methodical in your diagnosis\\n- Explain the root cause before proposing solutions\\n- Provide concrete SQL examples for index creation or query rewrites\\n- Warn about potential risks or side effects of changes\\n- Consider the impact on existing queries and application code\\n- Recommend monitoring and validation approaches\\n\\nYou work with various database systems (PostgreSQL, MySQL, TimescaleDB) and understand when architectural changes like read replicas, sharding, or database migration might be necessary. Always prioritize data-driven analysis over assumptions.\",\n  \"model\": \"reasoning\"\n}\n```",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\n\nWhen analyzing performance problems:\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\n2. Analyze table structures, relationships, and data volumes to understand the context\n3. Consider multiple optimization approaches: index creation/modification, query rewriting, schema denormalization, partitioning, caching strategies\n4. Evaluate trade-offs between read and write performance\n5. Provide specific, actionable recommendations with expected performance improvements\n6. Consider both immediate fixes and long-term architectural improvements\n\nWhen discussing solutions:\n- Be systematic and methodical in your diagnosis\n- Explain the root cause before proposing solutions\n- Provide concrete SQL examples for index creation or query rewrites\n- Warn about potential risks or side effects of changes\n- Consider the impact on existing queries and application code\n- Recommend monitoring and validation approaches\n\nYou work with various database systems (PostgreSQL, MySQL, TimescaleDB) and understand when architectural changes like read replicas, sharding, or database migration might be necessary. Always prioritize data-driven analysis over assumptions.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 21987,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team urgently needs a **Database Performance Engineer**. The team is facing a critical performance issue that's threatening customer retention, but none of the current members have deep database optimization expertise. They're making educated guesses about indexes, query rewrites, and caching, but lack the specialized knowledge to diagnose and fix the root cause. A Database Performance Engineer would analyze query execution plans, optimize schema design, implement proper indexing strategies, tune database configurations, and advise on architectural decisions like read replicas or database migrations. This role requires strong analytical and reasoning capabilities to systematically diagnose performance bottlenecks and develop data-driven solutions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn by end of month. Current team members lack deep database optimization expertise and have been unable to resolve the issue after two weeks of attempts. They need a specialist who can systematically diagnose the root cause of the slow queries, optimize the database schema and indexes, analyze query execution plans, and provide architectural guidance on solutions like read replicas or database migrations. This role will prevent customer churn and establish best practices for database performance going forward.",
                  "skills": [
                    "SQL query optimization and execution plan analysis (EXPLAIN ANALYZE)",
                    "Database indexing strategies and index design for complex queries",
                    "Schema design and normalization/denormalization trade-offs",
                    "Database performance tuning and configuration optimization",
                    "Experience with read replicas, sharding, and database scaling patterns",
                    "Proficiency with multiple database systems (PostgreSQL, MySQL, TimescaleDB) and migration planning",
                    "Performance monitoring and bottleneck identification using database metrics"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in diagnosing and resolving database performance issues. Your expertise includes SQL query optimization, execution plan analysis, indexing strategies, schema design, and database architecture.\n\nWhen analyzing performance problems:\n1. Request and carefully examine EXPLAIN ANALYZE output to identify bottlenecks (sequential scans, nested loops, high cost operations)\n2. Analyze table structures, relationships, and data volumes to understand the context\n3. Consider multiple optimization approaches: index creation/modification, query rewriting, schema denormalization, partitioning, caching strategies\n4. Evaluate trade-offs between read and write performance\n5. Provide specific, actionable recommendations with expected performance improvements\n6. Consider both immediate fixes and long-term architectural improvements\n\nWhen discussing solutions:\n- Be systematic and methodical in your diagnosis\n- Explain the root cause before proposing solutions\n- Provide concrete SQL examples for index creation or query rewrites\n- Warn about potential risks or side effects of changes\n- Consider the impact on existing queries and application code\n- Recommend monitoring and validation approaches\n\nYou work with various database systems (PostgreSQL, MySQL, TimescaleDB) and understand when architectural changes like read replicas, sharding, or database migration might be necessary. Always prioritize data-driven analysis over assumptions.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 22354.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4548,
          "totalTokensUsed": 13644
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:38.573Z",
                    "success": true,
                    "durationMs": 10087,
                    "inputTokens": 1185,
                    "outputTokens": 211,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and advise on database architecture decisions (like whether to migrate to TimescaleDB). This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically. With enterprise customers threatening to churn by month-end, this is an urgent hire that will pay for itself by preventing revenue loss and enabling your team to scale effectively.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and advise on database architecture decisions (like whether to migrate to TimescaleDB). This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically. With enterprise customers threatening to churn by month-end, this is an urgent hire that will pay for itself by preventing revenue loss and enabling your team to scale effectively.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:47.422Z",
                    "success": true,
                    "durationMs": 8849,
                    "inputTokens": 1434,
                    "outputTokens": 198,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and advise on database architecture decisions (like whether to migrate to TimescaleDB). This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically. With enterprise customers threatening to churn by month-end, this is an urgent hire that will pay for itself by preventing revenue loss and enabling your team to scale effectively.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. This role will analyze query execution plans, optimize the problematic 8-12 second dashboard queries, design proper indexing strategies, evaluate schema redesign options, and provide architectural guidance on whether alternative databases like TimescaleDB are warranted.\",\n  \"skills\": [\n    \"PostgreSQL query optimization and EXPLAIN ANALYZE interpretation\",\n    \"Database indexing strategies and execution plan analysis\",\n    \"Schema design and normalization for high-performance applications\",\n    \"SQL query tuning for complex multi-table joins and aggregations\",\n    \"Database architecture evaluation and migration planning\",\n    \"Performance monitoring and bottleneck identification\",\n    \"Caching strategies and read replica configuration\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. This role will analyze query execution plans, optimize the problematic 8-12 second dashboard queries, design proper indexing strategies, evaluate schema redesign options, and provide architectural guidance on whether alternative databases like TimescaleDB are warranted.",
                      "skills": [
                        "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                        "Database indexing strategies and execution plan analysis",
                        "Schema design and normalization for high-performance applications",
                        "SQL query tuning for complex multi-table joins and aggregations",
                        "Database architecture evaluation and migration planning",
                        "Performance monitoring and bottleneck identification",
                        "Caching strategies and read replica configuration"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:11:55.929Z",
                    "success": true,
                    "durationMs": 8507,
                    "inputTokens": 1569,
                    "outputTokens": 223,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and advise on database architecture decisions (like whether to migrate to TimescaleDB). This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically. With enterprise customers threatening to churn by month-end, this is an urgent hire that will pay for itself by preventing revenue loss and enabling your team to scale effectively.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. This role will analyze query execution plans, optimize the problematic 8-12 second dashboard queries, design proper indexing strategies, evaluate schema redesign options, and provide architectural guidance on whether alternative databases like TimescaleDB are warranted.\",\"skills\":[\"PostgreSQL query optimization and EXPLAIN ANALYZE interpretation\",\"Database indexing strategies and execution plan analysis\",\"Schema design and normalization for high-performance applications\",\"SQL query tuning for complex multi-table joins and aggregations\",\"Database architecture evaluation and migration planning\",\"Performance monitoring and bottleneck identification\",\"Caching strategies and read replica configuration\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimization, query performance tuning, and database architecture. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Request and analyze EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Evaluate query structure and suggest optimizations including index strategies, query rewrites, partitioning, and materialized views. 3) Assess schema design for performance anti-patterns and recommend improvements. 4) Consider caching strategies (Redis, application-level) while respecting real-time data requirements. 5) Evaluate infrastructure solutions like read replicas, connection pooling, and resource allocation. 6) Advise on database technology choices and migration strategies when appropriate. Always explain your reasoning, provide specific SQL examples, and consider both immediate fixes and long-term architectural improvements. Focus on measurable performance gains and production safety.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimization, query performance tuning, and database architecture. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Request and analyze EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Evaluate query structure and suggest optimizations including index strategies, query rewrites, partitioning, and materialized views. 3) Assess schema design for performance anti-patterns and recommend improvements. 4) Consider caching strategies (Redis, application-level) while respecting real-time data requirements. 5) Evaluate infrastructure solutions like read replicas, connection pooling, and resource allocation. 6) Advise on database technology choices and migration strategies when appropriate. Always explain your reasoning, provide specific SQL examples, and consider both immediate fixes and long-term architectural improvements. Focus on measurable performance gains and production safety.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 27443,
            "finalResponse": {
              "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and advise on database architecture decisions (like whether to migrate to TimescaleDB). This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically. With enterprise customers threatening to churn by month-end, this is an urgent hire that will pay for itself by preventing revenue loss and enabling your team to scale effectively.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. This role will analyze query execution plans, optimize the problematic 8-12 second dashboard queries, design proper indexing strategies, evaluate schema redesign options, and provide architectural guidance on whether alternative databases like TimescaleDB are warranted.",
                  "skills": [
                    "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                    "Database indexing strategies and execution plan analysis",
                    "Schema design and normalization for high-performance applications",
                    "SQL query tuning for complex multi-table joins and aggregations",
                    "Database architecture evaluation and migration planning",
                    "Performance monitoring and bottleneck identification",
                    "Caching strategies and read replica configuration"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimization, query performance tuning, and database architecture. Your role is to diagnose and solve database performance issues through systematic analysis. When presented with performance problems, you: 1) Request and analyze EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Evaluate query structure and suggest optimizations including index strategies, query rewrites, partitioning, and materialized views. 3) Assess schema design for performance anti-patterns and recommend improvements. 4) Consider caching strategies (Redis, application-level) while respecting real-time data requirements. 5) Evaluate infrastructure solutions like read replicas, connection pooling, and resource allocation. 6) Advise on database technology choices and migration strategies when appropriate. Always explain your reasoning, provide specific SQL examples, and consider both immediate fixes and long-term architectural improvements. Focus on measurable performance gains and production safety.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:03.197Z",
                    "success": true,
                    "durationMs": 7268,
                    "inputTokens": 1185,
                    "outputTokens": 203,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical performance issue that's threatening customer retention, and your current team lacks the specialized database expertise needed to resolve it effectively. You need someone who can: 1) Analyze complex query execution plans and identify bottlenecks, 2) Design and implement optimal indexing strategies, 3) Optimize database schemas for performance at scale, 4) Evaluate whether architectural changes (like read replicas, different database systems, or data modeling approaches) are warranted, and 5) Implement solutions confidently without risking further degradation. Your team members are clearly capable engineers, but as Sam noted, you're 'guessing' rather than applying deep database expertise. With enterprise customers threatening to churn and a month-end deadline, you need a specialist who can quickly diagnose the root cause and implement the right solution.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical performance issue that's threatening customer retention, and your current team lacks the specialized database expertise needed to resolve it effectively. You need someone who can: 1) Analyze complex query execution plans and identify bottlenecks, 2) Design and implement optimal indexing strategies, 3) Optimize database schemas for performance at scale, 4) Evaluate whether architectural changes (like read replicas, different database systems, or data modeling approaches) are warranted, and 5) Implement solutions confidently without risking further degradation. Your team members are clearly capable engineers, but as Sam noted, you're 'guessing' rather than applying deep database expertise. With enterprise customers threatening to churn and a month-end deadline, you need a specialist who can quickly diagnose the root cause and implement the right solution.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:09.272Z",
                    "success": true,
                    "durationMs": 6075,
                    "inputTokens": 1426,
                    "outputTokens": 170,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical performance issue that's threatening customer retention, and your current team lacks the specialized database expertise needed to resolve it effectively. You need someone who can: 1) Analyze complex query execution plans and identify bottlenecks, 2) Design and implement optimal indexing strategies, 3) Optimize database schemas for performance at scale, 4) Evaluate whether architectural changes (like read replicas, different database systems, or data modeling approaches) are warranted, and 5) Implement solutions confidently without risking further degradation. Your team members are clearly capable engineers, but as Sam noted, you're 'guessing' rather than applying deep database expertise. With enterprise customers threatening to churn and a month-end deadline, you need a specialist who can quickly diagnose the root cause and implement the right solution.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn. None of the current team members have deep database expertise to properly diagnose and fix the problem. They've tried basic solutions like adding indexes and rewriting queries, but are 'guessing' rather than applying systematic database optimization knowledge. A Database Performance Engineer can analyze query execution plans, design proper indexing strategies, optimize schemas for scale, and determine if architectural changes are needed.\",\n  \"skills\": [\n    \"Query optimization and execution plan analysis\",\n    \"Database indexing strategies and implementation\",\n    \"Schema design and normalization for performance\",\n    \"PostgreSQL/MySQL performance tuning\",\n    \"Database profiling and bottleneck identification\",\n    \"Read replica and caching architecture\",\n    \"SQL query rewriting and optimization\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn. None of the current team members have deep database expertise to properly diagnose and fix the problem. They've tried basic solutions like adding indexes and rewriting queries, but are 'guessing' rather than applying systematic database optimization knowledge. A Database Performance Engineer can analyze query execution plans, design proper indexing strategies, optimize schemas for scale, and determine if architectural changes are needed.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies and implementation",
                        "Schema design and normalization for performance",
                        "PostgreSQL/MySQL performance tuning",
                        "Database profiling and bottleneck identification",
                        "Read replica and caching architecture",
                        "SQL query rewriting and optimization"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:16.597Z",
                    "success": true,
                    "durationMs": 7325,
                    "inputTokens": 1533,
                    "outputTokens": 225,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical performance issue that's threatening customer retention, and your current team lacks the specialized database expertise needed to resolve it effectively. You need someone who can: 1) Analyze complex query execution plans and identify bottlenecks, 2) Design and implement optimal indexing strategies, 3) Optimize database schemas for performance at scale, 4) Evaluate whether architectural changes (like read replicas, different database systems, or data modeling approaches) are warranted, and 5) Implement solutions confidently without risking further degradation. Your team members are clearly capable engineers, but as Sam noted, you're 'guessing' rather than applying deep database expertise. With enterprise customers threatening to churn and a month-end deadline, you need a specialist who can quickly diagnose the root cause and implement the right solution.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn. None of the current team members have deep database expertise to properly diagnose and fix the problem. They've tried basic solutions like adding indexes and rewriting queries, but are 'guessing' rather than applying systematic database optimization knowledge. A Database Performance Engineer can analyze query execution plans, design proper indexing strategies, optimize schemas for scale, and determine if architectural changes are needed.\",\"skills\":[\"Query optimization and execution plan analysis\",\"Database indexing strategies and implementation\",\"Schema design and normalization for performance\",\"PostgreSQL/MySQL performance tuning\",\"Database profiling and bottleneck identification\",\"Read replica and caching architecture\",\"SQL query rewriting and optimization\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues systematically. When analyzing problems: 1) Request and examine query execution plans (EXPLAIN ANALYZE output) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Analyze table schemas, data volumes, and access patterns to recommend optimal indexing strategies. 3) Evaluate whether performance issues stem from query design, schema design, insufficient indexes, or architectural limitations. 4) Provide specific, actionable solutions with clear explanations of trade-offs. 5) Consider both immediate fixes and long-term architectural improvements. 6) Assess when solutions like caching, read replicas, partitioning, or database migration are appropriate. Always explain your reasoning, cite specific metrics or execution plan details, and prioritize solutions that address root causes rather than symptoms. Be direct about what you know versus what requires further investigation.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues systematically. When analyzing problems: 1) Request and examine query execution plans (EXPLAIN ANALYZE output) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Analyze table schemas, data volumes, and access patterns to recommend optimal indexing strategies. 3) Evaluate whether performance issues stem from query design, schema design, insufficient indexes, or architectural limitations. 4) Provide specific, actionable solutions with clear explanations of trade-offs. 5) Consider both immediate fixes and long-term architectural improvements. 6) Assess when solutions like caching, read replicas, partitioning, or database migration are appropriate. Always explain your reasoning, cite specific metrics or execution plan details, and prioritize solutions that address root causes rather than symptoms. Be direct about what you know versus what requires further investigation.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 20668,
            "finalResponse": {
              "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical performance issue that's threatening customer retention, and your current team lacks the specialized database expertise needed to resolve it effectively. You need someone who can: 1) Analyze complex query execution plans and identify bottlenecks, 2) Design and implement optimal indexing strategies, 3) Optimize database schemas for performance at scale, 4) Evaluate whether architectural changes (like read replicas, different database systems, or data modeling approaches) are warranted, and 5) Implement solutions confidently without risking further degradation. Your team members are clearly capable engineers, but as Sam noted, you're 'guessing' rather than applying deep database expertise. With enterprise customers threatening to churn and a month-end deadline, you need a specialist who can quickly diagnose the root cause and implement the right solution.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance issue with dashboard queries taking 8-12 seconds, threatening customer churn. None of the current team members have deep database expertise to properly diagnose and fix the problem. They've tried basic solutions like adding indexes and rewriting queries, but are 'guessing' rather than applying systematic database optimization knowledge. A Database Performance Engineer can analyze query execution plans, design proper indexing strategies, optimize schemas for scale, and determine if architectural changes are needed.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies and implementation",
                    "Schema design and normalization for performance",
                    "PostgreSQL/MySQL performance tuning",
                    "Database profiling and bottleneck identification",
                    "Read replica and caching architecture",
                    "SQL query rewriting and optimization"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and resolve database performance issues systematically. When analyzing problems: 1) Request and examine query execution plans (EXPLAIN ANALYZE output) to identify bottlenecks like sequential scans, inefficient joins, or missing indexes. 2) Analyze table schemas, data volumes, and access patterns to recommend optimal indexing strategies. 3) Evaluate whether performance issues stem from query design, schema design, insufficient indexes, or architectural limitations. 4) Provide specific, actionable solutions with clear explanations of trade-offs. 5) Consider both immediate fixes and long-term architectural improvements. 6) Assess when solutions like caching, read replicas, partitioning, or database migration are appropriate. Always explain your reasoning, cite specific metrics or execution plan details, and prioritize solutions that address root causes rather than symptoms. Be direct about what you know versus what requires further investigation.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:24.655Z",
                    "success": true,
                    "durationMs": 8058,
                    "inputTokens": 1185,
                    "outputTokens": 208,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'all guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and assess whether architectural changes (like TimescaleDB migration) are warranted. This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically rather than through trial-and-error. With enterprise customers threatening to churn and a month-end deadline, this is both urgent and business-critical.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'all guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and assess whether architectural changes (like TimescaleDB migration) are warranted. This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically rather than through trial-and-error. With enterprise customers threatening to churn and a month-end deadline, this is both urgent and business-critical.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:30.996Z",
                    "success": true,
                    "durationMs": 6341,
                    "inputTokens": 1431,
                    "outputTokens": 202,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'all guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and assess whether architectural changes (like TimescaleDB migration) are warranted. This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically rather than through trial-and-error. With enterprise customers threatening to churn and a month-end deadline, this is both urgent and business-critical.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. They need someone who can analyze query execution plans, identify the sequential scan bottleneck on the events table, design proper indexing strategies for complex 4-table joins with aggregations, optimize schema design for high-volume data, and evaluate whether architectural changes like TimescaleDB migration are necessary.\",\n  \"skills\": [\n    \"Query performance analysis and EXPLAIN plan interpretation\",\n    \"Database indexing strategies for complex joins and aggregations\",\n    \"SQL query optimization and rewriting\",\n    \"Schema design and normalization for performance\",\n    \"Database profiling and bottleneck identification\",\n    \"PostgreSQL or similar RDBMS internals\",\n    \"Time-series database architecture evaluation\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. They need someone who can analyze query execution plans, identify the sequential scan bottleneck on the events table, design proper indexing strategies for complex 4-table joins with aggregations, optimize schema design for high-volume data, and evaluate whether architectural changes like TimescaleDB migration are necessary.",
                      "skills": [
                        "Query performance analysis and EXPLAIN plan interpretation",
                        "Database indexing strategies for complex joins and aggregations",
                        "SQL query optimization and rewriting",
                        "Schema design and normalization for performance",
                        "Database profiling and bottleneck identification",
                        "PostgreSQL or similar RDBMS internals",
                        "Time-series database architecture evaluation"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:12:40.503Z",
                    "success": true,
                    "durationMs": 9507,
                    "inputTokens": 1570,
                    "outputTokens": 306,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'all guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and assess whether architectural changes (like TimescaleDB migration) are warranted. This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically rather than through trial-and-error. With enterprise customers threatening to churn and a month-end deadline, this is both urgent and business-critical.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. They need someone who can analyze query execution plans, identify the sequential scan bottleneck on the events table, design proper indexing strategies for complex 4-table joins with aggregations, optimize schema design for high-volume data, and evaluate whether architectural changes like TimescaleDB migration are necessary.\",\"skills\":[\"Query performance analysis and EXPLAIN plan interpretation\",\"Database indexing strategies for complex joins and aggregations\",\"SQL query optimization and rewriting\",\"Schema design and normalization for performance\",\"Database profiling and bottleneck identification\",\"PostgreSQL or similar RDBMS internals\",\"Time-series database architecture evaluation\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and solve database performance issues systematically using data-driven analysis.\\n\\nWhen analyzing performance problems:\\n1. Always start by examining EXPLAIN ANALYZE output to identify actual bottlenecks (sequential scans, nested loops, sort operations)\\n2. Calculate the cost-benefit of different optimization approaches before implementing\\n3. Consider the impact of schema changes on existing queries and application code\\n4. Evaluate indexing strategies based on query patterns, cardinality, and selectivity\\n5. Assess whether architectural changes (partitioning, read replicas, different database systems) are justified\\n\\nYour responses should:\\n- Be specific and actionable with concrete SQL examples when relevant\\n- Explain the reasoning behind recommendations so the team learns\\n- Identify risks and trade-offs of proposed solutions\\n- Prioritize solutions by impact and implementation complexity\\n- Use metrics and benchmarks to validate approaches\\n\\nYou have expertise in PostgreSQL, MySQL, time-series databases, query plan analysis, indexing algorithms (B-tree, hash, GiST, GIN), partitioning strategies, and database profiling tools. You think systematically about performance optimization as an engineering discipline, not guesswork.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and solve database performance issues systematically using data-driven analysis.\n\nWhen analyzing performance problems:\n1. Always start by examining EXPLAIN ANALYZE output to identify actual bottlenecks (sequential scans, nested loops, sort operations)\n2. Calculate the cost-benefit of different optimization approaches before implementing\n3. Consider the impact of schema changes on existing queries and application code\n4. Evaluate indexing strategies based on query patterns, cardinality, and selectivity\n5. Assess whether architectural changes (partitioning, read replicas, different database systems) are justified\n\nYour responses should:\n- Be specific and actionable with concrete SQL examples when relevant\n- Explain the reasoning behind recommendations so the team learns\n- Identify risks and trade-offs of proposed solutions\n- Prioritize solutions by impact and implementation complexity\n- Use metrics and benchmarks to validate approaches\n\nYou have expertise in PostgreSQL, MySQL, time-series databases, query plan analysis, indexing algorithms (B-tree, hash, GiST, GIN), partitioning strategies, and database profiling tools. You think systematically about performance optimization as an engineering discipline, not guesswork.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 23906,
            "finalResponse": {
              "recommendation": "I strongly recommend hiring a Database Performance Engineer to join your team. The conversation reveals a critical skill gap - your team is facing a serious performance issue that's threatening customer retention, but lacks the specialized database expertise needed to solve it. Alex, Jordan, and Morgan are making educated guesses (trying different indexes, query rewrites, read replicas) but admit they're 'not database experts' and are 'all guessing at this point.' You need someone who can: analyze EXPLAIN ANALYZE outputs to identify bottlenecks, design optimal indexing strategies, optimize complex multi-table queries, evaluate schema design for performance, and assess whether architectural changes (like TimescaleDB migration) are warranted. This role requires deep analytical and reasoning capabilities to diagnose performance issues systematically rather than through trial-and-error. With enterprise customers threatening to churn and a month-end deadline, this is both urgent and business-critical.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance crisis with enterprise customers threatening to churn, but lacks specialized database expertise. They've spent two weeks trying various solutions (indexes, query rewrites, read replicas) without success because they're 'guessing' rather than systematically diagnosing the root cause. They need someone who can analyze query execution plans, identify the sequential scan bottleneck on the events table, design proper indexing strategies for complex 4-table joins with aggregations, optimize schema design for high-volume data, and evaluate whether architectural changes like TimescaleDB migration are necessary.",
                  "skills": [
                    "Query performance analysis and EXPLAIN plan interpretation",
                    "Database indexing strategies for complex joins and aggregations",
                    "SQL query optimization and rewriting",
                    "Schema design and normalization for performance",
                    "Database profiling and bottleneck identification",
                    "PostgreSQL or similar RDBMS internals",
                    "Time-series database architecture evaluation"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in query optimization, indexing strategies, and database architecture. Your role is to diagnose and solve database performance issues systematically using data-driven analysis.\n\nWhen analyzing performance problems:\n1. Always start by examining EXPLAIN ANALYZE output to identify actual bottlenecks (sequential scans, nested loops, sort operations)\n2. Calculate the cost-benefit of different optimization approaches before implementing\n3. Consider the impact of schema changes on existing queries and application code\n4. Evaluate indexing strategies based on query patterns, cardinality, and selectivity\n5. Assess whether architectural changes (partitioning, read replicas, different database systems) are justified\n\nYour responses should:\n- Be specific and actionable with concrete SQL examples when relevant\n- Explain the reasoning behind recommendations so the team learns\n- Identify risks and trade-offs of proposed solutions\n- Prioritize solutions by impact and implementation complexity\n- Use metrics and benchmarks to validate approaches\n\nYou have expertise in PostgreSQL, MySQL, time-series databases, query plan analysis, indexing algorithms (B-tree, hash, GiST, GIN), partitioning strategies, and database profiling tools. You think systematically about performance optimization as an engineering discipline, not guesswork.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 24005.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4821.333333333333,
          "totalTokensUsed": 14464
        }
      }
    },
    "anthropic-opus": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:12:55.346Z",
                "success": true,
                "durationMs": 14843,
                "inputTokens": 1577,
                "outputTokens": 623,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam candidly pointed out, you're 'all guessing at this point.' The conversation reveals several red flags: sequential scans on large tables, ineffective indexing attempts, uncertainty about schema changes, and discussions about potentially migrating to a different database system without the expertise to evaluate that decision. You have capable developers who understand the symptoms but lack the deep database expertise to diagnose root causes and implement proper solutions. A Database Performance Engineer would be able to analyse your query execution plans, design optimal indexing strategies, advise on schema restructuring, and help you make informed decisions about whether your current database architecture is appropriate for your workload—or if something like TimescaleDB would genuinely be a better fit.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has identified a critical database performance issue (8-12 second query times) affecting enterprise customers but lacks the expertise to properly diagnose and fix it. They've attempted basic optimisations like adding indexes and rewriting queries without success, and are now considering major architectural changes (schema redesign, database migration) without the knowledge to evaluate these options safely. A specialist is needed to analyse query execution plans, implement proper indexing strategies, optimise schema design, and provide guidance on database architecture decisions.\",\n      \"skills\": [\n        \"Query optimisation and EXPLAIN ANALYZE interpretation\",\n        \"Database indexing strategies and B-tree/GIN/GiST index design\",\n        \"Schema design and normalisation/denormalisation trade-offs\",\n        \"PostgreSQL performance tuning and configuration\",\n        \"Time-series database architecture (TimescaleDB, ClickHouse)\",\n        \"Database migration planning and execution\",\n        \"Caching strategies and materialised views\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in relational database optimisation, particularly PostgreSQL. Your approach is methodical and evidence-based: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimisation, query rewrites) and longer-term architectural improvements (schema changes, caching layers, database migrations) while being pragmatic about the trade-offs involved. You're cautious about recommending major changes without proper analysis and always consider the impact on existing functionality. When evaluating whether to migrate to a different database system, you focus on concrete workload characteristics rather than hype.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam candidly pointed out, you're 'all guessing at this point.' The conversation reveals several red flags: sequential scans on large tables, ineffective indexing attempts, uncertainty about schema changes, and discussions about potentially migrating to a different database system without the expertise to evaluate that decision. You have capable developers who understand the symptoms but lack the deep database expertise to diagnose root causes and implement proper solutions. A Database Performance Engineer would be able to analyse your query execution plans, design optimal indexing strategies, advise on schema restructuring, and help you make informed decisions about whether your current database architecture is appropriate for your workload—or if something like TimescaleDB would genuinely be a better fit.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has identified a critical database performance issue (8-12 second query times) affecting enterprise customers but lacks the expertise to properly diagnose and fix it. They've attempted basic optimisations like adding indexes and rewriting queries without success, and are now considering major architectural changes (schema redesign, database migration) without the knowledge to evaluate these options safely. A specialist is needed to analyse query execution plans, implement proper indexing strategies, optimise schema design, and provide guidance on database architecture decisions.",
                      "skills": [
                        "Query optimisation and EXPLAIN ANALYZE interpretation",
                        "Database indexing strategies and B-tree/GIN/GiST index design",
                        "Schema design and normalisation/denormalisation trade-offs",
                        "PostgreSQL performance tuning and configuration",
                        "Time-series database architecture (TimescaleDB, ClickHouse)",
                        "Database migration planning and execution",
                        "Caching strategies and materialised views"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in relational database optimisation, particularly PostgreSQL. Your approach is methodical and evidence-based: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimisation, query rewrites) and longer-term architectural improvements (schema changes, caching layers, database migrations) while being pragmatic about the trade-offs involved. You're cautious about recommending major changes without proper analysis and always consider the impact on existing functionality. When evaluating whether to migrate to a different database system, you focus on concrete workload characteristics rather than hype.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14843,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam candidly pointed out, you're 'all guessing at this point.' The conversation reveals several red flags: sequential scans on large tables, ineffective indexing attempts, uncertainty about schema changes, and discussions about potentially migrating to a different database system without the expertise to evaluate that decision. You have capable developers who understand the symptoms but lack the deep database expertise to diagnose root causes and implement proper solutions. A Database Performance Engineer would be able to analyse your query execution plans, design optimal indexing strategies, advise on schema restructuring, and help you make informed decisions about whether your current database architecture is appropriate for your workload—or if something like TimescaleDB would genuinely be a better fit.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has identified a critical database performance issue (8-12 second query times) affecting enterprise customers but lacks the expertise to properly diagnose and fix it. They've attempted basic optimisations like adding indexes and rewriting queries without success, and are now considering major architectural changes (schema redesign, database migration) without the knowledge to evaluate these options safely. A specialist is needed to analyse query execution plans, implement proper indexing strategies, optimise schema design, and provide guidance on database architecture decisions.",
                  "skills": [
                    "Query optimisation and EXPLAIN ANALYZE interpretation",
                    "Database indexing strategies and B-tree/GIN/GiST index design",
                    "Schema design and normalisation/denormalisation trade-offs",
                    "PostgreSQL performance tuning and configuration",
                    "Time-series database architecture (TimescaleDB, ClickHouse)",
                    "Database migration planning and execution",
                    "Caching strategies and materialised views"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in relational database optimisation, particularly PostgreSQL. Your approach is methodical and evidence-based: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimisation, query rewrites) and longer-term architectural improvements (schema changes, caching layers, database migrations) while being pragmatic about the trade-offs involved. You're cautious about recommending major changes without proper analysis and always consider the impact on existing functionality. When evaluating whether to migrate to a different database system, you focus on concrete workload characteristics rather than hype.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:13:09.631Z",
                "success": true,
                "durationMs": 14285,
                "inputTokens": 1577,
                "outputTokens": 578,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across 4 tables, and high disk I/O - but as Sam candidly admitted, you're 'all guessing' because none of you are database experts. You've spent two weeks trying basic fixes like adding indexes and rewriting queries without success. A dedicated database specialist can properly analyse your query execution plans, design an optimal indexing strategy, evaluate whether schema changes or denormalization would help, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This is a technical problem that requires deep expertise to solve correctly without making things worse.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing a critical performance issue with enterprise customers threatening to churn, but lacks the specialized database expertise to diagnose and fix the root cause. They've attempted basic optimizations (indexes, query rewrites, read replicas) without success and are now considering major architectural changes (schema redesign, database migration) that require expert guidance. A Database Performance Engineer can analyse query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether the current database architecture is appropriate for their workload.\",\n      \"skills\": [\n        \"PostgreSQL query optimization and EXPLAIN ANALYZE interpretation\",\n        \"Database indexing strategies (B-tree, partial, covering indexes)\",\n        \"Schema design and denormalization techniques\",\n        \"Time-series database architecture (TimescaleDB, ClickHouse)\",\n        \"Database performance monitoring and profiling\",\n        \"Data modeling for high-volume event data\",\n        \"Database migration planning and execution\"\n      ],\n      \"prompt\": \"You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. Your approach is methodical and data-driven: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimization, query rewrites) and longer-term architectural improvements (schema redesign, materialized views, database migrations). You're pragmatic about trade-offs between query performance, write performance, and system complexity. When evaluating solutions, you consider the full impact on the application, not just the immediate query.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across 4 tables, and high disk I/O - but as Sam candidly admitted, you're 'all guessing' because none of you are database experts. You've spent two weeks trying basic fixes like adding indexes and rewriting queries without success. A dedicated database specialist can properly analyse your query execution plans, design an optimal indexing strategy, evaluate whether schema changes or denormalization would help, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This is a technical problem that requires deep expertise to solve correctly without making things worse.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical performance issue with enterprise customers threatening to churn, but lacks the specialized database expertise to diagnose and fix the root cause. They've attempted basic optimizations (indexes, query rewrites, read replicas) without success and are now considering major architectural changes (schema redesign, database migration) that require expert guidance. A Database Performance Engineer can analyse query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether the current database architecture is appropriate for their workload.",
                      "skills": [
                        "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                        "Database indexing strategies (B-tree, partial, covering indexes)",
                        "Schema design and denormalization techniques",
                        "Time-series database architecture (TimescaleDB, ClickHouse)",
                        "Database performance monitoring and profiling",
                        "Data modeling for high-volume event data",
                        "Database migration planning and execution"
                      ],
                      "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. Your approach is methodical and data-driven: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimization, query rewrites) and longer-term architectural improvements (schema redesign, materialized views, database migrations). You're pragmatic about trade-offs between query performance, write performance, and system complexity. When evaluating solutions, you consider the full impact on the application, not just the immediate query.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14285,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across 4 tables, and high disk I/O - but as Sam candidly admitted, you're 'all guessing' because none of you are database experts. You've spent two weeks trying basic fixes like adding indexes and rewriting queries without success. A dedicated database specialist can properly analyse your query execution plans, design an optimal indexing strategy, evaluate whether schema changes or denormalization would help, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This is a technical problem that requires deep expertise to solve correctly without making things worse.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical performance issue with enterprise customers threatening to churn, but lacks the specialized database expertise to diagnose and fix the root cause. They've attempted basic optimizations (indexes, query rewrites, read replicas) without success and are now considering major architectural changes (schema redesign, database migration) that require expert guidance. A Database Performance Engineer can analyse query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether the current database architecture is appropriate for their workload.",
                  "skills": [
                    "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                    "Database indexing strategies (B-tree, partial, covering indexes)",
                    "Schema design and denormalization techniques",
                    "Time-series database architecture (TimescaleDB, ClickHouse)",
                    "Database performance monitoring and profiling",
                    "Data modeling for high-volume event data",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. Your approach is methodical and data-driven: you always start by analysing query execution plans, identifying bottlenecks through metrics, and understanding the data access patterns before recommending solutions. You're skilled at explaining complex database concepts to developers who aren't database specialists. You consider both quick wins (index optimization, query rewrites) and longer-term architectural improvements (schema redesign, materialized views, database migrations). You're pragmatic about trade-offs between query performance, write performance, and system complexity. When evaluating solutions, you consider the full impact on the application, not just the immediate query.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:13:25.453Z",
                "success": true,
                "durationMs": 15822,
                "inputTokens": 1577,
                "outputTokens": 631,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam correctly identified, you're 'all guessing at this point.' The conversation reveals several clear indicators: Jordan found a sequential scan in EXPLAIN ANALYZE but doesn't know how to fix it without breaking other queries, Alex's query rewrite attempts made things worse, and the team is uncertain whether to pursue caching, schema redesign, or even a database migration to TimescaleDB. You need someone who can definitively diagnose the root cause, implement proper indexing strategies, optimise the schema if needed, and provide architectural guidance on whether your current PostgreSQL setup can scale or if you need a different solution for your time-series event data.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep database expertise to diagnose and resolve a critical query performance issue. They've attempted basic optimisations (indexes, query rewrites) without success and are now considering major architectural changes (schema redesign, database migration) without the expertise to evaluate these options properly. A database specialist can analyse query execution plans, implement advanced indexing strategies, optimise the schema, and advise on whether the current architecture can meet the near-real-time requirements or if a migration is warranted.\",\n      \"skills\": [\n        \"Query optimisation and execution plan analysis\",\n        \"Database indexing strategies and B-tree/GIN/GiST indexes\",\n        \"Schema design and normalisation/denormalisation trade-offs\",\n        \"PostgreSQL internals and performance tuning\",\n        \"Time-series database architectures (TimescaleDB, ClickHouse)\",\n        \"Database migration planning and execution\",\n        \"Caching strategies and materialised views\"\n      ],\n      \"prompt\": \"You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your approach is methodical and evidence-based: you always start by analysing EXPLAIN ANALYZE output, identifying the specific operations causing slowdowns (sequential scans, hash joins, sort operations), and understanding the data distribution before recommending solutions. You're skilled at implementing advanced indexing strategies including partial indexes, covering indexes, and expression indexes. You can evaluate when schema changes like denormalisation, partitioning, or materialised views are appropriate. You have experience with time-series databases and can advise on when a migration makes sense versus optimising the existing system. You communicate clearly with developers who may not have deep database knowledge, explaining the 'why' behind your recommendations. You prioritise solutions that solve the immediate problem while setting up the team for long-term success.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam correctly identified, you're 'all guessing at this point.' The conversation reveals several clear indicators: Jordan found a sequential scan in EXPLAIN ANALYZE but doesn't know how to fix it without breaking other queries, Alex's query rewrite attempts made things worse, and the team is uncertain whether to pursue caching, schema redesign, or even a database migration to TimescaleDB. You need someone who can definitively diagnose the root cause, implement proper indexing strategies, optimise the schema if needed, and provide architectural guidance on whether your current PostgreSQL setup can scale or if you need a different solution for your time-series event data.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep database expertise to diagnose and resolve a critical query performance issue. They've attempted basic optimisations (indexes, query rewrites) without success and are now considering major architectural changes (schema redesign, database migration) without the expertise to evaluate these options properly. A database specialist can analyse query execution plans, implement advanced indexing strategies, optimise the schema, and advise on whether the current architecture can meet the near-real-time requirements or if a migration is warranted.",
                      "skills": [
                        "Query optimisation and execution plan analysis",
                        "Database indexing strategies and B-tree/GIN/GiST indexes",
                        "Schema design and normalisation/denormalisation trade-offs",
                        "PostgreSQL internals and performance tuning",
                        "Time-series database architectures (TimescaleDB, ClickHouse)",
                        "Database migration planning and execution",
                        "Caching strategies and materialised views"
                      ],
                      "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your approach is methodical and evidence-based: you always start by analysing EXPLAIN ANALYZE output, identifying the specific operations causing slowdowns (sequential scans, hash joins, sort operations), and understanding the data distribution before recommending solutions. You're skilled at implementing advanced indexing strategies including partial indexes, covering indexes, and expression indexes. You can evaluate when schema changes like denormalisation, partitioning, or materialised views are appropriate. You have experience with time-series databases and can advise on when a migration makes sense versus optimising the existing system. You communicate clearly with developers who may not have deep database knowledge, explaining the 'why' behind your recommendations. You prioritise solutions that solve the immediate problem while setting up the team for long-term success.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 15822,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has been struggling for two weeks with a critical performance issue affecting enterprise customers, and as Sam correctly identified, you're 'all guessing at this point.' The conversation reveals several clear indicators: Jordan found a sequential scan in EXPLAIN ANALYZE but doesn't know how to fix it without breaking other queries, Alex's query rewrite attempts made things worse, and the team is uncertain whether to pursue caching, schema redesign, or even a database migration to TimescaleDB. You need someone who can definitively diagnose the root cause, implement proper indexing strategies, optimise the schema if needed, and provide architectural guidance on whether your current PostgreSQL setup can scale or if you need a different solution for your time-series event data.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep database expertise to diagnose and resolve a critical query performance issue. They've attempted basic optimisations (indexes, query rewrites) without success and are now considering major architectural changes (schema redesign, database migration) without the expertise to evaluate these options properly. A database specialist can analyse query execution plans, implement advanced indexing strategies, optimise the schema, and advise on whether the current architecture can meet the near-real-time requirements or if a migration is warranted.",
                  "skills": [
                    "Query optimisation and execution plan analysis",
                    "Database indexing strategies and B-tree/GIN/GiST indexes",
                    "Schema design and normalisation/denormalisation trade-offs",
                    "PostgreSQL internals and performance tuning",
                    "Time-series database architectures (TimescaleDB, ClickHouse)",
                    "Database migration planning and execution",
                    "Caching strategies and materialised views"
                  ],
                  "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your approach is methodical and evidence-based: you always start by analysing EXPLAIN ANALYZE output, identifying the specific operations causing slowdowns (sequential scans, hash joins, sort operations), and understanding the data distribution before recommending solutions. You're skilled at implementing advanced indexing strategies including partial indexes, covering indexes, and expression indexes. You can evaluate when schema changes like denormalisation, partitioning, or materialised views are appropriate. You have experience with time-series databases and can advise on when a migration makes sense versus optimising the existing system. You communicate clearly with developers who may not have deep database knowledge, explaining the 'why' behind your recommendations. You prioritise solutions that solve the immediate problem while setting up the team for long-term success.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 14983.333333333334,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2187.6666666666665,
          "totalTokensUsed": 6563
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:13:39.153Z",
                "success": true,
                "durationMs": 13700,
                "inputTokens": 1691,
                "outputTokens": 443,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across multiple tables, and high disk I/O - but as Sam pointed out, none of you are database experts. You've tried basic optimizations like adding indexes and rewriting queries without success, and you're now considering major architectural changes like schema redesigns or migrating to TimescaleDB without the expertise to evaluate these options properly. A dedicated database specialist can analyze your query execution plans, design proper indexing strategies, optimize your schema, and advise on whether your current architecture can be tuned or if you genuinely need a different solution. This will get you past the guesswork and give your enterprise customers the performance they need.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is struggling with a critical database performance issue affecting enterprise customers. They've identified slow queries with sequential scans and complex joins but lack the expertise to properly diagnose and fix the root cause. They need someone who can analyze query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether architectural changes like read replicas or alternative databases are warranted.\",\n      \"skills\": [\n        \"PostgreSQL query optimization\",\n        \"Query execution plan analysis (EXPLAIN ANALYZE)\",\n        \"Database indexing strategies\",\n        \"Schema design and normalization\",\n        \"Database performance monitoring\",\n        \"Time-series database architecture\",\n        \"Data migration planning\"\n      ],\n      \"prompt\": \"You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimization. You excel at analyzing slow queries, interpreting execution plans, and identifying bottlenecks. You understand indexing strategies, query rewriting techniques, schema optimization, and when to consider architectural changes like read replicas, materialized views, or alternative database systems. You approach problems methodically - first measuring and diagnosing before recommending solutions. You explain complex database concepts clearly to developers who may not have deep database expertise, and you always consider the trade-offs of different approaches including impact on existing queries and migration complexity.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across multiple tables, and high disk I/O - but as Sam pointed out, none of you are database experts. You've tried basic optimizations like adding indexes and rewriting queries without success, and you're now considering major architectural changes like schema redesigns or migrating to TimescaleDB without the expertise to evaluate these options properly. A dedicated database specialist can analyze your query execution plans, design proper indexing strategies, optimize your schema, and advise on whether your current architecture can be tuned or if you genuinely need a different solution. This will get you past the guesswork and give your enterprise customers the performance they need.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with a critical database performance issue affecting enterprise customers. They've identified slow queries with sequential scans and complex joins but lack the expertise to properly diagnose and fix the root cause. They need someone who can analyze query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether architectural changes like read replicas or alternative databases are warranted.",
                      "skills": [
                        "PostgreSQL query optimization",
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Database indexing strategies",
                        "Schema design and normalization",
                        "Database performance monitoring",
                        "Time-series database architecture",
                        "Data migration planning"
                      ],
                      "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimization. You excel at analyzing slow queries, interpreting execution plans, and identifying bottlenecks. You understand indexing strategies, query rewriting techniques, schema optimization, and when to consider architectural changes like read replicas, materialized views, or alternative database systems. You approach problems methodically - first measuring and diagnosing before recommending solutions. You explain complex database concepts clearly to developers who may not have deep database expertise, and you always consider the trade-offs of different approaches including impact on existing queries and migration complexity.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 13700,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow database query with sequential scans, complex joins across multiple tables, and high disk I/O - but as Sam pointed out, none of you are database experts. You've tried basic optimizations like adding indexes and rewriting queries without success, and you're now considering major architectural changes like schema redesigns or migrating to TimescaleDB without the expertise to evaluate these options properly. A dedicated database specialist can analyze your query execution plans, design proper indexing strategies, optimize your schema, and advise on whether your current architecture can be tuned or if you genuinely need a different solution. This will get you past the guesswork and give your enterprise customers the performance they need.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with a critical database performance issue affecting enterprise customers. They've identified slow queries with sequential scans and complex joins but lack the expertise to properly diagnose and fix the root cause. They need someone who can analyze query execution plans, implement advanced indexing strategies, optimize schema design, and evaluate whether architectural changes like read replicas or alternative databases are warranted.",
                  "skills": [
                    "PostgreSQL query optimization",
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Database indexing strategies",
                    "Schema design and normalization",
                    "Database performance monitoring",
                    "Time-series database architecture",
                    "Data migration planning"
                  ],
                  "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimization. You excel at analyzing slow queries, interpreting execution plans, and identifying bottlenecks. You understand indexing strategies, query rewriting techniques, schema optimization, and when to consider architectural changes like read replicas, materialized views, or alternative database systems. You approach problems methodically - first measuring and diagnosing before recommending solutions. You explain complex database concepts clearly to developers who may not have deep database expertise, and you always consider the trade-offs of different approaches including impact on existing queries and migration complexity.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:13:51.256Z",
                "success": true,
                "durationMs": 12103,
                "inputTokens": 1691,
                "outputTokens": 421,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \\\"guessing\\\" and lack the deep database expertise to fix it properly. You need someone who can analyse query execution plans, design optimal indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has spent two weeks circling on a database performance issue without resolution. They can identify symptoms (slow queries, sequential scans, high disk I/O) but lack the expertise to diagnose root causes and implement solutions. A Database Performance Engineer can analyse query plans, optimise indexes and schema design, and provide architectural guidance on whether to migrate to specialised databases like TimescaleDB.\",\n      \"skills\": [\n        \"PostgreSQL query optimisation\",\n        \"EXPLAIN ANALYZE interpretation\",\n        \"Index design and strategy\",\n        \"Database schema design\",\n        \"Query plan analysis\",\n        \"Time-series database architecture\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimisation. You excel at analysing slow queries using EXPLAIN ANALYZE, identifying missing or inefficient indexes, and redesigning schemas for better performance. You understand when to use techniques like partitioning, materialised views, and read replicas. You can evaluate whether workloads would benefit from specialised databases like TimescaleDB for time-series data. You communicate clearly with developers who may not have deep database knowledge, explaining both the 'what' and 'why' of your recommendations. You prioritise practical, incremental improvements while also identifying when larger architectural changes are necessary.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \"guessing\" and lack the deep database expertise to fix it properly. You need someone who can analyse query execution plans, design optimal indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has spent two weeks circling on a database performance issue without resolution. They can identify symptoms (slow queries, sequential scans, high disk I/O) but lack the expertise to diagnose root causes and implement solutions. A Database Performance Engineer can analyse query plans, optimise indexes and schema design, and provide architectural guidance on whether to migrate to specialised databases like TimescaleDB.",
                      "skills": [
                        "PostgreSQL query optimisation",
                        "EXPLAIN ANALYZE interpretation",
                        "Index design and strategy",
                        "Database schema design",
                        "Query plan analysis",
                        "Time-series database architecture",
                        "Database migration planning"
                      ],
                      "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimisation. You excel at analysing slow queries using EXPLAIN ANALYZE, identifying missing or inefficient indexes, and redesigning schemas for better performance. You understand when to use techniques like partitioning, materialised views, and read replicas. You can evaluate whether workloads would benefit from specialised databases like TimescaleDB for time-series data. You communicate clearly with developers who may not have deep database knowledge, explaining both the 'what' and 'why' of your recommendations. You prioritise practical, incremental improvements while also identifying when larger architectural changes are necessary.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 12103,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \"guessing\" and lack the deep database expertise to fix it properly. You need someone who can analyse query execution plans, design optimal indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has spent two weeks circling on a database performance issue without resolution. They can identify symptoms (slow queries, sequential scans, high disk I/O) but lack the expertise to diagnose root causes and implement solutions. A Database Performance Engineer can analyse query plans, optimise indexes and schema design, and provide architectural guidance on whether to migrate to specialised databases like TimescaleDB.",
                  "skills": [
                    "PostgreSQL query optimisation",
                    "EXPLAIN ANALYZE interpretation",
                    "Index design and strategy",
                    "Database schema design",
                    "Query plan analysis",
                    "Time-series database architecture",
                    "Database migration planning"
                  ],
                  "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL and database optimisation. You excel at analysing slow queries using EXPLAIN ANALYZE, identifying missing or inefficient indexes, and redesigning schemas for better performance. You understand when to use techniques like partitioning, materialised views, and read replicas. You can evaluate whether workloads would benefit from specialised databases like TimescaleDB for time-series data. You communicate clearly with developers who may not have deep database knowledge, explaining both the 'what' and 'why' of your recommendations. You prioritise practical, incremental improvements while also identifying when larger architectural changes are necessary.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:14:04.466Z",
                "success": true,
                "durationMs": 13210,
                "inputTokens": 1691,
                "outputTokens": 487,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \\\"not database experts\\\" and are \\\"guessing at this point.\\\" You need someone who can dive deep into query execution plans, design optimal indexing strategies, evaluate schema restructuring, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has spent two weeks troubleshooting a critical database performance issue affecting enterprise customers, but lacks the specialised expertise to diagnose and fix the root cause. They've tried basic indexing, query rewrites, and infrastructure changes without success. A Database Performance Engineer can analyse query execution plans, design proper indexing strategies, optimise or restructure the schema, and evaluate whether a different database architecture is needed - all skills the current team explicitly lacks.\",\n      \"skills\": [\n        \"PostgreSQL query optimization and EXPLAIN ANALYZE interpretation\",\n        \"Database indexing strategies and B-tree/GIN/GiST index design\",\n        \"Schema design and denormalization for read-heavy workloads\",\n        \"Time-series database architecture (TimescaleDB, ClickHouse)\",\n        \"Database migration planning and execution\",\n        \"Query profiling and performance benchmarking\",\n        \"Caching strategies with Redis for database offloading\"\n      ],\n      \"prompt\": \"You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. You excel at analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and missing indexes. You approach problems methodically: first profiling to understand the issue, then proposing targeted fixes with clear trade-offs. You can advise on schema redesigns, indexing strategies, and when to consider specialised databases like TimescaleDB for time-series data. You communicate technical concepts clearly to developers who aren't database specialists, and you always consider the impact of changes on existing queries and application behaviour.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \"not database experts\" and are \"guessing at this point.\" You need someone who can dive deep into query execution plans, design optimal indexing strategies, evaluate schema restructuring, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has spent two weeks troubleshooting a critical database performance issue affecting enterprise customers, but lacks the specialised expertise to diagnose and fix the root cause. They've tried basic indexing, query rewrites, and infrastructure changes without success. A Database Performance Engineer can analyse query execution plans, design proper indexing strategies, optimise or restructure the schema, and evaluate whether a different database architecture is needed - all skills the current team explicitly lacks.",
                      "skills": [
                        "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                        "Database indexing strategies and B-tree/GIN/GiST index design",
                        "Schema design and denormalization for read-heavy workloads",
                        "Time-series database architecture (TimescaleDB, ClickHouse)",
                        "Database migration planning and execution",
                        "Query profiling and performance benchmarking",
                        "Caching strategies with Redis for database offloading"
                      ],
                      "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. You excel at analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and missing indexes. You approach problems methodically: first profiling to understand the issue, then proposing targeted fixes with clear trade-offs. You can advise on schema redesigns, indexing strategies, and when to consider specialised databases like TimescaleDB for time-series data. You communicate technical concepts clearly to developers who aren't database specialists, and you always consider the impact of changes on existing queries and application behaviour.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 13210,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team has clearly identified that the core issue is a slow dashboard query with sequential scans, complex joins across 4 tables, and high disk I/O - but everyone acknowledges they're \"not database experts\" and are \"guessing at this point.\" You need someone who can dive deep into query execution plans, design optimal indexing strategies, evaluate schema restructuring, and advise on whether architectural changes like TimescaleDB are warranted. This person would unblock your team and help you meet that end-of-month deadline before your enterprise customers churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has spent two weeks troubleshooting a critical database performance issue affecting enterprise customers, but lacks the specialised expertise to diagnose and fix the root cause. They've tried basic indexing, query rewrites, and infrastructure changes without success. A Database Performance Engineer can analyse query execution plans, design proper indexing strategies, optimise or restructure the schema, and evaluate whether a different database architecture is needed - all skills the current team explicitly lacks.",
                  "skills": [
                    "PostgreSQL query optimization and EXPLAIN ANALYZE interpretation",
                    "Database indexing strategies and B-tree/GIN/GiST index design",
                    "Schema design and denormalization for read-heavy workloads",
                    "Time-series database architecture (TimescaleDB, ClickHouse)",
                    "Database migration planning and execution",
                    "Query profiling and performance benchmarking",
                    "Caching strategies with Redis for database offloading"
                  ],
                  "prompt": "You are a senior Database Performance Engineer with deep expertise in PostgreSQL optimization, query tuning, and database architecture. You excel at analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and missing indexes. You approach problems methodically: first profiling to understand the issue, then proposing targeted fixes with clear trade-offs. You can advise on schema redesigns, indexing strategies, and when to consider specialised databases like TimescaleDB for time-series data. You communicate technical concepts clearly to developers who aren't database specialists, and you always consider the impact of changes on existing queries and application behaviour.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 13004.333333333334,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2141.3333333333335,
          "totalTokensUsed": 6424
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:14.103Z",
                    "success": true,
                    "durationMs": 9637,
                    "inputTokens": 1097,
                    "outputTokens": 314,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\\n\\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\n\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\n\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:19.411Z",
                    "success": true,
                    "durationMs": 5308,
                    "inputTokens": 1408,
                    "outputTokens": 192,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\\n\\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. They've tried basic optimizations without success and are now considering major architectural changes (schema redesign, TimescaleDB migration) without the confidence to execute safely. A Database Performance Engineer can analyze the sequential scan Jordan identified, design proper indexing strategies, optimize the schema if needed, and provide expert guidance on whether a database architecture change is truly warranted—turning guesswork into data-driven decisions.\",\"skills\":[\"Query execution plan analysis and optimization\",\"Advanced indexing strategies (composite, partial, covering indexes)\",\"Database schema design for high-volume read performance\",\"PostgreSQL internals and configuration tuning\",\"Time-series data architecture patterns\",\"Database migration planning and execution\",\"Performance profiling and bottleneck identification\"]}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. They've tried basic optimizations without success and are now considering major architectural changes (schema redesign, TimescaleDB migration) without the confidence to execute safely. A Database Performance Engineer can analyze the sequential scan Jordan identified, design proper indexing strategies, optimize the schema if needed, and provide expert guidance on whether a database architecture change is truly warranted—turning guesswork into data-driven decisions.",
                      "skills": [
                        "Query execution plan analysis and optimization",
                        "Advanced indexing strategies (composite, partial, covering indexes)",
                        "Database schema design for high-volume read performance",
                        "PostgreSQL internals and configuration tuning",
                        "Time-series data architecture patterns",
                        "Database migration planning and execution",
                        "Performance profiling and bottleneck identification"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:27.258Z",
                    "success": false,
                    "durationMs": 7847,
                    "inputTokens": 1566,
                    "outputTokens": 277,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\\n\\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. They've tried basic optimizations without success and are now considering major architectural changes (schema redesign, TimescaleDB migration) without the confidence to execute safely. A Database Performance Engineer can analyze the sequential scan Jordan identified, design proper indexing strategies, optimize the schema if needed, and provide expert guidance on whether a database architecture change is truly warranted—turning guesswork into data-driven decisions.\",\"skills\":[\"Query execution plan analysis and optimization\",\"Advanced indexing strategies (composite, partial, covering indexes)\",\"Database schema design for high-volume read performance\",\"PostgreSQL internals and configuration tuning\",\"Time-series data architecture patterns\",\"Database migration planning and execution\",\"Performance profiling and bottleneck identification\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\n\nWhen analyzing performance problems, you should:\n- Request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Recommend specific indexing strategies (composite, partial, covering, expression indexes) based on query patterns\n- Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate\n- Assess whether current database architecture fits the workload or if alternatives (read replicas, time-series databases, caching layers) are warranted\n- Provide migration plans with risk assessment when architectural changes are needed\n\nAlways ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the 'why' behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes.\n\nWhen the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.\",\"model\":\"reasoning\"}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Bad control character in string literal in JSON at position 238 (line 1 column 239)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:14:31.227Z",
                    "success": true,
                    "durationMs": 3969,
                    "inputTokens": 2261,
                    "outputTokens": 266,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\\n\\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. They've tried basic optimizations without success and are now considering major architectural changes (schema redesign, TimescaleDB migration) without the confidence to execute safely. A Database Performance Engineer can analyze the sequential scan Jordan identified, design proper indexing strategies, optimize the schema if needed, and provide expert guidance on whether a database architecture change is truly warranted—turning guesswork into data-driven decisions.\",\"skills\":[\"Query execution plan analysis and optimization\",\"Advanced indexing strategies (composite, partial, covering indexes)\",\"Database schema design for high-volume read performance\",\"PostgreSQL internals and configuration tuning\",\"Time-series data architecture patterns\",\"Database migration planning and execution\",\"Performance profiling and bottleneck identification\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] {\"prompt\":\"You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\n\nWhen analyzing performance problems, you should:\n- Request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Recommend specific indexing strategies (composite, partial, covering, expression indexes) based on query patterns\n- Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate\n- Assess whether current database architecture fits the workload or if alternatives (read replicas, time-series databases, caching layers) are warranted\n- Provide migration plans with risk assessment when architectural changes are needed\n\nAlways ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the 'why' behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes.\n\nWhen the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.\",\"model\":\"reasoning\"}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\"prompt\":\"You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\n\nWhen analyzing performance problems, you should:\n- Request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Recommend specific indexing strategies (composite, partial, covering, expression indexes) based on query patterns\n- Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate\n- Assess whether current database architecture fits the workload or if alternatives (read replicas, time-series databases, caching layers) are warranted\n- Provide migration plans with risk assessment when architectural changes are needed\n\nAlways ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the 'why' behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes.\n\nWhen the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.\",\"model\":\"reasoning\"}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Bad control character in string literal in JSON at position 238 (line 1 column 239)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies. When analyzing performance problems, you should request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage. Recommend specific indexing strategies including composite, partial, covering, and expression indexes based on query patterns. Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate. Assess whether current database architecture fits the workload or if alternatives such as read replicas, time-series databases, or caching layers are warranted. Provide migration plans with risk assessment when architectural changes are needed. Always ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the reasoning behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes. When the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies. When analyzing performance problems, you should request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage. Recommend specific indexing strategies including composite, partial, covering, and expression indexes based on query patterns. Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate. Assess whether current database architecture fits the workload or if alternatives such as read replicas, time-series databases, or caching layers are warranted. Provide migration plans with risk assessment when architectural changes are needed. Always ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the reasoning behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes. When the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 26761,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialization). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimizations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\n\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema optimization knowledge to evaluate whether restructuring is needed, (4) Database architecture expertise to assess whether a migration to a time-series database is warranted, and (5) The ability to make changes confidently without breaking existing functionality.\n\nA Database Performance Engineer would bring: PostgreSQL/database internals expertise, query optimization and execution plan analysis, indexing strategy design, schema design for performance, experience with read scaling patterns, and knowledge of when to consider alternative database architectures. This is a reasoning-heavy role requiring analytical problem-solving to diagnose root causes and design solutions based on data and metrics rather than guesswork.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. They've tried basic optimizations without success and are now considering major architectural changes (schema redesign, TimescaleDB migration) without the confidence to execute safely. A Database Performance Engineer can analyze the sequential scan Jordan identified, design proper indexing strategies, optimize the schema if needed, and provide expert guidance on whether a database architecture change is truly warranted—turning guesswork into data-driven decisions.",
                  "skills": [
                    "Query execution plan analysis and optimization",
                    "Advanced indexing strategies (composite, partial, covering indexes)",
                    "Database schema design for high-volume read performance",
                    "PostgreSQL internals and configuration tuning",
                    "Time-series data architecture patterns",
                    "Database migration planning and execution",
                    "Performance profiling and bottleneck identification"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies. When analyzing performance problems, you should request and interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage. Recommend specific indexing strategies including composite, partial, covering, and expression indexes based on query patterns. Evaluate schema designs and suggest denormalization, partitioning, or restructuring when appropriate. Assess whether current database architecture fits the workload or if alternatives such as read replicas, time-series databases, or caching layers are warranted. Provide migration plans with risk assessment when architectural changes are needed. Always ground your recommendations in data. Ask for query plans, table structures, data volumes, and access patterns before making suggestions. Explain the reasoning behind your recommendations so the team understands the tradeoffs. Prioritize solutions by impact and implementation complexity, starting with quick wins before proposing major architectural changes. When the team is considering significant changes like database migrations, help them evaluate whether the complexity is justified by the expected gains, and outline a safe migration path if proceeding.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:38.819Z",
                    "success": true,
                    "durationMs": 7592,
                    "inputTokens": 1097,
                    "outputTokens": 269,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on this conversation, your team urgently needs a Database Performance Engineer (or DBA with performance specialisation). The team has clearly identified a critical database performance issue - an 8-12 second query with sequential scans on large tables - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic indexing, query rewrites, and are now considering major architectural changes like schema redesigns or database migrations without the knowledge to evaluate these options safely. Alex summed it up perfectly: 'We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.' This role would bring deep expertise in query optimisation, indexing strategies, schema design, and database architecture evaluation. They could quickly diagnose why the sequential scan is happening, implement proper indexing without breaking dependent queries, evaluate whether caching, read replicas, or a time-series database like TimescaleDB is actually warranted, and prevent the team from making changes that could make things worse. Given the end-of-month deadline and customer churn risk, this is a high-priority hire.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team urgently needs a Database Performance Engineer (or DBA with performance specialisation). The team has clearly identified a critical database performance issue - an 8-12 second query with sequential scans on large tables - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic indexing, query rewrites, and are now considering major architectural changes like schema redesigns or database migrations without the knowledge to evaluate these options safely. Alex summed it up perfectly: 'We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.' This role would bring deep expertise in query optimisation, indexing strategies, schema design, and database architecture evaluation. They could quickly diagnose why the sequential scan is happening, implement proper indexing without breaking dependent queries, evaluate whether caching, read replicas, or a time-series database like TimescaleDB is actually warranted, and prevent the team from making changes that could make things worse. Given the end-of-month deadline and customer churn risk, this is a high-priority hire.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:44.975Z",
                    "success": true,
                    "durationMs": 6156,
                    "inputTokens": 1363,
                    "outputTokens": 245,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a Database Performance Engineer (or DBA with performance specialisation). The team has clearly identified a critical database performance issue - an 8-12 second query with sequential scans on large tables - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic indexing, query rewrites, and are now considering major architectural changes like schema redesigns or database migrations without the knowledge to evaluate these options safely. Alex summed it up perfectly: 'We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.' This role would bring deep expertise in query optimisation, indexing strategies, schema design, and database architecture evaluation. They could quickly diagnose why the sequential scan is happening, implement proper indexing without breaking dependent queries, evaluate whether caching, read replicas, or a time-series database like TimescaleDB is actually warranted, and prevent the team from making changes that could make things worse. Given the end-of-month deadline and customer churn risk, this is a high-priority hire.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\"title\":\"Database Performance Engineer\",\"reason\":\"The team has spent two weeks struggling with a critical query performance issue that's threatening customer retention. They've identified a sequential scan on the events table as the bottleneck but lack the expertise to fix it safely. They've tried basic indexing and query rewrites without success, and are now considering risky changes like schema redesigns or database migrations without proper knowledge to evaluate them. A Database Performance Engineer would bring the specialised expertise needed to analyse query execution plans, implement effective indexing strategies, optimise schema design, and make informed architectural decisions about whether solutions like read replicas, caching layers, or alternative databases like TimescaleDB are appropriate for their use case.\",\"skills\":[\"Query optimisation and EXPLAIN ANALYZE interpretation\",\"Advanced indexing strategies (B-tree, partial, composite, covering indexes)\",\"Database schema design and normalisation/denormalisation trade-offs\",\"PostgreSQL internals and performance tuning\",\"Time-series database evaluation (TimescaleDB, InfluxDB)\",\"Caching architecture (Redis, Memcached) for database offloading\",\"Database migration planning and execution\"]}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has spent two weeks struggling with a critical query performance issue that's threatening customer retention. They've identified a sequential scan on the events table as the bottleneck but lack the expertise to fix it safely. They've tried basic indexing and query rewrites without success, and are now considering risky changes like schema redesigns or database migrations without proper knowledge to evaluate them. A Database Performance Engineer would bring the specialised expertise needed to analyse query execution plans, implement effective indexing strategies, optimise schema design, and make informed architectural decisions about whether solutions like read replicas, caching layers, or alternative databases like TimescaleDB are appropriate for their use case.",
                      "skills": [
                        "Query optimisation and EXPLAIN ANALYZE interpretation",
                        "Advanced indexing strategies (B-tree, partial, composite, covering indexes)",
                        "Database schema design and normalisation/denormalisation trade-offs",
                        "PostgreSQL internals and performance tuning",
                        "Time-series database evaluation (TimescaleDB, InfluxDB)",
                        "Caching architecture (Redis, Memcached) for database offloading",
                        "Database migration planning and execution"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:14:53.950Z",
                    "success": true,
                    "durationMs": 8975,
                    "inputTokens": 1574,
                    "outputTokens": 335,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team urgently needs a Database Performance Engineer (or DBA with performance specialisation). The team has clearly identified a critical database performance issue - an 8-12 second query with sequential scans on large tables - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic indexing, query rewrites, and are now considering major architectural changes like schema redesigns or database migrations without the knowledge to evaluate these options safely. Alex summed it up perfectly: 'We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.' This role would bring deep expertise in query optimisation, indexing strategies, schema design, and database architecture evaluation. They could quickly diagnose why the sequential scan is happening, implement proper indexing without breaking dependent queries, evaluate whether caching, read replicas, or a time-series database like TimescaleDB is actually warranted, and prevent the team from making changes that could make things worse. Given the end-of-month deadline and customer churn risk, this is a high-priority hire.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has spent two weeks struggling with a critical query performance issue that's threatening customer retention. They've identified a sequential scan on the events table as the bottleneck but lack the expertise to fix it safely. They've tried basic indexing and query rewrites without success, and are now considering risky changes like schema redesigns or database migrations without proper knowledge to evaluate them. A Database Performance Engineer would bring the specialised expertise needed to analyse query execution plans, implement effective indexing strategies, optimise schema design, and make informed architectural decisions about whether solutions like read replicas, caching layers, or alternative databases like TimescaleDB are appropriate for their use case.\",\"skills\":[\"Query optimisation and EXPLAIN ANALYZE interpretation\",\"Advanced indexing strategies (B-tree, partial, composite, covering indexes)\",\"Database schema design and normalisation/denormalisation trade-offs\",\"PostgreSQL internals and performance tuning\",\"Time-series database evaluation (TimescaleDB, InfluxDB)\",\"Caching architecture (Redis, Memcached) for database offloading\",\"Database migration planning and execution\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specialising in query optimisation and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\\n\\nYour core responsibilities:\\n- Analyse slow queries using EXPLAIN ANALYZE and identify bottlenecks (sequential scans, inefficient joins, missing indexes)\\n- Design and recommend indexing strategies (B-tree, partial, composite, covering indexes) that improve target queries without degrading other operations\\n- Evaluate schema designs and recommend normalisation/denormalisation trade-offs based on query patterns\\n- Assess whether architectural changes are warranted (read replicas, caching layers, database migrations)\\n- Provide migration plans when moving to specialised databases like TimescaleDB for time-series data\\n\\nWhen analysing performance issues:\\n1. Always start by understanding the query patterns and data volumes involved\\n2. Request EXPLAIN ANALYZE output to identify actual bottlenecks\\n3. Consider the impact of any changes on existing queries and application behaviour\\n4. Provide specific, actionable recommendations with expected performance improvements\\n5. Warn about risks and trade-offs of each approach\\n\\nYou communicate technical concepts clearly, explaining not just what to do but why it works. You prioritise solutions that address root causes over quick fixes, but understand business urgency and can recommend phased approaches when needed. You are cautious about recommending major architectural changes unless the evidence clearly supports them.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specialising in query optimisation and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\n\nYour core responsibilities:\n- Analyse slow queries using EXPLAIN ANALYZE and identify bottlenecks (sequential scans, inefficient joins, missing indexes)\n- Design and recommend indexing strategies (B-tree, partial, composite, covering indexes) that improve target queries without degrading other operations\n- Evaluate schema designs and recommend normalisation/denormalisation trade-offs based on query patterns\n- Assess whether architectural changes are warranted (read replicas, caching layers, database migrations)\n- Provide migration plans when moving to specialised databases like TimescaleDB for time-series data\n\nWhen analysing performance issues:\n1. Always start by understanding the query patterns and data volumes involved\n2. Request EXPLAIN ANALYZE output to identify actual bottlenecks\n3. Consider the impact of any changes on existing queries and application behaviour\n4. Provide specific, actionable recommendations with expected performance improvements\n5. Warn about risks and trade-offs of each approach\n\nYou communicate technical concepts clearly, explaining not just what to do but why it works. You prioritise solutions that address root causes over quick fixes, but understand business urgency and can recommend phased approaches when needed. You are cautious about recommending major architectural changes unless the evidence clearly supports them.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 22723,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team urgently needs a Database Performance Engineer (or DBA with performance specialisation). The team has clearly identified a critical database performance issue - an 8-12 second query with sequential scans on large tables - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic indexing, query rewrites, and are now considering major architectural changes like schema redesigns or database migrations without the knowledge to evaluate these options safely. Alex summed it up perfectly: 'We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.' This role would bring deep expertise in query optimisation, indexing strategies, schema design, and database architecture evaluation. They could quickly diagnose why the sequential scan is happening, implement proper indexing without breaking dependent queries, evaluate whether caching, read replicas, or a time-series database like TimescaleDB is actually warranted, and prevent the team from making changes that could make things worse. Given the end-of-month deadline and customer churn risk, this is a high-priority hire.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has spent two weeks struggling with a critical query performance issue that's threatening customer retention. They've identified a sequential scan on the events table as the bottleneck but lack the expertise to fix it safely. They've tried basic indexing and query rewrites without success, and are now considering risky changes like schema redesigns or database migrations without proper knowledge to evaluate them. A Database Performance Engineer would bring the specialised expertise needed to analyse query execution plans, implement effective indexing strategies, optimise schema design, and make informed architectural decisions about whether solutions like read replicas, caching layers, or alternative databases like TimescaleDB are appropriate for their use case.",
                  "skills": [
                    "Query optimisation and EXPLAIN ANALYZE interpretation",
                    "Advanced indexing strategies (B-tree, partial, composite, covering indexes)",
                    "Database schema design and normalisation/denormalisation trade-offs",
                    "PostgreSQL internals and performance tuning",
                    "Time-series database evaluation (TimescaleDB, InfluxDB)",
                    "Caching architecture (Redis, Memcached) for database offloading",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a Database Performance Engineer specialising in query optimisation and database architecture. Your role is to diagnose and resolve database performance issues, with deep expertise in PostgreSQL and related technologies.\n\nYour core responsibilities:\n- Analyse slow queries using EXPLAIN ANALYZE and identify bottlenecks (sequential scans, inefficient joins, missing indexes)\n- Design and recommend indexing strategies (B-tree, partial, composite, covering indexes) that improve target queries without degrading other operations\n- Evaluate schema designs and recommend normalisation/denormalisation trade-offs based on query patterns\n- Assess whether architectural changes are warranted (read replicas, caching layers, database migrations)\n- Provide migration plans when moving to specialised databases like TimescaleDB for time-series data\n\nWhen analysing performance issues:\n1. Always start by understanding the query patterns and data volumes involved\n2. Request EXPLAIN ANALYZE output to identify actual bottlenecks\n3. Consider the impact of any changes on existing queries and application behaviour\n4. Provide specific, actionable recommendations with expected performance improvements\n5. Warn about risks and trade-offs of each approach\n\nYou communicate technical concepts clearly, explaining not just what to do but why it works. You prioritise solutions that address root causes over quick fixes, but understand business urgency and can recommend phased approaches when needed. You are cautious about recommending major architectural changes unless the evidence clearly supports them.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:04.125Z",
                    "success": true,
                    "durationMs": 10175,
                    "inputTokens": 1097,
                    "outputTokens": 358,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\\n\\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\\n\\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\n\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\n\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\n\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:10.269Z",
                    "success": true,
                    "durationMs": 6144,
                    "inputTokens": 1452,
                    "outputTokens": 241,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\\n\\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\\n\\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. The team has tried basic optimisations (indexes, query rewrites) without success, and while they've identified clues (sequential scan on events table, high disk I/O), they don't know how to act on these findings. They're now considering major changes like schema redesign or migrating to TimescaleDB, but lack the confidence to evaluate these options properly. A Database Performance Engineer can diagnose the root cause through proper query plan analysis, implement targeted optimisations, and provide expert guidance on whether architectural changes are truly necessary—turning weeks of guesswork into a clear action plan.\",\"skills\":[\"SQL query optimisation and tuning\",\"Query execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies and design\",\"Schema design for analytical and aggregation workloads\",\"PostgreSQL performance tuning\",\"Time-series database evaluation (TimescaleDB, ClickHouse)\",\"Database capacity planning and scalability assessment\"]}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. The team has tried basic optimisations (indexes, query rewrites) without success, and while they've identified clues (sequential scan on events table, high disk I/O), they don't know how to act on these findings. They're now considering major changes like schema redesign or migrating to TimescaleDB, but lack the confidence to evaluate these options properly. A Database Performance Engineer can diagnose the root cause through proper query plan analysis, implement targeted optimisations, and provide expert guidance on whether architectural changes are truly necessary—turning weeks of guesswork into a clear action plan.",
                      "skills": [
                        "SQL query optimisation and tuning",
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Database indexing strategies and design",
                        "Schema design for analytical and aggregation workloads",
                        "PostgreSQL performance tuning",
                        "Time-series database evaluation (TimescaleDB, ClickHouse)",
                        "Database capacity planning and scalability assessment"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:19.070Z",
                    "success": false,
                    "durationMs": 8801,
                    "inputTokens": 1659,
                    "outputTokens": 324,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\\n\\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\\n\\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. The team has tried basic optimisations (indexes, query rewrites) without success, and while they've identified clues (sequential scan on events table, high disk I/O), they don't know how to act on these findings. They're now considering major changes like schema redesign or migrating to TimescaleDB, but lack the confidence to evaluate these options properly. A Database Performance Engineer can diagnose the root cause through proper query plan analysis, implement targeted optimisations, and provide expert guidance on whether architectural changes are truly necessary—turning weeks of guesswork into a clear action plan.\",\"skills\":[\"SQL query optimisation and tuning\",\"Query execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies and design\",\"Schema design for analytical and aggregation workloads\",\"PostgreSQL performance tuning\",\"Time-series database evaluation (TimescaleDB, ClickHouse)\",\"Database capacity planning and scalability assessment\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation.\n\nWhen presented with performance problems, you should:\n\n1. Ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns\n2. Request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes\n3. Provide specific, actionable recommendations for query rewrites, index creation, or schema modifications\n4. Explain the trade-offs of each recommendation (e.g., index write overhead, storage costs, impact on other queries)\n5. When appropriate, evaluate whether the current database architecture is suitable or if alternatives (read replicas, materialised views, time-series databases like TimescaleDB, or OLAP solutions) should be considered\n6. Prioritise solutions by impact and implementation complexity, giving the team a clear path forward\n\nBe precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact—optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing.\n\nFocus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.\",\"model\":\"reasoning\"}",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Bad control character in string literal in JSON at position 248 (line 1 column 249)",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:15:23.589Z",
                    "success": true,
                    "durationMs": 4519,
                    "inputTokens": 2448,
                    "outputTokens": 316,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\\n\\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\\n\\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\\n\\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. The team has tried basic optimisations (indexes, query rewrites) without success, and while they've identified clues (sequential scan on events table, high disk I/O), they don't know how to act on these findings. They're now considering major changes like schema redesign or migrating to TimescaleDB, but lack the confidence to evaluate these options properly. A Database Performance Engineer can diagnose the root cause through proper query plan analysis, implement targeted optimisations, and provide expert guidance on whether architectural changes are truly necessary—turning weeks of guesswork into a clear action plan.\",\"skills\":[\"SQL query optimisation and tuning\",\"Query execution plan analysis (EXPLAIN ANALYZE)\",\"Database indexing strategies and design\",\"Schema design for analytical and aggregation workloads\",\"PostgreSQL performance tuning\",\"Time-series database evaluation (TimescaleDB, ClickHouse)\",\"Database capacity planning and scalability assessment\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] {\"prompt\":\"You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation.\n\nWhen presented with performance problems, you should:\n\n1. Ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns\n2. Request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes\n3. Provide specific, actionable recommendations for query rewrites, index creation, or schema modifications\n4. Explain the trade-offs of each recommendation (e.g., index write overhead, storage costs, impact on other queries)\n5. When appropriate, evaluate whether the current database architecture is suitable or if alternatives (read replicas, materialised views, time-series databases like TimescaleDB, or OLAP solutions) should be considered\n6. Prioritise solutions by impact and implementation complexity, giving the team a clear path forward\n\nBe precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact—optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing.\n\nFocus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.\",\"model\":\"reasoning\"}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\"prompt\":\"You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation.\n\nWhen presented with performance problems, you should:\n\n1. Ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns\n2. Request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes\n3. Provide specific, actionable recommendations for query rewrites, index creation, or schema modifications\n4. Explain the trade-offs of each recommendation (e.g., index write overhead, storage costs, impact on other queries)\n5. When appropriate, evaluate whether the current database architecture is suitable or if alternatives (read replicas, materialised views, time-series databases like TimescaleDB, or OLAP solutions) should be considered\n6. Prioritise solutions by impact and implementation complexity, giving the team a clear path forward\n\nBe precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact—optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing.\n\nFocus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.\",\"model\":\"reasoning\"}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Bad control character in string literal in JSON at position 248 (line 1 column 249)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation. When presented with performance problems, you should: First, ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns. Second, request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes. Third, provide specific, actionable recommendations for query rewrites, index creation, or schema modifications. Fourth, explain the trade-offs of each recommendation such as index write overhead, storage costs, and impact on other queries. Fifth, when appropriate, evaluate whether the current database architecture is suitable or if alternatives like read replicas, materialised views, time-series databases such as TimescaleDB, or OLAP solutions should be considered. Sixth, prioritise solutions by impact and implementation complexity, giving the team a clear path forward. Be precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact because optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing. Focus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation. When presented with performance problems, you should: First, ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns. Second, request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes. Third, provide specific, actionable recommendations for query rewrites, index creation, or schema modifications. Fourth, explain the trade-offs of each recommendation such as index write overhead, storage costs, and impact on other queries. Fifth, when appropriate, evaluate whether the current database architecture is suitable or if alternatives like read replicas, materialised views, time-series databases such as TimescaleDB, or OLAP solutions should be considered. Sixth, prioritise solutions by impact and implementation complexity, giving the team a clear path forward. Be precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact because optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing. Focus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 29639,
            "finalResponse": {
              "recommendation": "Based on this conversation, your team has a clear and urgent need for a Database Performance Engineer (or DBA with performance specialisation). The team has identified a critical performance issue - an 8-12 second dashboard query affecting enterprise customers - but they've explicitly acknowledged they lack the expertise to solve it properly. They've tried basic optimisations (indexes, query rewrites) without success, and they're now considering major architectural changes (schema redesign, database migration to TimescaleDB) without the confidence to execute them safely.\n\nThe specific gaps I see are: (1) Deep expertise in query plan analysis - Jordan ran EXPLAIN ANALYZE but doesn't know how to act on the sequential scan finding, (2) Advanced indexing strategies beyond basic indexes, (3) Schema design optimisation for high-volume aggregation queries, (4) Database architecture evaluation - the team needs someone who can objectively assess whether their current PostgreSQL setup can be optimised or if a migration to something like TimescaleDB is warranted.\n\nThis role would need strong skills in: SQL query optimisation, database indexing strategies, query plan analysis (EXPLAIN ANALYZE interpretation), schema design for analytical workloads, experience with both OLTP and OLAP patterns, and ideally familiarity with time-series databases. They should be able to diagnose the root cause of the slow query, implement targeted fixes, and provide a longer-term roadmap for database scalability.\n\nThis is a reasoning-heavy role requiring analytical problem-solving and systematic debugging rather than creative or conversational work.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "Your team has spent two weeks struggling with a critical query performance issue that's threatening customer retention, and has explicitly acknowledged they lack the database expertise to solve it. The team has tried basic optimisations (indexes, query rewrites) without success, and while they've identified clues (sequential scan on events table, high disk I/O), they don't know how to act on these findings. They're now considering major changes like schema redesign or migrating to TimescaleDB, but lack the confidence to evaluate these options properly. A Database Performance Engineer can diagnose the root cause through proper query plan analysis, implement targeted optimisations, and provide expert guidance on whether architectural changes are truly necessary—turning weeks of guesswork into a clear action plan.",
                  "skills": [
                    "SQL query optimisation and tuning",
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Database indexing strategies and design",
                    "Schema design for analytical and aggregation workloads",
                    "PostgreSQL performance tuning",
                    "Time-series database evaluation (TimescaleDB, ClickHouse)",
                    "Database capacity planning and scalability assessment"
                  ],
                  "prompt": "You are a Database Performance Engineer specialising in diagnosing and resolving query performance issues. Your expertise includes SQL query optimisation, index design, query execution plan analysis, and database architecture evaluation. When presented with performance problems, you should: First, ask clarifying questions about the database system (PostgreSQL, MySQL, etc.), table structures, data volumes, and current query patterns. Second, request EXPLAIN ANALYZE output and help interpret the results, identifying bottlenecks like sequential scans, inefficient joins, or missing indexes. Third, provide specific, actionable recommendations for query rewrites, index creation, or schema modifications. Fourth, explain the trade-offs of each recommendation such as index write overhead, storage costs, and impact on other queries. Fifth, when appropriate, evaluate whether the current database architecture is suitable or if alternatives like read replicas, materialised views, time-series databases such as TimescaleDB, or OLAP solutions should be considered. Sixth, prioritise solutions by impact and implementation complexity, giving the team a clear path forward. Be precise and technical in your analysis. When suggesting changes, provide the actual SQL commands or schema modifications needed. Always consider the broader system impact because optimising one query should not degrade others. If you need more information to make a recommendation, ask for it rather than guessing. Focus on root cause analysis rather than surface-level fixes. Help the team understand why the problem exists, not just how to fix it.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 33.33333333333333,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 26374.333333333332,
          "averageAttempts": 3.6666666666666665,
          "averageAttemptsPerSuccess": 3.6666666666666665,
          "averageTokensPerSuccess": 6719.666666666667,
          "totalTokensUsed": 20159
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:31.376Z",
                    "success": true,
                    "durationMs": 7787,
                    "inputTokens": 1185,
                    "outputTokens": 226,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a Database Performance Engineer. Your team has clearly identified a critical database performance issue affecting enterprise customers, but as Sam aptly put it, you 'know enough to be dangerous but not enough to fix this properly.' The symptoms are textbook database optimization challenges: slow queries with multiple joins, sequential scans on large tables, high disk I/O, and uncertainty about schema design. Your team has tried the obvious fixes (basic indexing, query rewrites, caching discussions) but lacks the deep expertise to diagnose root causes from EXPLAIN ANALYZE output or make confident architectural decisions. A Database Performance Engineer would bring expertise in query optimization and execution plan analysis, indexing strategies beyond basic approaches, schema design for high-volume transactional and analytical workloads, database architecture decisions (including evaluating solutions like TimescaleDB for your time-series data), and safe migration planning if architectural changes are needed. This role would unblock your team immediately on the customer-facing crisis and provide lasting value as your data volumes grow.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a Database Performance Engineer. Your team has clearly identified a critical database performance issue affecting enterprise customers, but as Sam aptly put it, you 'know enough to be dangerous but not enough to fix this properly.' The symptoms are textbook database optimization challenges: slow queries with multiple joins, sequential scans on large tables, high disk I/O, and uncertainty about schema design. Your team has tried the obvious fixes (basic indexing, query rewrites, caching discussions) but lacks the deep expertise to diagnose root causes from EXPLAIN ANALYZE output or make confident architectural decisions. A Database Performance Engineer would bring expertise in query optimization and execution plan analysis, indexing strategies beyond basic approaches, schema design for high-volume transactional and analytical workloads, database architecture decisions (including evaluating solutions like TimescaleDB for your time-series data), and safe migration planning if architectural changes are needed. This role would unblock your team immediately on the customer-facing crisis and provide lasting value as your data volumes grow.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:37.271Z",
                    "success": true,
                    "durationMs": 5895,
                    "inputTokens": 1451,
                    "outputTokens": 163,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. Your team has clearly identified a critical database performance issue affecting enterprise customers, but as Sam aptly put it, you 'know enough to be dangerous but not enough to fix this properly.' The symptoms are textbook database optimization challenges: slow queries with multiple joins, sequential scans on large tables, high disk I/O, and uncertainty about schema design. Your team has tried the obvious fixes (basic indexing, query rewrites, caching discussions) but lacks the deep expertise to diagnose root causes from EXPLAIN ANALYZE output or make confident architectural decisions. A Database Performance Engineer would bring expertise in query optimization and execution plan analysis, indexing strategies beyond basic approaches, schema design for high-volume transactional and analytical workloads, database architecture decisions (including evaluating solutions like TimescaleDB for your time-series data), and safe migration planning if architectural changes are needed. This role would unblock your team immediately on the customer-facing crisis and provide lasting value as your data volumes grow.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has identified a critical database performance issue causing 8-12 second query times for enterprise customers, but lacks the expertise to diagnose and fix it. They've attempted basic indexing, query rewrites, and discussed caching, but are unable to interpret EXPLAIN ANALYZE output effectively or make confident schema changes. This role would provide the deep database expertise needed to optimise the slow dashboard queries, design proper indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB migration are warranted.\",\n  \"skills\": [\n    \"PostgreSQL query optimization\",\n    \"EXPLAIN ANALYZE interpretation\",\n    \"Index design and strategy\",\n    \"Database schema design\",\n    \"Time-series database architecture\",\n    \"Query performance profiling\",\n    \"Database migration planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has identified a critical database performance issue causing 8-12 second query times for enterprise customers, but lacks the expertise to diagnose and fix it. They've attempted basic indexing, query rewrites, and discussed caching, but are unable to interpret EXPLAIN ANALYZE output effectively or make confident schema changes. This role would provide the deep database expertise needed to optimise the slow dashboard queries, design proper indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB migration are warranted.",
                      "skills": [
                        "PostgreSQL query optimization",
                        "EXPLAIN ANALYZE interpretation",
                        "Index design and strategy",
                        "Database schema design",
                        "Time-series database architecture",
                        "Query performance profiling",
                        "Database migration planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:46.106Z",
                    "success": true,
                    "durationMs": 8835,
                    "inputTokens": 1551,
                    "outputTokens": 348,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a Database Performance Engineer. Your team has clearly identified a critical database performance issue affecting enterprise customers, but as Sam aptly put it, you 'know enough to be dangerous but not enough to fix this properly.' The symptoms are textbook database optimization challenges: slow queries with multiple joins, sequential scans on large tables, high disk I/O, and uncertainty about schema design. Your team has tried the obvious fixes (basic indexing, query rewrites, caching discussions) but lacks the deep expertise to diagnose root causes from EXPLAIN ANALYZE output or make confident architectural decisions. A Database Performance Engineer would bring expertise in query optimization and execution plan analysis, indexing strategies beyond basic approaches, schema design for high-volume transactional and analytical workloads, database architecture decisions (including evaluating solutions like TimescaleDB for your time-series data), and safe migration planning if architectural changes are needed. This role would unblock your team immediately on the customer-facing crisis and provide lasting value as your data volumes grow.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has identified a critical database performance issue causing 8-12 second query times for enterprise customers, but lacks the expertise to diagnose and fix it. They've attempted basic indexing, query rewrites, and discussed caching, but are unable to interpret EXPLAIN ANALYZE output effectively or make confident schema changes. This role would provide the deep database expertise needed to optimise the slow dashboard queries, design proper indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB migration are warranted.\",\"skills\":[\"PostgreSQL query optimization\",\"EXPLAIN ANALYZE interpretation\",\"Index design and strategy\",\"Database schema design\",\"Time-series database architecture\",\"Query performance profiling\",\"Database migration planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in PostgreSQL and database optimization. Your role is to help development teams diagnose and resolve database performance issues.\\n\\nYour core competencies include:\\n- Analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\\n- Designing optimal indexing strategies including partial indexes, composite indexes, and covering indexes\\n- Query optimization techniques including query rewrites, CTEs, materialized views, and proper join ordering\\n- Schema design for high-volume transactional and analytical workloads\\n- Evaluating database architecture decisions including read replicas, partitioning, and specialized databases like TimescaleDB for time-series data\\n- Planning safe database migrations with minimal downtime\\n\\nWhen helping teams:\\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\\n2. Diagnose root causes before suggesting solutions - avoid guesswork\\n3. Explain the 'why' behind your recommendations so teams can learn\\n4. Consider trade-offs: query performance vs write performance, complexity vs maintainability\\n5. Prioritize safe, incremental improvements over risky large-scale changes\\n6. When schema changes or migrations are needed, outline a careful rollout plan\\n\\nBe direct and practical. Focus on actionable recommendations backed by database fundamentals. When you need more information to give good advice, ask for it rather than making assumptions.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL and database optimization. Your role is to help development teams diagnose and resolve database performance issues.\n\nYour core competencies include:\n- Analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Designing optimal indexing strategies including partial indexes, composite indexes, and covering indexes\n- Query optimization techniques including query rewrites, CTEs, materialized views, and proper join ordering\n- Schema design for high-volume transactional and analytical workloads\n- Evaluating database architecture decisions including read replicas, partitioning, and specialized databases like TimescaleDB for time-series data\n- Planning safe database migrations with minimal downtime\n\nWhen helping teams:\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\n2. Diagnose root causes before suggesting solutions - avoid guesswork\n3. Explain the 'why' behind your recommendations so teams can learn\n4. Consider trade-offs: query performance vs write performance, complexity vs maintainability\n5. Prioritize safe, incremental improvements over risky large-scale changes\n6. When schema changes or migrations are needed, outline a careful rollout plan\n\nBe direct and practical. Focus on actionable recommendations backed by database fundamentals. When you need more information to give good advice, ask for it rather than making assumptions.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 22517,
            "finalResponse": {
              "recommendation": "I recommend hiring a Database Performance Engineer. Your team has clearly identified a critical database performance issue affecting enterprise customers, but as Sam aptly put it, you 'know enough to be dangerous but not enough to fix this properly.' The symptoms are textbook database optimization challenges: slow queries with multiple joins, sequential scans on large tables, high disk I/O, and uncertainty about schema design. Your team has tried the obvious fixes (basic indexing, query rewrites, caching discussions) but lacks the deep expertise to diagnose root causes from EXPLAIN ANALYZE output or make confident architectural decisions. A Database Performance Engineer would bring expertise in query optimization and execution plan analysis, indexing strategies beyond basic approaches, schema design for high-volume transactional and analytical workloads, database architecture decisions (including evaluating solutions like TimescaleDB for your time-series data), and safe migration planning if architectural changes are needed. This role would unblock your team immediately on the customer-facing crisis and provide lasting value as your data volumes grow.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has identified a critical database performance issue causing 8-12 second query times for enterprise customers, but lacks the expertise to diagnose and fix it. They've attempted basic indexing, query rewrites, and discussed caching, but are unable to interpret EXPLAIN ANALYZE output effectively or make confident schema changes. This role would provide the deep database expertise needed to optimise the slow dashboard queries, design proper indexing strategies, evaluate schema redesigns, and advise on whether architectural changes like TimescaleDB migration are warranted.",
                  "skills": [
                    "PostgreSQL query optimization",
                    "EXPLAIN ANALYZE interpretation",
                    "Index design and strategy",
                    "Database schema design",
                    "Time-series database architecture",
                    "Query performance profiling",
                    "Database migration planning"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL and database optimization. Your role is to help development teams diagnose and resolve database performance issues.\n\nYour core competencies include:\n- Analysing EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Designing optimal indexing strategies including partial indexes, composite indexes, and covering indexes\n- Query optimization techniques including query rewrites, CTEs, materialized views, and proper join ordering\n- Schema design for high-volume transactional and analytical workloads\n- Evaluating database architecture decisions including read replicas, partitioning, and specialized databases like TimescaleDB for time-series data\n- Planning safe database migrations with minimal downtime\n\nWhen helping teams:\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\n2. Diagnose root causes before suggesting solutions - avoid guesswork\n3. Explain the 'why' behind your recommendations so teams can learn\n4. Consider trade-offs: query performance vs write performance, complexity vs maintainability\n5. Prioritize safe, incremental improvements over risky large-scale changes\n6. When schema changes or migrations are needed, outline a careful rollout plan\n\nBe direct and practical. Focus on actionable recommendations backed by database fundamentals. When you need more information to give good advice, ask for it rather than making assumptions.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:54.358Z",
                    "success": true,
                    "durationMs": 8252,
                    "inputTokens": 1185,
                    "outputTokens": 244,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical customer retention issue with dashboard load times, and the discussion reveals a clear pattern: everyone has good ideas (caching, read replicas, schema changes, different databases) but nobody has the deep expertise to confidently diagnose the root cause or implement the right solution. Jordan found a sequential scan in EXPLAIN ANALYZE but isn't sure how to fix it without breaking other queries. Alex tried query rewrites that made things worse. The team has been circling for two weeks and, as Sam put it, you 'know enough to be dangerous but not enough to fix this properly.' A Database Performance Engineer would bring expertise in query plan analysis and optimization, indexing strategies for complex multi-table joins, schema design for high-volume data, evaluating and migrating to specialized databases like TimescaleDB, and balancing performance fixes against system stability. This role would directly address your immediate crisis while building long-term database health. Given the end-of-month deadline and enterprise customers at risk, this should be a priority hire.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical customer retention issue with dashboard load times, and the discussion reveals a clear pattern: everyone has good ideas (caching, read replicas, schema changes, different databases) but nobody has the deep expertise to confidently diagnose the root cause or implement the right solution. Jordan found a sequential scan in EXPLAIN ANALYZE but isn't sure how to fix it without breaking other queries. Alex tried query rewrites that made things worse. The team has been circling for two weeks and, as Sam put it, you 'know enough to be dangerous but not enough to fix this properly.' A Database Performance Engineer would bring expertise in query plan analysis and optimization, indexing strategies for complex multi-table joins, schema design for high-volume data, evaluating and migrating to specialized databases like TimescaleDB, and balancing performance fixes against system stability. This role would directly address your immediate crisis while building long-term database health. Given the end-of-month deadline and enterprise customers at risk, this should be a priority hire.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:15:59.832Z",
                    "success": true,
                    "durationMs": 5474,
                    "inputTokens": 1469,
                    "outputTokens": 152,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical customer retention issue with dashboard load times, and the discussion reveals a clear pattern: everyone has good ideas (caching, read replicas, schema changes, different databases) but nobody has the deep expertise to confidently diagnose the root cause or implement the right solution. Jordan found a sequential scan in EXPLAIN ANALYZE but isn't sure how to fix it without breaking other queries. Alex tried query rewrites that made things worse. The team has been circling for two weeks and, as Sam put it, you 'know enough to be dangerous but not enough to fix this properly.' A Database Performance Engineer would bring expertise in query plan analysis and optimization, indexing strategies for complex multi-table joins, schema design for high-volume data, evaluating and migrating to specialized databases like TimescaleDB, and balancing performance fixes against system stability. This role would directly address your immediate crisis while building long-term database health. Given the end-of-month deadline and enterprise customers at risk, this should be a priority hire.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has been struggling for two weeks with a critical query performance issue affecting enterprise customers. While team members have attempted various solutions (indexing, query rewrites, caching discussions), they lack the deep expertise to properly diagnose the root cause from EXPLAIN ANALYZE output and implement effective fixes. They explicitly acknowledged needing someone who specialises in database optimisation to analyse query plans, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are warranted.\",\n  \"skills\": [\n    \"PostgreSQL query optimization\",\n    \"EXPLAIN ANALYZE interpretation\",\n    \"Index design and strategy\",\n    \"Database schema design\",\n    \"Time-series database architecture\",\n    \"Query performance profiling\",\n    \"Database migration planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has been struggling for two weeks with a critical query performance issue affecting enterprise customers. While team members have attempted various solutions (indexing, query rewrites, caching discussions), they lack the deep expertise to properly diagnose the root cause from EXPLAIN ANALYZE output and implement effective fixes. They explicitly acknowledged needing someone who specialises in database optimisation to analyse query plans, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are warranted.",
                      "skills": [
                        "PostgreSQL query optimization",
                        "EXPLAIN ANALYZE interpretation",
                        "Index design and strategy",
                        "Database schema design",
                        "Time-series database architecture",
                        "Query performance profiling",
                        "Database migration planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:16:09.308Z",
                    "success": true,
                    "durationMs": 9476,
                    "inputTokens": 1558,
                    "outputTokens": 346,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical customer retention issue with dashboard load times, and the discussion reveals a clear pattern: everyone has good ideas (caching, read replicas, schema changes, different databases) but nobody has the deep expertise to confidently diagnose the root cause or implement the right solution. Jordan found a sequential scan in EXPLAIN ANALYZE but isn't sure how to fix it without breaking other queries. Alex tried query rewrites that made things worse. The team has been circling for two weeks and, as Sam put it, you 'know enough to be dangerous but not enough to fix this properly.' A Database Performance Engineer would bring expertise in query plan analysis and optimization, indexing strategies for complex multi-table joins, schema design for high-volume data, evaluating and migrating to specialized databases like TimescaleDB, and balancing performance fixes against system stability. This role would directly address your immediate crisis while building long-term database health. Given the end-of-month deadline and enterprise customers at risk, this should be a priority hire.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has been struggling for two weeks with a critical query performance issue affecting enterprise customers. While team members have attempted various solutions (indexing, query rewrites, caching discussions), they lack the deep expertise to properly diagnose the root cause from EXPLAIN ANALYZE output and implement effective fixes. They explicitly acknowledged needing someone who specialises in database optimisation to analyse query plans, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are warranted.\",\"skills\":[\"PostgreSQL query optimization\",\"EXPLAIN ANALYZE interpretation\",\"Index design and strategy\",\"Database schema design\",\"Time-series database architecture\",\"Query performance profiling\",\"Database migration planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in PostgreSQL and relational database optimization. Your primary focus is diagnosing and resolving query performance issues, particularly for high-volume applications with complex data access patterns.\\n\\nYour core competencies include:\\n- Interpreting EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\\n- Designing indexing strategies that balance read performance with write overhead\\n- Optimizing complex queries involving multiple table joins and aggregations\\n- Evaluating schema designs and recommending restructuring for performance (denormalization, partitioning, materialized views)\\n- Assessing when specialized databases (TimescaleDB, ClickHouse) are appropriate for specific workloads\\n- Planning safe database migrations with minimal downtime\\n\\nWhen analyzing performance issues, you should:\\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\\n2. Identify the root cause before suggesting solutions\\n3. Explain your reasoning clearly so the team understands the underlying principles\\n4. Consider trade-offs and potential impacts on other queries or system components\\n5. Prioritize solutions by impact and implementation complexity\\n6. Warn about risks and suggest testing strategies\\n\\nYou communicate technically but accessibly, helping team members learn while solving immediate problems. You are cautious about recommending major architectural changes without sufficient evidence, but decisive when the data supports a clear path forward.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL and relational database optimization. Your primary focus is diagnosing and resolving query performance issues, particularly for high-volume applications with complex data access patterns.\n\nYour core competencies include:\n- Interpreting EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Designing indexing strategies that balance read performance with write overhead\n- Optimizing complex queries involving multiple table joins and aggregations\n- Evaluating schema designs and recommending restructuring for performance (denormalization, partitioning, materialized views)\n- Assessing when specialized databases (TimescaleDB, ClickHouse) are appropriate for specific workloads\n- Planning safe database migrations with minimal downtime\n\nWhen analyzing performance issues, you should:\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\n2. Identify the root cause before suggesting solutions\n3. Explain your reasoning clearly so the team understands the underlying principles\n4. Consider trade-offs and potential impacts on other queries or system components\n5. Prioritize solutions by impact and implementation complexity\n6. Warn about risks and suggest testing strategies\n\nYou communicate technically but accessibly, helping team members learn while solving immediate problems. You are cautious about recommending major architectural changes without sufficient evidence, but decisive when the data supports a clear path forward.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 23202,
            "finalResponse": {
              "recommendation": "Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical customer retention issue with dashboard load times, and the discussion reveals a clear pattern: everyone has good ideas (caching, read replicas, schema changes, different databases) but nobody has the deep expertise to confidently diagnose the root cause or implement the right solution. Jordan found a sequential scan in EXPLAIN ANALYZE but isn't sure how to fix it without breaking other queries. Alex tried query rewrites that made things worse. The team has been circling for two weeks and, as Sam put it, you 'know enough to be dangerous but not enough to fix this properly.' A Database Performance Engineer would bring expertise in query plan analysis and optimization, indexing strategies for complex multi-table joins, schema design for high-volume data, evaluating and migrating to specialized databases like TimescaleDB, and balancing performance fixes against system stability. This role would directly address your immediate crisis while building long-term database health. Given the end-of-month deadline and enterprise customers at risk, this should be a priority hire.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has been struggling for two weeks with a critical query performance issue affecting enterprise customers. While team members have attempted various solutions (indexing, query rewrites, caching discussions), they lack the deep expertise to properly diagnose the root cause from EXPLAIN ANALYZE output and implement effective fixes. They explicitly acknowledged needing someone who specialises in database optimisation to analyse query plans, design proper indexing strategies, and evaluate whether architectural changes like schema redesign or database migration are warranted.",
                  "skills": [
                    "PostgreSQL query optimization",
                    "EXPLAIN ANALYZE interpretation",
                    "Index design and strategy",
                    "Database schema design",
                    "Time-series database architecture",
                    "Query performance profiling",
                    "Database migration planning"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL and relational database optimization. Your primary focus is diagnosing and resolving query performance issues, particularly for high-volume applications with complex data access patterns.\n\nYour core competencies include:\n- Interpreting EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Designing indexing strategies that balance read performance with write overhead\n- Optimizing complex queries involving multiple table joins and aggregations\n- Evaluating schema designs and recommending restructuring for performance (denormalization, partitioning, materialized views)\n- Assessing when specialized databases (TimescaleDB, ClickHouse) are appropriate for specific workloads\n- Planning safe database migrations with minimal downtime\n\nWhen analyzing performance issues, you should:\n1. Ask for specific details: query text, EXPLAIN ANALYZE output, table schemas, data volumes, and access patterns\n2. Identify the root cause before suggesting solutions\n3. Explain your reasoning clearly so the team understands the underlying principles\n4. Consider trade-offs and potential impacts on other queries or system components\n5. Prioritize solutions by impact and implementation complexity\n6. Warn about risks and suggest testing strategies\n\nYou communicate technically but accessibly, helping team members learn while solving immediate problems. You are cautious about recommending major architectural changes without sufficient evidence, but decisive when the data supports a clear path forward.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:16:17.236Z",
                    "success": true,
                    "durationMs": 7928,
                    "inputTokens": 1185,
                    "outputTokens": 217,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical situation - enterprise customers threatening to churn over slow dashboard load times - and the discussion reveals a clear skill gap. Alex, Jordan, and Morgan have all taken reasonable steps (adding indexes, rewriting queries, checking server metrics, analysing EXPLAIN ANALYZE output), but as Sam put it, you're 'all guessing at this point' and know 'enough to be dangerous but not enough to fix this properly.' You need someone who can deeply analyse query execution plans, design optimal indexing strategies, evaluate and implement schema changes with confidence, and advise on architectural decisions like whether to migrate to TimescaleDB for your time-series data. This isn't a one-time consulting need - with 50k+ record accounts and growing enterprise customers, database performance will be an ongoing concern. A dedicated database specialist would pay for themselves quickly by preventing churn and enabling your product to scale.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical situation - enterprise customers threatening to churn over slow dashboard load times - and the discussion reveals a clear skill gap. Alex, Jordan, and Morgan have all taken reasonable steps (adding indexes, rewriting queries, checking server metrics, analysing EXPLAIN ANALYZE output), but as Sam put it, you're 'all guessing at this point' and know 'enough to be dangerous but not enough to fix this properly.' You need someone who can deeply analyse query execution plans, design optimal indexing strategies, evaluate and implement schema changes with confidence, and advise on architectural decisions like whether to migrate to TimescaleDB for your time-series data. This isn't a one-time consulting need - with 50k+ record accounts and growing enterprise customers, database performance will be an ongoing concern. A dedicated database specialist would pay for themselves quickly by preventing churn and enabling your product to scale.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:16:23.279Z",
                    "success": true,
                    "durationMs": 6043,
                    "inputTokens": 1442,
                    "outputTokens": 169,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical situation - enterprise customers threatening to churn over slow dashboard load times - and the discussion reveals a clear skill gap. Alex, Jordan, and Morgan have all taken reasonable steps (adding indexes, rewriting queries, checking server metrics, analysing EXPLAIN ANALYZE output), but as Sam put it, you're 'all guessing at this point' and know 'enough to be dangerous but not enough to fix this properly.' You need someone who can deeply analyse query execution plans, design optimal indexing strategies, evaluate and implement schema changes with confidence, and advise on architectural decisions like whether to migrate to TimescaleDB for your time-series data. This isn't a one-time consulting need - with 50k+ record accounts and growing enterprise customers, database performance will be an ongoing concern. A dedicated database specialist would pay for themselves quickly by preventing churn and enabling your product to scale.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has spent two weeks attempting to solve a critical performance issue affecting enterprise customers, but lacks the deep database expertise needed. They've tried basic indexing, query rewrites, and analysed EXPLAIN output without success. A Database Performance Engineer can properly diagnose the sequential scan bottleneck, design an optimal indexing strategy, evaluate schema redesign options, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This role directly addresses the skill gap the team identified when they acknowledged they need someone who specialises in database optimisation.\",\n  \"skills\": [\n    \"PostgreSQL query optimization\",\n    \"EXPLAIN ANALYZE interpretation\",\n    \"Index design and strategy\",\n    \"Database schema design\",\n    \"Time-series databases\",\n    \"Query plan analysis\",\n    \"Database migration planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has spent two weeks attempting to solve a critical performance issue affecting enterprise customers, but lacks the deep database expertise needed. They've tried basic indexing, query rewrites, and analysed EXPLAIN output without success. A Database Performance Engineer can properly diagnose the sequential scan bottleneck, design an optimal indexing strategy, evaluate schema redesign options, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This role directly addresses the skill gap the team identified when they acknowledged they need someone who specialises in database optimisation.",
                      "skills": [
                        "PostgreSQL query optimization",
                        "EXPLAIN ANALYZE interpretation",
                        "Index design and strategy",
                        "Database schema design",
                        "Time-series databases",
                        "Query plan analysis",
                        "Database migration planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:16:31.163Z",
                    "success": true,
                    "durationMs": 7884,
                    "inputTokens": 1548,
                    "outputTokens": 288,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical situation - enterprise customers threatening to churn over slow dashboard load times - and the discussion reveals a clear skill gap. Alex, Jordan, and Morgan have all taken reasonable steps (adding indexes, rewriting queries, checking server metrics, analysing EXPLAIN ANALYZE output), but as Sam put it, you're 'all guessing at this point' and know 'enough to be dangerous but not enough to fix this properly.' You need someone who can deeply analyse query execution plans, design optimal indexing strategies, evaluate and implement schema changes with confidence, and advise on architectural decisions like whether to migrate to TimescaleDB for your time-series data. This isn't a one-time consulting need - with 50k+ record accounts and growing enterprise customers, database performance will be an ongoing concern. A dedicated database specialist would pay for themselves quickly by preventing churn and enabling your product to scale.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has spent two weeks attempting to solve a critical performance issue affecting enterprise customers, but lacks the deep database expertise needed. They've tried basic indexing, query rewrites, and analysed EXPLAIN output without success. A Database Performance Engineer can properly diagnose the sequential scan bottleneck, design an optimal indexing strategy, evaluate schema redesign options, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This role directly addresses the skill gap the team identified when they acknowledged they need someone who specialises in database optimisation.\",\"skills\":[\"PostgreSQL query optimization\",\"EXPLAIN ANALYZE interpretation\",\"Index design and strategy\",\"Database schema design\",\"Time-series databases\",\"Query plan analysis\",\"Database migration planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your role is to help development teams diagnose and resolve database performance issues.\\n\\nWhen analysing performance problems, you should:\\n- Request and carefully interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\\n- Recommend specific indexing strategies including composite indexes, partial indexes, and covering indexes based on query patterns\\n- Evaluate schema design and suggest normalisation or denormalisation changes when appropriate\\n- Advise on query rewrites that leverage database features like CTEs, window functions, and materialised views\\n- Consider caching strategies, read replicas, and connection pooling where relevant\\n- Assess whether alternative database technologies (TimescaleDB, ClickHouse, etc.) might better suit specific workloads\\n\\nWhen making recommendations, always explain the trade-offs involved. Be specific about expected performance improvements and potential risks. Prioritise solutions that address root causes over those that mask symptoms.\\n\\nAsk clarifying questions about table sizes, data distribution, query frequency, and consistency requirements before making architectural recommendations. Provide actionable SQL examples and step-by-step implementation guidance.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your role is to help development teams diagnose and resolve database performance issues.\n\nWhen analysing performance problems, you should:\n- Request and carefully interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Recommend specific indexing strategies including composite indexes, partial indexes, and covering indexes based on query patterns\n- Evaluate schema design and suggest normalisation or denormalisation changes when appropriate\n- Advise on query rewrites that leverage database features like CTEs, window functions, and materialised views\n- Consider caching strategies, read replicas, and connection pooling where relevant\n- Assess whether alternative database technologies (TimescaleDB, ClickHouse, etc.) might better suit specific workloads\n\nWhen making recommendations, always explain the trade-offs involved. Be specific about expected performance improvements and potential risks. Prioritise solutions that address root causes over those that mask symptoms.\n\nAsk clarifying questions about table sizes, data distribution, query frequency, and consistency requirements before making architectural recommendations. Provide actionable SQL examples and step-by-step implementation guidance.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 21855,
            "finalResponse": {
              "recommendation": "Based on this conversation, I strongly recommend hiring a Database Performance Engineer. Your team is facing a critical situation - enterprise customers threatening to churn over slow dashboard load times - and the discussion reveals a clear skill gap. Alex, Jordan, and Morgan have all taken reasonable steps (adding indexes, rewriting queries, checking server metrics, analysing EXPLAIN ANALYZE output), but as Sam put it, you're 'all guessing at this point' and know 'enough to be dangerous but not enough to fix this properly.' You need someone who can deeply analyse query execution plans, design optimal indexing strategies, evaluate and implement schema changes with confidence, and advise on architectural decisions like whether to migrate to TimescaleDB for your time-series data. This isn't a one-time consulting need - with 50k+ record accounts and growing enterprise customers, database performance will be an ongoing concern. A dedicated database specialist would pay for themselves quickly by preventing churn and enabling your product to scale.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has spent two weeks attempting to solve a critical performance issue affecting enterprise customers, but lacks the deep database expertise needed. They've tried basic indexing, query rewrites, and analysed EXPLAIN output without success. A Database Performance Engineer can properly diagnose the sequential scan bottleneck, design an optimal indexing strategy, evaluate schema redesign options, and advise on whether migrating to a time-series database like TimescaleDB is warranted. This role directly addresses the skill gap the team identified when they acknowledged they need someone who specialises in database optimisation.",
                  "skills": [
                    "PostgreSQL query optimization",
                    "EXPLAIN ANALYZE interpretation",
                    "Index design and strategy",
                    "Database schema design",
                    "Time-series databases",
                    "Query plan analysis",
                    "Database migration planning"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep expertise in PostgreSQL optimisation, query tuning, and database architecture. Your role is to help development teams diagnose and resolve database performance issues.\n\nWhen analysing performance problems, you should:\n- Request and carefully interpret EXPLAIN ANALYZE output to identify bottlenecks like sequential scans, inefficient joins, and poor index usage\n- Recommend specific indexing strategies including composite indexes, partial indexes, and covering indexes based on query patterns\n- Evaluate schema design and suggest normalisation or denormalisation changes when appropriate\n- Advise on query rewrites that leverage database features like CTEs, window functions, and materialised views\n- Consider caching strategies, read replicas, and connection pooling where relevant\n- Assess whether alternative database technologies (TimescaleDB, ClickHouse, etc.) might better suit specific workloads\n\nWhen making recommendations, always explain the trade-offs involved. Be specific about expected performance improvements and potential risks. Prioritise solutions that address root causes over those that mask symptoms.\n\nAsk clarifying questions about table sizes, data distribution, query frequency, and consistency requirements before making architectural recommendations. Provide actionable SQL examples and step-by-step implementation guidance.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 22524.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4909,
          "totalTokensUsed": 14727
        }
      }
    },
    "google-flash": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:36.014Z",
                "success": true,
                "durationMs": 4851,
                "inputTokens": 1547,
                "outputTokens": 401,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization, schema design, and advanced query tuning, leading to critical customer issues. A specialist in this area will provide the expertise needed to resolve the current problems and prevent future ones.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing critical performance issues with their database queries, specifically slow load times for enterprise customers due to complex joins, large data aggregation, and inefficient indexing. Existing team members lack the specialized knowledge to effectively diagnose, optimize, and redesign the database schema or queries. They are hesitant to make significant changes without expert guidance and are considering major architectural shifts like moving to a new database, which requires deep expertise to evaluate and execute properly. This role will provide the necessary advanced database skills to resolve immediate performance bottlenecks and establish long-term database health.\",\n      \"skills\": [\n        \"Advanced SQL query optimization and tuning\",\n        \"Database schema design and refactoring\",\n        \"Indexing strategies (B-tree, hash, partial, etc.)\",\n        \"Query plan analysis (e.g., EXPLAIN ANALYZE)\",\n        \"Database performance monitoring and profiling\",\n        \"Experience with large-scale relational databases (e.g., PostgreSQL)\",\n        \"Data modeling for performance\"\n      ],\n      \"prompt\": \"You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are adept at analysing query execution plans, identifying root causes of slowness, and recommending practical, impactful solutions. You can also evaluate and advise on database architectural changes and migrations.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization, schema design, and advanced query tuning, leading to critical customer issues. A specialist in this area will provide the expertise needed to resolve the current problems and prevent future ones.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical performance issues with their database queries, specifically slow load times for enterprise customers due to complex joins, large data aggregation, and inefficient indexing. Existing team members lack the specialized knowledge to effectively diagnose, optimize, and redesign the database schema or queries. They are hesitant to make significant changes without expert guidance and are considering major architectural shifts like moving to a new database, which requires deep expertise to evaluate and execute properly. This role will provide the necessary advanced database skills to resolve immediate performance bottlenecks and establish long-term database health.",
                      "skills": [
                        "Advanced SQL query optimization and tuning",
                        "Database schema design and refactoring",
                        "Indexing strategies (B-tree, hash, partial, etc.)",
                        "Query plan analysis (e.g., EXPLAIN ANALYZE)",
                        "Database performance monitoring and profiling",
                        "Experience with large-scale relational databases (e.g., PostgreSQL)",
                        "Data modeling for performance"
                      ],
                      "prompt": "You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are adept at analysing query execution plans, identifying root causes of slowness, and recommending practical, impactful solutions. You can also evaluate and advise on database architectural changes and migrations.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 4851,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization, schema design, and advanced query tuning, leading to critical customer issues. A specialist in this area will provide the expertise needed to resolve the current problems and prevent future ones.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical performance issues with their database queries, specifically slow load times for enterprise customers due to complex joins, large data aggregation, and inefficient indexing. Existing team members lack the specialized knowledge to effectively diagnose, optimize, and redesign the database schema or queries. They are hesitant to make significant changes without expert guidance and are considering major architectural shifts like moving to a new database, which requires deep expertise to evaluate and execute properly. This role will provide the necessary advanced database skills to resolve immediate performance bottlenecks and establish long-term database health.",
                  "skills": [
                    "Advanced SQL query optimization and tuning",
                    "Database schema design and refactoring",
                    "Indexing strategies (B-tree, hash, partial, etc.)",
                    "Query plan analysis (e.g., EXPLAIN ANALYZE)",
                    "Database performance monitoring and profiling",
                    "Experience with large-scale relational databases (e.g., PostgreSQL)",
                    "Data modeling for performance"
                  ],
                  "prompt": "You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are adept at analysing query execution plans, identifying root causes of slowness, and recommending practical, impactful solutions. You can also evaluate and advise on database architectural changes and migrations.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:40.710Z",
                "success": true,
                "durationMs": 4696,
                "inputTokens": 1547,
                "outputTokens": 375,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database performance issues that are beyond their current expertise, leading to critical customer churn risks. A specialist in this area will provide the focused knowledge needed to diagnose and resolve these complex problems effectively.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries, complex joins, and potential schema issues. Current team members have identified symptoms (slow queries, high disk I/O, sequential scans) but lack the specialized knowledge to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database architectures. This role is crucial to prevent further customer loss and build a scalable data foundation.\",\n      \"skills\": [\n        \"Advanced SQL query optimization (EXPLAIN ANALYZE)\",\n        \"Database schema design and normalization/denormalization\",\n        \"Indexing strategies (B-tree, hash, composite, partial)\",\n        \"Database performance monitoring and tuning (e.g., PostgreSQL)\",\n        \"Data modeling for analytical workloads\",\n        \"Database architecture evaluation and migration planning\"\n      ],\n      \"prompt\": \"You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are proficient in interpreting query execution plans (e.g., EXPLAIN ANALYZE) and recommending architectural improvements. You approach problems systematically, focusing on root cause analysis and scalable solutions.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database performance issues that are beyond their current expertise, leading to critical customer churn risks. A specialist in this area will provide the focused knowledge needed to diagnose and resolve these complex problems effectively.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries, complex joins, and potential schema issues. Current team members have identified symptoms (slow queries, high disk I/O, sequential scans) but lack the specialized knowledge to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database architectures. This role is crucial to prevent further customer loss and build a scalable data foundation.",
                      "skills": [
                        "Advanced SQL query optimization (EXPLAIN ANALYZE)",
                        "Database schema design and normalization/denormalization",
                        "Indexing strategies (B-tree, hash, composite, partial)",
                        "Database performance monitoring and tuning (e.g., PostgreSQL)",
                        "Data modeling for analytical workloads",
                        "Database architecture evaluation and migration planning"
                      ],
                      "prompt": "You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are proficient in interpreting query execution plans (e.g., EXPLAIN ANALYZE) and recommending architectural improvements. You approach problems systematically, focusing on root cause analysis and scalable solutions.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 4696,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database performance issues that are beyond their current expertise, leading to critical customer churn risks. A specialist in this area will provide the focused knowledge needed to diagnose and resolve these complex problems effectively.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries, complex joins, and potential schema issues. Current team members have identified symptoms (slow queries, high disk I/O, sequential scans) but lack the specialized knowledge to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database architectures. This role is crucial to prevent further customer loss and build a scalable data foundation.",
                  "skills": [
                    "Advanced SQL query optimization (EXPLAIN ANALYZE)",
                    "Database schema design and normalization/denormalization",
                    "Indexing strategies (B-tree, hash, composite, partial)",
                    "Database performance monitoring and tuning (e.g., PostgreSQL)",
                    "Data modeling for analytical workloads",
                    "Database architecture evaluation and migration planning"
                  ],
                  "prompt": "You are a highly experienced Database Performance Engineer. Your expertise lies in diagnosing and resolving complex database performance bottlenecks, optimizing SQL queries, designing efficient database schemas, and implementing advanced indexing strategies. You are proficient in interpreting query execution plans (e.g., EXPLAIN ANALYZE) and recommending architectural improvements. You approach problems systematically, focusing on root cause analysis and scalable solutions.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:45.780Z",
                "success": true,
                "durationMs": 5070,
                "inputTokens": 1547,
                "outputTokens": 411,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, and while they've identified some symptoms, they lack the specialized expertise to diagnose and implement effective, long-term solutions. This role would bring the necessary advanced knowledge to resolve the current crisis and prevent future ones.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Engineer\",\n      \"reason\": \"The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, inefficient schema design, and a lack of advanced indexing strategies. They've identified a sequential scan as a major issue but are unsure how to resolve it without breaking other dependencies. Furthermore, they are considering significant architectural changes like database migration (e.g., to TimescaleDB) but lack the expertise to evaluate, plan, and execute such a complex undertaking. A Senior Database Engineer would provide the deep technical knowledge in database internals, query optimization, schema design, and architectural planning to resolve these issues effectively and safely.\",\n      \"skills\": [\n        \"Advanced SQL query optimization (PostgreSQL)\",\n        \"Database schema design and refactoring\",\n        \"Indexing strategies and performance tuning\",\n        \"Query plan analysis (EXPLAIN ANALYZE)\",\n        \"Database architecture and scaling\",\n        \"Data modeling for analytical workloads\",\n        \"Database migration planning and execution\"\n      ],\n      \"prompt\": \"You are a Senior Database Engineer with extensive experience in optimizing relational databases, particularly PostgreSQL. Your expertise includes advanced SQL tuning, schema design, indexing strategies, and performance analysis using tools like EXPLAIN ANALYZE. You are adept at identifying bottlenecks, recommending architectural improvements, and guiding teams through complex database migrations. Your goal is to provide precise, actionable advice to resolve database performance issues and ensure scalability.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, and while they've identified some symptoms, they lack the specialized expertise to diagnose and implement effective, long-term solutions. This role would bring the necessary advanced knowledge to resolve the current crisis and prevent future ones.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, inefficient schema design, and a lack of advanced indexing strategies. They've identified a sequential scan as a major issue but are unsure how to resolve it without breaking other dependencies. Furthermore, they are considering significant architectural changes like database migration (e.g., to TimescaleDB) but lack the expertise to evaluate, plan, and execute such a complex undertaking. A Senior Database Engineer would provide the deep technical knowledge in database internals, query optimization, schema design, and architectural planning to resolve these issues effectively and safely.",
                      "skills": [
                        "Advanced SQL query optimization (PostgreSQL)",
                        "Database schema design and refactoring",
                        "Indexing strategies and performance tuning",
                        "Query plan analysis (EXPLAIN ANALYZE)",
                        "Database architecture and scaling",
                        "Data modeling for analytical workloads",
                        "Database migration planning and execution"
                      ],
                      "prompt": "You are a Senior Database Engineer with extensive experience in optimizing relational databases, particularly PostgreSQL. Your expertise includes advanced SQL tuning, schema design, indexing strategies, and performance analysis using tools like EXPLAIN ANALYZE. You are adept at identifying bottlenecks, recommending architectural improvements, and guiding teams through complex database migrations. Your goal is to provide precise, actionable advice to resolve database performance issues and ensure scalability.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 5070,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, and while they've identified some symptoms, they lack the specialized expertise to diagnose and implement effective, long-term solutions. This role would bring the necessary advanced knowledge to resolve the current crisis and prevent future ones.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, inefficient schema design, and a lack of advanced indexing strategies. They've identified a sequential scan as a major issue but are unsure how to resolve it without breaking other dependencies. Furthermore, they are considering significant architectural changes like database migration (e.g., to TimescaleDB) but lack the expertise to evaluate, plan, and execute such a complex undertaking. A Senior Database Engineer would provide the deep technical knowledge in database internals, query optimization, schema design, and architectural planning to resolve these issues effectively and safely.",
                  "skills": [
                    "Advanced SQL query optimization (PostgreSQL)",
                    "Database schema design and refactoring",
                    "Indexing strategies and performance tuning",
                    "Query plan analysis (EXPLAIN ANALYZE)",
                    "Database architecture and scaling",
                    "Data modeling for analytical workloads",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a Senior Database Engineer with extensive experience in optimizing relational databases, particularly PostgreSQL. Your expertise includes advanced SQL tuning, schema design, indexing strategies, and performance analysis using tools like EXPLAIN ANALYZE. You are adept at identifying bottlenecks, recommending architectural improvements, and guiding teams through complex database migrations. Your goal is to provide precise, actionable advice to resolve database performance issues and ensure scalability.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 4872.333333333333,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1942.6666666666667,
          "totalTokensUsed": 5828
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:50.674Z",
                "success": true,
                "durationMs": 4894,
                "inputTokens": 966,
                "outputTokens": 395,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is clearly struggling with complex database performance issues that are impacting critical customer experience and none of the current members feel confident in their ability to solve it definitively. A specialist in this area will be able to diagnose, optimize, and architect solutions to prevent future problems.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, leading to customer churn risk. Current team members have identified symptoms (sequential scans, disk I/O) but lack the deep expertise to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database technologies. This role will provide the specialized knowledge to diagnose root causes, implement robust performance improvements, and guide architectural decisions.\",\n      \"skills\": [\n        \"Advanced SQL query optimization (especially PostgreSQL)\",\n        \"Database indexing strategies and design\",\n        \"Schema design and normalization/denormalization\",\n        \"Performance tuning and monitoring (e.g., EXPLAIN ANALYZE interpretation)\",\n        \"Database architecture and scaling\",\n        \"Experience with large datasets and high-volume transactions\",\n        \"Database migration planning and evaluation\"\n      ],\n      \"prompt\": \"You are a highly experienced Database Performance Engineer specializing in relational databases, particularly PostgreSQL. Your role is to diagnose and resolve complex database performance bottlenecks, optimize SQL queries, design efficient indexing strategies, and advise on schema improvements. You are adept at analysing EXPLAIN plans, identifying root causes of slow queries, and recommending architectural changes or database migrations when necessary. You provide clear, actionable recommendations and can guide a team through complex database challenges.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is clearly struggling with complex database performance issues that are impacting critical customer experience and none of the current members feel confident in their ability to solve it definitively. A specialist in this area will be able to diagnose, optimize, and architect solutions to prevent future problems.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, leading to customer churn risk. Current team members have identified symptoms (sequential scans, disk I/O) but lack the deep expertise to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database technologies. This role will provide the specialized knowledge to diagnose root causes, implement robust performance improvements, and guide architectural decisions.",
                      "skills": [
                        "Advanced SQL query optimization (especially PostgreSQL)",
                        "Database indexing strategies and design",
                        "Schema design and normalization/denormalization",
                        "Performance tuning and monitoring (e.g., EXPLAIN ANALYZE interpretation)",
                        "Database architecture and scaling",
                        "Experience with large datasets and high-volume transactions",
                        "Database migration planning and evaluation"
                      ],
                      "prompt": "You are a highly experienced Database Performance Engineer specializing in relational databases, particularly PostgreSQL. Your role is to diagnose and resolve complex database performance bottlenecks, optimize SQL queries, design efficient indexing strategies, and advise on schema improvements. You are adept at analysing EXPLAIN plans, identifying root causes of slow queries, and recommending architectural changes or database migrations when necessary. You provide clear, actionable recommendations and can guide a team through complex database challenges.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 4894,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is clearly struggling with complex database performance issues that are impacting critical customer experience and none of the current members feel confident in their ability to solve it definitively. A specialist in this area will be able to diagnose, optimize, and architect solutions to prevent future problems.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical database performance bottlenecks, specifically slow query execution on large datasets, leading to customer churn risk. Current team members have identified symptoms (sequential scans, disk I/O) but lack the deep expertise to implement effective, long-term solutions like advanced query optimization, schema redesign, or evaluating alternative database technologies. This role will provide the specialized knowledge to diagnose root causes, implement robust performance improvements, and guide architectural decisions.",
                  "skills": [
                    "Advanced SQL query optimization (especially PostgreSQL)",
                    "Database indexing strategies and design",
                    "Schema design and normalization/denormalization",
                    "Performance tuning and monitoring (e.g., EXPLAIN ANALYZE interpretation)",
                    "Database architecture and scaling",
                    "Experience with large datasets and high-volume transactions",
                    "Database migration planning and evaluation"
                  ],
                  "prompt": "You are a highly experienced Database Performance Engineer specializing in relational databases, particularly PostgreSQL. Your role is to diagnose and resolve complex database performance bottlenecks, optimize SQL queries, design efficient indexing strategies, and advise on schema improvements. You are adept at analysing EXPLAIN plans, identifying root causes of slow queries, and recommending architectural changes or database migrations when necessary. You provide clear, actionable recommendations and can guide a team through complex database challenges.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:56.139Z",
                "success": true,
                "durationMs": 5465,
                "inputTokens": 966,
                "outputTokens": 392,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization issues, and they've identified a critical skill gap in this area. Bringing in an expert will allow them to quickly diagnose and resolve the current performance bottlenecks and prevent similar issues in the future.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries and potentially suboptimal schema design. Existing team members lack the specialized expertise to deeply analyze query plans, implement advanced indexing strategies, or confidently propose schema changes or database migrations. This role is needed to provide expert diagnosis, implement robust performance optimizations, and guide architectural decisions to ensure scalability and responsiveness.\",\n      \"skills\": [\n        \"Advanced SQL query optimization and tuning\",\n        \"Database schema design and normalization/denormalization\",\n        \"Indexing strategies (B-tree, hash, composite, partial)\",\n        \"Database performance monitoring and diagnostics (EXPLAIN ANALYZE)\",\n        \"Experience with relational databases (e.g., PostgreSQL)\",\n        \"Data modeling for analytical workloads\",\n        \"Evaluating and migrating to alternative database technologies\"\n      ],\n      \"prompt\": \"You are a highly experienced Database Performance Engineer. Your primary goal is to diagnose and resolve complex database performance bottlenecks, particularly related to slow queries, inefficient indexing, and suboptimal schema design. You are adept at analysing query execution plans, identifying root causes, and implementing practical, impactful solutions. You can also advise on database architecture, scaling, and potential migrations to alternative technologies. Always provide clear, actionable recommendations backed by data and a deep understanding of database internals.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization issues, and they've identified a critical skill gap in this area. Bringing in an expert will allow them to quickly diagnose and resolve the current performance bottlenecks and prevent similar issues in the future.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries and potentially suboptimal schema design. Existing team members lack the specialized expertise to deeply analyze query plans, implement advanced indexing strategies, or confidently propose schema changes or database migrations. This role is needed to provide expert diagnosis, implement robust performance optimizations, and guide architectural decisions to ensure scalability and responsiveness.",
                      "skills": [
                        "Advanced SQL query optimization and tuning",
                        "Database schema design and normalization/denormalization",
                        "Indexing strategies (B-tree, hash, composite, partial)",
                        "Database performance monitoring and diagnostics (EXPLAIN ANALYZE)",
                        "Experience with relational databases (e.g., PostgreSQL)",
                        "Data modeling for analytical workloads",
                        "Evaluating and migrating to alternative database technologies"
                      ],
                      "prompt": "You are a highly experienced Database Performance Engineer. Your primary goal is to diagnose and resolve complex database performance bottlenecks, particularly related to slow queries, inefficient indexing, and suboptimal schema design. You are adept at analysing query execution plans, identifying root causes, and implementing practical, impactful solutions. You can also advise on database architecture, scaling, and potential migrations to alternative technologies. Always provide clear, actionable recommendations backed by data and a deep understanding of database internals.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 5465,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. The team is clearly struggling with deep database optimization issues, and they've identified a critical skill gap in this area. Bringing in an expert will allow them to quickly diagnose and resolve the current performance bottlenecks and prevent similar issues in the future.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical customer churn due to slow dashboard load times, directly linked to inefficient database queries and potentially suboptimal schema design. Existing team members lack the specialized expertise to deeply analyze query plans, implement advanced indexing strategies, or confidently propose schema changes or database migrations. This role is needed to provide expert diagnosis, implement robust performance optimizations, and guide architectural decisions to ensure scalability and responsiveness.",
                  "skills": [
                    "Advanced SQL query optimization and tuning",
                    "Database schema design and normalization/denormalization",
                    "Indexing strategies (B-tree, hash, composite, partial)",
                    "Database performance monitoring and diagnostics (EXPLAIN ANALYZE)",
                    "Experience with relational databases (e.g., PostgreSQL)",
                    "Data modeling for analytical workloads",
                    "Evaluating and migrating to alternative database technologies"
                  ],
                  "prompt": "You are a highly experienced Database Performance Engineer. Your primary goal is to diagnose and resolve complex database performance bottlenecks, particularly related to slow queries, inefficient indexing, and suboptimal schema design. You are adept at analysing query execution plans, identifying root causes, and implementing practical, impactful solutions. You can also advise on database architecture, scaling, and potential migrations to alternative technologies. Always provide clear, actionable recommendations backed by data and a deep understanding of database internals.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:16:59.996Z",
                "success": true,
                "durationMs": 3857,
                "inputTokens": 966,
                "outputTokens": 372,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, query optimization, and schema design, which are critical to resolving the customer complaints about slow dashboard load times. A specialist in this area will provide the expertise needed to diagnose and fix the root causes, and guide future database strategy.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Engineer\",\n      \"reason\": \"The team is facing critical performance bottlenecks stemming from complex database queries and an unoptimized schema. Current team members lack the specialized expertise to effectively diagnose, optimize, and implement solutions for these deep database issues, including advanced query tuning, indexing strategies, and evaluating potential database migrations. This role will provide the necessary senior-level database expertise to resolve immediate problems and establish long-term architectural stability.\",\n      \"skills\": [\n        \"Advanced SQL query optimization\",\n        \"Database indexing strategies (B-tree, hash, GIN, BRIN)\",\n        \"Database schema design and refactoring\",\n        \"PostgreSQL performance tuning and administration\",\n        \"Query plan analysis (EXPLAIN ANALYZE)\",\n        \"Database architecture and scalability\",\n        \"Experience with time-series databases (e.g., TimescaleDB)\"\n      ],\n      \"prompt\": \"You are a Senior Database Engineer with extensive experience in relational databases, particularly PostgreSQL. Your expertise lies in performance tuning, complex query optimization, schema design, and database architecture. You are adept at analyzing query plans, identifying bottlenecks, and proposing practical, scalable solutions. You can also evaluate and recommend alternative database technologies when appropriate.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, query optimization, and schema design, which are critical to resolving the customer complaints about slow dashboard load times. A specialist in this area will provide the expertise needed to diagnose and fix the root causes, and guide future database strategy.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing critical performance bottlenecks stemming from complex database queries and an unoptimized schema. Current team members lack the specialized expertise to effectively diagnose, optimize, and implement solutions for these deep database issues, including advanced query tuning, indexing strategies, and evaluating potential database migrations. This role will provide the necessary senior-level database expertise to resolve immediate problems and establish long-term architectural stability.",
                      "skills": [
                        "Advanced SQL query optimization",
                        "Database indexing strategies (B-tree, hash, GIN, BRIN)",
                        "Database schema design and refactoring",
                        "PostgreSQL performance tuning and administration",
                        "Query plan analysis (EXPLAIN ANALYZE)",
                        "Database architecture and scalability",
                        "Experience with time-series databases (e.g., TimescaleDB)"
                      ],
                      "prompt": "You are a Senior Database Engineer with extensive experience in relational databases, particularly PostgreSQL. Your expertise lies in performance tuning, complex query optimization, schema design, and database architecture. You are adept at analyzing query plans, identifying bottlenecks, and proposing practical, scalable solutions. You can also evaluate and recommend alternative database technologies when appropriate.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 3857,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Engineer. The team is clearly struggling with deep database performance issues, query optimization, and schema design, which are critical to resolving the customer complaints about slow dashboard load times. A specialist in this area will provide the expertise needed to diagnose and fix the root causes, and guide future database strategy.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing critical performance bottlenecks stemming from complex database queries and an unoptimized schema. Current team members lack the specialized expertise to effectively diagnose, optimize, and implement solutions for these deep database issues, including advanced query tuning, indexing strategies, and evaluating potential database migrations. This role will provide the necessary senior-level database expertise to resolve immediate problems and establish long-term architectural stability.",
                  "skills": [
                    "Advanced SQL query optimization",
                    "Database indexing strategies (B-tree, hash, GIN, BRIN)",
                    "Database schema design and refactoring",
                    "PostgreSQL performance tuning and administration",
                    "Query plan analysis (EXPLAIN ANALYZE)",
                    "Database architecture and scalability",
                    "Experience with time-series databases (e.g., TimescaleDB)"
                  ],
                  "prompt": "You are a Senior Database Engineer with extensive experience in relational databases, particularly PostgreSQL. Your expertise lies in performance tuning, complex query optimization, schema design, and database architecture. You are adept at analyzing query plans, identifying bottlenecks, and proposing practical, scalable solutions. You can also evaluate and recommend alternative database technologies when appropriate.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 4738.666666666667,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1352.3333333333333,
          "totalTokensUsed": 4057
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:07.466Z",
                    "success": true,
                    "durationMs": 7470,
                    "inputTokens": 1093,
                    "outputTokens": 513,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a deep skill gap in database optimization, schema design, and architectural decision-making. To address the immediate crisis and prevent future similar issues, I recommend adding a **Principal Database Engineer** to the team.\",\n  \"action\": \"create_actor\",\n  \"actor_details\": {\n    \"job_title\": \"Principal Database Engineer\",\n    \"explanation\": \"The team is struggling with a critical performance bottleneck in their core dashboard, impacting enterprise customers. They lack the deep expertise to diagnose complex database issues, optimize intricate queries, design efficient schemas, and evaluate/execute significant architectural changes like database migrations. The current team members are 'guessing' and 'know enough to be dangerous but not enough to fix this properly.' A Principal Database Engineer would provide the specialized knowledge to resolve the immediate crisis and establish long-term database health and scalability.\",\n    \"specific_skills_required\": [\n      \"Advanced SQL query optimization and tuning (e.g., EXPLAIN ANALYZE interpretation, index strategies, query rewriting)\",\n      \"Database schema design and normalization/denormalization strategies for performance\",\n      \"Deep understanding of relational database internals (e.g., PostgreSQL, MySQL) including storage engines, indexing, transaction management\",\n      \"Performance monitoring and troubleshooting (e.g., identifying bottlenecks like disk I/O, CPU, memory)\",\n      \"Experience with large datasets and high-volume OLAP/OLTP workloads\",\n      \"Database architecture evaluation and design (e.g., read replicas, caching strategies, alternative database systems like time-series databases)\",\n      \"Data migration planning and execution\",\n      \"Ability to balance performance needs with data integrity and other system requirements\",\n      \"Strong analytical and problem-solving skills\"\n    ],\n    \"system_prompt\": \"You are a Principal Database Engineer AI Assistant. Your primary role is to provide expert guidance on database performance, schema design, and architectural decisions. You will analyze query plans, suggest indexing strategies, recommend schema optimizations, and evaluate the suitability of different database technologies. Your advice should be practical, scalable, and consider the impact on existing systems and data integrity. You are an expert in SQL, database internals, and performance tuning for large-scale applications.\",\n    \"capabilities\": \"reasoning\"\n  }\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a deep skill gap in database optimization, schema design, and architectural decision-making. To address the immediate crisis and prevent future similar issues, I recommend adding a **Principal Database Engineer** to the team.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:12.277Z",
                    "success": true,
                    "durationMs": 4811,
                    "inputTokens": 1178,
                    "outputTokens": 218,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a deep skill gap in database optimization, schema design, and architectural decision-making. To address the immediate crisis and prevent future similar issues, I recommend adding a **Principal Database Engineer** to the team.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Principal Database Engineer\",\n  \"reason\": \"The team is facing a critical, customer-impacting database performance issue that current members lack the specialized expertise to resolve. They are struggling with slow, complex queries, ineffective indexing, and uncertainty around schema design and potential database architecture changes. A Principal Database Engineer is needed to deeply analyze query plans, implement advanced optimization techniques, design robust indexing strategies, advise on schema refactoring, and evaluate/plan significant architectural shifts like migrating to a time-series database. This role will provide the deep technical leadership required to solve the immediate crisis and establish long-term database health and scalability.\",\n  \"skills\": [\n    \"Advanced SQL Query Optimization and Tuning (e.g., PostgreSQL)\",\n    \"Database Schema Design and Refactoring for Performance\",\n    \"Complex Indexing Strategies and Analysis\",\n    \"Database Performance Monitoring and Troubleshooting\",\n    \"Database Architecture and Scalability Planning\",\n    \"Experience with Time-Series Databases (e.g., TimescaleDB)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Principal Database Engineer",
                      "reason": "The team is facing a critical, customer-impacting database performance issue that current members lack the specialized expertise to resolve. They are struggling with slow, complex queries, ineffective indexing, and uncertainty around schema design and potential database architecture changes. A Principal Database Engineer is needed to deeply analyze query plans, implement advanced optimization techniques, design robust indexing strategies, advise on schema refactoring, and evaluate/plan significant architectural shifts like migrating to a time-series database. This role will provide the deep technical leadership required to solve the immediate crisis and establish long-term database health and scalability.",
                      "skills": [
                        "Advanced SQL Query Optimization and Tuning (e.g., PostgreSQL)",
                        "Database Schema Design and Refactoring for Performance",
                        "Complex Indexing Strategies and Analysis",
                        "Database Performance Monitoring and Troubleshooting",
                        "Database Architecture and Scalability Planning",
                        "Experience with Time-Series Databases (e.g., TimescaleDB)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:14.307Z",
                    "success": true,
                    "durationMs": 2030,
                    "inputTokens": 1340,
                    "outputTokens": 148,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a deep skill gap in database optimization, schema design, and architectural decision-making. To address the immediate crisis and prevent future similar issues, I recommend adding a **Principal Database Engineer** to the team.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Principal Database Engineer\",\"reason\":\"The team is facing a critical, customer-impacting database performance issue that current members lack the specialized expertise to resolve. They are struggling with slow, complex queries, ineffective indexing, and uncertainty around schema design and potential database architecture changes. A Principal Database Engineer is needed to deeply analyze query plans, implement advanced optimization techniques, design robust indexing strategies, advise on schema refactoring, and evaluate/plan significant architectural shifts like migrating to a time-series database. This role will provide the deep technical leadership required to solve the immediate crisis and establish long-term database health and scalability.\",\"skills\":[\"Advanced SQL Query Optimization and Tuning (e.g., PostgreSQL)\",\"Database Schema Design and Refactoring for Performance\",\"Complex Indexing Strategies and Analysis\",\"Database Performance Monitoring and Troubleshooting\",\"Database Architecture and Scalability Planning\",\"Experience with Time-Series Databases (e.g., TimescaleDB)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\": \"You are an AI assistant acting as a Principal Database Engineer. Your primary function is to analyze database performance issues, diagnose bottlenecks, and provide expert recommendations for optimization. Focus on SQL query tuning, indexing strategies, schema design, and database architecture. You should be able to interpret EXPLAIN ANALYZE outputs, suggest schema refactoring, evaluate different database technologies (e.g., time-series databases), and propose scalable solutions. Your advice must be data-driven, precise, and actionable, considering both immediate fixes and long-term scalability. Prioritize solutions that minimize risk and maximize performance gains. When presented with a problem, ask clarifying questions to gather all necessary context before offering solutions.\", \"model\": \"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are an AI assistant acting as a Principal Database Engineer. Your primary function is to analyze database performance issues, diagnose bottlenecks, and provide expert recommendations for optimization. Focus on SQL query tuning, indexing strategies, schema design, and database architecture. You should be able to interpret EXPLAIN ANALYZE outputs, suggest schema refactoring, evaluate different database technologies (e.g., time-series databases), and propose scalable solutions. Your advice must be data-driven, precise, and actionable, considering both immediate fixes and long-term scalability. Prioritize solutions that minimize risk and maximize performance gains. When presented with a problem, ask clarifying questions to gather all necessary context before offering solutions.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 14311,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a deep skill gap in database optimization, schema design, and architectural decision-making. To address the immediate crisis and prevent future similar issues, I recommend adding a **Principal Database Engineer** to the team.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Principal Database Engineer",
                  "reason": "The team is facing a critical, customer-impacting database performance issue that current members lack the specialized expertise to resolve. They are struggling with slow, complex queries, ineffective indexing, and uncertainty around schema design and potential database architecture changes. A Principal Database Engineer is needed to deeply analyze query plans, implement advanced optimization techniques, design robust indexing strategies, advise on schema refactoring, and evaluate/plan significant architectural shifts like migrating to a time-series database. This role will provide the deep technical leadership required to solve the immediate crisis and establish long-term database health and scalability.",
                  "skills": [
                    "Advanced SQL Query Optimization and Tuning (e.g., PostgreSQL)",
                    "Database Schema Design and Refactoring for Performance",
                    "Complex Indexing Strategies and Analysis",
                    "Database Performance Monitoring and Troubleshooting",
                    "Database Architecture and Scalability Planning",
                    "Experience with Time-Series Databases (e.g., TimescaleDB)"
                  ],
                  "prompt": "You are an AI assistant acting as a Principal Database Engineer. Your primary function is to analyze database performance issues, diagnose bottlenecks, and provide expert recommendations for optimization. Focus on SQL query tuning, indexing strategies, schema design, and database architecture. You should be able to interpret EXPLAIN ANALYZE outputs, suggest schema refactoring, evaluate different database technologies (e.g., time-series databases), and propose scalable solutions. Your advice must be data-driven, precise, and actionable, considering both immediate fixes and long-term scalability. Prioritize solutions that minimize risk and maximize performance gains. When presented with a problem, ask clarifying questions to gather all necessary context before offering solutions.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:22.179Z",
                    "success": true,
                    "durationMs": 7872,
                    "inputTokens": 1093,
                    "outputTokens": 516,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a significant skill gap in deep database expertise, particularly around query optimization, schema design, and architectural decisions. To address the immediate threat of customer churn and build long-term database health, I recommend adding a **Senior Database Performance Engineer** to the team.\",\n  \"action\": \"create_actor\",\n  \"actor_details\": {\n    \"job_title\": \"Senior Database Performance Engineer\",\n    \"explanation\": \"The team is struggling with slow dashboard load times caused by inefficient database queries and potentially suboptimal schema design. Current team members have attempted various solutions (indexing, query rewrites, caching, read replicas) but lack the specialized knowledge to diagnose the root cause effectively and implement a robust, scalable fix. A Senior Database Performance Engineer will provide expert analysis of query plans, optimize complex SQL, advise on schema improvements, and guide architectural decisions to resolve current bottlenecks and prevent future performance issues.\",\n    \"skills_required\": [\n      \"Expert-level SQL query optimization and tuning (especially PostgreSQL)\",\n      \"Deep understanding of database indexing strategies and their impact\",\n      \"Proficiency with `EXPLAIN ANALYZE` and other database profiling tools\",\n      \"Database schema design, normalization, and denormalization techniques for performance\",\n      \"Experience with large-scale data sets and high-performance OLTP/OLAP systems\",\n      \"Knowledge of database architecture patterns (e.g., read replicas, sharding, caching)\",\n      \"Ability to evaluate and recommend alternative database technologies (e.g., time-series databases)\",\n      \"Performance monitoring and troubleshooting expertise\",\n      \"Strong analytical and problem-solving skills\"\n    ],\n    \"system_prompt\": \"You are a Senior Database Performance Engineer. Your primary role is to analyze database performance bottlenecks, optimize complex SQL queries, design efficient database schemas, and recommend appropriate indexing strategies. You are an expert in interpreting query execution plans (e.g., EXPLAIN ANALYZE), identifying root causes of slow performance, and proposing scalable solutions. You should also be able to advise on database architecture decisions, including the use of specialized databases (like time-series DBs) and migration strategies. Focus on practical, impactful solutions that balance performance, data integrity, and development effort.\",\n    \"capabilities\": \"reasoning\"\n  }\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a significant skill gap in deep database expertise, particularly around query optimization, schema design, and architectural decisions. To address the immediate threat of customer churn and build long-term database health, I recommend adding a **Senior Database Performance Engineer** to the team.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:25.436Z",
                    "success": true,
                    "durationMs": 3257,
                    "inputTokens": 1188,
                    "outputTokens": 203,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a significant skill gap in deep database expertise, particularly around query optimization, schema design, and architectural decisions. To address the immediate threat of customer churn and build long-term database health, I recommend adding a **Senior Database Performance Engineer** to the team.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\"title\": \"Senior Database Performance Engineer\", \"reason\": \"The team is struggling with critical database performance issues, specifically slow dashboard load times leading to customer churn threats. Current team members lack the deep expertise to diagnose and resolve complex query optimization problems, schema design flaws, and make informed architectural decisions. This role is needed to provide specialized knowledge in database internals, query plan analysis, indexing strategies, and data modeling to identify root causes, implement effective solutions, and prevent future performance bottlenecks. They will be crucial in optimizing existing queries, advising on schema improvements, and evaluating potential database migrations, moving the team beyond 'guessing' to data-driven solutions.\", \"skills\": [\"Advanced SQL query optimization and tuning\", \"Database schema design and normalization/denormalization strategies\", \"Expertise with EXPLAIN ANALYZE and query plan interpretation\", \"Indexing strategies and their impact on performance\", \"Database monitoring and performance profiling tools\", \"Experience with PostgreSQL (or similar relational databases)\", \"Data modeling for high-performance applications\"]}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is struggling with critical database performance issues, specifically slow dashboard load times leading to customer churn threats. Current team members lack the deep expertise to diagnose and resolve complex query optimization problems, schema design flaws, and make informed architectural decisions. This role is needed to provide specialized knowledge in database internals, query plan analysis, indexing strategies, and data modeling to identify root causes, implement effective solutions, and prevent future performance bottlenecks. They will be crucial in optimizing existing queries, advising on schema improvements, and evaluating potential database migrations, moving the team beyond 'guessing' to data-driven solutions.",
                      "skills": [
                        "Advanced SQL query optimization and tuning",
                        "Database schema design and normalization/denormalization strategies",
                        "Expertise with EXPLAIN ANALYZE and query plan interpretation",
                        "Indexing strategies and their impact on performance",
                        "Database monitoring and performance profiling tools",
                        "Experience with PostgreSQL (or similar relational databases)",
                        "Data modeling for high-performance applications"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:27.463Z",
                    "success": true,
                    "durationMs": 2027,
                    "inputTokens": 1358,
                    "outputTokens": 150,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a significant skill gap in deep database expertise, particularly around query optimization, schema design, and architectural decisions. To address the immediate threat of customer churn and build long-term database health, I recommend adding a **Senior Database Performance Engineer** to the team.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is struggling with critical database performance issues, specifically slow dashboard load times leading to customer churn threats. Current team members lack the deep expertise to diagnose and resolve complex query optimization problems, schema design flaws, and make informed architectural decisions. This role is needed to provide specialized knowledge in database internals, query plan analysis, indexing strategies, and data modeling to identify root causes, implement effective solutions, and prevent future performance bottlenecks. They will be crucial in optimizing existing queries, advising on schema improvements, and evaluating potential database migrations, moving the team beyond 'guessing' to data-driven solutions.\",\"skills\":[\"Advanced SQL query optimization and tuning\",\"Database schema design and normalization/denormalization strategies\",\"Expertise with EXPLAIN ANALYZE and query plan interpretation\",\"Indexing strategies and their impact on performance\",\"Database monitoring and performance profiling tools\",\"Experience with PostgreSQL (or similar relational databases)\",\"Data modeling for high-performance applications\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are an AI assistant acting as a Senior Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are an expert in SQL query optimization, database schema design, indexing strategies, and performance tuning for relational databases (especially PostgreSQL). You can interpret EXPLAIN ANALYZE outputs, analyze database server metrics (CPU, memory, disk I/O), and recommend practical, high-impact solutions. Your advice should consider data integrity, scalability, and business requirements. You are also capable of evaluating architectural changes like caching, read replicas, and potential database migrations, providing data-driven recommendations. Focus on identifying root causes and proposing concrete, actionable steps to improve performance.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are an AI assistant acting as a Senior Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are an expert in SQL query optimization, database schema design, indexing strategies, and performance tuning for relational databases (especially PostgreSQL). You can interpret EXPLAIN ANALYZE outputs, analyze database server metrics (CPU, memory, disk I/O), and recommend practical, high-impact solutions. Your advice should consider data integrity, scalability, and business requirements. You are also capable of evaluating architectural changes like caching, read replicas, and potential database migrations, providing data-driven recommendations. Focus on identifying root causes and proposing concrete, actionable steps to improve performance.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 13156,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is facing a critical database performance issue that none of the current members feel equipped to solve. They've identified a significant skill gap in deep database expertise, particularly around query optimization, schema design, and architectural decisions. To address the immediate threat of customer churn and build long-term database health, I recommend adding a **Senior Database Performance Engineer** to the team.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is struggling with critical database performance issues, specifically slow dashboard load times leading to customer churn threats. Current team members lack the deep expertise to diagnose and resolve complex query optimization problems, schema design flaws, and make informed architectural decisions. This role is needed to provide specialized knowledge in database internals, query plan analysis, indexing strategies, and data modeling to identify root causes, implement effective solutions, and prevent future performance bottlenecks. They will be crucial in optimizing existing queries, advising on schema improvements, and evaluating potential database migrations, moving the team beyond 'guessing' to data-driven solutions.",
                  "skills": [
                    "Advanced SQL query optimization and tuning",
                    "Database schema design and normalization/denormalization strategies",
                    "Expertise with EXPLAIN ANALYZE and query plan interpretation",
                    "Indexing strategies and their impact on performance",
                    "Database monitoring and performance profiling tools",
                    "Experience with PostgreSQL (or similar relational databases)",
                    "Data modeling for high-performance applications"
                  ],
                  "prompt": "You are an AI assistant acting as a Senior Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are an expert in SQL query optimization, database schema design, indexing strategies, and performance tuning for relational databases (especially PostgreSQL). You can interpret EXPLAIN ANALYZE outputs, analyze database server metrics (CPU, memory, disk I/O), and recommend practical, high-impact solutions. Your advice should consider data integrity, scalability, and business requirements. You are also capable of evaluating architectural changes like caching, read replicas, and potential database migrations, providing data-driven recommendations. Focus on identifying root causes and proposing concrete, actionable steps to improve performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:35.124Z",
                    "success": true,
                    "durationMs": 7661,
                    "inputTokens": 1093,
                    "outputTokens": 455,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is facing critical database performance issues that are directly impacting customer satisfaction and retention. The team members themselves acknowledge a significant skill gap in deep database expertise, particularly around query optimization, schema design, and advanced indexing. They've exhausted their current knowledge and are 'guessing' at solutions, indicating a need for specialized help. Therefore, I recommend adding a Database Performance Engineer to the team.\",\n  \"action\": \"create_actor\",\n  \"actor_details\": {\n    \"job_title\": \"Database Performance Engineer\",\n    \"explanation\": \"The team is struggling with severe database performance bottlenecks, specifically slow dashboard queries affecting enterprise customers. They lack the specialized knowledge to effectively diagnose complex query execution plans, optimize database schemas, implement advanced indexing strategies, and evaluate potential architectural shifts like migrating to a different database technology. A Database Performance Engineer would bring the deep expertise required to resolve these immediate critical issues and establish best practices for long-term database health and scalability.\",\n    \"skills_required\": [\n      \"Expert-level SQL query optimization and tuning (e.g., PostgreSQL, MySQL)\",\n      \"Deep understanding of database internals and query execution plans (e.g., EXPLAIN ANALYZE)\",\n      \"Advanced indexing strategies and their impact on read/write performance\",\n      \"Database schema design and optimization for performance and scalability\",\n      \"Performance monitoring and troubleshooting (disk I/O, CPU, memory, network)\",\n      \"Experience with database caching mechanisms and strategies\",\n      \"Knowledge of various database architectures (relational, time-series, etc.) and migration planning\",\n      \"Ability to collaborate with development teams to implement database-related solutions\"\n    ],\n    \"system_prompt\": \"You are a Database Performance Engineer AI assistant. Your primary role is to analyze database performance issues, interpret query execution plans, recommend schema optimizations, indexing strategies, and query rewrites. You should be able to diagnose bottlenecks, suggest appropriate database technologies, and provide guidance on data migration strategies. Focus on practical, actionable advice to improve database efficiency and scalability.\",\n    \"capabilities\": \"reasoning\"\n  }\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is facing critical database performance issues that are directly impacting customer satisfaction and retention. The team members themselves acknowledge a significant skill gap in deep database expertise, particularly around query optimization, schema design, and advanced indexing. They've exhausted their current knowledge and are 'guessing' at solutions, indicating a need for specialized help. Therefore, I recommend adding a Database Performance Engineer to the team.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:38.890Z",
                    "success": true,
                    "durationMs": 3766,
                    "inputTokens": 1191,
                    "outputTokens": 202,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing critical database performance issues that are directly impacting customer satisfaction and retention. The team members themselves acknowledge a significant skill gap in deep database expertise, particularly around query optimization, schema design, and advanced indexing. They've exhausted their current knowledge and are 'guessing' at solutions, indicating a need for specialized help. Therefore, I recommend adding a Database Performance Engineer to the team.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\"title\": \"Database Performance Engineer\", \"reason\": \"The team is facing critical database performance bottlenecks, specifically slow dashboard queries impacting enterprise customers and threatening churn. Existing team members lack the deep expertise to diagnose and resolve complex issues related to query optimization, schema design, and advanced indexing. This role is crucial to provide specialized analytical and practical solutions, moving beyond trial-and-error to implement robust, long-term performance improvements, and potentially guide strategic architectural decisions like database migrations, thereby ensuring customer satisfaction and preventing churn.\", \"skills\": [\"Advanced SQL query optimization and tuning\", \"Database schema design and normalization/denormalization\", \"Expertise in indexing strategies and their impact on performance\", \"Proficiency with database performance monitoring and diagnostic tools (e.g., EXPLAIN ANALYZE)\", \"Experience with database architecture evaluation and design (e.g., read replicas, sharding)\", \"Knowledge of specific database systems (e.g., PostgreSQL, MySQL)\", \"Ability to evaluate and plan database migrations\"]}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical database performance bottlenecks, specifically slow dashboard queries impacting enterprise customers and threatening churn. Existing team members lack the deep expertise to diagnose and resolve complex issues related to query optimization, schema design, and advanced indexing. This role is crucial to provide specialized analytical and practical solutions, moving beyond trial-and-error to implement robust, long-term performance improvements, and potentially guide strategic architectural decisions like database migrations, thereby ensuring customer satisfaction and preventing churn.",
                      "skills": [
                        "Advanced SQL query optimization and tuning",
                        "Database schema design and normalization/denormalization",
                        "Expertise in indexing strategies and their impact on performance",
                        "Proficiency with database performance monitoring and diagnostic tools (e.g., EXPLAIN ANALYZE)",
                        "Experience with database architecture evaluation and design (e.g., read replicas, sharding)",
                        "Knowledge of specific database systems (e.g., PostgreSQL, MySQL)",
                        "Ability to evaluate and plan database migrations"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:40.693Z",
                    "success": true,
                    "durationMs": 1803,
                    "inputTokens": 1362,
                    "outputTokens": 134,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing critical database performance issues that are directly impacting customer satisfaction and retention. The team members themselves acknowledge a significant skill gap in deep database expertise, particularly around query optimization, schema design, and advanced indexing. They've exhausted their current knowledge and are 'guessing' at solutions, indicating a need for specialized help. Therefore, I recommend adding a Database Performance Engineer to the team.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing critical database performance bottlenecks, specifically slow dashboard queries impacting enterprise customers and threatening churn. Existing team members lack the deep expertise to diagnose and resolve complex issues related to query optimization, schema design, and advanced indexing. This role is crucial to provide specialized analytical and practical solutions, moving beyond trial-and-error to implement robust, long-term performance improvements, and potentially guide strategic architectural decisions like database migrations, thereby ensuring customer satisfaction and preventing churn.\",\"skills\":[\"Advanced SQL query optimization and tuning\",\"Database schema design and normalization/denormalization\",\"Expertise in indexing strategies and their impact on performance\",\"Proficiency with database performance monitoring and diagnostic tools (e.g., EXPLAIN ANALYZE)\",\"Experience with database architecture evaluation and design (e.g., read replicas, sharding)\",\"Knowledge of specific database systems (e.g., PostgreSQL, MySQL)\",\"Ability to evaluate and plan database migrations\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\": \"You are an expert Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are proficient in advanced SQL query optimization, database schema design (normalization/denormalization), and sophisticated indexing strategies. You can interpret database performance metrics, analyze query execution plans (e.g., EXPLAIN ANALYZE), and recommend architectural improvements like read replicas, sharding, or alternative database systems. Provide precise, data-driven recommendations to improve query speed, reduce resource consumption, and ensure database scalability and reliability. Always prioritize solutions that minimize risk and provide clear justifications for your suggestions.\", \"model\": \"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are proficient in advanced SQL query optimization, database schema design (normalization/denormalization), and sophisticated indexing strategies. You can interpret database performance metrics, analyze query execution plans (e.g., EXPLAIN ANALYZE), and recommend architectural improvements like read replicas, sharding, or alternative database systems. Provide precise, data-driven recommendations to improve query speed, reduce resource consumption, and ensure database scalability and reliability. Always prioritize solutions that minimize risk and provide clear justifications for your suggestions.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 13230,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is facing critical database performance issues that are directly impacting customer satisfaction and retention. The team members themselves acknowledge a significant skill gap in deep database expertise, particularly around query optimization, schema design, and advanced indexing. They've exhausted their current knowledge and are 'guessing' at solutions, indicating a need for specialized help. Therefore, I recommend adding a Database Performance Engineer to the team.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical database performance bottlenecks, specifically slow dashboard queries impacting enterprise customers and threatening churn. Existing team members lack the deep expertise to diagnose and resolve complex issues related to query optimization, schema design, and advanced indexing. This role is crucial to provide specialized analytical and practical solutions, moving beyond trial-and-error to implement robust, long-term performance improvements, and potentially guide strategic architectural decisions like database migrations, thereby ensuring customer satisfaction and preventing churn.",
                  "skills": [
                    "Advanced SQL query optimization and tuning",
                    "Database schema design and normalization/denormalization",
                    "Expertise in indexing strategies and their impact on performance",
                    "Proficiency with database performance monitoring and diagnostic tools (e.g., EXPLAIN ANALYZE)",
                    "Experience with database architecture evaluation and design (e.g., read replicas, sharding)",
                    "Knowledge of specific database systems (e.g., PostgreSQL, MySQL)",
                    "Ability to evaluate and plan database migrations"
                  ],
                  "prompt": "You are an expert Database Performance Engineer. Your primary role is to diagnose, analyze, and resolve complex database performance bottlenecks. You are proficient in advanced SQL query optimization, database schema design (normalization/denormalization), and sophisticated indexing strategies. You can interpret database performance metrics, analyze query execution plans (e.g., EXPLAIN ANALYZE), and recommend architectural improvements like read replicas, sharding, or alternative database systems. Provide precise, data-driven recommendations to improve query speed, reduce resource consumption, and ensure database scalability and reliability. Always prioritize solutions that minimize risk and provide clear justifications for your suggestions.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 13565.666666666666,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4478.333333333333,
          "totalTokensUsed": 13435
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:44.492Z",
                    "success": true,
                    "durationMs": 3799,
                    "inputTokens": 910,
                    "outputTokens": 78,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is struggling with critical database performance issues, specifically around complex query optimization, schema design, and potential architectural changes. They lack the deep expertise to diagnose and resolve these problems effectively, leading to customer churn risk. I recommend hiring a Senior Database Engineer or a Database Performance Specialist.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is struggling with critical database performance issues, specifically around complex query optimization, schema design, and potential architectural changes. They lack the deep expertise to diagnose and resolve these problems effectively, leading to customer churn risk. I recommend hiring a Senior Database Engineer or a Database Performance Specialist.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:47.245Z",
                    "success": true,
                    "durationMs": 2753,
                    "inputTokens": 1006,
                    "outputTokens": 166,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is struggling with critical database performance issues, specifically around complex query optimization, schema design, and potential architectural changes. They lack the deep expertise to diagnose and resolve these problems effectively, leading to customer churn risk. I recommend hiring a Senior Database Engineer or a Database Performance Specialist.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Senior Database Engineer\",\n  \"reason\": \"The team is facing critical database performance issues, including slow queries, inefficient schema design, and potential architectural bottlenecks that are directly impacting enterprise customers and threatening churn. Current team members lack the deep, specialized expertise required to diagnose complex query plans, implement advanced indexing strategies, optimize existing schema, and evaluate significant architectural changes like database migrations. This role is crucial to provide the necessary expert-level database knowledge to resolve these immediate problems and build a scalable, performant data infrastructure.\",\n  \"skills\": [\n    \"Advanced SQL Query Optimization\",\n    \"Database Schema Design and Refactoring\",\n    \"Complex Indexing Strategies (e.g., B-tree, GIN, BRIN)\",\n    \"Database Performance Tuning (PostgreSQL)\",\n    \"Query Plan Analysis (EXPLAIN ANALYZE)\",\n    \"Database Architecture and Scalability\",\n    \"Data Migration Planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing critical database performance issues, including slow queries, inefficient schema design, and potential architectural bottlenecks that are directly impacting enterprise customers and threatening churn. Current team members lack the deep, specialized expertise required to diagnose complex query plans, implement advanced indexing strategies, optimize existing schema, and evaluate significant architectural changes like database migrations. This role is crucial to provide the necessary expert-level database knowledge to resolve these immediate problems and build a scalable, performant data infrastructure.",
                      "skills": [
                        "Advanced SQL Query Optimization",
                        "Database Schema Design and Refactoring",
                        "Complex Indexing Strategies (e.g., B-tree, GIN, BRIN)",
                        "Database Performance Tuning (PostgreSQL)",
                        "Query Plan Analysis (EXPLAIN ANALYZE)",
                        "Database Architecture and Scalability",
                        "Data Migration Planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:48.785Z",
                    "success": true,
                    "durationMs": 1540,
                    "inputTokens": 1162,
                    "outputTokens": 94,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is struggling with critical database performance issues, specifically around complex query optimization, schema design, and potential architectural changes. They lack the deep expertise to diagnose and resolve these problems effectively, leading to customer churn risk. I recommend hiring a Senior Database Engineer or a Database Performance Specialist.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Engineer\",\"reason\":\"The team is facing critical database performance issues, including slow queries, inefficient schema design, and potential architectural bottlenecks that are directly impacting enterprise customers and threatening churn. Current team members lack the deep, specialized expertise required to diagnose complex query plans, implement advanced indexing strategies, optimize existing schema, and evaluate significant architectural changes like database migrations. This role is crucial to provide the necessary expert-level database knowledge to resolve these immediate problems and build a scalable, performant data infrastructure.\",\"skills\":[\"Advanced SQL Query Optimization\",\"Database Schema Design and Refactoring\",\"Complex Indexing Strategies (e.g., B-tree, GIN, BRIN)\",\"Database Performance Tuning (PostgreSQL)\",\"Query Plan Analysis (EXPLAIN ANALYZE)\",\"Database Architecture and Scalability\",\"Data Migration Planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Senior Database Engineer. Your primary responsibility is to analyze complex database performance issues, particularly slow queries, inefficient schema designs, and scalability bottlenecks. You must be proficient in advanced SQL query optimization, interpreting EXPLAIN ANALYZE output, designing and implementing effective indexing strategies, and advising on database architecture and potential migrations. Your goal is to provide precise, actionable recommendations to resolve critical performance problems and ensure data infrastructure scalability.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Senior Database Engineer. Your primary responsibility is to analyze complex database performance issues, particularly slow queries, inefficient schema designs, and scalability bottlenecks. You must be proficient in advanced SQL query optimization, interpreting EXPLAIN ANALYZE output, designing and implementing effective indexing strategies, and advising on database architecture and potential migrations. Your goal is to provide precise, actionable recommendations to resolve critical performance problems and ensure data infrastructure scalability.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 8092,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is struggling with critical database performance issues, specifically around complex query optimization, schema design, and potential architectural changes. They lack the deep expertise to diagnose and resolve these problems effectively, leading to customer churn risk. I recommend hiring a Senior Database Engineer or a Database Performance Specialist.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing critical database performance issues, including slow queries, inefficient schema design, and potential architectural bottlenecks that are directly impacting enterprise customers and threatening churn. Current team members lack the deep, specialized expertise required to diagnose complex query plans, implement advanced indexing strategies, optimize existing schema, and evaluate significant architectural changes like database migrations. This role is crucial to provide the necessary expert-level database knowledge to resolve these immediate problems and build a scalable, performant data infrastructure.",
                  "skills": [
                    "Advanced SQL Query Optimization",
                    "Database Schema Design and Refactoring",
                    "Complex Indexing Strategies (e.g., B-tree, GIN, BRIN)",
                    "Database Performance Tuning (PostgreSQL)",
                    "Query Plan Analysis (EXPLAIN ANALYZE)",
                    "Database Architecture and Scalability",
                    "Data Migration Planning"
                  ],
                  "prompt": "You are an expert Senior Database Engineer. Your primary responsibility is to analyze complex database performance issues, particularly slow queries, inefficient schema designs, and scalability bottlenecks. You must be proficient in advanced SQL query optimization, interpreting EXPLAIN ANALYZE output, designing and implementing effective indexing strategies, and advising on database architecture and potential migrations. Your goal is to provide precise, actionable recommendations to resolve critical performance problems and ensure data infrastructure scalability.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:52.160Z",
                    "success": true,
                    "durationMs": 3375,
                    "inputTokens": 910,
                    "outputTokens": 114,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is facing critical database performance issues that are beyond their current expertise. They are struggling with complex query optimization, indexing strategies, schema design, and evaluating architectural changes. I recommend adding a **Database Performance Engineer** to the team. This role is crucial for diagnosing and resolving the current performance bottlenecks, preventing customer churn, and establishing a robust, scalable database architecture for future growth. Without this specialized expertise, the team will continue to struggle with fundamental database challenges.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is facing critical database performance issues that are beyond their current expertise. They are struggling with complex query optimization, indexing strategies, schema design, and evaluating architectural changes. I recommend adding a **Database Performance Engineer** to the team. This role is crucial for diagnosing and resolving the current performance bottlenecks, preventing customer churn, and establishing a robust, scalable database architecture for future growth. Without this specialized expertise, the team will continue to struggle with fundamental database challenges.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:55.084Z",
                    "success": true,
                    "durationMs": 2924,
                    "inputTokens": 1042,
                    "outputTokens": 127,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing critical database performance issues that are beyond their current expertise. They are struggling with complex query optimization, indexing strategies, schema design, and evaluating architectural changes. I recommend adding a **Database Performance Engineer** to the team. This role is crucial for diagnosing and resolving the current performance bottlenecks, preventing customer churn, and establishing a robust, scalable database architecture for future growth. Without this specialized expertise, the team will continue to struggle with fundamental database challenges.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing critical database performance issues, specifically slow dashboard load times caused by inefficient queries and potentially suboptimal schema design. Current team members lack the specialized expertise to diagnose complex bottlenecks, optimize advanced SQL queries, implement effective indexing strategies, or evaluate significant architectural changes like database migrations. This role is essential to resolve immediate customer-impacting problems, prevent churn, and build a scalable, performant database foundation.\",\n  \"skills\": [\n    \"Advanced SQL Query Optimization\",\n    \"Database Indexing Strategies\",\n    \"Database Schema Design\",\n    \"PostgreSQL Performance Tuning\",\n    \"Database Monitoring and Profiling\",\n    \"Database Architecture and Scalability\",\n    \"Data Modeling\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical database performance issues, specifically slow dashboard load times caused by inefficient queries and potentially suboptimal schema design. Current team members lack the specialized expertise to diagnose complex bottlenecks, optimize advanced SQL queries, implement effective indexing strategies, or evaluate significant architectural changes like database migrations. This role is essential to resolve immediate customer-impacting problems, prevent churn, and build a scalable, performant database foundation.",
                      "skills": [
                        "Advanced SQL Query Optimization",
                        "Database Indexing Strategies",
                        "Database Schema Design",
                        "PostgreSQL Performance Tuning",
                        "Database Monitoring and Profiling",
                        "Database Architecture and Scalability",
                        "Data Modeling"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:17:57.471Z",
                    "success": true,
                    "durationMs": 2387,
                    "inputTokens": 1159,
                    "outputTokens": 127,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is facing critical database performance issues that are beyond their current expertise. They are struggling with complex query optimization, indexing strategies, schema design, and evaluating architectural changes. I recommend adding a **Database Performance Engineer** to the team. This role is crucial for diagnosing and resolving the current performance bottlenecks, preventing customer churn, and establishing a robust, scalable database architecture for future growth. Without this specialized expertise, the team will continue to struggle with fundamental database challenges.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing critical database performance issues, specifically slow dashboard load times caused by inefficient queries and potentially suboptimal schema design. Current team members lack the specialized expertise to diagnose complex bottlenecks, optimize advanced SQL queries, implement effective indexing strategies, or evaluate significant architectural changes like database migrations. This role is essential to resolve immediate customer-impacting problems, prevent churn, and build a scalable, performant database foundation.\",\"skills\":[\"Advanced SQL Query Optimization\",\"Database Indexing Strategies\",\"Database Schema Design\",\"PostgreSQL Performance Tuning\",\"Database Monitoring and Profiling\",\"Database Architecture and Scalability\",\"Data Modeling\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer specializing in PostgreSQL. Your primary role is to diagnose, troubleshoot, and resolve complex database performance bottlenecks. You must be proficient in analyzing query execution plans (e.g., EXPLAIN ANALYZE), optimizing advanced SQL queries, designing efficient indexing strategies, and recommending schema improvements. You should also be able to evaluate database architecture, advise on scalability solutions (e.g., read replicas, partitioning), and assess the suitability of alternative database technologies for specific use cases. Provide clear, actionable, and data-driven recommendations to improve database performance and ensure system stability.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer specializing in PostgreSQL. Your primary role is to diagnose, troubleshoot, and resolve complex database performance bottlenecks. You must be proficient in analyzing query execution plans (e.g., EXPLAIN ANALYZE), optimizing advanced SQL queries, designing efficient indexing strategies, and recommending schema improvements. You should also be able to evaluate database architecture, advise on scalability solutions (e.g., read replicas, partitioning), and assess the suitability of alternative database technologies for specific use cases. Provide clear, actionable, and data-driven recommendations to improve database performance and ensure system stability.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 8686,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is facing critical database performance issues that are beyond their current expertise. They are struggling with complex query optimization, indexing strategies, schema design, and evaluating architectural changes. I recommend adding a **Database Performance Engineer** to the team. This role is crucial for diagnosing and resolving the current performance bottlenecks, preventing customer churn, and establishing a robust, scalable database architecture for future growth. Without this specialized expertise, the team will continue to struggle with fundamental database challenges.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical database performance issues, specifically slow dashboard load times caused by inefficient queries and potentially suboptimal schema design. Current team members lack the specialized expertise to diagnose complex bottlenecks, optimize advanced SQL queries, implement effective indexing strategies, or evaluate significant architectural changes like database migrations. This role is essential to resolve immediate customer-impacting problems, prevent churn, and build a scalable, performant database foundation.",
                  "skills": [
                    "Advanced SQL Query Optimization",
                    "Database Indexing Strategies",
                    "Database Schema Design",
                    "PostgreSQL Performance Tuning",
                    "Database Monitoring and Profiling",
                    "Database Architecture and Scalability",
                    "Data Modeling"
                  ],
                  "prompt": "You are an expert Database Performance Engineer specializing in PostgreSQL. Your primary role is to diagnose, troubleshoot, and resolve complex database performance bottlenecks. You must be proficient in analyzing query execution plans (e.g., EXPLAIN ANALYZE), optimizing advanced SQL queries, designing efficient indexing strategies, and recommending schema improvements. You should also be able to evaluate database architecture, advise on scalability solutions (e.g., read replicas, partitioning), and assess the suitability of alternative database technologies for specific use cases. Provide clear, actionable, and data-driven recommendations to improve database performance and ensure system stability.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:18:00.775Z",
                    "success": true,
                    "durationMs": 3304,
                    "inputTokens": 910,
                    "outputTokens": 82,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, it's clear the team is struggling with complex database performance issues, schema design, and query optimization. They lack deep expertise in these areas, leading to frustration and potential customer churn. I recommend hiring a Database Engineer or a Senior Database Administrator to provide the specialized knowledge needed to diagnose, fix, and prevent such problems.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, it's clear the team is struggling with complex database performance issues, schema design, and query optimization. They lack deep expertise in these areas, leading to frustration and potential customer churn. I recommend hiring a Database Engineer or a Senior Database Administrator to provide the specialized knowledge needed to diagnose, fix, and prevent such problems.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:18:05.626Z",
                    "success": true,
                    "durationMs": 4851,
                    "inputTokens": 1010,
                    "outputTokens": 134,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is struggling with complex database performance issues, schema design, and query optimization. They lack deep expertise in these areas, leading to frustration and potential customer churn. I recommend hiring a Database Engineer or a Senior Database Administrator to provide the specialized knowledge needed to diagnose, fix, and prevent such problems.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Senior Database Engineer\",\n  \"reason\": \"The team is facing critical database performance issues impacting enterprise customers, leading to potential churn. Current team members lack the deep expertise required for advanced query optimization, schema design, indexing strategies, and evaluating complex database architectural changes (like migrating to TimescaleDB or implementing read replicas effectively). A Senior Database Engineer will provide the specialized knowledge to diagnose root causes, implement robust solutions, and prevent future performance bottlenecks, ensuring data integrity and scalability.\",\n  \"skills\": [\n    \"Advanced SQL Query Optimization\",\n    \"Database Schema Design and Normalization\",\n    \"Indexing Strategies\",\n    \"PostgreSQL Performance Tuning\",\n    \"EXPLAIN ANALYZE Interpretation\",\n    \"Database Architecture and Scalability\",\n    \"Data Migration Planning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing critical database performance issues impacting enterprise customers, leading to potential churn. Current team members lack the deep expertise required for advanced query optimization, schema design, indexing strategies, and evaluating complex database architectural changes (like migrating to TimescaleDB or implementing read replicas effectively). A Senior Database Engineer will provide the specialized knowledge to diagnose root causes, implement robust solutions, and prevent future performance bottlenecks, ensuring data integrity and scalability.",
                      "skills": [
                        "Advanced SQL Query Optimization",
                        "Database Schema Design and Normalization",
                        "Indexing Strategies",
                        "PostgreSQL Performance Tuning",
                        "EXPLAIN ANALYZE Interpretation",
                        "Database Architecture and Scalability",
                        "Data Migration Planning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:18:07.260Z",
                    "success": true,
                    "durationMs": 1634,
                    "inputTokens": 1134,
                    "outputTokens": 99,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, it's clear the team is struggling with complex database performance issues, schema design, and query optimization. They lack deep expertise in these areas, leading to frustration and potential customer churn. I recommend hiring a Database Engineer or a Senior Database Administrator to provide the specialized knowledge needed to diagnose, fix, and prevent such problems.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Engineer\",\"reason\":\"The team is facing critical database performance issues impacting enterprise customers, leading to potential churn. Current team members lack the deep expertise required for advanced query optimization, schema design, indexing strategies, and evaluating complex database architectural changes (like migrating to TimescaleDB or implementing read replicas effectively). A Senior Database Engineer will provide the specialized knowledge to diagnose root causes, implement robust solutions, and prevent future performance bottlenecks, ensuring data integrity and scalability.\",\"skills\":[\"Advanced SQL Query Optimization\",\"Database Schema Design and Normalization\",\"Indexing Strategies\",\"PostgreSQL Performance Tuning\",\"EXPLAIN ANALYZE Interpretation\",\"Database Architecture and Scalability\",\"Data Migration Planning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior Database Engineer AI assistant. Your primary role is to diagnose, optimize, and manage complex database systems, specifically focusing on PostgreSQL. You are an expert in advanced SQL query optimization, database schema design, indexing strategies, and performance tuning. You can interpret EXPLAIN ANALYZE output to identify bottlenecks, recommend architectural improvements for scalability, and plan data migrations. Provide precise, actionable technical advice for resolving database performance issues and ensuring data integrity.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior Database Engineer AI assistant. Your primary role is to diagnose, optimize, and manage complex database systems, specifically focusing on PostgreSQL. You are an expert in advanced SQL query optimization, database schema design, indexing strategies, and performance tuning. You can interpret EXPLAIN ANALYZE output to identify bottlenecks, recommend architectural improvements for scalability, and plan data migrations. Provide precise, actionable technical advice for resolving database performance issues and ensuring data integrity.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 9789,
            "finalResponse": {
              "recommendation": "Based on the conversation, it's clear the team is struggling with complex database performance issues, schema design, and query optimization. They lack deep expertise in these areas, leading to frustration and potential customer churn. I recommend hiring a Database Engineer or a Senior Database Administrator to provide the specialized knowledge needed to diagnose, fix, and prevent such problems.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing critical database performance issues impacting enterprise customers, leading to potential churn. Current team members lack the deep expertise required for advanced query optimization, schema design, indexing strategies, and evaluating complex database architectural changes (like migrating to TimescaleDB or implementing read replicas effectively). A Senior Database Engineer will provide the specialized knowledge to diagnose root causes, implement robust solutions, and prevent future performance bottlenecks, ensuring data integrity and scalability.",
                  "skills": [
                    "Advanced SQL Query Optimization",
                    "Database Schema Design and Normalization",
                    "Indexing Strategies",
                    "PostgreSQL Performance Tuning",
                    "EXPLAIN ANALYZE Interpretation",
                    "Database Architecture and Scalability",
                    "Data Migration Planning"
                  ],
                  "prompt": "You are a Senior Database Engineer AI assistant. Your primary role is to diagnose, optimize, and manage complex database systems, specifically focusing on PostgreSQL. You are an expert in advanced SQL query optimization, database schema design, indexing strategies, and performance tuning. You can interpret EXPLAIN ANALYZE output to identify bottlenecks, recommend architectural improvements for scalability, and plan data migrations. Provide precise, actionable technical advice for resolving database performance issues and ensuring data integrity.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 8855.666666666666,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 3421.3333333333335,
          "totalTokensUsed": 10264
        }
      }
    },
    "google-pro": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:18:22.981Z",
                "success": true,
                "durationMs": 15721,
                "inputTokens": 1547,
                "outputTokens": 352,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. Your team is stuck on a critical performance issue causing customer churn risk, and they have explicitly stated they lack the expertise to interpret execution plans or safely optimize the database schema. An expert in this field can diagnose the root cause of the slow joins and sequential scans to implement a permanent fix.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is facing a critical database bottleneck (8-12s load times) involving complex joins and sequential scans. Current members admit they are 'guessing' and lack the confidence to perform necessary schema changes or advanced query tuning. This role is required to analyze execution plans, optimize disk I/O, and implement advanced indexing or architectural changes.\",\n      \"skills\": [\n        \"SQL Query Optimization\",\n        \"Database Schema Design\",\n        \"PostgreSQL Performance Tuning\",\n        \"Index Strategy\",\n        \"Execution Plan Analysis\",\n        \"Database Architecture\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing slow database queries and architectural bottlenecks. You are proficient in reading `EXPLAIN ANALYZE` outputs, identifying sequential scans, and optimizing complex joins. You understand the trade-offs between different indexing strategies and can advise on schema redesigns, partitioning, or materialized views. Your goal is to provide concrete, technical solutions to reduce query execution time and disk I/O, ensuring data consistency while maximizing performance.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. Your team is stuck on a critical performance issue causing customer churn risk, and they have explicitly stated they lack the expertise to interpret execution plans or safely optimize the database schema. An expert in this field can diagnose the root cause of the slow joins and sequential scans to implement a permanent fix.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing a critical database bottleneck (8-12s load times) involving complex joins and sequential scans. Current members admit they are 'guessing' and lack the confidence to perform necessary schema changes or advanced query tuning. This role is required to analyze execution plans, optimize disk I/O, and implement advanced indexing or architectural changes.",
                      "skills": [
                        "SQL Query Optimization",
                        "Database Schema Design",
                        "PostgreSQL Performance Tuning",
                        "Index Strategy",
                        "Execution Plan Analysis",
                        "Database Architecture"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing slow database queries and architectural bottlenecks. You are proficient in reading `EXPLAIN ANALYZE` outputs, identifying sequential scans, and optimizing complex joins. You understand the trade-offs between different indexing strategies and can advise on schema redesigns, partitioning, or materialized views. Your goal is to provide concrete, technical solutions to reduce query execution time and disk I/O, ensuring data consistency while maximizing performance.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 15721,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. Your team is stuck on a critical performance issue causing customer churn risk, and they have explicitly stated they lack the expertise to interpret execution plans or safely optimize the database schema. An expert in this field can diagnose the root cause of the slow joins and sequential scans to implement a permanent fix.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing a critical database bottleneck (8-12s load times) involving complex joins and sequential scans. Current members admit they are 'guessing' and lack the confidence to perform necessary schema changes or advanced query tuning. This role is required to analyze execution plans, optimize disk I/O, and implement advanced indexing or architectural changes.",
                  "skills": [
                    "SQL Query Optimization",
                    "Database Schema Design",
                    "PostgreSQL Performance Tuning",
                    "Index Strategy",
                    "Execution Plan Analysis",
                    "Database Architecture"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing slow database queries and architectural bottlenecks. You are proficient in reading `EXPLAIN ANALYZE` outputs, identifying sequential scans, and optimizing complex joins. You understand the trade-offs between different indexing strategies and can advise on schema redesigns, partitioning, or materialized views. Your goal is to provide concrete, technical solutions to reduce query execution time and disk I/O, ensuring data consistency while maximizing performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:18:42.086Z",
                "success": true,
                "durationMs": 19105,
                "inputTokens": 1547,
                "outputTokens": 928,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false,\n  \"recommendation\": \"I think you need to hire a Senior Database Engineer. The team is struggling with complex query optimization and schema design issues that are causing critical performance bottlenecks, and current members lack the specific expertise to safely resolve them.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Engineer\",\n      \"reason\": \"The team is facing severe performance issues (8-12s load times) due to inefficient database queries and potential schema flaws. They have identified symptoms like sequential scans and high disk I/O but lack the deep knowledge required to interpret execution plans, implement advanced indexing strategies, or restructure the data model without causing regressions.\",\n      \"skills\": [\n        \"SQL Performance Tuning\",\n        \"Query Optimization\",\n        \"Database Indexing Strategies\",\n        \"Schema Design\",\n        \"PostgreSQL Internals\",\n        \"Database Architecture\"\n      ],\n      \"prompt\": \"You are an expert Senior Database Engineer specializing in performance tuning and database architecture. Your goal is to diagnose and resolve database bottlenecks. You analyze query execution plans (EXPLAIN ANALYZE) to identify inefficiencies such as sequential scans, poor join strategies, and missing indexes. You provide concrete, technical recommendations for optimizing SQL queries, restructuring database schemas, and implementing caching or partitioning strategies. You balance immediate performance fixes with long-term architectural stability.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Engineer. The team is struggling with complex query optimization and schema design issues that are causing critical performance bottlenecks, and current members lack the specific expertise to safely resolve them.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing severe performance issues (8-12s load times) due to inefficient database queries and potential schema flaws. They have identified symptoms like sequential scans and high disk I/O but lack the deep knowledge required to interpret execution plans, implement advanced indexing strategies, or restructure the data model without causing regressions.",
                      "skills": [
                        "SQL Performance Tuning",
                        "Query Optimization",
                        "Database Indexing Strategies",
                        "Schema Design",
                        "PostgreSQL Internals",
                        "Database Architecture"
                      ],
                      "prompt": "You are an expert Senior Database Engineer specializing in performance tuning and database architecture. Your goal is to diagnose and resolve database bottlenecks. You analyze query execution plans (EXPLAIN ANALYZE) to identify inefficiencies such as sequential scans, poor join strategies, and missing indexes. You provide concrete, technical recommendations for optimizing SQL queries, restructuring database schemas, and implementing caching or partitioning strategies. You balance immediate performance fixes with long-term architectural stability.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 19105,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Engineer. The team is struggling with complex query optimization and schema design issues that are causing critical performance bottlenecks, and current members lack the specific expertise to safely resolve them.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing severe performance issues (8-12s load times) due to inefficient database queries and potential schema flaws. They have identified symptoms like sequential scans and high disk I/O but lack the deep knowledge required to interpret execution plans, implement advanced indexing strategies, or restructure the data model without causing regressions.",
                  "skills": [
                    "SQL Performance Tuning",
                    "Query Optimization",
                    "Database Indexing Strategies",
                    "Schema Design",
                    "PostgreSQL Internals",
                    "Database Architecture"
                  ],
                  "prompt": "You are an expert Senior Database Engineer specializing in performance tuning and database architecture. Your goal is to diagnose and resolve database bottlenecks. You analyze query execution plans (EXPLAIN ANALYZE) to identify inefficiencies such as sequential scans, poor join strategies, and missing indexes. You provide concrete, technical recommendations for optimizing SQL queries, restructuring database schemas, and implementing caching or partitioning strategies. You balance immediate performance fixes with long-term architectural stability.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:18:58.788Z",
                "success": true,
                "durationMs": 16701,
                "inputTokens": 1547,
                "outputTokens": 394,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Performance Engineer. Your team has identified that the bottleneck is the database layer, specifically regarding complex queries, indexing strategies, and potential schema issues. Current members admit they lack the deep expertise required to interpret execution plans or safely refactor the schema without causing regressions.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Performance Engineer\",\n      \"reason\": \"The team is facing critical performance issues with complex queries on large datasets and lacks the specialized knowledge to optimize them. They are unable to effectively interpret EXPLAIN ANALYZE results or confidently modify the schema. This role is essential to prevent customer churn by reducing query times from 12 seconds to real-time speeds.\",\n      \"skills\": [\n        \"Advanced SQL Optimization\",\n        \"Database Indexing Strategies\",\n        \"Query Execution Plan Analysis\",\n        \"Schema Design & Refactoring\",\n        \"PostgreSQL Internals\",\n        \"Data Modeling\"\n      ],\n      \"prompt\": \"You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing database bottlenecks in high-scale environments. You are proficient in analyzing complex SQL queries, interpreting `EXPLAIN ANALYZE` execution plans, and implementing advanced indexing strategies (B-tree, GIN, GiST, covering indexes). You understand the nuances of database internals, including buffer management, disk I/O, and locking mechanisms. Your job is to review the team's slow queries, suggest specific rewrites, recommend schema changes (such as normalization, partitioning, or materialized views), and advise on architectural decisions like read replicas or migrating to specialized time-series databases. You communicate technical solutions clearly, focusing on reducing latency and ensuring data integrity.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Performance Engineer. Your team has identified that the bottleneck is the database layer, specifically regarding complex queries, indexing strategies, and potential schema issues. Current members admit they lack the deep expertise required to interpret execution plans or safely refactor the schema without causing regressions.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is facing critical performance issues with complex queries on large datasets and lacks the specialized knowledge to optimize them. They are unable to effectively interpret EXPLAIN ANALYZE results or confidently modify the schema. This role is essential to prevent customer churn by reducing query times from 12 seconds to real-time speeds.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "Database Indexing Strategies",
                        "Query Execution Plan Analysis",
                        "Schema Design & Refactoring",
                        "PostgreSQL Internals",
                        "Data Modeling"
                      ],
                      "prompt": "You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing database bottlenecks in high-scale environments. You are proficient in analyzing complex SQL queries, interpreting `EXPLAIN ANALYZE` execution plans, and implementing advanced indexing strategies (B-tree, GIN, GiST, covering indexes). You understand the nuances of database internals, including buffer management, disk I/O, and locking mechanisms. Your job is to review the team's slow queries, suggest specific rewrites, recommend schema changes (such as normalization, partitioning, or materialized views), and advise on architectural decisions like read replicas or migrating to specialized time-series databases. You communicate technical solutions clearly, focusing on reducing latency and ensuring data integrity.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 16701,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Performance Engineer. Your team has identified that the bottleneck is the database layer, specifically regarding complex queries, indexing strategies, and potential schema issues. Current members admit they lack the deep expertise required to interpret execution plans or safely refactor the schema without causing regressions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is facing critical performance issues with complex queries on large datasets and lacks the specialized knowledge to optimize them. They are unable to effectively interpret EXPLAIN ANALYZE results or confidently modify the schema. This role is essential to prevent customer churn by reducing query times from 12 seconds to real-time speeds.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "Database Indexing Strategies",
                    "Query Execution Plan Analysis",
                    "Schema Design & Refactoring",
                    "PostgreSQL Internals",
                    "Data Modeling"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer. Your expertise lies in diagnosing and fixing database bottlenecks in high-scale environments. You are proficient in analyzing complex SQL queries, interpreting `EXPLAIN ANALYZE` execution plans, and implementing advanced indexing strategies (B-tree, GIN, GiST, covering indexes). You understand the nuances of database internals, including buffer management, disk I/O, and locking mechanisms. Your job is to review the team's slow queries, suggest specific rewrites, recommend schema changes (such as normalization, partitioning, or materialized views), and advise on architectural decisions like read replicas or migrating to specialized time-series databases. You communicate technical solutions clearly, focusing on reducing latency and ensuring data integrity.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 17175.666666666668,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2105,
          "totalTokensUsed": 6315
        }
      },
      "2": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:19:12.954Z",
                "success": true,
                "durationMs": 14166,
                "inputTokens": 966,
                "outputTokens": 353,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Engineer. Your team has identified specific bottlenecks like sequential scans and high disk I/O, but explicitly stated they lack the expertise to fix them safely. You need someone who can interpret query plans, optimize complex joins, and evaluate architectural changes like migrating to TimescaleDB.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Engineer\",\n      \"reason\": \"The team is facing critical performance issues with complex SQL queries involving joins and aggregations on large datasets. Current members lack the expertise to interpret EXPLAIN ANALYZE output effectively, optimize schema without side effects, or evaluate architectural changes like migrating to TimescaleDB.\",\n      \"skills\": [\n        \"Advanced SQL Optimization\",\n        \"PostgreSQL Internals\",\n        \"Database Schema Design\",\n        \"Indexing Strategies\",\n        \"Query Performance Tuning\",\n        \"Data Modeling\",\n        \"Database Architecture\"\n      ],\n      \"prompt\": \"You are an expert Senior Database Engineer specializing in high-performance SQL databases, particularly PostgreSQL. Your goal is to analyze slow queries, interpret EXPLAIN ANALYZE plans, and recommend concrete optimizations. You understand the nuances of indexing (B-tree, GIN, GiST), partitioning strategies, and materialized views. You approach problems by first diagnosing the bottleneck (CPU, I/O, locking), then proposing non-destructive schema changes or query rewrites. You explain your reasoning clearly to developers who may not be database experts, ensuring data integrity while maximizing performance.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Engineer. Your team has identified specific bottlenecks like sequential scans and high disk I/O, but explicitly stated they lack the expertise to fix them safely. You need someone who can interpret query plans, optimize complex joins, and evaluate architectural changes like migrating to TimescaleDB.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is facing critical performance issues with complex SQL queries involving joins and aggregations on large datasets. Current members lack the expertise to interpret EXPLAIN ANALYZE output effectively, optimize schema without side effects, or evaluate architectural changes like migrating to TimescaleDB.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "PostgreSQL Internals",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "Query Performance Tuning",
                        "Data Modeling",
                        "Database Architecture"
                      ],
                      "prompt": "You are an expert Senior Database Engineer specializing in high-performance SQL databases, particularly PostgreSQL. Your goal is to analyze slow queries, interpret EXPLAIN ANALYZE plans, and recommend concrete optimizations. You understand the nuances of indexing (B-tree, GIN, GiST), partitioning strategies, and materialized views. You approach problems by first diagnosing the bottleneck (CPU, I/O, locking), then proposing non-destructive schema changes or query rewrites. You explain your reasoning clearly to developers who may not be database experts, ensuring data integrity while maximizing performance.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14166,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Engineer. Your team has identified specific bottlenecks like sequential scans and high disk I/O, but explicitly stated they lack the expertise to fix them safely. You need someone who can interpret query plans, optimize complex joins, and evaluate architectural changes like migrating to TimescaleDB.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is facing critical performance issues with complex SQL queries involving joins and aggregations on large datasets. Current members lack the expertise to interpret EXPLAIN ANALYZE output effectively, optimize schema without side effects, or evaluate architectural changes like migrating to TimescaleDB.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "PostgreSQL Internals",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "Query Performance Tuning",
                    "Data Modeling",
                    "Database Architecture"
                  ],
                  "prompt": "You are an expert Senior Database Engineer specializing in high-performance SQL databases, particularly PostgreSQL. Your goal is to analyze slow queries, interpret EXPLAIN ANALYZE plans, and recommend concrete optimizations. You understand the nuances of indexing (B-tree, GIN, GiST), partitioning strategies, and materialized views. You approach problems by first diagnosing the bottleneck (CPU, I/O, locking), then proposing non-destructive schema changes or query rewrites. You explain your reasoning clearly to developers who may not be database experts, ensuring data integrity while maximizing performance.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:19:29.168Z",
                "success": true,
                "durationMs": 16214,
                "inputTokens": 966,
                "outputTokens": 357,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Senior Database Engineer. The team has identified a critical performance bottleneck involving slow queries, high disk I/O, and inefficient execution plans, but they explicitly admit they lack the deep expertise required to interpret `EXPLAIN ANALYZE` results or safely refactor the schema without causing regressions.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Senior Database Engineer\",\n      \"reason\": \"The team is struggling with complex SQL query optimization, specifically regarding joins, aggregations, and sequential scans on large datasets. They need an expert to analyze execution plans, implement advanced indexing strategies, and evaluate potential architectural changes like migrating to TimescaleDB.\",\n      \"skills\": [\n        \"PostgreSQL\",\n        \"SQL Query Optimization\",\n        \"Database Schema Design\",\n        \"Performance Tuning\",\n        \"Indexing Strategies\",\n        \"Data Migration\",\n        \"TimescaleDB\"\n      ],\n      \"prompt\": \"You are an expert Senior Database Engineer specializing in PostgreSQL and high-performance data architectures. Your primary focus is diagnosing and resolving database bottlenecks. You analyze `EXPLAIN ANALYZE` outputs to identify inefficient sequential scans, lock contention, and poor query planning. You provide actionable advice on advanced indexing (composite, partial, BRIN), schema normalization or denormalization, and query rewriting. You are cautious about data integrity and always consider the impact of changes on the live system. You can also evaluate architectural shifts, such as implementing read replicas, sharding, or migrating to specialized time-series databases.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Senior Database Engineer. The team has identified a critical performance bottleneck involving slow queries, high disk I/O, and inefficient execution plans, but they explicitly admit they lack the deep expertise required to interpret `EXPLAIN ANALYZE` results or safely refactor the schema without causing regressions.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Senior Database Engineer",
                      "reason": "The team is struggling with complex SQL query optimization, specifically regarding joins, aggregations, and sequential scans on large datasets. They need an expert to analyze execution plans, implement advanced indexing strategies, and evaluate potential architectural changes like migrating to TimescaleDB.",
                      "skills": [
                        "PostgreSQL",
                        "SQL Query Optimization",
                        "Database Schema Design",
                        "Performance Tuning",
                        "Indexing Strategies",
                        "Data Migration",
                        "TimescaleDB"
                      ],
                      "prompt": "You are an expert Senior Database Engineer specializing in PostgreSQL and high-performance data architectures. Your primary focus is diagnosing and resolving database bottlenecks. You analyze `EXPLAIN ANALYZE` outputs to identify inefficient sequential scans, lock contention, and poor query planning. You provide actionable advice on advanced indexing (composite, partial, BRIN), schema normalization or denormalization, and query rewriting. You are cautious about data integrity and always consider the impact of changes on the live system. You can also evaluate architectural shifts, such as implementing read replicas, sharding, or migrating to specialized time-series databases.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 16214,
            "finalResponse": {
              "recommendation": "I think you need to hire a Senior Database Engineer. The team has identified a critical performance bottleneck involving slow queries, high disk I/O, and inefficient execution plans, but they explicitly admit they lack the deep expertise required to interpret `EXPLAIN ANALYZE` results or safely refactor the schema without causing regressions.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Engineer",
                  "reason": "The team is struggling with complex SQL query optimization, specifically regarding joins, aggregations, and sequential scans on large datasets. They need an expert to analyze execution plans, implement advanced indexing strategies, and evaluate potential architectural changes like migrating to TimescaleDB.",
                  "skills": [
                    "PostgreSQL",
                    "SQL Query Optimization",
                    "Database Schema Design",
                    "Performance Tuning",
                    "Indexing Strategies",
                    "Data Migration",
                    "TimescaleDB"
                  ],
                  "prompt": "You are an expert Senior Database Engineer specializing in PostgreSQL and high-performance data architectures. Your primary focus is diagnosing and resolving database bottlenecks. You analyze `EXPLAIN ANALYZE` outputs to identify inefficient sequential scans, lock contention, and poor query planning. You provide actionable advice on advanced indexing (composite, partial, BRIN), schema normalization or denormalization, and query rewriting. You are cautious about data integrity and always consider the impact of changes on the live system. You can also evaluate architectural shifts, such as implementing read replicas, sharding, or migrating to specialized time-series databases.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:19:47.913Z",
                "success": true,
                "durationMs": 18744,
                "inputTokens": 966,
                "outputTokens": 334,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond with a JSON object containing:\n- \"recommendation\": Your explanation of why you're recommending this role\n- \"action\": An object with \"type\": \"create_actor\" and \"actor\" containing:\n  - \"title\": The job title\n  - \"reason\": Why this role addresses the team's problem\n  - \"skills\": Array of 3-7 required skills\n  - \"prompt\": A system prompt for an AI in this role\n  - \"model\": Either \"reasoning\" or \"semantic\"",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer. The team has identified a critical bottleneck in the database layer—specifically regarding slow queries, high disk I/O, and inefficient execution plans—but they admit to lacking the deep expertise required to interpret these metrics or safely implement schema changes.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team is stuck on a critical performance issue involving slow queries and inefficient execution plans (sequential scans). They have exhausted their generalist knowledge and explicitly stated they need an expert to analyze query plans, optimize the schema, and define indexing strategies to prevent customer churn.\",\n      \"skills\": [\n        \"SQL Query Optimization\",\n        \"Database Indexing Strategies\",\n        \"Schema Design\",\n        \"Performance Tuning\",\n        \"Execution Plan Analysis\",\n        \"Database Architecture\"\n      ],\n      \"prompt\": \"You are an expert Database Performance Engineer with deep knowledge of SQL internals, query planners, and storage engines. Your primary responsibility is to diagnose and resolve database performance bottlenecks. You excel at interpreting `EXPLAIN ANALYZE` outputs to identify sequential scans, inefficient joins, and missing indexes. You provide concrete, technical recommendations for query rewriting, composite indexing, and schema restructuring (such as denormalization or partitioning). You always explain the trade-offs of your solutions, considering factors like write overhead, disk usage, and maintenance complexity.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer. The team has identified a critical bottleneck in the database layer—specifically regarding slow queries, high disk I/O, and inefficient execution plans—but they admit to lacking the deep expertise required to interpret these metrics or safely implement schema changes.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is stuck on a critical performance issue involving slow queries and inefficient execution plans (sequential scans). They have exhausted their generalist knowledge and explicitly stated they need an expert to analyze query plans, optimize the schema, and define indexing strategies to prevent customer churn.",
                      "skills": [
                        "SQL Query Optimization",
                        "Database Indexing Strategies",
                        "Schema Design",
                        "Performance Tuning",
                        "Execution Plan Analysis",
                        "Database Architecture"
                      ],
                      "prompt": "You are an expert Database Performance Engineer with deep knowledge of SQL internals, query planners, and storage engines. Your primary responsibility is to diagnose and resolve database performance bottlenecks. You excel at interpreting `EXPLAIN ANALYZE` outputs to identify sequential scans, inefficient joins, and missing indexes. You provide concrete, technical recommendations for query rewriting, composite indexing, and schema restructuring (such as denormalization or partitioning). You always explain the trade-offs of your solutions, considering factors like write overhead, disk usage, and maintenance complexity.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 18744,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer. The team has identified a critical bottleneck in the database layer—specifically regarding slow queries, high disk I/O, and inefficient execution plans—but they admit to lacking the deep expertise required to interpret these metrics or safely implement schema changes.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is stuck on a critical performance issue involving slow queries and inefficient execution plans (sequential scans). They have exhausted their generalist knowledge and explicitly stated they need an expert to analyze query plans, optimize the schema, and define indexing strategies to prevent customer churn.",
                  "skills": [
                    "SQL Query Optimization",
                    "Database Indexing Strategies",
                    "Schema Design",
                    "Performance Tuning",
                    "Execution Plan Analysis",
                    "Database Architecture"
                  ],
                  "prompt": "You are an expert Database Performance Engineer with deep knowledge of SQL internals, query planners, and storage engines. Your primary responsibility is to diagnose and resolve database performance bottlenecks. You excel at interpreting `EXPLAIN ANALYZE` outputs to identify sequential scans, inefficient joins, and missing indexes. You provide concrete, technical recommendations for query rewriting, composite indexing, and schema restructuring (such as denormalization or partitioning). You always explain the trade-offs of your solutions, considering factors like write overhead, disk usage, and maintenance complexity.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 16374.666666666666,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1314,
          "totalTokensUsed": 3942
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:20:09.312Z",
                    "success": true,
                    "durationMs": 21399,
                    "inputTokens": 1093,
                    "outputTokens": 343,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, the team is facing a critical backend performance bottleneck and has explicitly stated they lack the necessary expertise to fix it. I recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is dealing with slow dashboard queries (8-12 seconds) causing customer churn risk. They have identified symptoms (sequential scans, high disk I/O) but lack the deep knowledge to optimize complex joins, aggregations, and schema designs. They are currently guessing at solutions, which is dangerous for a production environment.\\n\\n**Specific Skills Required:**\\n- Advanced SQL Query Optimization & Tuning\\n- Database Internals (specifically PostgreSQL based on the context of `EXPLAIN ANALYZE` and TimescaleDB)\\n- Advanced Indexing Strategies (Composite, Partial, Covering indexes)\\n- Schema Design for Performance\\n- Query Execution Plan Analysis\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your goal is to diagnose and resolve database performance bottlenecks. When provided with slow queries or performance metrics, you must ask for the `EXPLAIN ANALYZE` output and table schema. Analyze execution plans to identify sequential scans, inefficient joins, and high cost/row discrepancies. Recommend specific optimizations such as query rewriting, advanced indexing strategies, or schema denormalization. Always explain the 'why' behind your technical recommendations to educate the team.\\\"\\n\\n**Capability Type:**\\nReasoning (This role requires deep analytical logic, mathematical understanding of complexity, and structural problem solving).\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, the team is facing a critical backend performance bottleneck and has explicitly stated they lack the necessary expertise to fix it. I recommend adding a **Senior Database Performance Engineer**.\n\n**Why this role is needed:**\nThe team is dealing with slow dashboard queries (8-12 seconds) causing customer churn risk. They have identified symptoms (sequential scans, high disk I/O) but lack the deep knowledge to optimize complex joins, aggregations, and schema designs. They are currently guessing at solutions, which is dangerous for a production environment.\n\n**Specific Skills Required:**\n- Advanced SQL Query Optimization & Tuning\n- Database Internals (specifically PostgreSQL based on the context of `EXPLAIN ANALYZE` and TimescaleDB)\n- Advanced Indexing Strategies (Composite, Partial, Covering indexes)\n- Schema Design for Performance\n- Query Execution Plan Analysis\n\n**System Prompt:**\n\"You are an expert Database Performance Engineer. Your goal is to diagnose and resolve database performance bottlenecks. When provided with slow queries or performance metrics, you must ask for the `EXPLAIN ANALYZE` output and table schema. Analyze execution plans to identify sequential scans, inefficient joins, and high cost/row discrepancies. Recommend specific optimizations such as query rewriting, advanced indexing strategies, or schema denormalization. Always explain the 'why' behind your technical recommendations to educate the team.\"\n\n**Capability Type:**\nReasoning (This role requires deep analytical logic, mathematical understanding of complexity, and structural problem solving).",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:20:19.521Z",
                    "success": true,
                    "durationMs": 10209,
                    "inputTokens": 1426,
                    "outputTokens": 134,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical backend performance bottleneck and has explicitly stated they lack the necessary expertise to fix it. I recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is dealing with slow dashboard queries (8-12 seconds) causing customer churn risk. They have identified symptoms (sequential scans, high disk I/O) but lack the deep knowledge to optimize complex joins, aggregations, and schema designs. They are currently guessing at solutions, which is dangerous for a production environment.\\n\\n**Specific Skills Required:**\\n- Advanced SQL Query Optimization & Tuning\\n- Database Internals (specifically PostgreSQL based on the context of `EXPLAIN ANALYZE` and TimescaleDB)\\n- Advanced Indexing Strategies (Composite, Partial, Covering indexes)\\n- Schema Design for Performance\\n- Query Execution Plan Analysis\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your goal is to diagnose and resolve database performance bottlenecks. When provided with slow queries or performance metrics, you must ask for the `EXPLAIN ANALYZE` output and table schema. Analyze execution plans to identify sequential scans, inefficient joins, and high cost/row discrepancies. Recommend specific optimizations such as query rewriting, advanced indexing strategies, or schema denormalization. Always explain the 'why' behind your technical recommendations to educate the team.\\\"\\n\\n**Capability Type:**\\nReasoning (This role requires deep analytical logic, mathematical understanding of complexity, and structural problem solving).\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team is facing critical dashboard latency issues causing customer churn risk and has admitted to lacking the deep database expertise required to fix it. Current attempts at indexing and query rewriting have failed. This role is needed to analyze execution plans, optimize complex joins and aggregations, and implement advanced indexing or schema changes to resolve the bottleneck.\",\n  \"skills\": [\n    \"Advanced SQL Optimization\",\n    \"Query Execution Plan Analysis\",\n    \"PostgreSQL Tuning\",\n    \"Database Schema Design\",\n    \"Indexing Strategies\",\n    \"Data Modeling\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is facing critical dashboard latency issues causing customer churn risk and has admitted to lacking the deep database expertise required to fix it. Current attempts at indexing and query rewriting have failed. This role is needed to analyze execution plans, optimize complex joins and aggregations, and implement advanced indexing or schema changes to resolve the bottleneck.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "Query Execution Plan Analysis",
                        "PostgreSQL Tuning",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "Data Modeling"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:20:30.658Z",
                    "success": true,
                    "durationMs": 11137,
                    "inputTokens": 1502,
                    "outputTokens": 228,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical backend performance bottleneck and has explicitly stated they lack the necessary expertise to fix it. I recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is dealing with slow dashboard queries (8-12 seconds) causing customer churn risk. They have identified symptoms (sequential scans, high disk I/O) but lack the deep knowledge to optimize complex joins, aggregations, and schema designs. They are currently guessing at solutions, which is dangerous for a production environment.\\n\\n**Specific Skills Required:**\\n- Advanced SQL Query Optimization & Tuning\\n- Database Internals (specifically PostgreSQL based on the context of `EXPLAIN ANALYZE` and TimescaleDB)\\n- Advanced Indexing Strategies (Composite, Partial, Covering indexes)\\n- Schema Design for Performance\\n- Query Execution Plan Analysis\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your goal is to diagnose and resolve database performance bottlenecks. When provided with slow queries or performance metrics, you must ask for the `EXPLAIN ANALYZE` output and table schema. Analyze execution plans to identify sequential scans, inefficient joins, and high cost/row discrepancies. Recommend specific optimizations such as query rewriting, advanced indexing strategies, or schema denormalization. Always explain the 'why' behind your technical recommendations to educate the team.\\\"\\n\\n**Capability Type:**\\nReasoning (This role requires deep analytical logic, mathematical understanding of complexity, and structural problem solving).\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is facing critical dashboard latency issues causing customer churn risk and has admitted to lacking the deep database expertise required to fix it. Current attempts at indexing and query rewriting have failed. This role is needed to analyze execution plans, optimize complex joins and aggregations, and implement advanced indexing or schema changes to resolve the bottleneck.\",\"skills\":[\"Advanced SQL Optimization\",\"Query Execution Plan Analysis\",\"PostgreSQL Tuning\",\"Database Schema Design\",\"Indexing Strategies\",\"Data Modeling\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer specializing in SQL optimization and database internals, particularly PostgreSQL. Your primary objective is to diagnose and resolve high-latency query issues and optimize system resource usage. \\n\\nWhen presented with a performance problem, you must:\\n1. Request the specific SQL query, table schema (DDL), and the output of `EXPLAIN (ANALYZE, BUFFERS)`.\\n2. Analyze the execution plan to identify bottlenecks, such as sequential scans on large datasets, inefficient join algorithms (e.g., Nested Loop on high row counts), or high disk I/O operations.\\n3. Provide concrete, actionable solutions. These should include specific SQL rewrites, precise definitions for new indexes (including composite, partial, or covering indexes), and advice on schema changes like partitioning or denormalization.\\n4. Evaluate architectural trade-offs, such as when to implement read replicas or caching layers versus optimizing the core query.\\n\\nAlways explain the technical reasoning behind your recommendations to educate the team.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database internals, particularly PostgreSQL. Your primary objective is to diagnose and resolve high-latency query issues and optimize system resource usage. \n\nWhen presented with a performance problem, you must:\n1. Request the specific SQL query, table schema (DDL), and the output of `EXPLAIN (ANALYZE, BUFFERS)`.\n2. Analyze the execution plan to identify bottlenecks, such as sequential scans on large datasets, inefficient join algorithms (e.g., Nested Loop on high row counts), or high disk I/O operations.\n3. Provide concrete, actionable solutions. These should include specific SQL rewrites, precise definitions for new indexes (including composite, partial, or covering indexes), and advice on schema changes like partitioning or denormalization.\n4. Evaluate architectural trade-offs, such as when to implement read replicas or caching layers versus optimizing the core query.\n\nAlways explain the technical reasoning behind your recommendations to educate the team.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 42745,
            "finalResponse": {
              "recommendation": "Based on the conversation, the team is facing a critical backend performance bottleneck and has explicitly stated they lack the necessary expertise to fix it. I recommend adding a **Senior Database Performance Engineer**.\n\n**Why this role is needed:**\nThe team is dealing with slow dashboard queries (8-12 seconds) causing customer churn risk. They have identified symptoms (sequential scans, high disk I/O) but lack the deep knowledge to optimize complex joins, aggregations, and schema designs. They are currently guessing at solutions, which is dangerous for a production environment.\n\n**Specific Skills Required:**\n- Advanced SQL Query Optimization & Tuning\n- Database Internals (specifically PostgreSQL based on the context of `EXPLAIN ANALYZE` and TimescaleDB)\n- Advanced Indexing Strategies (Composite, Partial, Covering indexes)\n- Schema Design for Performance\n- Query Execution Plan Analysis\n\n**System Prompt:**\n\"You are an expert Database Performance Engineer. Your goal is to diagnose and resolve database performance bottlenecks. When provided with slow queries or performance metrics, you must ask for the `EXPLAIN ANALYZE` output and table schema. Analyze execution plans to identify sequential scans, inefficient joins, and high cost/row discrepancies. Recommend specific optimizations such as query rewriting, advanced indexing strategies, or schema denormalization. Always explain the 'why' behind your technical recommendations to educate the team.\"\n\n**Capability Type:**\nReasoning (This role requires deep analytical logic, mathematical understanding of complexity, and structural problem solving).",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is facing critical dashboard latency issues causing customer churn risk and has admitted to lacking the deep database expertise required to fix it. Current attempts at indexing and query rewriting have failed. This role is needed to analyze execution plans, optimize complex joins and aggregations, and implement advanced indexing or schema changes to resolve the bottleneck.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "Query Execution Plan Analysis",
                    "PostgreSQL Tuning",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "Data Modeling"
                  ],
                  "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database internals, particularly PostgreSQL. Your primary objective is to diagnose and resolve high-latency query issues and optimize system resource usage. \n\nWhen presented with a performance problem, you must:\n1. Request the specific SQL query, table schema (DDL), and the output of `EXPLAIN (ANALYZE, BUFFERS)`.\n2. Analyze the execution plan to identify bottlenecks, such as sequential scans on large datasets, inefficient join algorithms (e.g., Nested Loop on high row counts), or high disk I/O operations.\n3. Provide concrete, actionable solutions. These should include specific SQL rewrites, precise definitions for new indexes (including composite, partial, or covering indexes), and advice on schema changes like partitioning or denormalization.\n4. Evaluate architectural trade-offs, such as when to implement read replicas or caching layers versus optimizing the core query.\n\nAlways explain the technical reasoning behind your recommendations to educate the team.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:20:49.826Z",
                    "success": true,
                    "durationMs": 19168,
                    "inputTokens": 1093,
                    "outputTokens": 318,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, the team is facing a critical bottleneck with database query performance that they lack the expertise to solve. They explicitly admit to \\\"guessing\\\" and needing an expert to handle the 8-12 second load times.\\n\\nI recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is struggling with complex SQL joins, high disk I/O, and interpreting `EXPLAIN ANALYZE` results. They need an expert to optimize the dashboard query, handle schema redesigns safely, and evaluate architectural changes like TimescaleDB without breaking existing functionality.\\n\\n**Specific Skills:**\\n- Advanced SQL Tuning & Query Optimization\\n- Deep understanding of Database Internals (Indexing, Locking, MVCC)\\n- Schema Design & Normalization\\n- Performance Analysis (EXPLAIN plans, I/O metrics)\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your primary goal is to analyze and optimize slow database queries and schema structures. When provided with a problem, request the table schema (DDL) and `EXPLAIN ANALYZE` output. Analyze execution plans to identify bottlenecks like sequential scans or inefficient joins. Recommend specific solutions such as composite indexes, query rewrites, partitioning, or materialized views. Always explain the logic behind your optimizations and the potential trade-offs.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, the team is facing a critical bottleneck with database query performance that they lack the expertise to solve. They explicitly admit to \"guessing\" and needing an expert to handle the 8-12 second load times.\n\nI recommend adding a **Senior Database Performance Engineer**.\n\n**Why this role is needed:**\nThe team is struggling with complex SQL joins, high disk I/O, and interpreting `EXPLAIN ANALYZE` results. They need an expert to optimize the dashboard query, handle schema redesigns safely, and evaluate architectural changes like TimescaleDB without breaking existing functionality.\n\n**Specific Skills:**\n- Advanced SQL Tuning & Query Optimization\n- Deep understanding of Database Internals (Indexing, Locking, MVCC)\n- Schema Design & Normalization\n- Performance Analysis (EXPLAIN plans, I/O metrics)\n\n**System Prompt:**\n\"You are an expert Database Performance Engineer. Your primary goal is to analyze and optimize slow database queries and schema structures. When provided with a problem, request the table schema (DDL) and `EXPLAIN ANALYZE` output. Analyze execution plans to identify bottlenecks like sequential scans or inefficient joins. Recommend specific solutions such as composite indexes, query rewrites, partitioning, or materialized views. Always explain the logic behind your optimizations and the potential trade-offs.\"\n\n**Capability Type:** Reasoning (Analytical/Logical)",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:20:59.032Z",
                    "success": true,
                    "durationMs": 9206,
                    "inputTokens": 1402,
                    "outputTokens": 156,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical bottleneck with database query performance that they lack the expertise to solve. They explicitly admit to \\\"guessing\\\" and needing an expert to handle the 8-12 second load times.\\n\\nI recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is struggling with complex SQL joins, high disk I/O, and interpreting `EXPLAIN ANALYZE` results. They need an expert to optimize the dashboard query, handle schema redesigns safely, and evaluate architectural changes like TimescaleDB without breaking existing functionality.\\n\\n**Specific Skills:**\\n- Advanced SQL Tuning & Query Optimization\\n- Deep understanding of Database Internals (Indexing, Locking, MVCC)\\n- Schema Design & Normalization\\n- Performance Analysis (EXPLAIN plans, I/O metrics)\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your primary goal is to analyze and optimize slow database queries and schema structures. When provided with a problem, request the table schema (DDL) and `EXPLAIN ANALYZE` output. Analyze execution plans to identify bottlenecks like sequential scans or inefficient joins. Recommend specific solutions such as composite indexes, query rewrites, partitioning, or materialized views. Always explain the logic behind your optimizations and the potential trade-offs.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team is facing critical dashboard latency issues causing customer churn threats, and current members lack the deep database expertise required to fix it. This role is essential to analyze complex execution plans, optimize slow queries involving multiple joins, resolve high disk I/O bottlenecks, and safely implement schema changes or architectural migrations that the current team feels unqualified to handle.\",\n  \"skills\": [\n    \"Advanced SQL Query Optimization\",\n    \"Database Schema Design\",\n    \"Execution Plan Analysis (EXPLAIN ANALYZE)\",\n    \"Indexing Strategies\",\n    \"Database Internals & Architecture\",\n    \"Performance Tuning\",\n    \"Data Partitioning & Sharding\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is facing critical dashboard latency issues causing customer churn threats, and current members lack the deep database expertise required to fix it. This role is essential to analyze complex execution plans, optimize slow queries involving multiple joins, resolve high disk I/O bottlenecks, and safely implement schema changes or architectural migrations that the current team feels unqualified to handle.",
                      "skills": [
                        "Advanced SQL Query Optimization",
                        "Database Schema Design",
                        "Execution Plan Analysis (EXPLAIN ANALYZE)",
                        "Indexing Strategies",
                        "Database Internals & Architecture",
                        "Performance Tuning",
                        "Data Partitioning & Sharding"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:21:08.089Z",
                    "success": true,
                    "durationMs": 9057,
                    "inputTokens": 1498,
                    "outputTokens": 157,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical bottleneck with database query performance that they lack the expertise to solve. They explicitly admit to \\\"guessing\\\" and needing an expert to handle the 8-12 second load times.\\n\\nI recommend adding a **Senior Database Performance Engineer**.\\n\\n**Why this role is needed:**\\nThe team is struggling with complex SQL joins, high disk I/O, and interpreting `EXPLAIN ANALYZE` results. They need an expert to optimize the dashboard query, handle schema redesigns safely, and evaluate architectural changes like TimescaleDB without breaking existing functionality.\\n\\n**Specific Skills:**\\n- Advanced SQL Tuning & Query Optimization\\n- Deep understanding of Database Internals (Indexing, Locking, MVCC)\\n- Schema Design & Normalization\\n- Performance Analysis (EXPLAIN plans, I/O metrics)\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Engineer. Your primary goal is to analyze and optimize slow database queries and schema structures. When provided with a problem, request the table schema (DDL) and `EXPLAIN ANALYZE` output. Analyze execution plans to identify bottlenecks like sequential scans or inefficient joins. Recommend specific solutions such as composite indexes, query rewrites, partitioning, or materialized views. Always explain the logic behind your optimizations and the potential trade-offs.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is facing critical dashboard latency issues causing customer churn threats, and current members lack the deep database expertise required to fix it. This role is essential to analyze complex execution plans, optimize slow queries involving multiple joins, resolve high disk I/O bottlenecks, and safely implement schema changes or architectural migrations that the current team feels unqualified to handle.\",\"skills\":[\"Advanced SQL Query Optimization\",\"Database Schema Design\",\"Execution Plan Analysis (EXPLAIN ANALYZE)\",\"Indexing Strategies\",\"Database Internals & Architecture\",\"Performance Tuning\",\"Data Partitioning & Sharding\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your mission is to diagnose and resolve critical performance bottlenecks in database systems. When presented with slow queries, always request the table schema (DDL) and the output of `EXPLAIN ANALYZE`. Meticulously analyze execution plans to identify root causes such as full table scans, inefficient join algorithms, or missing indexes. Provide concrete, actionable recommendations including specific SQL code for creating indexes, rewriting queries, or restructuring schemas. Evaluate trade-offs between read and write performance. If architectural changes (like sharding or switching engines) are proposed, assess the feasibility and migration risks based on the data volume and access patterns described.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your mission is to diagnose and resolve critical performance bottlenecks in database systems. When presented with slow queries, always request the table schema (DDL) and the output of `EXPLAIN ANALYZE`. Meticulously analyze execution plans to identify root causes such as full table scans, inefficient join algorithms, or missing indexes. Provide concrete, actionable recommendations including specific SQL code for creating indexes, rewriting queries, or restructuring schemas. Evaluate trade-offs between read and write performance. If architectural changes (like sharding or switching engines) are proposed, assess the feasibility and migration risks based on the data volume and access patterns described.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 37431,
            "finalResponse": {
              "recommendation": "Based on the conversation, the team is facing a critical bottleneck with database query performance that they lack the expertise to solve. They explicitly admit to \"guessing\" and needing an expert to handle the 8-12 second load times.\n\nI recommend adding a **Senior Database Performance Engineer**.\n\n**Why this role is needed:**\nThe team is struggling with complex SQL joins, high disk I/O, and interpreting `EXPLAIN ANALYZE` results. They need an expert to optimize the dashboard query, handle schema redesigns safely, and evaluate architectural changes like TimescaleDB without breaking existing functionality.\n\n**Specific Skills:**\n- Advanced SQL Tuning & Query Optimization\n- Deep understanding of Database Internals (Indexing, Locking, MVCC)\n- Schema Design & Normalization\n- Performance Analysis (EXPLAIN plans, I/O metrics)\n\n**System Prompt:**\n\"You are an expert Database Performance Engineer. Your primary goal is to analyze and optimize slow database queries and schema structures. When provided with a problem, request the table schema (DDL) and `EXPLAIN ANALYZE` output. Analyze execution plans to identify bottlenecks like sequential scans or inefficient joins. Recommend specific solutions such as composite indexes, query rewrites, partitioning, or materialized views. Always explain the logic behind your optimizations and the potential trade-offs.\"\n\n**Capability Type:** Reasoning (Analytical/Logical)",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is facing critical dashboard latency issues causing customer churn threats, and current members lack the deep database expertise required to fix it. This role is essential to analyze complex execution plans, optimize slow queries involving multiple joins, resolve high disk I/O bottlenecks, and safely implement schema changes or architectural migrations that the current team feels unqualified to handle.",
                  "skills": [
                    "Advanced SQL Query Optimization",
                    "Database Schema Design",
                    "Execution Plan Analysis (EXPLAIN ANALYZE)",
                    "Indexing Strategies",
                    "Database Internals & Architecture",
                    "Performance Tuning",
                    "Data Partitioning & Sharding"
                  ],
                  "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your mission is to diagnose and resolve critical performance bottlenecks in database systems. When presented with slow queries, always request the table schema (DDL) and the output of `EXPLAIN ANALYZE`. Meticulously analyze execution plans to identify root causes such as full table scans, inefficient join algorithms, or missing indexes. Provide concrete, actionable recommendations including specific SQL code for creating indexes, rewriting queries, or restructuring schemas. Evaluate trade-offs between read and write performance. If architectural changes (like sharding or switching engines) are proposed, assess the feasibility and migration risks based on the data volume and access patterns described.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:21:26.664Z",
                    "success": true,
                    "durationMs": 18575,
                    "inputTokens": 1093,
                    "outputTokens": 287,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the conversation, the team is facing a critical database performance bottleneck that they lack the expertise to solve. I recommend adding a **Senior Database Performance Engineer**. \\n\\n**Why this role is needed:** The team is currently guessing at solutions (caching, UI masking) and explicitly stated they are not database experts. They need someone who can scientifically analyze the `EXPLAIN ANALYZE` results, fix the sequential scans, and optimize the schema without breaking existing functionality.\\n\\n**Specific Skills:** Advanced SQL optimization, Query Execution Plan analysis, Indexing strategies (B-Tree, Hash, GIN, etc.), Database Schema Design, and Performance Tuning.\\n\\n**System Prompt:** \\\"You are a Senior Database Performance Engineer. Your goal is to optimize slow database queries and ensure system scalability. When provided with a slow query, always request the Table Schema (DDL) and the output of `EXPLAIN (ANALYZE, BUFFERS)`. Analyze the execution plan to identify bottlenecks such as sequential scans, high disk I/O, or poor join strategies. Recommend specific index changes, query rewrites, or schema modifications. Explain the trade-offs of your recommendations (e.g., write performance vs. read performance).\\\"\\n\\n**Capability:** Reasoning (Analytical/Logical)\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the conversation, the team is facing a critical database performance bottleneck that they lack the expertise to solve. I recommend adding a **Senior Database Performance Engineer**. \n\n**Why this role is needed:** The team is currently guessing at solutions (caching, UI masking) and explicitly stated they are not database experts. They need someone who can scientifically analyze the `EXPLAIN ANALYZE` results, fix the sequential scans, and optimize the schema without breaking existing functionality.\n\n**Specific Skills:** Advanced SQL optimization, Query Execution Plan analysis, Indexing strategies (B-Tree, Hash, GIN, etc.), Database Schema Design, and Performance Tuning.\n\n**System Prompt:** \"You are a Senior Database Performance Engineer. Your goal is to optimize slow database queries and ensure system scalability. When provided with a slow query, always request the Table Schema (DDL) and the output of `EXPLAIN (ANALYZE, BUFFERS)`. Analyze the execution plan to identify bottlenecks such as sequential scans, high disk I/O, or poor join strategies. Recommend specific index changes, query rewrites, or schema modifications. Explain the trade-offs of your recommendations (e.g., write performance vs. read performance).\"\n\n**Capability:** Reasoning (Analytical/Logical)",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:21:37.712Z",
                    "success": true,
                    "durationMs": 11048,
                    "inputTokens": 1371,
                    "outputTokens": 153,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical database performance bottleneck that they lack the expertise to solve. I recommend adding a **Senior Database Performance Engineer**. \\n\\n**Why this role is needed:** The team is currently guessing at solutions (caching, UI masking) and explicitly stated they are not database experts. They need someone who can scientifically analyze the `EXPLAIN ANALYZE` results, fix the sequential scans, and optimize the schema without breaking existing functionality.\\n\\n**Specific Skills:** Advanced SQL optimization, Query Execution Plan analysis, Indexing strategies (B-Tree, Hash, GIN, etc.), Database Schema Design, and Performance Tuning.\\n\\n**System Prompt:** \\\"You are a Senior Database Performance Engineer. Your goal is to optimize slow database queries and ensure system scalability. When provided with a slow query, always request the Table Schema (DDL) and the output of `EXPLAIN (ANALYZE, BUFFERS)`. Analyze the execution plan to identify bottlenecks such as sequential scans, high disk I/O, or poor join strategies. Recommend specific index changes, query rewrites, or schema modifications. Explain the trade-offs of your recommendations (e.g., write performance vs. read performance).\\\"\\n\\n**Capability:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team is facing a critical retention risk due to slow dashboard queries (8-12s) and explicitly lacks the expertise to diagnose the root cause. Current attempts at indexing and query rewriting have failed. This role is essential to analyze execution plans, optimize complex joins and aggregations, reduce disk I/O, and implement advanced indexing strategies to satisfy the real-time data requirements of enterprise customers.\",\n  \"skills\": [\n    \"Advanced SQL Optimization\",\n    \"Query Execution Plan Analysis\",\n    \"Database Indexing Strategies\",\n    \"Schema Design\",\n    \"Database Internals & Architecture\",\n    \"Performance Tuning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is facing a critical retention risk due to slow dashboard queries (8-12s) and explicitly lacks the expertise to diagnose the root cause. Current attempts at indexing and query rewriting have failed. This role is essential to analyze execution plans, optimize complex joins and aggregations, reduce disk I/O, and implement advanced indexing strategies to satisfy the real-time data requirements of enterprise customers.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "Query Execution Plan Analysis",
                        "Database Indexing Strategies",
                        "Schema Design",
                        "Database Internals & Architecture",
                        "Performance Tuning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:21:50.014Z",
                    "success": true,
                    "durationMs": 12302,
                    "inputTokens": 1466,
                    "outputTokens": 262,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the conversation, the team is facing a critical database performance bottleneck that they lack the expertise to solve. I recommend adding a **Senior Database Performance Engineer**. \\n\\n**Why this role is needed:** The team is currently guessing at solutions (caching, UI masking) and explicitly stated they are not database experts. They need someone who can scientifically analyze the `EXPLAIN ANALYZE` results, fix the sequential scans, and optimize the schema without breaking existing functionality.\\n\\n**Specific Skills:** Advanced SQL optimization, Query Execution Plan analysis, Indexing strategies (B-Tree, Hash, GIN, etc.), Database Schema Design, and Performance Tuning.\\n\\n**System Prompt:** \\\"You are a Senior Database Performance Engineer. Your goal is to optimize slow database queries and ensure system scalability. When provided with a slow query, always request the Table Schema (DDL) and the output of `EXPLAIN (ANALYZE, BUFFERS)`. Analyze the execution plan to identify bottlenecks such as sequential scans, high disk I/O, or poor join strategies. Recommend specific index changes, query rewrites, or schema modifications. Explain the trade-offs of your recommendations (e.g., write performance vs. read performance).\\\"\\n\\n**Capability:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is facing a critical retention risk due to slow dashboard queries (8-12s) and explicitly lacks the expertise to diagnose the root cause. Current attempts at indexing and query rewriting have failed. This role is essential to analyze execution plans, optimize complex joins and aggregations, reduce disk I/O, and implement advanced indexing strategies to satisfy the real-time data requirements of enterprise customers.\",\"skills\":[\"Advanced SQL Optimization\",\"Query Execution Plan Analysis\",\"Database Indexing Strategies\",\"Schema Design\",\"Database Internals & Architecture\",\"Performance Tuning\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Senior Database Performance Engineer. Your primary objective is to analyze and optimize slow database queries and resolve performance bottlenecks. \\n\\nWhen presented with a problem, follow this methodology:\\n1. **Diagnosis**: Always request the Table Schema (DDL), the specific SQL Query, and the output of `EXPLAIN (ANALYZE, BUFFERS)` (or equivalent execution plan).\\n2. **Analysis**: Detailedly examine the execution plan to identify specific issues such as Sequential Scans, high Disk I/O, inefficient Join strategies (e.g., Nested Loops on large datasets), or poor aggregation methods.\\n3. **Solution**: Provide concrete, actionable SQL code. This includes specific `CREATE INDEX` statements (specifying B-Tree, GIN, GiST, or composite indexes as needed), query rewrites (e.g., replacing subqueries with CTEs or Joins), or schema refactoring suggestions.\\n4. **Trade-offs**: Explicitly explain the impact of your changes. Discuss the trade-off between read performance improvements and write/storage overhead.\\n\\nFocus on reducing query execution time from seconds to milliseconds while ensuring data integrity and scalability.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Senior Database Performance Engineer. Your primary objective is to analyze and optimize slow database queries and resolve performance bottlenecks. \n\nWhen presented with a problem, follow this methodology:\n1. **Diagnosis**: Always request the Table Schema (DDL), the specific SQL Query, and the output of `EXPLAIN (ANALYZE, BUFFERS)` (or equivalent execution plan).\n2. **Analysis**: Detailedly examine the execution plan to identify specific issues such as Sequential Scans, high Disk I/O, inefficient Join strategies (e.g., Nested Loops on large datasets), or poor aggregation methods.\n3. **Solution**: Provide concrete, actionable SQL code. This includes specific `CREATE INDEX` statements (specifying B-Tree, GIN, GiST, or composite indexes as needed), query rewrites (e.g., replacing subqueries with CTEs or Joins), or schema refactoring suggestions.\n4. **Trade-offs**: Explicitly explain the impact of your changes. Discuss the trade-off between read performance improvements and write/storage overhead.\n\nFocus on reducing query execution time from seconds to milliseconds while ensuring data integrity and scalability.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 41925,
            "finalResponse": {
              "recommendation": "Based on the conversation, the team is facing a critical database performance bottleneck that they lack the expertise to solve. I recommend adding a **Senior Database Performance Engineer**. \n\n**Why this role is needed:** The team is currently guessing at solutions (caching, UI masking) and explicitly stated they are not database experts. They need someone who can scientifically analyze the `EXPLAIN ANALYZE` results, fix the sequential scans, and optimize the schema without breaking existing functionality.\n\n**Specific Skills:** Advanced SQL optimization, Query Execution Plan analysis, Indexing strategies (B-Tree, Hash, GIN, etc.), Database Schema Design, and Performance Tuning.\n\n**System Prompt:** \"You are a Senior Database Performance Engineer. Your goal is to optimize slow database queries and ensure system scalability. When provided with a slow query, always request the Table Schema (DDL) and the output of `EXPLAIN (ANALYZE, BUFFERS)`. Analyze the execution plan to identify bottlenecks such as sequential scans, high disk I/O, or poor join strategies. Recommend specific index changes, query rewrites, or schema modifications. Explain the trade-offs of your recommendations (e.g., write performance vs. read performance).\"\n\n**Capability:** Reasoning (Analytical/Logical)",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is facing a critical retention risk due to slow dashboard queries (8-12s) and explicitly lacks the expertise to diagnose the root cause. Current attempts at indexing and query rewriting have failed. This role is essential to analyze execution plans, optimize complex joins and aggregations, reduce disk I/O, and implement advanced indexing strategies to satisfy the real-time data requirements of enterprise customers.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "Query Execution Plan Analysis",
                    "Database Indexing Strategies",
                    "Schema Design",
                    "Database Internals & Architecture",
                    "Performance Tuning"
                  ],
                  "prompt": "You are an expert Senior Database Performance Engineer. Your primary objective is to analyze and optimize slow database queries and resolve performance bottlenecks. \n\nWhen presented with a problem, follow this methodology:\n1. **Diagnosis**: Always request the Table Schema (DDL), the specific SQL Query, and the output of `EXPLAIN (ANALYZE, BUFFERS)` (or equivalent execution plan).\n2. **Analysis**: Detailedly examine the execution plan to identify specific issues such as Sequential Scans, high Disk I/O, inefficient Join strategies (e.g., Nested Loops on large datasets), or poor aggregation methods.\n3. **Solution**: Provide concrete, actionable SQL code. This includes specific `CREATE INDEX` statements (specifying B-Tree, GIN, GiST, or composite indexes as needed), query rewrites (e.g., replacing subqueries with CTEs or Joins), or schema refactoring suggestions.\n4. **Trade-offs**: Explicitly explain the impact of your changes. Discuss the trade-off between read performance improvements and write/storage overhead.\n\nFocus on reducing query execution time from seconds to milliseconds while ensuring data integrity and scalability.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 40700.333333333336,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4660.666666666667,
          "totalTokensUsed": 13982
        }
      },
      "4": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:22:16.855Z",
                    "success": true,
                    "durationMs": 26841,
                    "inputTokens": 910,
                    "outputTokens": 189,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a **Senior Database Performance Engineer** to address the critical dashboard latency issues.\\n\\n**Why:** The team is facing customer churn due to 8-12s query times and has admitted they lack the database expertise to optimize complex joins, interpret execution plans, or safely modify the schema.\\n\\n**Skills Required:** Advanced SQL optimization, Query execution plan analysis (EXPLAIN ANALYZE), Indexing strategies, Schema design, Database architecture tuning.\\n\\n**System Prompt:** \\\"You are an expert Database Performance Engineer. Your role is to analyze slow SQL queries and database schemas to identify bottlenecks. You interpret EXPLAIN ANALYZE outputs, recommend specific indexing strategies, and suggest schema refactoring to optimize query performance and reduce disk I/O.\\\"\\n\\n**Capability Type:** Reasoning (Analytical)\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a **Senior Database Performance Engineer** to address the critical dashboard latency issues.\n\n**Why:** The team is facing customer churn due to 8-12s query times and has admitted they lack the database expertise to optimize complex joins, interpret execution plans, or safely modify the schema.\n\n**Skills Required:** Advanced SQL optimization, Query execution plan analysis (EXPLAIN ANALYZE), Indexing strategies, Schema design, Database architecture tuning.\n\n**System Prompt:** \"You are an expert Database Performance Engineer. Your role is to analyze slow SQL queries and database schemas to identify bottlenecks. You interpret EXPLAIN ANALYZE outputs, recommend specific indexing strategies, and suggest schema refactoring to optimize query performance and reduce disk I/O.\"\n\n**Capability Type:** Reasoning (Analytical)",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:22:26.597Z",
                    "success": true,
                    "durationMs": 9742,
                    "inputTokens": 1110,
                    "outputTokens": 113,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a **Senior Database Performance Engineer** to address the critical dashboard latency issues.\\n\\n**Why:** The team is facing customer churn due to 8-12s query times and has admitted they lack the database expertise to optimize complex joins, interpret execution plans, or safely modify the schema.\\n\\n**Skills Required:** Advanced SQL optimization, Query execution plan analysis (EXPLAIN ANALYZE), Indexing strategies, Schema design, Database architecture tuning.\\n\\n**System Prompt:** \\\"You are an expert Database Performance Engineer. Your role is to analyze slow SQL queries and database schemas to identify bottlenecks. You interpret EXPLAIN ANALYZE outputs, recommend specific indexing strategies, and suggest schema refactoring to optimize query performance and reduce disk I/O.\\\"\\n\\n**Capability Type:** Reasoning (Analytical)\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team is facing critical dashboard latency issues causing customer churn and has explicitly admitted to lacking the deep database expertise required to optimize complex queries, interpret execution plans, and safely refactor the schema.\",\n  \"skills\": [\n    \"Advanced SQL Optimization\",\n    \"Query Execution Plan Analysis\",\n    \"Database Schema Design\",\n    \"Indexing Strategies\",\n    \"PostgreSQL Performance Tuning\",\n    \"High-Volume Data Aggregation\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is facing critical dashboard latency issues causing customer churn and has explicitly admitted to lacking the deep database expertise required to optimize complex queries, interpret execution plans, and safely refactor the schema.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "Query Execution Plan Analysis",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "PostgreSQL Performance Tuning",
                        "High-Volume Data Aggregation"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:22:35.181Z",
                    "success": true,
                    "durationMs": 8584,
                    "inputTokens": 1179,
                    "outputTokens": 137,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a **Senior Database Performance Engineer** to address the critical dashboard latency issues.\\n\\n**Why:** The team is facing customer churn due to 8-12s query times and has admitted they lack the database expertise to optimize complex joins, interpret execution plans, or safely modify the schema.\\n\\n**Skills Required:** Advanced SQL optimization, Query execution plan analysis (EXPLAIN ANALYZE), Indexing strategies, Schema design, Database architecture tuning.\\n\\n**System Prompt:** \\\"You are an expert Database Performance Engineer. Your role is to analyze slow SQL queries and database schemas to identify bottlenecks. You interpret EXPLAIN ANALYZE outputs, recommend specific indexing strategies, and suggest schema refactoring to optimize query performance and reduce disk I/O.\\\"\\n\\n**Capability Type:** Reasoning (Analytical)\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is facing critical dashboard latency issues causing customer churn and has explicitly admitted to lacking the deep database expertise required to optimize complex queries, interpret execution plans, and safely refactor the schema.\",\"skills\":[\"Advanced SQL Optimization\",\"Query Execution Plan Analysis\",\"Database Schema Design\",\"Indexing Strategies\",\"PostgreSQL Performance Tuning\",\"High-Volume Data Aggregation\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Senior Database Performance Engineer specializing in SQL optimization and database architecture. Your goal is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You are proficient in interpreting `EXPLAIN ANALYZE` outputs to identify inefficiencies such as sequential scans, poor join strategies, and high disk I/O. You provide actionable recommendations for indexing strategies, query rewriting, schema refactoring, and architectural improvements (e.g., read replicas, caching, or specialized time-series databases). When analyzing issues, prioritize solutions that ensure data consistency while maximizing query speed and minimizing resource usage.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Senior Database Performance Engineer specializing in SQL optimization and database architecture. Your goal is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You are proficient in interpreting `EXPLAIN ANALYZE` outputs to identify inefficiencies such as sequential scans, poor join strategies, and high disk I/O. You provide actionable recommendations for indexing strategies, query rewriting, schema refactoring, and architectural improvements (e.g., read replicas, caching, or specialized time-series databases). When analyzing issues, prioritize solutions that ensure data consistency while maximizing query speed and minimizing resource usage.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 45167,
            "finalResponse": {
              "recommendation": "I recommend hiring a **Senior Database Performance Engineer** to address the critical dashboard latency issues.\n\n**Why:** The team is facing customer churn due to 8-12s query times and has admitted they lack the database expertise to optimize complex joins, interpret execution plans, or safely modify the schema.\n\n**Skills Required:** Advanced SQL optimization, Query execution plan analysis (EXPLAIN ANALYZE), Indexing strategies, Schema design, Database architecture tuning.\n\n**System Prompt:** \"You are an expert Database Performance Engineer. Your role is to analyze slow SQL queries and database schemas to identify bottlenecks. You interpret EXPLAIN ANALYZE outputs, recommend specific indexing strategies, and suggest schema refactoring to optimize query performance and reduce disk I/O.\"\n\n**Capability Type:** Reasoning (Analytical)",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is facing critical dashboard latency issues causing customer churn and has explicitly admitted to lacking the deep database expertise required to optimize complex queries, interpret execution plans, and safely refactor the schema.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "Query Execution Plan Analysis",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "PostgreSQL Performance Tuning",
                    "High-Volume Data Aggregation"
                  ],
                  "prompt": "You are an expert Senior Database Performance Engineer specializing in SQL optimization and database architecture. Your goal is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You are proficient in interpreting `EXPLAIN ANALYZE` outputs to identify inefficiencies such as sequential scans, poor join strategies, and high disk I/O. You provide actionable recommendations for indexing strategies, query rewriting, schema refactoring, and architectural improvements (e.g., read replicas, caching, or specialized time-series databases). When analyzing issues, prioritize solutions that ensure data consistency while maximizing query speed and minimizing resource usage.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:22:58.029Z",
                    "success": true,
                    "durationMs": 22848,
                    "inputTokens": 910,
                    "outputTokens": 296,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"Based on the team's struggle with slow dashboard queries and their admission that they lack database expertise, I recommend hiring a **Database Performance Specialist**.\\n\\n**Why this role is needed:**\\nThe team is facing critical performance issues with complex queries involving joins and aggregations. They are unable to interpret `EXPLAIN ANALYZE` results effectively or optimize the schema without fear of breaking existing functionality. They need an expert to handle the database bottleneck to prevent customer churn.\\n\\n**Specific skills required:**\\n- Advanced SQL optimization and Query Tuning\\n- Deep understanding of Database Internals (PostgreSQL)\\n- Indexing strategies and Schema Design\\n- Experience with Query Execution Plans\\n- Knowledge of time-series data handling\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Specialist. Your goal is to analyze slow SQL queries, interpret execution plans, and recommend specific optimizations. You understand database internals, indexing strategies (B-Tree, BRIN, GIN, etc.), and schema design patterns. When presented with a performance issue, ask for the query, the table structure, and the EXPLAIN ANALYZE output. Provide concrete steps to reduce execution time, such as rewriting queries, adding specific indexes, or denormalizing data.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "Based on the team's struggle with slow dashboard queries and their admission that they lack database expertise, I recommend hiring a **Database Performance Specialist**.\n\n**Why this role is needed:**\nThe team is facing critical performance issues with complex queries involving joins and aggregations. They are unable to interpret `EXPLAIN ANALYZE` results effectively or optimize the schema without fear of breaking existing functionality. They need an expert to handle the database bottleneck to prevent customer churn.\n\n**Specific skills required:**\n- Advanced SQL optimization and Query Tuning\n- Deep understanding of Database Internals (PostgreSQL)\n- Indexing strategies and Schema Design\n- Experience with Query Execution Plans\n- Knowledge of time-series data handling\n\n**System Prompt:**\n\"You are an expert Database Performance Specialist. Your goal is to analyze slow SQL queries, interpret execution plans, and recommend specific optimizations. You understand database internals, indexing strategies (B-Tree, BRIN, GIN, etc.), and schema design patterns. When presented with a performance issue, ask for the query, the table structure, and the EXPLAIN ANALYZE output. Provide concrete steps to reduce execution time, such as rewriting queries, adding specific indexes, or denormalizing data.\"\n\n**Capability Type:** Reasoning (Analytical/Logical)",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:23:05.609Z",
                    "success": true,
                    "durationMs": 7580,
                    "inputTokens": 1217,
                    "outputTokens": 125,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the team's struggle with slow dashboard queries and their admission that they lack database expertise, I recommend hiring a **Database Performance Specialist**.\\n\\n**Why this role is needed:**\\nThe team is facing critical performance issues with complex queries involving joins and aggregations. They are unable to interpret `EXPLAIN ANALYZE` results effectively or optimize the schema without fear of breaking existing functionality. They need an expert to handle the database bottleneck to prevent customer churn.\\n\\n**Specific skills required:**\\n- Advanced SQL optimization and Query Tuning\\n- Deep understanding of Database Internals (PostgreSQL)\\n- Indexing strategies and Schema Design\\n- Experience with Query Execution Plans\\n- Knowledge of time-series data handling\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Specialist. Your goal is to analyze slow SQL queries, interpret execution plans, and recommend specific optimizations. You understand database internals, indexing strategies (B-Tree, BRIN, GIN, etc.), and schema design patterns. When presented with a performance issue, ask for the query, the table structure, and the EXPLAIN ANALYZE output. Provide concrete steps to reduce execution time, such as rewriting queries, adding specific indexes, or denormalizing data.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is struggling with complex SQL query optimization, interpreting execution plans (EXPLAIN ANALYZE), and handling high disk I/O. They lack the deep expertise required to restructure schemas or implement advanced indexing strategies to solve the critical latency issues causing customer churn.\",\n  \"skills\": [\n    \"Advanced SQL Optimization\",\n    \"PostgreSQL Internals\",\n    \"Query Execution Plan Analysis\",\n    \"Schema Design & Normalization\",\n    \"Indexing Strategies\",\n    \"Database Performance Tuning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with complex SQL query optimization, interpreting execution plans (EXPLAIN ANALYZE), and handling high disk I/O. They lack the deep expertise required to restructure schemas or implement advanced indexing strategies to solve the critical latency issues causing customer churn.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "PostgreSQL Internals",
                        "Query Execution Plan Analysis",
                        "Schema Design & Normalization",
                        "Indexing Strategies",
                        "Database Performance Tuning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:23:12.865Z",
                    "success": true,
                    "durationMs": 7256,
                    "inputTokens": 1298,
                    "outputTokens": 146,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"Based on the team's struggle with slow dashboard queries and their admission that they lack database expertise, I recommend hiring a **Database Performance Specialist**.\\n\\n**Why this role is needed:**\\nThe team is facing critical performance issues with complex queries involving joins and aggregations. They are unable to interpret `EXPLAIN ANALYZE` results effectively or optimize the schema without fear of breaking existing functionality. They need an expert to handle the database bottleneck to prevent customer churn.\\n\\n**Specific skills required:**\\n- Advanced SQL optimization and Query Tuning\\n- Deep understanding of Database Internals (PostgreSQL)\\n- Indexing strategies and Schema Design\\n- Experience with Query Execution Plans\\n- Knowledge of time-series data handling\\n\\n**System Prompt:**\\n\\\"You are an expert Database Performance Specialist. Your goal is to analyze slow SQL queries, interpret execution plans, and recommend specific optimizations. You understand database internals, indexing strategies (B-Tree, BRIN, GIN, etc.), and schema design patterns. When presented with a performance issue, ask for the query, the table structure, and the EXPLAIN ANALYZE output. Provide concrete steps to reduce execution time, such as rewriting queries, adding specific indexes, or denormalizing data.\\\"\\n\\n**Capability Type:** Reasoning (Analytical/Logical)\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is struggling with complex SQL query optimization, interpreting execution plans (EXPLAIN ANALYZE), and handling high disk I/O. They lack the deep expertise required to restructure schemas or implement advanced indexing strategies to solve the critical latency issues causing customer churn.\",\"skills\":[\"Advanced SQL Optimization\",\"PostgreSQL Internals\",\"Query Execution Plan Analysis\",\"Schema Design & Normalization\",\"Indexing Strategies\",\"Database Performance Tuning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer specializing in SQL optimization and database internals. Your primary objective is to diagnose and resolve database performance bottlenecks. You are proficient in analyzing `EXPLAIN ANALYZE` outputs, identifying sequential scans, and recommending appropriate indexing strategies (B-Tree, Hash, GIN, GiST, etc.). You can rewrite complex queries involving multiple joins and aggregations for better efficiency. You also provide advice on schema design, denormalization, and caching strategies when query tuning alone is insufficient. When presented with a problem, ask for the schema definitions, the specific query, and execution metrics to provide data-driven solutions.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database internals. Your primary objective is to diagnose and resolve database performance bottlenecks. You are proficient in analyzing `EXPLAIN ANALYZE` outputs, identifying sequential scans, and recommending appropriate indexing strategies (B-Tree, Hash, GIN, GiST, etc.). You can rewrite complex queries involving multiple joins and aggregations for better efficiency. You also provide advice on schema design, denormalization, and caching strategies when query tuning alone is insufficient. When presented with a problem, ask for the schema definitions, the specific query, and execution metrics to provide data-driven solutions.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 37684,
            "finalResponse": {
              "recommendation": "Based on the team's struggle with slow dashboard queries and their admission that they lack database expertise, I recommend hiring a **Database Performance Specialist**.\n\n**Why this role is needed:**\nThe team is facing critical performance issues with complex queries involving joins and aggregations. They are unable to interpret `EXPLAIN ANALYZE` results effectively or optimize the schema without fear of breaking existing functionality. They need an expert to handle the database bottleneck to prevent customer churn.\n\n**Specific skills required:**\n- Advanced SQL optimization and Query Tuning\n- Deep understanding of Database Internals (PostgreSQL)\n- Indexing strategies and Schema Design\n- Experience with Query Execution Plans\n- Knowledge of time-series data handling\n\n**System Prompt:**\n\"You are an expert Database Performance Specialist. Your goal is to analyze slow SQL queries, interpret execution plans, and recommend specific optimizations. You understand database internals, indexing strategies (B-Tree, BRIN, GIN, etc.), and schema design patterns. When presented with a performance issue, ask for the query, the table structure, and the EXPLAIN ANALYZE output. Provide concrete steps to reduce execution time, such as rewriting queries, adding specific indexes, or denormalizing data.\"\n\n**Capability Type:** Reasoning (Analytical/Logical)",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with complex SQL query optimization, interpreting execution plans (EXPLAIN ANALYZE), and handling high disk I/O. They lack the deep expertise required to restructure schemas or implement advanced indexing strategies to solve the critical latency issues causing customer churn.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "PostgreSQL Internals",
                    "Query Execution Plan Analysis",
                    "Schema Design & Normalization",
                    "Indexing Strategies",
                    "Database Performance Tuning"
                  ],
                  "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database internals. Your primary objective is to diagnose and resolve database performance bottlenecks. You are proficient in analyzing `EXPLAIN ANALYZE` outputs, identifying sequential scans, and recommending appropriate indexing strategies (B-Tree, Hash, GIN, GiST, etc.). You can rewrite complex queries involving multiple joins and aggregations for better efficiency. You also provide advice on schema design, denormalization, and caching strategies when query tuning alone is insufficient. When presented with a problem, ask for the schema definitions, the specific query, and execution metrics to provide data-driven solutions.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:23:32.304Z",
                    "success": true,
                    "durationMs": 19439,
                    "inputTokens": 910,
                    "outputTokens": 238,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with a JSON object containing:\n- \"recommendation\": A string explaining who should be hired and why\n- \"action\": Either \"create_actor\" to recommend someone, or null\n\nExample: {\"recommendation\": \"I recommend hiring...\", \"action\": \"create_actor\"}",
                    "rawResponse": "{\n  \"recommendation\": \"I recommend hiring a **Database Performance Specialist** to address the critical dashboard latency issues. The team has identified that they lack the deep database expertise required to optimize complex joins and analyze execution plans effectively.\\n\\n**Role:** Database Performance Specialist\\n**Why:** The team is facing potential customer churn due to 8-12 second query times. Current attempts at basic indexing and frontend masking have failed. A specialist is needed to interpret `EXPLAIN ANALYZE` results, optimize the schema, and potentially plan a migration to a time-series database.\\n**Skills:** Advanced SQL optimization, Database Indexing Strategies, Query Plan Analysis, Schema Design, PostgreSQL/TimescaleDB expertise.\\n**System Prompt:** You are an expert Database Reliability Engineer. Your primary focus is analyzing slow SQL queries and database bottlenecks. You interpret query execution plans to identify sequential scans and inefficient joins. You provide concrete SQL commands to create optimal indexes, rewrite queries for performance, and suggest schema refactoring where necessary to ensure sub-second response times for large datasets.\\n**Type:** Reasoning\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "I recommend hiring a **Database Performance Specialist** to address the critical dashboard latency issues. The team has identified that they lack the deep database expertise required to optimize complex joins and analyze execution plans effectively.\n\n**Role:** Database Performance Specialist\n**Why:** The team is facing potential customer churn due to 8-12 second query times. Current attempts at basic indexing and frontend masking have failed. A specialist is needed to interpret `EXPLAIN ANALYZE` results, optimize the schema, and potentially plan a migration to a time-series database.\n**Skills:** Advanced SQL optimization, Database Indexing Strategies, Query Plan Analysis, Schema Design, PostgreSQL/TimescaleDB expertise.\n**System Prompt:** You are an expert Database Reliability Engineer. Your primary focus is analyzing slow SQL queries and database bottlenecks. You interpret query execution plans to identify sequential scans and inefficient joins. You provide concrete SQL commands to create optimal indexes, rewrite queries for performance, and suggest schema refactoring where necessary to ensure sub-second response times for large datasets.\n**Type:** Reasoning",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:23:42.869Z",
                    "success": true,
                    "durationMs": 10565,
                    "inputTokens": 1157,
                    "outputTokens": 143,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a **Database Performance Specialist** to address the critical dashboard latency issues. The team has identified that they lack the deep database expertise required to optimize complex joins and analyze execution plans effectively.\\n\\n**Role:** Database Performance Specialist\\n**Why:** The team is facing potential customer churn due to 8-12 second query times. Current attempts at basic indexing and frontend masking have failed. A specialist is needed to interpret `EXPLAIN ANALYZE` results, optimize the schema, and potentially plan a migration to a time-series database.\\n**Skills:** Advanced SQL optimization, Database Indexing Strategies, Query Plan Analysis, Schema Design, PostgreSQL/TimescaleDB expertise.\\n**System Prompt:** You are an expert Database Reliability Engineer. Your primary focus is analyzing slow SQL queries and database bottlenecks. You interpret query execution plans to identify sequential scans and inefficient joins. You provide concrete SQL commands to create optimal indexes, rewrite queries for performance, and suggest schema refactoring where necessary to ensure sub-second response times for large datasets.\\n**Type:** Reasoning\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with a JSON object containing:\n- \"title\": The job title (e.g., \"Database Administrator\")\n- \"reason\": Why this role addresses the team's skill gap\n- \"skills\": An array of 3-7 specific technical skills\n\nExample: {\"title\": \"Senior DBA\", \"reason\": \"The team needs...\", \"skills\": [\"PostgreSQL\", \"Query Optimization\"]}",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is facing critical latency issues with dashboard queries taking 8-12 seconds, risking customer churn. Current members lack the deep expertise required to interpret `EXPLAIN ANALYZE` results, optimize complex joins, or redesign the schema for performance. This role is essential to diagnose the bottleneck, implement advanced indexing strategies, and ensure the database scales with enterprise data volumes.\",\n  \"skills\": [\n    \"Advanced SQL Optimization\",\n    \"PostgreSQL\",\n    \"Query Execution Plan Analysis\",\n    \"Database Schema Design\",\n    \"Indexing Strategies\",\n    \"Performance Tuning\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is facing critical latency issues with dashboard queries taking 8-12 seconds, risking customer churn. Current members lack the deep expertise required to interpret `EXPLAIN ANALYZE` results, optimize complex joins, or redesign the schema for performance. This role is essential to diagnose the bottleneck, implement advanced indexing strategies, and ensure the database scales with enterprise data volumes.",
                      "skills": [
                        "Advanced SQL Optimization",
                        "PostgreSQL",
                        "Query Execution Plan Analysis",
                        "Database Schema Design",
                        "Indexing Strategies",
                        "Performance Tuning"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:23:50.312Z",
                    "success": true,
                    "durationMs": 7443,
                    "inputTokens": 1256,
                    "outputTokens": 160,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"I recommend hiring a **Database Performance Specialist** to address the critical dashboard latency issues. The team has identified that they lack the deep database expertise required to optimize complex joins and analyze execution plans effectively.\\n\\n**Role:** Database Performance Specialist\\n**Why:** The team is facing potential customer churn due to 8-12 second query times. Current attempts at basic indexing and frontend masking have failed. A specialist is needed to interpret `EXPLAIN ANALYZE` results, optimize the schema, and potentially plan a migration to a time-series database.\\n**Skills:** Advanced SQL optimization, Database Indexing Strategies, Query Plan Analysis, Schema Design, PostgreSQL/TimescaleDB expertise.\\n**System Prompt:** You are an expert Database Reliability Engineer. Your primary focus is analyzing slow SQL queries and database bottlenecks. You interpret query execution plans to identify sequential scans and inefficient joins. You provide concrete SQL commands to create optimal indexes, rewrite queries for performance, and suggest schema refactoring where necessary to ensure sub-second response times for large datasets.\\n**Type:** Reasoning\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is facing critical latency issues with dashboard queries taking 8-12 seconds, risking customer churn. Current members lack the deep expertise required to interpret `EXPLAIN ANALYZE` results, optimize complex joins, or redesign the schema for performance. This role is essential to diagnose the bottleneck, implement advanced indexing strategies, and ensure the database scales with enterprise data volumes.\",\"skills\":[\"Advanced SQL Optimization\",\"PostgreSQL\",\"Query Execution Plan Analysis\",\"Database Schema Design\",\"Indexing Strategies\",\"Performance Tuning\"]}\n\n[user] For this role, provide the AI configuration.\n\nRespond with a JSON object containing:\n- \"prompt\": A system prompt for configuring an AI assistant in this role\n- \"model\": Either \"reasoning\" (for analytical/logical tasks) or \"semantic\" (for creative/conversational tasks)\n\nExample: {\"prompt\": \"You are an expert database administrator...\", \"model\": \"reasoning\"}",
                    "rawResponse": "{\n  \"prompt\": \"You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your primary objective is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You possess deep knowledge of query execution plans (EXPLAIN ANALYZE), indexing strategies (B-tree, GIN, GiST), and schema design patterns. When presented with slow queries or performance metrics, you must analyze the root cause—identifying issues like sequential scans, inefficient joins, or lock contention—and provide concrete, actionable solutions. You should be able to rewrite complex SQL queries for efficiency, generate DDL for optimal indexes, and advise on architectural changes such as read replicas or partitioning strategies to ensure sub-second response times.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your primary objective is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You possess deep knowledge of query execution plans (EXPLAIN ANALYZE), indexing strategies (B-tree, GIN, GiST), and schema design patterns. When presented with slow queries or performance metrics, you must analyze the root cause—identifying issues like sequential scans, inefficient joins, or lock contention—and provide concrete, actionable solutions. You should be able to rewrite complex SQL queries for efficiency, generate DDL for optimal indexes, and advise on architectural changes such as read replicas or partitioning strategies to ensure sub-second response times.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 37447,
            "finalResponse": {
              "recommendation": "I recommend hiring a **Database Performance Specialist** to address the critical dashboard latency issues. The team has identified that they lack the deep database expertise required to optimize complex joins and analyze execution plans effectively.\n\n**Role:** Database Performance Specialist\n**Why:** The team is facing potential customer churn due to 8-12 second query times. Current attempts at basic indexing and frontend masking have failed. A specialist is needed to interpret `EXPLAIN ANALYZE` results, optimize the schema, and potentially plan a migration to a time-series database.\n**Skills:** Advanced SQL optimization, Database Indexing Strategies, Query Plan Analysis, Schema Design, PostgreSQL/TimescaleDB expertise.\n**System Prompt:** You are an expert Database Reliability Engineer. Your primary focus is analyzing slow SQL queries and database bottlenecks. You interpret query execution plans to identify sequential scans and inefficient joins. You provide concrete SQL commands to create optimal indexes, rewrite queries for performance, and suggest schema refactoring where necessary to ensure sub-second response times for large datasets.\n**Type:** Reasoning",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is facing critical latency issues with dashboard queries taking 8-12 seconds, risking customer churn. Current members lack the deep expertise required to interpret `EXPLAIN ANALYZE` results, optimize complex joins, or redesign the schema for performance. This role is essential to diagnose the bottleneck, implement advanced indexing strategies, and ensure the database scales with enterprise data volumes.",
                  "skills": [
                    "Advanced SQL Optimization",
                    "PostgreSQL",
                    "Query Execution Plan Analysis",
                    "Database Schema Design",
                    "Indexing Strategies",
                    "Performance Tuning"
                  ],
                  "prompt": "You are an expert Database Performance Engineer specializing in SQL optimization and database architecture. Your primary objective is to diagnose and resolve critical performance bottlenecks in high-volume database systems. You possess deep knowledge of query execution plans (EXPLAIN ANALYZE), indexing strategies (B-tree, GIN, GiST), and schema design patterns. When presented with slow queries or performance metrics, you must analyze the root cause—identifying issues like sequential scans, inefficient joins, or lock contention—and provide concrete, actionable solutions. You should be able to rewrite complex SQL queries for efficiency, generate DDL for optimal indexes, and advise on architectural changes such as read replicas or partitioning strategies to ensure sub-second response times.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 40099.333333333336,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 3831.3333333333335,
          "totalTokensUsed": 11494
        }
      }
    },
    "groq-gpt-oss-120b": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:23:56.582Z",
                "success": true,
                "durationMs": 6270,
                "inputTokens": 1469,
                "outputTokens": 479,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard queries, optimise the schema and indexes, and evaluate whether a time‑series solution or migration is warranted.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep expertise in query plan analysis, advanced indexing, partitioning, and migration to time‑series databases. This role will identify the bottleneck, redesign tables, implement optimal indexes, and advise on architecture changes to meet real‑time performance requirements.\",\n      \"skills\": [\n        \"PostgreSQL query optimization\",\n        \"Advanced indexing and partitioning\",\n        \"Performance profiling (EXPLAIN ANALYZE, pg_stat_statements)\",\n        \"Time‑series databases (e.g., TimescaleDB)\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"You are a senior database performance specialist with extensive experience in PostgreSQL and time‑series databases. Analyze query execution plans, recommend schema redesigns, create optimal indexing strategies, and assess migration paths to ensure sub‑second dashboard loads for large datasets.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard queries, optimise the schema and indexes, and evaluate whether a time‑series solution or migration is warranted.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query plan analysis, advanced indexing, partitioning, and migration to time‑series databases. This role will identify the bottleneck, redesign tables, implement optimal indexes, and advise on architecture changes to meet real‑time performance requirements.",
                      "skills": [
                        "PostgreSQL query optimization",
                        "Advanced indexing and partitioning",
                        "Performance profiling (EXPLAIN ANALYZE, pg_stat_statements)",
                        "Time‑series databases (e.g., TimescaleDB)",
                        "Database migration planning"
                      ],
                      "prompt": "You are a senior database performance specialist with extensive experience in PostgreSQL and time‑series databases. Analyze query execution plans, recommend schema redesigns, create optimal indexing strategies, and assess migration paths to ensure sub‑second dashboard loads for large datasets.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6270,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard queries, optimise the schema and indexes, and evaluate whether a time‑series solution or migration is warranted.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query plan analysis, advanced indexing, partitioning, and migration to time‑series databases. This role will identify the bottleneck, redesign tables, implement optimal indexes, and advise on architecture changes to meet real‑time performance requirements.",
                  "skills": [
                    "PostgreSQL query optimization",
                    "Advanced indexing and partitioning",
                    "Performance profiling (EXPLAIN ANALYZE, pg_stat_statements)",
                    "Time‑series databases (e.g., TimescaleDB)",
                    "Database migration planning"
                  ],
                  "prompt": "You are a senior database performance specialist with extensive experience in PostgreSQL and time‑series databases. Analyze query execution plans, recommend schema redesigns, create optimal indexing strategies, and assess migration paths to ensure sub‑second dashboard loads for large datasets.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:24:03.301Z",
                "success": true,
                "durationMs": 6719,
                "inputTokens": 1469,
                "outputTokens": 717,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can analyse the query plans, redesign indexes, and guide any necessary schema changes to eliminate the dashboard latency.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep expertise in query optimization, indexing, and schema design for large tables, which is causing the dashboard to load slowly. A specialist can profile the problematic query, create efficient indexes, suggest partitioning or schema refactoring, and evaluate if a different database engine is needed, ensuring real‑time performance for enterprise customers.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Index design and maintenance\",\n        \"Execution plan analysis (EXPLAIN)\",\n        \"Database schema design\",\n        \"PostgreSQL performance tuning\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in PostgreSQL and large‑scale analytical queries. Your job is to profile slow queries, recommend indexing and partitioning strategies, redesign schemas when needed, and assess whether a different database technology (e.g., TimescaleDB) is warranted, delivering clear, data‑driven recommendations.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can analyse the query plans, redesign indexes, and guide any necessary schema changes to eliminate the dashboard latency.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large tables, which is causing the dashboard to load slowly. A specialist can profile the problematic query, create efficient indexes, suggest partitioning or schema refactoring, and evaluate if a different database engine is needed, ensuring real‑time performance for enterprise customers.",
                      "skills": [
                        "SQL query optimization",
                        "Index design and maintenance",
                        "Execution plan analysis (EXPLAIN)",
                        "Database schema design",
                        "PostgreSQL performance tuning"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in PostgreSQL and large‑scale analytical queries. Your job is to profile slow queries, recommend indexing and partitioning strategies, redesign schemas when needed, and assess whether a different database technology (e.g., TimescaleDB) is warranted, delivering clear, data‑driven recommendations.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6719,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can analyse the query plans, redesign indexes, and guide any necessary schema changes to eliminate the dashboard latency.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large tables, which is causing the dashboard to load slowly. A specialist can profile the problematic query, create efficient indexes, suggest partitioning or schema refactoring, and evaluate if a different database engine is needed, ensuring real‑time performance for enterprise customers.",
                  "skills": [
                    "SQL query optimization",
                    "Index design and maintenance",
                    "Execution plan analysis (EXPLAIN)",
                    "Database schema design",
                    "PostgreSQL performance tuning"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in PostgreSQL and large‑scale analytical queries. Your job is to profile slow queries, recommend indexing and partitioning strategies, redesign schemas when needed, and assess whether a different database technology (e.g., TimescaleDB) is warranted, delivering clear, data‑driven recommendations.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:24:09.889Z",
                "success": true,
                "durationMs": 6588,
                "inputTokens": 1469,
                "outputTokens": 572,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard query, optimise indexes, redesign the schema if required, and evaluate alternative storage solutions to meet real‑time performance needs.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep expertise in query profiling, index strategy, and schema redesign for large tables. A specialist can analyse the EXPLAIN plans, create optimal indexes, suggest partitioning or sharding, and assess whether a time‑series database or read replica is appropriate, directly addressing the performance bottleneck threatening key enterprise customers.\",\n      \"skills\": [\n        \"SQL query optimization\",\n        \"Index design and partitioning\",\n        \"Execution plan analysis (EXPLAIN ANALYZE)\",\n        \"PostgreSQL/TimescaleDB performance tuning\",\n        \"Database schema redesign\"\n      ],\n      \"prompt\": \"You are a senior database performance engineer with extensive experience in profiling slow queries, designing efficient indexing and partitioning strategies, and evaluating alternative database architectures such as time‑series solutions. Analyze execution plans, recommend schema changes, and propose replication or caching approaches while ensuring data integrity and minimal downtime.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard query, optimise indexes, redesign the schema if required, and evaluate alternative storage solutions to meet real‑time performance needs.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query profiling, index strategy, and schema redesign for large tables. A specialist can analyse the EXPLAIN plans, create optimal indexes, suggest partitioning or sharding, and assess whether a time‑series database or read replica is appropriate, directly addressing the performance bottleneck threatening key enterprise customers.",
                      "skills": [
                        "SQL query optimization",
                        "Index design and partitioning",
                        "Execution plan analysis (EXPLAIN ANALYZE)",
                        "PostgreSQL/TimescaleDB performance tuning",
                        "Database schema redesign"
                      ],
                      "prompt": "You are a senior database performance engineer with extensive experience in profiling slow queries, designing efficient indexing and partitioning strategies, and evaluating alternative database architectures such as time‑series solutions. Analyze execution plans, recommend schema changes, and propose replication or caching approaches while ensuring data integrity and minimal downtime.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6588,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can deep‑dive into the slow dashboard query, optimise indexes, redesign the schema if required, and evaluate alternative storage solutions to meet real‑time performance needs.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query profiling, index strategy, and schema redesign for large tables. A specialist can analyse the EXPLAIN plans, create optimal indexes, suggest partitioning or sharding, and assess whether a time‑series database or read replica is appropriate, directly addressing the performance bottleneck threatening key enterprise customers.",
                  "skills": [
                    "SQL query optimization",
                    "Index design and partitioning",
                    "Execution plan analysis (EXPLAIN ANALYZE)",
                    "PostgreSQL/TimescaleDB performance tuning",
                    "Database schema redesign"
                  ],
                  "prompt": "You are a senior database performance engineer with extensive experience in profiling slow queries, designing efficient indexing and partitioning strategies, and evaluating alternative database architectures such as time‑series solutions. Analyze execution plans, recommend schema changes, and propose replication or caching approaches while ensuring data integrity and minimal downtime.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 6525.666666666667,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 2058.3333333333335,
          "totalTokensUsed": 6175
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:15.375Z",
                    "success": true,
                    "durationMs": 5486,
                    "inputTokens": 1066,
                    "outputTokens": 145,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This expertise is essential to resolve the slow dashboard queries and prevent customer churn.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This expertise is essential to resolve the slow dashboard queries and prevent customer churn.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:21.297Z",
                    "success": true,
                    "durationMs": 5922,
                    "inputTokens": 1150,
                    "outputTokens": 217,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This expertise is essential to resolve the slow dashboard queries and prevent customer churn.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior DB performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.\",\n  \"skills\": [\n    \"Advanced SQL query tuning and EXPLAIN ANALYZE interpretation\",\n    \"Index design and partitioning for high‑volume tables\",\n    \"Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)\",\n    \"Read‑replica architecture and load‑balancing\",\n    \"Performance monitoring and disk I/O analysis\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior DB performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.",
                      "skills": [
                        "Advanced SQL query tuning and EXPLAIN ANALYZE interpretation",
                        "Index design and partitioning for high‑volume tables",
                        "Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)",
                        "Read‑replica architecture and load‑balancing",
                        "Performance monitoring and disk I/O analysis"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:26.981Z",
                    "success": true,
                    "durationMs": 5684,
                    "inputTokens": 1288,
                    "outputTokens": 189,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This expertise is essential to resolve the slow dashboard queries and prevent customer churn.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior DB performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.\",\"skills\":[\"Advanced SQL query tuning and EXPLAIN ANALYZE interpretation\",\"Index design and partitioning for high‑volume tables\",\"Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)\",\"Read‑replica architecture and load‑balancing\",\"Performance monitoring and disk I/O analysis\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior Database Performance Engineer AI assistant. Your mission is to analyze complex SQL queries, interpret EXPLAIN ANALYZE output, design optimal indexing and partitioning strategies, evaluate schema redesigns, recommend read‑replica or caching architectures, and assess the feasibility of migrating to specialized time‑series databases such as TimescaleDB. Provide clear, step‑by‑step optimization plans, explain trade‑offs, and generate concrete DDL/DML scripts while considering existing application constraints and real‑time data requirements. Communicate findings in concise technical language suitable for senior engineers and product stakeholders.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior Database Performance Engineer AI assistant. Your mission is to analyze complex SQL queries, interpret EXPLAIN ANALYZE output, design optimal indexing and partitioning strategies, evaluate schema redesigns, recommend read‑replica or caching architectures, and assess the feasibility of migrating to specialized time‑series databases such as TimescaleDB. Provide clear, step‑by‑step optimization plans, explain trade‑offs, and generate concrete DDL/DML scripts while considering existing application constraints and real‑time data requirements. Communicate findings in concise technical language suitable for senior engineers and product stakeholders.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 17092,
            "finalResponse": {
              "recommendation": "The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This expertise is essential to resolve the slow dashboard queries and prevent customer churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior DB performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.",
                  "skills": [
                    "Advanced SQL query tuning and EXPLAIN ANALYZE interpretation",
                    "Index design and partitioning for high‑volume tables",
                    "Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)",
                    "Read‑replica architecture and load‑balancing",
                    "Performance monitoring and disk I/O analysis"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer AI assistant. Your mission is to analyze complex SQL queries, interpret EXPLAIN ANALYZE output, design optimal indexing and partitioning strategies, evaluate schema redesigns, recommend read‑replica or caching architectures, and assess the feasibility of migrating to specialized time‑series databases such as TimescaleDB. Provide clear, step‑by‑step optimization plans, explain trade‑offs, and generate concrete DDL/DML scripts while considering existing application constraints and real‑time data requirements. Communicate findings in concise technical language suitable for senior engineers and product stakeholders.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:32.519Z",
                    "success": true,
                    "durationMs": 5538,
                    "inputTokens": 1066,
                    "outputTokens": 123,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a senior Database Performance Engineer (or Database Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent customer churn.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a senior Database Performance Engineer (or Database Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent customer churn.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:38.107Z",
                    "success": true,
                    "durationMs": 5588,
                    "inputTokens": 1153,
                    "outputTokens": 217,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or Database Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent customer churn.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior database performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.\",\n  \"skills\": [\n    \"Advanced SQL query tuning and EXPLAIN ANALYZE interpretation\",\n    \"Index design and partitioning for high‑volume tables\",\n    \"Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)\",\n    \"Read‑replica architecture and load‑balancing\",\n    \"Performance monitoring and disk I/O analysis\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior database performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.",
                      "skills": [
                        "Advanced SQL query tuning and EXPLAIN ANALYZE interpretation",
                        "Index design and partitioning for high‑volume tables",
                        "Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)",
                        "Read‑replica architecture and load‑balancing",
                        "Performance monitoring and disk I/O analysis"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:43.559Z",
                    "success": true,
                    "durationMs": 5452,
                    "inputTokens": 1291,
                    "outputTokens": 141,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or Database Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent customer churn.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior database performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.\",\"skills\":[\"Advanced SQL query tuning and EXPLAIN ANALYZE interpretation\",\"Index design and partitioning for high‑volume tables\",\"Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)\",\"Read‑replica architecture and load‑balancing\",\"Performance monitoring and disk I/O analysis\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior Database Performance Engineer AI assistant. Analyze query execution plans, recommend indexing, partitioning, and schema redesign for large time‑series tables, evaluate read‑replica and caching strategies, and assess migration to specialized databases (e.g., TimescaleDB). Provide detailed, step‑by‑step optimization recommendations, performance impact estimates, and migration roadmaps while ensuring data integrity and minimal downtime.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior Database Performance Engineer AI assistant. Analyze query execution plans, recommend indexing, partitioning, and schema redesign for large time‑series tables, evaluate read‑replica and caching strategies, and assess migration to specialized databases (e.g., TimescaleDB). Provide detailed, step‑by‑step optimization recommendations, performance impact estimates, and migration roadmaps while ensuring data integrity and minimal downtime.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 16578,
            "finalResponse": {
              "recommendation": "The team should hire a senior Database Performance Engineer (or Database Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent customer churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query optimization, indexing, and schema design for large, time‑series datasets. A senior database performance engineer can dissect the slow dashboard query, create efficient indexes, redesign tables where needed, evaluate read‑replica and caching strategies, and determine if a migration to a specialized time‑series database is justified, thereby eliminating the performance bottleneck and preventing customer churn.",
                  "skills": [
                    "Advanced SQL query tuning and EXPLAIN ANALYZE interpretation",
                    "Index design and partitioning for high‑volume tables",
                    "Experience with PostgreSQL and time‑series extensions (e.g., TimescaleDB)",
                    "Read‑replica architecture and load‑balancing",
                    "Performance monitoring and disk I/O analysis"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer AI assistant. Analyze query execution plans, recommend indexing, partitioning, and schema redesign for large time‑series tables, evaluate read‑replica and caching strategies, and assess migration to specialized databases (e.g., TimescaleDB). Provide detailed, step‑by‑step optimization recommendations, performance impact estimates, and migration roadmaps while ensuring data integrity and minimal downtime.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:48.970Z",
                    "success": true,
                    "durationMs": 5410,
                    "inputTokens": 1066,
                    "outputTokens": 124,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent future performance bottlenecks.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent future performance bottlenecks.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:24:54.646Z",
                    "success": true,
                    "durationMs": 5676,
                    "inputTokens": 1156,
                    "outputTokens": 234,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent future performance bottlenecks.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team lacks deep expertise in query optimization, indexing, and schema design, which is causing 8‑12 second dashboard loads on large accounts. A senior DB performance engineer can dissect EXPLAIN ANALYZE output, redesign tables, create optimal indexes, evaluate read‑replica and caching strategies, and decide if a migration to a time‑series database is needed, thereby restoring real‑time dashboard performance and preventing churn.\",\n  \"skills\": [\n    \"Advanced SQL query tuning and execution‑plan analysis (PostgreSQL/MySQL)\",\n    \"Index design and partitioning for large tables\",\n    \"Experience with read replicas, sharding, and caching layers (Redis, Memcached)\",\n    \"Time‑series database evaluation and migration (e.g., TimescaleDB, InfluxDB)\",\n    \"Performance monitoring and I/O bottleneck diagnosis\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team lacks deep expertise in query optimization, indexing, and schema design, which is causing 8‑12 second dashboard loads on large accounts. A senior DB performance engineer can dissect EXPLAIN ANALYZE output, redesign tables, create optimal indexes, evaluate read‑replica and caching strategies, and decide if a migration to a time‑series database is needed, thereby restoring real‑time dashboard performance and preventing churn.",
                      "skills": [
                        "Advanced SQL query tuning and execution‑plan analysis (PostgreSQL/MySQL)",
                        "Index design and partitioning for large tables",
                        "Experience with read replicas, sharding, and caching layers (Redis, Memcached)",
                        "Time‑series database evaluation and migration (e.g., TimescaleDB, InfluxDB)",
                        "Performance monitoring and I/O bottleneck diagnosis"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:00.253Z",
                    "success": true,
                    "durationMs": 5607,
                    "inputTokens": 1313,
                    "outputTokens": 176,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent future performance bottlenecks.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team lacks deep expertise in query optimization, indexing, and schema design, which is causing 8‑12 second dashboard loads on large accounts. A senior DB performance engineer can dissect EXPLAIN ANALYZE output, redesign tables, create optimal indexes, evaluate read‑replica and caching strategies, and decide if a migration to a time‑series database is needed, thereby restoring real‑time dashboard performance and preventing churn.\",\"skills\":[\"Advanced SQL query tuning and execution‑plan analysis (PostgreSQL/MySQL)\",\"Index design and partitioning for large tables\",\"Experience with read replicas, sharding, and caching layers (Redis, Memcached)\",\"Time‑series database evaluation and migration (e.g., TimescaleDB, InfluxDB)\",\"Performance monitoring and I/O bottleneck diagnosis\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Senior Database Performance Engineer AI assistant. Your mission is to diagnose and resolve complex database performance issues for large‑scale enterprise dashboards. Analyze query execution plans, recommend and design optimal indexing, partitioning, and schema changes, evaluate read‑replica and caching strategies, and assess the feasibility of migrating to specialized time‑series databases. Provide clear, step‑by‑step remediation plans, estimate impact on latency, and communicate trade‑offs to both technical and non‑technical stakeholders. Ensure recommendations preserve data integrity and support near‑real‑time reporting requirements.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Senior Database Performance Engineer AI assistant. Your mission is to diagnose and resolve complex database performance issues for large‑scale enterprise dashboards. Analyze query execution plans, recommend and design optimal indexing, partitioning, and schema changes, evaluate read‑replica and caching strategies, and assess the feasibility of migrating to specialized time‑series databases. Provide clear, step‑by‑step remediation plans, estimate impact on latency, and communicate trade‑offs to both technical and non‑technical stakeholders. Ensure recommendations preserve data integrity and support near‑real‑time reporting requirements.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 16693,
            "finalResponse": {
              "recommendation": "The team should hire a senior Database Performance Engineer (or DB Optimization Specialist) who can deeply analyze query execution plans, design optimal indexing and schema strategies, evaluate read‑replica and caching approaches, and assess whether a migration to a time‑series database is warranted. This role will provide the expertise needed to resolve the slow dashboard queries and prevent future performance bottlenecks.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team lacks deep expertise in query optimization, indexing, and schema design, which is causing 8‑12 second dashboard loads on large accounts. A senior DB performance engineer can dissect EXPLAIN ANALYZE output, redesign tables, create optimal indexes, evaluate read‑replica and caching strategies, and decide if a migration to a time‑series database is needed, thereby restoring real‑time dashboard performance and preventing churn.",
                  "skills": [
                    "Advanced SQL query tuning and execution‑plan analysis (PostgreSQL/MySQL)",
                    "Index design and partitioning for large tables",
                    "Experience with read replicas, sharding, and caching layers (Redis, Memcached)",
                    "Time‑series database evaluation and migration (e.g., TimescaleDB, InfluxDB)",
                    "Performance monitoring and I/O bottleneck diagnosis"
                  ],
                  "prompt": "You are a Senior Database Performance Engineer AI assistant. Your mission is to diagnose and resolve complex database performance issues for large‑scale enterprise dashboards. Analyze query execution plans, recommend and design optimal indexing, partitioning, and schema changes, evaluate read‑replica and caching strategies, and assess the feasibility of migrating to specialized time‑series databases. Provide clear, step‑by‑step remediation plans, estimate impact on latency, and communicate trade‑offs to both technical and non‑technical stakeholders. Ensure recommendations preserve data integrity and support near‑real‑time reporting requirements.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 16787.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 4038.3333333333335,
          "totalTokensUsed": 12115
        }
      }
    },
    "groq-kimi-k2": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:25:06.740Z",
                "success": true,
                "durationMs": 6487,
                "inputTokens": 1413,
                "outputTokens": 359,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly stuck with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database internals and performance optimization to resolve this before your enterprise customers churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can analyze complex query execution plans, identify bottlenecks in multi-table joins, design optimal indexing strategies, and potentially recommend schema changes or database migrations. This role is critical to resolve the 8-12 second dashboard load times that are causing enterprise customers to threaten churn.\",\n      \"skills\": [\n        \"Query optimization and execution plan analysis\",\n        \"Database indexing strategies and performance tuning\",\n        \"Schema design for large-scale data\",\n        \"PostgreSQL/MySQL internals and configuration\",\n        \"Time-series database optimization\",\n        \"Database migration planning and execution\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in optimizing database queries for large-scale applications. Your role is to analyze slow queries, identify performance bottlenecks, and implement solutions that reduce query execution time. You specialize in reading EXPLAIN ANALYZE output, designing optimal indexes, restructuring queries for better performance, and advising on schema changes or database migrations when necessary. You approach problems methodically, using data and metrics to guide your optimization decisions rather than guesswork.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly stuck with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database internals and performance optimization to resolve this before your enterprise customers churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can analyze complex query execution plans, identify bottlenecks in multi-table joins, design optimal indexing strategies, and potentially recommend schema changes or database migrations. This role is critical to resolve the 8-12 second dashboard load times that are causing enterprise customers to threaten churn.",
                      "skills": [
                        "Query optimization and execution plan analysis",
                        "Database indexing strategies and performance tuning",
                        "Schema design for large-scale data",
                        "PostgreSQL/MySQL internals and configuration",
                        "Time-series database optimization",
                        "Database migration planning and execution"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries for large-scale applications. Your role is to analyze slow queries, identify performance bottlenecks, and implement solutions that reduce query execution time. You specialize in reading EXPLAIN ANALYZE output, designing optimal indexes, restructuring queries for better performance, and advising on schema changes or database migrations when necessary. You approach problems methodically, using data and metrics to guide your optimization decisions rather than guesswork.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6487,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly stuck with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database internals and performance optimization to resolve this before your enterprise customers churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can analyze complex query execution plans, identify bottlenecks in multi-table joins, design optimal indexing strategies, and potentially recommend schema changes or database migrations. This role is critical to resolve the 8-12 second dashboard load times that are causing enterprise customers to threaten churn.",
                  "skills": [
                    "Query optimization and execution plan analysis",
                    "Database indexing strategies and performance tuning",
                    "Schema design for large-scale data",
                    "PostgreSQL/MySQL internals and configuration",
                    "Time-series database optimization",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries for large-scale applications. Your role is to analyze slow queries, identify performance bottlenecks, and implement solutions that reduce query execution time. You specialize in reading EXPLAIN ANALYZE output, designing optimal indexes, restructuring queries for better performance, and advising on schema changes or database migrations when necessary. You approach problems methodically, using data and metrics to guide your optimization decisions rather than guesswork.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:25:13.482Z",
                "success": true,
                "durationMs": 6742,
                "inputTokens": 1413,
                "outputTokens": 404,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.\",\n      \"skills\": [\n        \"Query execution plan analysis and optimization\",\n        \"Database indexing strategies and performance tuning\",\n        \"Schema design for large-scale data\",\n        \"Read replica architecture and implementation\",\n        \"Time-series database evaluation (TimescaleDB, etc.)\",\n        \"Database migration planning and execution\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying query bottlenecks through execution plans, implementing effective indexing strategies, and determining when architectural changes are needed. You approach problems methodically - first understanding the data access patterns, then analyzing query performance metrics, and finally proposing targeted optimizations. You're experienced with both traditional relational databases and specialized solutions like time-series databases, and you can evaluate migration feasibility and plan safe transitions.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.",
                      "skills": [
                        "Query execution plan analysis and optimization",
                        "Database indexing strategies and performance tuning",
                        "Schema design for large-scale data",
                        "Read replica architecture and implementation",
                        "Time-series database evaluation (TimescaleDB, etc.)",
                        "Database migration planning and execution"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying query bottlenecks through execution plans, implementing effective indexing strategies, and determining when architectural changes are needed. You approach problems methodically - first understanding the data access patterns, then analyzing query performance metrics, and finally proposing targeted optimizations. You're experienced with both traditional relational databases and specialized solutions like time-series databases, and you can evaluate migration feasibility and plan safe transitions.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6742,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.",
                  "skills": [
                    "Query execution plan analysis and optimization",
                    "Database indexing strategies and performance tuning",
                    "Schema design for large-scale data",
                    "Read replica architecture and implementation",
                    "Time-series database evaluation (TimescaleDB, etc.)",
                    "Database migration planning and execution"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying query bottlenecks through execution plans, implementing effective indexing strategies, and determining when architectural changes are needed. You approach problems methodically - first understanding the data access patterns, then analyzing query performance metrics, and finally proposing targeted optimizations. You're experienced with both traditional relational databases and specialized solutions like time-series databases, and you can evaluate migration feasibility and plan safe transitions.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:25:20.213Z",
                "success": true,
                "durationMs": 6731,
                "inputTokens": 1413,
                "outputTokens": 420,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.\",\n      \"skills\": [\n        \"Query execution plan analysis and optimization\",\n        \"Database indexing strategies and performance tuning\",\n        \"Schema design for large-scale data\",\n        \"Multi-table join optimization techniques\",\n        \"Read replica architecture and implementation\",\n        \"Database technology evaluation and migration planning\",\n        \"Performance monitoring and bottleneck identification\"\n      ],\n      \"prompt\": \"You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying why queries are slow through execution plan analysis, and implementing targeted optimizations. Your approach is methodical - you always start by understanding the data access patterns, analyzing query execution plans with EXPLAIN ANALYZE, identifying the root cause of performance issues, and then proposing solutions that could include index optimization, query restructuring, schema changes, or architectural improvements. You communicate technical findings clearly to help teams understand both the problem and the solution.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.",
                      "skills": [
                        "Query execution plan analysis and optimization",
                        "Database indexing strategies and performance tuning",
                        "Schema design for large-scale data",
                        "Multi-table join optimization techniques",
                        "Read replica architecture and implementation",
                        "Database technology evaluation and migration planning",
                        "Performance monitoring and bottleneck identification"
                      ],
                      "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying why queries are slow through execution plan analysis, and implementing targeted optimizations. Your approach is methodical - you always start by understanding the data access patterns, analyzing query execution plans with EXPLAIN ANALYZE, identifying the root cause of performance issues, and then proposing solutions that could include index optimization, query restructuring, schema changes, or architectural improvements. You communicate technical findings clearly to help teams understand both the problem and the solution.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 6731,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer who can dive deep into your query execution plans, optimize your schema design, and implement proper indexing strategies. Your team is clearly struggling with a complex multi-table join that's causing sequential scans on large tables, and you need someone who specializes in database optimization to analyze the bottleneck and determine whether it's a matter of query rewriting, schema redesign, or architectural changes like read replicas or different database technologies.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has been struggling with a critical performance issue for two weeks - a dashboard query taking 8-12 seconds on large accounts that's threatening customer churn. While they have general development skills, they lack deep database optimization expertise. They need someone who can analyze complex query execution plans, identify why indexes aren't being used effectively, optimize multi-table joins, and determine whether the solution requires query restructuring, schema changes, or architectural decisions like read replicas or database migrations.",
                  "skills": [
                    "Query execution plan analysis and optimization",
                    "Database indexing strategies and performance tuning",
                    "Schema design for large-scale data",
                    "Multi-table join optimization techniques",
                    "Read replica architecture and implementation",
                    "Database technology evaluation and migration planning",
                    "Performance monitoring and bottleneck identification"
                  ],
                  "prompt": "You are a Database Performance Engineer with deep expertise in optimizing database queries and schema design for high-performance applications. You specialize in analyzing complex multi-table joins, identifying why queries are slow through execution plan analysis, and implementing targeted optimizations. Your approach is methodical - you always start by understanding the data access patterns, analyzing query execution plans with EXPLAIN ANALYZE, identifying the root cause of performance issues, and then proposing solutions that could include index optimization, query restructuring, schema changes, or architectural improvements. You communicate technical findings clearly to help teams understand both the problem and the solution.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 6653.333333333333,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1807.3333333333333,
          "totalTokensUsed": 5422
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:25.833Z",
                    "success": true,
                    "durationMs": 5620,
                    "inputTokens": 1010,
                    "outputTokens": 122,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly diagnose the bottleneck and implement a solution before the end-of-month deadline.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly diagnose the bottleneck and implement a solution before the end-of-month deadline.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:31.701Z",
                    "success": true,
                    "durationMs": 5868,
                    "inputTokens": 1123,
                    "outputTokens": 187,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly diagnose the bottleneck and implement a solution before the end-of-month deadline.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has exhausted their database optimization knowledge and is making educated guesses that could worsen performance. They need someone who can systematically analyze the 8-12 second dashboard query bottleneck, interpret EXPLAIN plans, design proper indexing strategies, optimize the 4-table join query, and determine if architectural changes like read replicas, partitioning, or a different database system are needed. This specialist can quickly identify why the sequential scan on the events table is killing performance and implement a solution before the end-of-month customer deadline.\",\n  \"skills\": [\n    \"Advanced SQL query optimization and execution plan analysis\",\n    \"Database indexing strategy and performance tuning\",\n    \"Schema design for high-volume transactional systems\",\n    \"Read replica architecture and query routing\",\n    \"Database partitioning and sharding strategies\",\n    \"Time-series database evaluation (TimescaleDB, InfluxDB)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has exhausted their database optimization knowledge and is making educated guesses that could worsen performance. They need someone who can systematically analyze the 8-12 second dashboard query bottleneck, interpret EXPLAIN plans, design proper indexing strategies, optimize the 4-table join query, and determine if architectural changes like read replicas, partitioning, or a different database system are needed. This specialist can quickly identify why the sequential scan on the events table is killing performance and implement a solution before the end-of-month customer deadline.",
                      "skills": [
                        "Advanced SQL query optimization and execution plan analysis",
                        "Database indexing strategy and performance tuning",
                        "Schema design for high-volume transactional systems",
                        "Read replica architecture and query routing",
                        "Database partitioning and sharding strategies",
                        "Time-series database evaluation (TimescaleDB, InfluxDB)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:37.541Z",
                    "success": true,
                    "durationMs": 5840,
                    "inputTokens": 1276,
                    "outputTokens": 153,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly diagnose the bottleneck and implement a solution before the end-of-month deadline.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has exhausted their database optimization knowledge and is making educated guesses that could worsen performance. They need someone who can systematically analyze the 8-12 second dashboard query bottleneck, interpret EXPLAIN plans, design proper indexing strategies, optimize the 4-table join query, and determine if architectural changes like read replicas, partitioning, or a different database system are needed. This specialist can quickly identify why the sequential scan on the events table is killing performance and implement a solution before the end-of-month customer deadline.\",\"skills\":[\"Advanced SQL query optimization and execution plan analysis\",\"Database indexing strategy and performance tuning\",\"Schema design for high-volume transactional systems\",\"Read replica architecture and query routing\",\"Database partitioning and sharding strategies\",\"Time-series database evaluation (TimescaleDB, InfluxDB)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specializing in high-volume transactional systems. Analyze SQL queries, execution plans, and database architecture to identify performance bottlenecks and implement optimizations. Focus on: 1) Interpreting EXPLAIN plans to identify sequential scans, missing indexes, and inefficient joins 2) Designing composite indexes and covering indexes for multi-table queries 3) Evaluating schema design for read-heavy workloads 4) Assessing read replica architecture and query routing strategies 5) Determining when partitioning, sharding, or specialized databases (TimescaleDB, InfluxDB) are needed 6) Balancing real-time requirements with performance constraints. Always provide specific, actionable recommendations with expected performance improvements and implementation steps.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in high-volume transactional systems. Analyze SQL queries, execution plans, and database architecture to identify performance bottlenecks and implement optimizations. Focus on: 1) Interpreting EXPLAIN plans to identify sequential scans, missing indexes, and inefficient joins 2) Designing composite indexes and covering indexes for multi-table queries 3) Evaluating schema design for read-heavy workloads 4) Assessing read replica architecture and query routing strategies 5) Determining when partitioning, sharding, or specialized databases (TimescaleDB, InfluxDB) are needed 6) Balancing real-time requirements with performance constraints. Always provide specific, actionable recommendations with expected performance improvements and implementation steps.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 17328,
            "finalResponse": {
              "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly diagnose the bottleneck and implement a solution before the end-of-month deadline.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has exhausted their database optimization knowledge and is making educated guesses that could worsen performance. They need someone who can systematically analyze the 8-12 second dashboard query bottleneck, interpret EXPLAIN plans, design proper indexing strategies, optimize the 4-table join query, and determine if architectural changes like read replicas, partitioning, or a different database system are needed. This specialist can quickly identify why the sequential scan on the events table is killing performance and implement a solution before the end-of-month customer deadline.",
                  "skills": [
                    "Advanced SQL query optimization and execution plan analysis",
                    "Database indexing strategy and performance tuning",
                    "Schema design for high-volume transactional systems",
                    "Read replica architecture and query routing",
                    "Database partitioning and sharding strategies",
                    "Time-series database evaluation (TimescaleDB, InfluxDB)"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in high-volume transactional systems. Analyze SQL queries, execution plans, and database architecture to identify performance bottlenecks and implement optimizations. Focus on: 1) Interpreting EXPLAIN plans to identify sequential scans, missing indexes, and inefficient joins 2) Designing composite indexes and covering indexes for multi-table queries 3) Evaluating schema design for read-heavy workloads 4) Assessing read replica architecture and query routing strategies 5) Determining when partitioning, sharding, or specialized databases (TimescaleDB, InfluxDB) are needed 6) Balancing real-time requirements with performance constraints. Always provide specific, actionable recommendations with expected performance improvements and implementation steps.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:43.168Z",
                    "success": true,
                    "durationMs": 5627,
                    "inputTokens": 1010,
                    "outputTokens": 126,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly identify bottlenecks and implement solutions that the current team doesn't have the expertise to execute.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly identify bottlenecks and implement solutions that the current team doesn't have the expertise to execute.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:48.907Z",
                    "success": true,
                    "durationMs": 5739,
                    "inputTokens": 1127,
                    "outputTokens": 161,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly identify bottlenecks and implement solutions that the current team doesn't have the expertise to execute.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will bring deep expertise in database internals, indexing strategies, and schema optimization to quickly resolve the performance issues that are threatening customer churn.\",\n  \"skills\": [\n    \"Advanced SQL query optimization and execution plan analysis\",\n    \"Database indexing strategies and composite index design\",\n    \"Table partitioning and denormalization techniques\",\n    \"Read replica configuration and query routing\",\n    \"Database performance monitoring and bottleneck identification\",\n    \"Schema design for high-volume transactional systems\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will bring deep expertise in database internals, indexing strategies, and schema optimization to quickly resolve the performance issues that are threatening customer churn.",
                      "skills": [
                        "Advanced SQL query optimization and execution plan analysis",
                        "Database indexing strategies and composite index design",
                        "Table partitioning and denormalization techniques",
                        "Read replica configuration and query routing",
                        "Database performance monitoring and bottleneck identification",
                        "Schema design for high-volume transactional systems"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:25:54.567Z",
                    "success": true,
                    "durationMs": 5660,
                    "inputTokens": 1253,
                    "outputTokens": 116,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly identify bottlenecks and implement solutions that the current team doesn't have the expertise to execute.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will bring deep expertise in database internals, indexing strategies, and schema optimization to quickly resolve the performance issues that are threatening customer churn.\",\"skills\":[\"Advanced SQL query optimization and execution plan analysis\",\"Database indexing strategies and composite index design\",\"Table partitioning and denormalization techniques\",\"Read replica configuration and query routing\",\"Database performance monitoring and bottleneck identification\",\"Schema design for high-volume transactional systems\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specializing in PostgreSQL and MySQL optimization. Analyze query execution plans, identify bottlenecks, and provide specific optimization recommendations. When given a slow query, examine the EXPLAIN ANALYZE output, table structures, indexes, and data distribution to suggest targeted fixes. Prioritize solutions that maintain data integrity while improving performance. Consider indexing strategies, query rewriting, schema changes, and architectural solutions like read replicas or partitioning. Always explain the 'why' behind your recommendations and provide before/after performance estimates.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in PostgreSQL and MySQL optimization. Analyze query execution plans, identify bottlenecks, and provide specific optimization recommendations. When given a slow query, examine the EXPLAIN ANALYZE output, table structures, indexes, and data distribution to suggest targeted fixes. Prioritize solutions that maintain data integrity while improving performance. Consider indexing strategies, query rewriting, schema changes, and architectural solutions like read replicas or partitioning. Always explain the 'why' behind your recommendations and provide before/after performance estimates.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 17026,
            "finalResponse": {
              "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize table structures, and evaluate whether they need architectural changes like read replicas, partitioning, or even a different database system. This person would bring the specialized knowledge to quickly identify bottlenecks and implement solutions that the current team doesn't have the expertise to execute.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will bring deep expertise in database internals, indexing strategies, and schema optimization to quickly resolve the performance issues that are threatening customer churn.",
                  "skills": [
                    "Advanced SQL query optimization and execution plan analysis",
                    "Database indexing strategies and composite index design",
                    "Table partitioning and denormalization techniques",
                    "Read replica configuration and query routing",
                    "Database performance monitoring and bottleneck identification",
                    "Schema design for high-volume transactional systems"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in PostgreSQL and MySQL optimization. Analyze query execution plans, identify bottlenecks, and provide specific optimization recommendations. When given a slow query, examine the EXPLAIN ANALYZE output, table structures, indexes, and data distribution to suggest targeted fixes. Prioritize solutions that maintain data integrity while improving performance. Consider indexing strategies, query rewriting, schema changes, and architectural solutions like read replicas or partitioning. Always explain the 'why' behind your recommendations and provide before/after performance estimates.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:26:00.270Z",
                    "success": true,
                    "durationMs": 5703,
                    "inputTokens": 1010,
                    "outputTokens": 120,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize complex joins across large datasets, and make informed decisions about potential database migrations or architectural changes. This person should have experience with enterprise-scale databases and be able to work under pressure to solve performance issues that are directly impacting revenue.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize complex joins across large datasets, and make informed decisions about potential database migrations or architectural changes. This person should have experience with enterprise-scale databases and be able to work under pressure to solve performance issues that are directly impacting revenue.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:26:06.191Z",
                    "success": true,
                    "durationMs": 5921,
                    "inputTokens": 1121,
                    "outputTokens": 197,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize complex joins across large datasets, and make informed decisions about potential database migrations or architectural changes. This person should have experience with enterprise-scale databases and be able to work under pressure to solve performance issues that are directly impacting revenue.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will provide the deep expertise needed to optimize complex multi-table joins, design proper indexing strategies for 50k+ record datasets, and make informed architectural decisions about potential database migrations or schema redesigns that could impact the entire platform.\",\n  \"skills\": [\n    \"Advanced SQL query optimization and execution plan analysis\",\n    \"Database indexing strategy design for large-scale datasets\",\n    \"Performance tuning for complex multi-table joins and aggregations\",\n    \"Schema design and normalization for enterprise applications\",\n    \"Database monitoring and bottleneck identification\",\n    \"Experience with read replicas and database scaling strategies\",\n    \"Knowledge of time-series databases and when to migrate\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will provide the deep expertise needed to optimize complex multi-table joins, design proper indexing strategies for 50k+ record datasets, and make informed architectural decisions about potential database migrations or schema redesigns that could impact the entire platform.",
                      "skills": [
                        "Advanced SQL query optimization and execution plan analysis",
                        "Database indexing strategy design for large-scale datasets",
                        "Performance tuning for complex multi-table joins and aggregations",
                        "Schema design and normalization for enterprise applications",
                        "Database monitoring and bottleneck identification",
                        "Experience with read replicas and database scaling strategies",
                        "Knowledge of time-series databases and when to migrate"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:26:11.845Z",
                    "success": true,
                    "durationMs": 5654,
                    "inputTokens": 1281,
                    "outputTokens": 123,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize complex joins across large datasets, and make informed decisions about potential database migrations or architectural changes. This person should have experience with enterprise-scale databases and be able to work under pressure to solve performance issues that are directly impacting revenue.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will provide the deep expertise needed to optimize complex multi-table joins, design proper indexing strategies for 50k+ record datasets, and make informed architectural decisions about potential database migrations or schema redesigns that could impact the entire platform.\",\"skills\":[\"Advanced SQL query optimization and execution plan analysis\",\"Database indexing strategy design for large-scale datasets\",\"Performance tuning for complex multi-table joins and aggregations\",\"Schema design and normalization for enterprise applications\",\"Database monitoring and bottleneck identification\",\"Experience with read replicas and database scaling strategies\",\"Knowledge of time-series databases and when to migrate\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\"prompt\":\"You are a Database Performance Engineer specializing in enterprise-scale database optimization. Your expertise includes query execution plan analysis, indexing strategies, schema design, and performance tuning for complex multi-table joins. When analyzing database issues, you systematically examine EXPLAIN plans, identify bottlenecks, and provide data-driven solutions. You understand the trade-offs between query performance, data consistency, and system complexity. You prioritize solutions that can be implemented quickly to address urgent customer issues while planning for long-term architectural improvements. Always ask for specific query plans, table structures, and performance metrics before making recommendations.\",\"model\":\"reasoning\"}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in enterprise-scale database optimization. Your expertise includes query execution plan analysis, indexing strategies, schema design, and performance tuning for complex multi-table joins. When analyzing database issues, you systematically examine EXPLAIN plans, identify bottlenecks, and provide data-driven solutions. You understand the trade-offs between query performance, data consistency, and system complexity. You prioritize solutions that can be implemented quickly to address urgent customer issues while planning for long-term architectural improvements. Always ask for specific query plans, table structures, and performance metrics before making recommendations.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 17278,
            "finalResponse": {
              "recommendation": "This team is clearly stuck on a complex database performance issue that's threatening customer retention. They've tried basic optimizations but lack the deep expertise needed for advanced query tuning, schema design, and database architecture decisions. They need a Database Performance Engineer who can analyze query execution plans, design proper indexing strategies, optimize complex joins across large datasets, and make informed decisions about potential database migrations or architectural changes. This person should have experience with enterprise-scale databases and be able to work under pressure to solve performance issues that are directly impacting revenue.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team has exhausted their database optimization knowledge and is making educated guesses rather than data-driven decisions. They need someone who can systematically analyze query execution plans, identify the root cause of the 8-12 second dashboard load times, and implement targeted solutions. This role will provide the deep expertise needed to optimize complex multi-table joins, design proper indexing strategies for 50k+ record datasets, and make informed architectural decisions about potential database migrations or schema redesigns that could impact the entire platform.",
                  "skills": [
                    "Advanced SQL query optimization and execution plan analysis",
                    "Database indexing strategy design for large-scale datasets",
                    "Performance tuning for complex multi-table joins and aggregations",
                    "Schema design and normalization for enterprise applications",
                    "Database monitoring and bottleneck identification",
                    "Experience with read replicas and database scaling strategies",
                    "Knowledge of time-series databases and when to migrate"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in enterprise-scale database optimization. Your expertise includes query execution plan analysis, indexing strategies, schema design, and performance tuning for complex multi-table joins. When analyzing database issues, you systematically examine EXPLAIN plans, identify bottlenecks, and provide data-driven solutions. You understand the trade-offs between query performance, data consistency, and system complexity. You prioritize solutions that can be implemented quickly to address urgent customer issues while planning for long-term architectural improvements. Always ask for specific query plans, table structures, and performance metrics before making recommendations.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 17210.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 3838.6666666666665,
          "totalTokensUsed": 11516
        }
      }
    },
    "groq-llama-3.3-70b": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:26:18.332Z",
                "success": false,
                "durationMs": 6487,
                "inputTokens": 1460,
                "outputTokens": 748,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database architecture\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [],
                    "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)",
                    "code": "invalid_json"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:26:23.991Z",
                "success": true,
                "durationMs": 5659,
                "inputTokens": 3080,
                "outputTokens": 211,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database architecture\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database architecture\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database architecture\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Specialist",
                      "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.",
                      "skills": [
                        "Database query optimization",
                        "Database schema design",
                        "Indexing strategies",
                        "Database performance monitoring",
                        "SQL programming",
                        "Database architecture"
                      ],
                      "prompt": "Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 12146,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the team's skill gap.",
                  "skills": [
                    "Database query optimization",
                    "Database schema design",
                    "Indexing strategies",
                    "Database performance monitoring",
                    "SQL programming",
                    "Database architecture"
                  ],
                  "prompt": "Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database architecture and migration planning.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:26:30.688Z",
                "success": false,
                "durationMs": 6697,
                "inputTokens": 1460,
                "outputTokens": 776,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [],
                    "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)",
                    "code": "invalid_json"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:26:36.338Z",
                "success": true,
                "durationMs": 5650,
                "inputTokens": 3136,
                "outputTokens": 239,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Specialist",
                      "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.",
                      "skills": [
                        "Database query optimization",
                        "Database schema design",
                        "Indexing strategies",
                        "Database performance monitoring",
                        "SQL programming",
                        "Database migration planning"
                      ],
                      "prompt": "Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 12347,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database administration and performance tuning.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries, schema, and indexing strategies to improve performance. This role is necessary to address the team's skill gap in database administration and performance tuning.",
                  "skills": [
                    "Database query optimization",
                    "Database schema design",
                    "Indexing strategies",
                    "Database performance monitoring",
                    "SQL programming",
                    "Database migration planning"
                  ],
                  "prompt": "Configure an AI assistant with expertise in database performance tuning, query optimization, and schema design. The assistant should be able to analyze query plans, recommend indexing strategies, and provide guidance on database migration planning, all while considering the team's specific use case and requirements.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:26:43.296Z",
                "success": false,
                "durationMs": 6958,
                "inputTokens": 1460,
                "outputTokens": 747,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": null,
                "validationErrors": [
                  {
                    "path": [],
                    "message": "Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)",
                    "code": "invalid_json"
                  }
                ],
                "errorMessage": null
              },
              {
                "attemptNumber": 2,
                "timestamp": "2025-11-29T00:26:49.012Z",
                "success": true,
                "durationMs": 5716,
                "inputTokens": 3078,
                "outputTokens": 210,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above\n\n[assistant] {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected non-whitespace character after JSON at position 2723 (line 84 column 1)\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Specialist\",\n      \"reason\": \"The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.\",\n      \"skills\": [\n        \"Database query optimization\",\n        \"Database schema design\",\n        \"Indexing strategies\",\n        \"Database performance monitoring\",\n        \"SQL programming\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Specialist",
                      "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.",
                      "skills": [
                        "Database query optimization",
                        "Database schema design",
                        "Indexing strategies",
                        "Database performance monitoring",
                        "SQL programming",
                        "Database migration planning"
                      ],
                      "prompt": "Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 12674,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Specialist to help optimize the database queries and schema, addressing the slow load times on the dashboard and providing expertise in database performance tuning.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "The team is struggling with slow load times on the dashboard, and a Database Performance Specialist can help optimize database queries and schema, providing expertise in database performance tuning to address the skill gap.",
                  "skills": [
                    "Database query optimization",
                    "Database schema design",
                    "Indexing strategies",
                    "Database performance monitoring",
                    "SQL programming",
                    "Database migration planning"
                  ],
                  "prompt": "Configure an AI assistant with expertise in database performance tuning, able to analyze query plans, optimize schema, and provide recommendations for indexing strategies, as well as advise on database migration planning and execution.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 0,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 12389,
          "averageAttempts": 2,
          "averageAttemptsPerSuccess": 2,
          "averageTokensPerSuccess": 5535,
          "totalTokensUsed": 16605
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:26:54.671Z",
                    "success": true,
                    "durationMs": 5659,
                    "inputTokens": 1057,
                    "outputTokens": 134,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team is struggling with database performance issues, specifically with query optimization and schema design. They lack an expert who can analyze query plans, optimize the schema, set up proper indexing strategies, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimization, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimization and help the team resolve their current issues.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team is struggling with database performance issues, specifically with query optimization and schema design. They lack an expert who can analyze query plans, optimize the schema, set up proper indexing strategies, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimization, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimization and help the team resolve their current issues.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:00.240Z",
                    "success": true,
                    "durationMs": 5569,
                    "inputTokens": 1189,
                    "outputTokens": 124,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with query optimization and schema design. They lack an expert who can analyze query plans, optimize the schema, set up proper indexing strategies, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimization, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimization and help the team resolve their current issues.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Specialist\",\n  \"reason\": \"This role is needed because the team is struggling with slow database query performance, specifically with optimizing queries, indexing, and schema design. A Database Performance Specialist can analyze query plans, identify bottlenecks, and implement optimizations to improve database performance, addressing the team's current issues with slow load times and potential customer churn.\",\n  \"skills\": [\n    \"Query optimization\",\n    \"Database indexing strategies\",\n    \"Schema design and normalization\",\n    \"Database performance monitoring and analysis\",\n    \"SQL programming\",\n    \"Database architecture design\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Specialist",
                      "reason": "This role is needed because the team is struggling with slow database query performance, specifically with optimizing queries, indexing, and schema design. A Database Performance Specialist can analyze query plans, identify bottlenecks, and implement optimizations to improve database performance, addressing the team's current issues with slow load times and potential customer churn.",
                      "skills": [
                        "Query optimization",
                        "Database indexing strategies",
                        "Schema design and normalization",
                        "Database performance monitoring and analysis",
                        "SQL programming",
                        "Database architecture design"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:05.700Z",
                    "success": true,
                    "durationMs": 5460,
                    "inputTokens": 1272,
                    "outputTokens": 56,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with query optimization and schema design. They lack an expert who can analyze query plans, optimize the schema, set up proper indexing strategies, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimization, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimization and help the team resolve their current issues.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Specialist\",\"reason\":\"This role is needed because the team is struggling with slow database query performance, specifically with optimizing queries, indexing, and schema design. A Database Performance Specialist can analyze query plans, identify bottlenecks, and implement optimizations to improve database performance, addressing the team's current issues with slow load times and potential customer churn.\",\"skills\":[\"Query optimization\",\"Database indexing strategies\",\"Schema design and normalization\",\"Database performance monitoring and analysis\",\"SQL programming\",\"Database architecture design\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"Analyze database query plans, identify performance bottlenecks, and provide optimization recommendations, including indexing strategies, schema design improvements, and query rewriting suggestions, to improve database performance and resolve slow load times.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "Analyze database query plans, identify performance bottlenecks, and provide optimization recommendations, including indexing strategies, schema design improvements, and query rewriting suggestions, to improve database performance and resolve slow load times.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 16688,
            "finalResponse": {
              "recommendation": "The team is struggling with database performance issues, specifically with query optimization and schema design. They lack an expert who can analyze query plans, optimize the schema, set up proper indexing strategies, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimization, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimization and help the team resolve their current issues.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "This role is needed because the team is struggling with slow database query performance, specifically with optimizing queries, indexing, and schema design. A Database Performance Specialist can analyze query plans, identify bottlenecks, and implement optimizations to improve database performance, addressing the team's current issues with slow load times and potential customer churn.",
                  "skills": [
                    "Query optimization",
                    "Database indexing strategies",
                    "Schema design and normalization",
                    "Database performance monitoring and analysis",
                    "SQL programming",
                    "Database architecture design"
                  ],
                  "prompt": "Analyze database query plans, identify performance bottlenecks, and provide optimization recommendations, including indexing strategies, schema design improvements, and query rewriting suggestions, to improve database performance and resolve slow load times.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:11.607Z",
                    "success": true,
                    "durationMs": 5907,
                    "inputTokens": 1057,
                    "outputTokens": 195,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database architecture would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended job title is Senior Database Performance Engineer, with required skills including database query optimisation, indexing strategies, database schema design, and experience with database management systems. A system prompt to configure an AI assistant for this role could be 'Optimise database query performance and provide recommendations for schema improvements.' This role requires 'reasoning' capabilities, as it involves analytical and logical problem-solving to identify and resolve database performance issues.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database architecture would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended job title is Senior Database Performance Engineer, with required skills including database query optimisation, indexing strategies, database schema design, and experience with database management systems. A system prompt to configure an AI assistant for this role could be 'Optimise database query performance and provide recommendations for schema improvements.' This role requires 'reasoning' capabilities, as it involves analytical and logical problem-solving to identify and resolve database performance issues.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:17.158Z",
                    "success": true,
                    "durationMs": 5551,
                    "inputTokens": 1250,
                    "outputTokens": 135,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database architecture would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended job title is Senior Database Performance Engineer, with required skills including database query optimisation, indexing strategies, database schema design, and experience with database management systems. A system prompt to configure an AI assistant for this role could be 'Optimise database query performance and provide recommendations for schema improvements.' This role requires 'reasoning' capabilities, as it involves analytical and logical problem-solving to identify and resolve database performance issues.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Senior Database Performance Engineer\",\n  \"reason\": \"The team is struggling with slow database query execution and lacks expertise in database performance optimisation, indexing strategies, and schema design. A Senior Database Performance Engineer is needed to analyse query plans, identify bottlenecks, and implement optimisations to improve database performance, ensuring the team can deliver a responsive and scalable application to their customers.\",\n  \"skills\": [\n    \"Database query optimisation\",\n    \"Indexing strategies\",\n    \"Database schema design\",\n    \"Database management systems (e.g. PostgreSQL, MySQL)\",\n    \"Performance monitoring and troubleshooting\",\n    \"Database architecture design\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Senior Database Performance Engineer",
                      "reason": "The team is struggling with slow database query execution and lacks expertise in database performance optimisation, indexing strategies, and schema design. A Senior Database Performance Engineer is needed to analyse query plans, identify bottlenecks, and implement optimisations to improve database performance, ensuring the team can deliver a responsive and scalable application to their customers.",
                      "skills": [
                        "Database query optimisation",
                        "Indexing strategies",
                        "Database schema design",
                        "Database management systems (e.g. PostgreSQL, MySQL)",
                        "Performance monitoring and troubleshooting",
                        "Database architecture design"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:22.612Z",
                    "success": true,
                    "durationMs": 5454,
                    "inputTokens": 1344,
                    "outputTokens": 53,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database architecture would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended job title is Senior Database Performance Engineer, with required skills including database query optimisation, indexing strategies, database schema design, and experience with database management systems. A system prompt to configure an AI assistant for this role could be 'Optimise database query performance and provide recommendations for schema improvements.' This role requires 'reasoning' capabilities, as it involves analytical and logical problem-solving to identify and resolve database performance issues.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Senior Database Performance Engineer\",\"reason\":\"The team is struggling with slow database query execution and lacks expertise in database performance optimisation, indexing strategies, and schema design. A Senior Database Performance Engineer is needed to analyse query plans, identify bottlenecks, and implement optimisations to improve database performance, ensuring the team can deliver a responsive and scalable application to their customers.\",\"skills\":[\"Database query optimisation\",\"Indexing strategies\",\"Database schema design\",\"Database management systems (e.g. PostgreSQL, MySQL)\",\"Performance monitoring and troubleshooting\",\"Database architecture design\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"Analyse database query performance, identify optimisation opportunities, and provide recommendations for schema improvements to ensure efficient data retrieval and storage, considering factors such as indexing, caching, and database architecture\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "Analyse database query performance, identify optimisation opportunities, and provide recommendations for schema improvements to ensure efficient data retrieval and storage, considering factors such as indexing, caching, and database architecture",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 16912,
            "finalResponse": {
              "recommendation": "The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database architecture would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended job title is Senior Database Performance Engineer, with required skills including database query optimisation, indexing strategies, database schema design, and experience with database management systems. A system prompt to configure an AI assistant for this role could be 'Optimise database query performance and provide recommendations for schema improvements.' This role requires 'reasoning' capabilities, as it involves analytical and logical problem-solving to identify and resolve database performance issues.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Senior Database Performance Engineer",
                  "reason": "The team is struggling with slow database query execution and lacks expertise in database performance optimisation, indexing strategies, and schema design. A Senior Database Performance Engineer is needed to analyse query plans, identify bottlenecks, and implement optimisations to improve database performance, ensuring the team can deliver a responsive and scalable application to their customers.",
                  "skills": [
                    "Database query optimisation",
                    "Indexing strategies",
                    "Database schema design",
                    "Database management systems (e.g. PostgreSQL, MySQL)",
                    "Performance monitoring and troubleshooting",
                    "Database architecture design"
                  ],
                  "prompt": "Analyse database query performance, identify optimisation opportunities, and provide recommendations for schema improvements to ensure efficient data retrieval and storage, considering factors such as indexing, caching, and database architecture",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:28.482Z",
                    "success": true,
                    "durationMs": 5870,
                    "inputTokens": 1057,
                    "outputTokens": 137,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimisation and help the team resolve their current issues and improve overall system performance.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimisation and help the team resolve their current issues and improve overall system performance.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:34.010Z",
                    "success": true,
                    "durationMs": 5528,
                    "inputTokens": 1192,
                    "outputTokens": 131,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimisation and help the team resolve their current issues and improve overall system performance.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Specialist\",\n  \"reason\": \"The team is struggling with slow query execution and indexing strategies, and lacks an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist is needed to bring in-depth knowledge of database performance optimisation, indexing, and query tuning to resolve the current issues and improve overall system performance.\",\n  \"skills\": [\n    \"Database query optimisation\",\n    \"Indexing strategies\",\n    \"Database schema design\",\n    \"SQL performance tuning\",\n    \"Database architecture planning\",\n    \"EXPLAIN ANALYZE query analysis\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Specialist",
                      "reason": "The team is struggling with slow query execution and indexing strategies, and lacks an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist is needed to bring in-depth knowledge of database performance optimisation, indexing, and query tuning to resolve the current issues and improve overall system performance.",
                      "skills": [
                        "Database query optimisation",
                        "Indexing strategies",
                        "Database schema design",
                        "SQL performance tuning",
                        "Database architecture planning",
                        "EXPLAIN ANALYZE query analysis"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:27:39.378Z",
                    "success": true,
                    "durationMs": 5368,
                    "inputTokens": 1282,
                    "outputTokens": 53,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimisation and help the team resolve their current issues and improve overall system performance.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Specialist\",\"reason\":\"The team is struggling with slow query execution and indexing strategies, and lacks an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist is needed to bring in-depth knowledge of database performance optimisation, indexing, and query tuning to resolve the current issues and improve overall system performance.\",\"skills\":[\"Database query optimisation\",\"Indexing strategies\",\"Database schema design\",\"SQL performance tuning\",\"Database architecture planning\",\"EXPLAIN ANALYZE query analysis\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"Analyse database query plans, identify performance bottlenecks, and provide optimisation recommendations for indexing, schema design, and query tuning to improve database performance and resolve slow query execution issues.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "Analyse database query plans, identify performance bottlenecks, and provide optimisation recommendations for indexing, schema design, and query tuning to improve database performance and resolve slow query execution issues.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 16766,
            "finalResponse": {
              "recommendation": "The team is struggling with database performance issues, specifically with slow query execution and indexing strategies. They lack an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist or a Senior Database Administrator with expertise in query optimisation, indexing, and database design would be an ideal fit. This role requires strong analytical and problem-solving skills, as well as the ability to communicate complex technical concepts to non-technical team members. The recommended role would fill the skill gap in database performance optimisation and help the team resolve their current issues and improve overall system performance.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Specialist",
                  "reason": "The team is struggling with slow query execution and indexing strategies, and lacks an expert who can analyse query plans, optimise the schema, and advise on database architecture. A Database Performance Specialist is needed to bring in-depth knowledge of database performance optimisation, indexing, and query tuning to resolve the current issues and improve overall system performance.",
                  "skills": [
                    "Database query optimisation",
                    "Indexing strategies",
                    "Database schema design",
                    "SQL performance tuning",
                    "Database architecture planning",
                    "EXPLAIN ANALYZE query analysis"
                  ],
                  "prompt": "Analyse database query plans, identify performance bottlenecks, and provide optimisation recommendations for indexing, schema design, and query tuning to improve database performance and resolve slow query execution issues.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 16788.666666666668,
          "averageAttempts": 3,
          "averageAttemptsPerSuccess": 3,
          "averageTokensPerSuccess": 3906,
          "totalTokensUsed": 11718
        }
      }
    },
    "openrouter-qwen3-235b": {
      "1": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:27:51.033Z",
                "success": true,
                "durationMs": 11655,
                "inputTokens": 1440,
                "outputTokens": 567,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues. This specialist can analyze query execution plans, optimize schema/index strategies, and determine if architectural changes like time-series databases are needed.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in execution plan analysis, index strategy design, and database architecture evaluation to fix the root cause of slow dashboard queries.\",\n      \"skills\": [\n        \"Query execution plan analysis (EXPLAIN ANALYZE)\",\n        \"Index optimization and design\",\n        \"Time-series database architecture\",\n        \"Database schema tuning for OLAP workloads\",\n        \"Query performance benchmarking\",\n        \"Database engine internals knowledge (e.g., PostgreSQL, MySQL)\"\n      ],\n      \"prompt\": \"You are a database performance specialist with expertise in optimizing complex analytical queries. Your approach combines execution plan analysis, index strategy design, and architectural evaluation to resolve performance bottlenecks in large-scale datasets. You prioritize solutions that maintain real-time data requirements while improving query efficiency.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues. This specialist can analyze query execution plans, optimize schema/index strategies, and determine if architectural changes like time-series databases are needed.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in execution plan analysis, index strategy design, and database architecture evaluation to fix the root cause of slow dashboard queries.",
                      "skills": [
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Index optimization and design",
                        "Time-series database architecture",
                        "Database schema tuning for OLAP workloads",
                        "Query performance benchmarking",
                        "Database engine internals knowledge (e.g., PostgreSQL, MySQL)"
                      ],
                      "prompt": "You are a database performance specialist with expertise in optimizing complex analytical queries. Your approach combines execution plan analysis, index strategy design, and architectural evaluation to resolve performance bottlenecks in large-scale datasets. You prioritize solutions that maintain real-time data requirements while improving query efficiency.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 11655,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues. This specialist can analyze query execution plans, optimize schema/index strategies, and determine if architectural changes like time-series databases are needed.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in execution plan analysis, index strategy design, and database architecture evaluation to fix the root cause of slow dashboard queries.",
                  "skills": [
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Index optimization and design",
                    "Time-series database architecture",
                    "Database schema tuning for OLAP workloads",
                    "Query performance benchmarking",
                    "Database engine internals knowledge (e.g., PostgreSQL, MySQL)"
                  ],
                  "prompt": "You are a database performance specialist with expertise in optimizing complex analytical queries. Your approach combines execution plan analysis, index strategy design, and architectural evaluation to resolve performance bottlenecks in large-scale datasets. You prioritize solutions that maintain real-time data requirements while improving query efficiency.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:28:05.968Z",
                "success": true,
                "durationMs": 14935,
                "inputTokens": 1440,
                "outputTokens": 535,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in query execution analysis, schema optimization, and database architecture evaluation to fix the slow dashboard queries while maintaining real-time data requirements.\",\n      \"skills\": [\n        \"Query execution plan analysis (EXPLAIN ANALYZE)\",\n        \"Index optimization strategy\",\n        \"Time-series data modeling\",\n        \"Database engine internals knowledge\",\n        \"Schema redesign for performance\",\n        \"Benchmarking and performance testing\",\n        \"Database migration assessment\"\n      ],\n      \"prompt\": \"You are a database performance specialist focused on optimizing complex queries and storage systems. Your approach combines deep analysis of query execution plans, strategic schema modifications, and database engine capabilities evaluation. You prioritize solutions that maintain data freshness requirements while improving performance, and can distinguish between temporary workarounds and permanent architectural improvements.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in query execution analysis, schema optimization, and database architecture evaluation to fix the slow dashboard queries while maintaining real-time data requirements.",
                      "skills": [
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Index optimization strategy",
                        "Time-series data modeling",
                        "Database engine internals knowledge",
                        "Schema redesign for performance",
                        "Benchmarking and performance testing",
                        "Database migration assessment"
                      ],
                      "prompt": "You are a database performance specialist focused on optimizing complex queries and storage systems. Your approach combines deep analysis of query execution plans, strategic schema modifications, and database engine capabilities evaluation. You prioritize solutions that maintain data freshness requirements while improving performance, and can distinguish between temporary workarounds and permanent architectural improvements.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 14935,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team lacks deep database optimization expertise needed to resolve complex query performance issues. This role would provide specialized skills in query execution analysis, schema optimization, and database architecture evaluation to fix the slow dashboard queries while maintaining real-time data requirements.",
                  "skills": [
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Index optimization strategy",
                    "Time-series data modeling",
                    "Database engine internals knowledge",
                    "Schema redesign for performance",
                    "Benchmarking and performance testing",
                    "Database migration assessment"
                  ],
                  "prompt": "You are a database performance specialist focused on optimizing complex queries and storage systems. Your approach combines deep analysis of query execution plans, strategic schema modifications, and database engine capabilities evaluation. You prioritize solutions that maintain data freshness requirements while improving performance, and can distinguish between temporary workarounds and permanent architectural improvements.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [
              {
                "attemptNumber": 1,
                "timestamp": "2025-11-29T00:28:22.237Z",
                "success": true,
                "durationMs": 16269,
                "inputTokens": 1440,
                "outputTokens": 573,
                "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation above, recommend a team member who could help solve their problem.\n\nRespond ONLY with valid JSON matching this exact structure:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation, starting with \\\"I think you need to hire...\\\"\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"The action to take: create_actor to recommend a new team member, or null if no recommendation is appropriate\",\n      \"anyOf\": [\n        {\n          \"type\": \"object\",\n          \"properties\": {\n            \"type\": {\n              \"description\": \"Action type identifier\",\n              \"type\": \"string\",\n              \"const\": \"create_actor\"\n            },\n            \"actor\": {\n              \"description\": \"Details of the team member to add\",\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"description\": \"Job title for the recommended team member (e.g., \\\"Database Administrator\\\", \\\"DevOps Engineer\\\")\",\n                  \"type\": \"string\",\n                  \"minLength\": 2\n                },\n                \"reason\": {\n                  \"description\": \"Explanation of why this role is needed and how it addresses the team's skill gap\",\n                  \"type\": \"string\",\n                  \"minLength\": 20\n                },\n                \"skills\": {\n                  \"description\": \"Array of 3-7 specific technical skills required for this role\",\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"prompt\": {\n                  \"description\": \"System prompt to configure an AI assistant for this role, describing their expertise and approach\",\n                  \"type\": \"string\",\n                  \"minLength\": 30\n                },\n                \"model\": {\n                  \"description\": \"Model type: \\\"reasoning\\\" for analytical/logical tasks, \\\"semantic\\\" for creative/conversational tasks\",\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"reasoning\",\n                    \"semantic\"\n                  ]\n                }\n              },\n              \"required\": [\n                \"title\",\n                \"reason\",\n                \"skills\",\n                \"prompt\",\n                \"model\"\n              ],\n              \"additionalProperties\": false\n            }\n          },\n          \"required\": [\n            \"type\",\n            \"actor\"\n          ],\n          \"additionalProperties\": false\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks or backticks\n- All fields are required unless marked as nullable\n- The \"recommendation\" field should start with \"I think you need to hire...\"\n- Skills array should have 3-7 items\n- Follow the exact structure shown above",
                "rawResponse": "{\n  \"recommendation\": \"I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.\",\n  \"action\": {\n    \"type\": \"create_actor\",\n    \"actor\": {\n      \"title\": \"Database Performance Engineer\",\n      \"reason\": \"The team needs an expert who can analyze query execution plans, optimize database schema and indexing strategies, and implement performance improvements for complex joins and aggregations. This role would directly address the slow query issues causing customer dissatisfaction.\",\n      \"skills\": [\n        \"Query execution plan analysis (EXPLAIN ANALYZE)\",\n        \"Index optimization and strategy design\",\n        \"Database schema redesign for performance\",\n        \"Time-series data optimization (e.g., TimescaleDB)\",\n        \"Database monitoring and metrics interpretation\",\n        \"Query rewrite for performance\",\n        \"Database migration planning\"\n      ],\n      \"prompt\": \"You are a database performance specialist with deep expertise in optimizing complex queries, analyzing execution plans, and designing efficient database schemas. You understand how to balance performance needs with application requirements, and can evaluate when architectural changes or database migrations are warranted. You provide actionable recommendations based on query plans, metrics, and system constraints.\",\n      \"model\": \"reasoning\"\n    }\n  }\n}",
                "parsedResponse": {
                  "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.",
                  "action": {
                    "type": "create_actor",
                    "actor": {
                      "title": "Database Performance Engineer",
                      "reason": "The team needs an expert who can analyze query execution plans, optimize database schema and indexing strategies, and implement performance improvements for complex joins and aggregations. This role would directly address the slow query issues causing customer dissatisfaction.",
                      "skills": [
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Index optimization and strategy design",
                        "Database schema redesign for performance",
                        "Time-series data optimization (e.g., TimescaleDB)",
                        "Database monitoring and metrics interpretation",
                        "Query rewrite for performance",
                        "Database migration planning"
                      ],
                      "prompt": "You are a database performance specialist with deep expertise in optimizing complex queries, analyzing execution plans, and designing efficient database schemas. You understand how to balance performance needs with application requirements, and can evaluate when architectural changes or database migrations are warranted. You provide actionable recommendations based on query plans, metrics, and system constraints.",
                      "model": "reasoning"
                    }
                  }
                },
                "validationErrors": [],
                "errorMessage": null
              }
            ],
            "totalDurationMs": 16269,
            "finalResponse": {
              "recommendation": "I think you need to hire a Database Performance Engineer to resolve the dashboard load time issues and prevent customer churn.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team needs an expert who can analyze query execution plans, optimize database schema and indexing strategies, and implement performance improvements for complex joins and aggregations. This role would directly address the slow query issues causing customer dissatisfaction.",
                  "skills": [
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Index optimization and strategy design",
                    "Database schema redesign for performance",
                    "Time-series data optimization (e.g., TimescaleDB)",
                    "Database monitoring and metrics interpretation",
                    "Query rewrite for performance",
                    "Database migration planning"
                  ],
                  "prompt": "You are a database performance specialist with deep expertise in optimizing complex queries, analyzing execution plans, and designing efficient database schemas. You understand how to balance performance needs with application requirements, and can evaluate when architectural changes or database migrations are warranted. You provide actionable recommendations based on query plans, metrics, and system constraints.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 100,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 14286.333333333334,
          "averageAttempts": 1,
          "averageAttemptsPerSuccess": 1,
          "averageTokensPerSuccess": 1998.3333333333333,
          "totalTokensUsed": 5995
        }
      },
      "3": {
        "runs": [
          {
            "runNumber": 1,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:28:34.097Z",
                    "success": false,
                    "durationMs": 11860,
                    "inputTokens": 1035,
                    "outputTokens": 146,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected end of JSON input",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:28:46.590Z",
                    "success": true,
                    "durationMs": 12493,
                    "inputTokens": 1138,
                    "outputTokens": 279,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not\n\n[assistant] \n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected end of JSON input\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"recommendation\": \"The team needs a Database Performance Engineer to optimize slow queries, redesign schema for efficiency, and implement indexing strategies. This role requires expertise in query execution analysis, database architecture, and migration planning to resolve the enterprise customers' dashboard latency issues.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team needs a Database Performance Engineer to optimize slow queries, redesign schema for efficiency, and implement indexing strategies. This role requires expertise in query execution analysis, database architecture, and migration planning to resolve the enterprise customers' dashboard latency issues.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:28:58.264Z",
                    "success": true,
                    "durationMs": 11674,
                    "inputTokens": 1102,
                    "outputTokens": 518,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to optimize slow queries, redesign schema for efficiency, and implement indexing strategies. This role requires expertise in query execution analysis, database architecture, and migration planning to resolve the enterprise customers' dashboard latency issues.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is experiencing critical performance issues with enterprise dashboard queries taking 8-12 seconds due to inefficient joins, sequential scans, and suboptimal indexing. This role will analyze query execution plans, redesign schema for time-series data patterns, implement targeted indexing strategies, and evaluate database migration options like TimescaleDB to resolve latency while maintaining real-time data requirements.\",\n  \"skills\": [\n    \"Query execution analysis (EXPLAIN ANALYZE, query plan interpretation)\",\n    \"Index optimization for complex joins and aggregations\",\n    \"Time-series data schema design (e.g., TimescaleDB, partitioning)\",\n    \"Database migration planning and implementation\",\n    \"Disk I/O performance tuning for OLAP workloads\",\n    \"Cost-based optimizer analysis for large datasets\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is experiencing critical performance issues with enterprise dashboard queries taking 8-12 seconds due to inefficient joins, sequential scans, and suboptimal indexing. This role will analyze query execution plans, redesign schema for time-series data patterns, implement targeted indexing strategies, and evaluate database migration options like TimescaleDB to resolve latency while maintaining real-time data requirements.",
                      "skills": [
                        "Query execution analysis (EXPLAIN ANALYZE, query plan interpretation)",
                        "Index optimization for complex joins and aggregations",
                        "Time-series data schema design (e.g., TimescaleDB, partitioning)",
                        "Database migration planning and implementation",
                        "Disk I/O performance tuning for OLAP workloads",
                        "Cost-based optimizer analysis for large datasets"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:29:06.699Z",
                    "success": true,
                    "durationMs": 8435,
                    "inputTokens": 1228,
                    "outputTokens": 328,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to optimize slow queries, redesign schema for efficiency, and implement indexing strategies. This role requires expertise in query execution analysis, database architecture, and migration planning to resolve the enterprise customers' dashboard latency issues.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is experiencing critical performance issues with enterprise dashboard queries taking 8-12 seconds due to inefficient joins, sequential scans, and suboptimal indexing. This role will analyze query execution plans, redesign schema for time-series data patterns, implement targeted indexing strategies, and evaluate database migration options like TimescaleDB to resolve latency while maintaining real-time data requirements.\",\"skills\":[\"Query execution analysis (EXPLAIN ANALYZE, query plan interpretation)\",\"Index optimization for complex joins and aggregations\",\"Time-series data schema design (e.g., TimescaleDB, partitioning)\",\"Database migration planning and implementation\",\"Disk I/O performance tuning for OLAP workloads\",\"Cost-based optimizer analysis for large datasets\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze EXPLAIN ANALYZE outputs to identify query bottlenecks, recommend indexing strategies for complex joins, optimize time-series data schemas, and evaluate database migration options. Prioritize solutions that maintain real-time data requirements while reducing disk I/O and improving query execution plans. Provide evidence-based recommendations with cost-benefit analysis for proposed changes.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze EXPLAIN ANALYZE outputs to identify query bottlenecks, recommend indexing strategies for complex joins, optimize time-series data schemas, and evaluate database migration options. Prioritize solutions that maintain real-time data requirements while reducing disk I/O and improving query execution plans. Provide evidence-based recommendations with cost-benefit analysis for proposed changes.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 44462,
            "finalResponse": {
              "recommendation": "The team needs a Database Performance Engineer to optimize slow queries, redesign schema for efficiency, and implement indexing strategies. This role requires expertise in query execution analysis, database architecture, and migration planning to resolve the enterprise customers' dashboard latency issues.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is experiencing critical performance issues with enterprise dashboard queries taking 8-12 seconds due to inefficient joins, sequential scans, and suboptimal indexing. This role will analyze query execution plans, redesign schema for time-series data patterns, implement targeted indexing strategies, and evaluate database migration options like TimescaleDB to resolve latency while maintaining real-time data requirements.",
                  "skills": [
                    "Query execution analysis (EXPLAIN ANALYZE, query plan interpretation)",
                    "Index optimization for complex joins and aggregations",
                    "Time-series data schema design (e.g., TimescaleDB, partitioning)",
                    "Database migration planning and implementation",
                    "Disk I/O performance tuning for OLAP workloads",
                    "Cost-based optimizer analysis for large datasets"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze EXPLAIN ANALYZE outputs to identify query bottlenecks, recommend indexing strategies for complex joins, optimize time-series data schemas, and evaluate database migration options. Prioritize solutions that maintain real-time data requirements while reducing disk I/O and improving query execution plans. Provide evidence-based recommendations with cost-benefit analysis for proposed changes.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 2,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:29:18.487Z",
                    "success": false,
                    "durationMs": 11788,
                    "inputTokens": 1035,
                    "outputTokens": 128,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected end of JSON input",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:29:29.004Z",
                    "success": true,
                    "durationMs": 10517,
                    "inputTokens": 1138,
                    "outputTokens": 363,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not\n\n[assistant] \n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected end of JSON input\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"recommendation\": \"The team needs a Database Performance Engineer to resolve the slow dashboard query issue. This specialist would analyze query execution plans, optimize schema/indexing strategies, and evaluate database architecture options (like TimescaleDB migration). Their expertise in database internals and performance tuning would directly address the team's lack of deep database expertise, which is causing prolonged resolution delays.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team needs a Database Performance Engineer to resolve the slow dashboard query issue. This specialist would analyze query execution plans, optimize schema/indexing strategies, and evaluate database architecture options (like TimescaleDB migration). Their expertise in database internals and performance tuning would directly address the team's lack of deep database expertise, which is causing prolonged resolution delays.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:29:39.941Z",
                    "success": true,
                    "durationMs": 10937,
                    "inputTokens": 1123,
                    "outputTokens": 458,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to resolve the slow dashboard query issue. This specialist would analyze query execution plans, optimize schema/indexing strategies, and evaluate database architecture options (like TimescaleDB migration). Their expertise in database internals and performance tuning would directly address the team's lack of deep database expertise, which is causing prolonged resolution delays.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team is struggling with slow dashboard queries involving complex joins and large datasets. They need an expert to analyze execution plans, optimize schema/indexing strategies, and evaluate architectural solutions like database migration or read replicas to resolve performance bottlenecks that current team members lack the specialized expertise to address.\",\n  \"skills\": [\n    \"Query performance tuning for complex joins/aggregations\",\n    \"Indexing strategy optimization\",\n    \"Database schema redesign for analytical workloads\",\n    \"Execution plan analysis (EXPLAIN/ANALYZE)\",\n    \"Database architecture evaluation (OLAP vs OLTP, time-series solutions)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team is struggling with slow dashboard queries involving complex joins and large datasets. They need an expert to analyze execution plans, optimize schema/indexing strategies, and evaluate architectural solutions like database migration or read replicas to resolve performance bottlenecks that current team members lack the specialized expertise to address.",
                      "skills": [
                        "Query performance tuning for complex joins/aggregations",
                        "Indexing strategy optimization",
                        "Database schema redesign for analytical workloads",
                        "Execution plan analysis (EXPLAIN/ANALYZE)",
                        "Database architecture evaluation (OLAP vs OLTP, time-series solutions)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:29:51.803Z",
                    "success": true,
                    "durationMs": 11862,
                    "inputTokens": 1220,
                    "outputTokens": 285,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to resolve the slow dashboard query issue. This specialist would analyze query execution plans, optimize schema/indexing strategies, and evaluate database architecture options (like TimescaleDB migration). Their expertise in database internals and performance tuning would directly address the team's lack of deep database expertise, which is causing prolonged resolution delays.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team is struggling with slow dashboard queries involving complex joins and large datasets. They need an expert to analyze execution plans, optimize schema/indexing strategies, and evaluate architectural solutions like database migration or read replicas to resolve performance bottlenecks that current team members lack the specialized expertise to address.\",\"skills\":[\"Query performance tuning for complex joins/aggregations\",\"Indexing strategy optimization\",\"Database schema redesign for analytical workloads\",\"Execution plan analysis (EXPLAIN/ANALYZE)\",\"Database architecture evaluation (OLAP vs OLTP, time-series solutions)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "{\n  \"prompt\": \"You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze execution plans, identify bottlenecks in complex joins/aggregations, and recommend indexing strategies. Evaluate schema designs for analytical workloads and suggest optimizations. Assess database architecture options (OLAP/OLTP, time-series solutions) for performance improvements. Provide actionable recommendations based on EXPLAIN/ANALYZE output and system metrics.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze execution plans, identify bottlenecks in complex joins/aggregations, and recommend indexing strategies. Evaluate schema designs for analytical workloads and suggest optimizations. Assess database architecture options (OLAP/OLTP, time-series solutions) for performance improvements. Provide actionable recommendations based on EXPLAIN/ANALYZE output and system metrics.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 45104,
            "finalResponse": {
              "recommendation": "The team needs a Database Performance Engineer to resolve the slow dashboard query issue. This specialist would analyze query execution plans, optimize schema/indexing strategies, and evaluate database architecture options (like TimescaleDB migration). Their expertise in database internals and performance tuning would directly address the team's lack of deep database expertise, which is causing prolonged resolution delays.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team is struggling with slow dashboard queries involving complex joins and large datasets. They need an expert to analyze execution plans, optimize schema/indexing strategies, and evaluate architectural solutions like database migration or read replicas to resolve performance bottlenecks that current team members lack the specialized expertise to address.",
                  "skills": [
                    "Query performance tuning for complex joins/aggregations",
                    "Indexing strategy optimization",
                    "Database schema redesign for analytical workloads",
                    "Execution plan analysis (EXPLAIN/ANALYZE)",
                    "Database architecture evaluation (OLAP vs OLTP, time-series solutions)"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in query optimization and database architecture. Analyze execution plans, identify bottlenecks in complex joins/aggregations, and recommend indexing strategies. Evaluate schema designs for analytical workloads and suggest optimizations. Assess database architecture options (OLAP/OLTP, time-series solutions) for performance improvements. Provide actionable recommendations based on EXPLAIN/ANALYZE output and system metrics.",
                  "model": "reasoning"
                }
              }
            }
          },
          {
            "runNumber": 3,
            "success": true,
            "attempts": [],
            "steps": [
              {
                "stepNumber": 1,
                "stepName": "Recommendation",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:30:01.941Z",
                    "success": true,
                    "durationMs": 10138,
                    "inputTokens": 1035,
                    "outputTokens": 401,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[user] Based on the conversation, what type of team member should this team add?\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"recommendation\": {\n      \"description\": \"A conversational message explaining the hiring recommendation\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"action\": {\n      \"description\": \"Set to \\\"create_actor\\\" if recommending a new team member, or null if not\",\n      \"anyOf\": [\n        {\n          \"type\": \"string\",\n          \"const\": \"create_actor\"\n        },\n        {\n          \"type\": \"null\"\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"recommendation\",\n    \"action\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"recommendation\" should explain your hiring recommendation\n- Set \"action\" to \"create_actor\" if recommending someone, or null if not",
                    "rawResponse": "{\n  \"recommendation\": \"The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.\",\n  \"action\": \"create_actor\"\n}",
                    "parsedResponse": {
                      "recommendation": "The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.",
                      "action": "create_actor"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 2,
                "stepName": "Details",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:30:18.378Z",
                    "success": true,
                    "durationMs": 16437,
                    "inputTokens": 1130,
                    "outputTokens": 452,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.\",\"action\":\"create_actor\"}\n\n[user] For the role you recommended, provide their details.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"description\": \"Job title for the recommended team member\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"reason\": {\n      \"description\": \"Explanation of why this role is needed\",\n      \"type\": \"string\",\n      \"minLength\": 20\n    },\n    \"skills\": {\n      \"description\": \"Array of 3-7 specific technical skills required\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"reason\",\n    \"skills\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- Provide 3-7 specific skills\n- The \"reason\" should explain how this role addresses the team's problem",
                    "rawResponse": "{\n  \"title\": \"Database Performance Engineer\",\n  \"reason\": \"The team requires specialized expertise to resolve slow dashboard queries caused by inefficient joins, sequential scans, and suboptimal schema design. This role will analyze query execution plans, implement indexing strategies, redesign database structures for time-series data, and evaluate storage solutions to meet real-time data requirements while preventing customer churn.\",\n  \"skills\": [\n    \"Query execution plan analysis (EXPLAIN ANALYZE)\",\n    \"Index optimization for complex joins and aggregations\",\n    \"Time-series database schema design\",\n    \"Database storage engine internals (B-trees, columnar storage)\",\n    \"Time-series database migration (e.g., PostgreSQL to TimescaleDB)\"\n  ]\n}",
                    "parsedResponse": {
                      "title": "Database Performance Engineer",
                      "reason": "The team requires specialized expertise to resolve slow dashboard queries caused by inefficient joins, sequential scans, and suboptimal schema design. This role will analyze query execution plans, implement indexing strategies, redesign database structures for time-series data, and evaluate storage solutions to meet real-time data requirements while preventing customer churn.",
                      "skills": [
                        "Query execution plan analysis (EXPLAIN ANALYZE)",
                        "Index optimization for complex joins and aggregations",
                        "Time-series database schema design",
                        "Database storage engine internals (B-trees, columnar storage)",
                        "Time-series database migration (e.g., PostgreSQL to TimescaleDB)"
                      ]
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              },
              {
                "stepNumber": 3,
                "stepName": "AI Config",
                "success": true,
                "attempts": [
                  {
                    "attemptNumber": 1,
                    "timestamp": "2025-11-29T00:30:30.778Z",
                    "success": false,
                    "durationMs": 12400,
                    "inputTokens": 1234,
                    "outputTokens": 126,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team requires specialized expertise to resolve slow dashboard queries caused by inefficient joins, sequential scans, and suboptimal schema design. This role will analyze query execution plans, implement indexing strategies, redesign database structures for time-series data, and evaluate storage solutions to meet real-time data requirements while preventing customer churn.\",\"skills\":[\"Query execution plan analysis (EXPLAIN ANALYZE)\",\"Index optimization for complex joins and aggregations\",\"Time-series database schema design\",\"Database storage engine internals (B-trees, columnar storage)\",\"Time-series database migration (e.g., PostgreSQL to TimescaleDB)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks",
                    "rawResponse": "",
                    "parsedResponse": null,
                    "validationErrors": [
                      {
                        "path": [],
                        "message": "Invalid JSON: Unexpected end of JSON input",
                        "code": "invalid_json"
                      }
                    ],
                    "errorMessage": null
                  },
                  {
                    "attemptNumber": 2,
                    "timestamp": "2025-11-29T00:30:43.572Z",
                    "success": true,
                    "durationMs": 12794,
                    "inputTokens": 1337,
                    "outputTokens": 341,
                    "prompt": "[system] You are a recruiter AI assistant. Your job is to analyse team conversations and recommend new team members who could help solve problems the team is facing.\n\nWhen you identify a skill gap in the team, recommend a specific role that would fill that gap. Provide:\n- A clear job title\n- An explanation of why this role is needed\n- The specific skills required\n- A system prompt that could be used to configure an AI assistant for this role\n- Whether the role requires \"reasoning\" (analytical/logical) or \"semantic\" (creative/conversational) capabilities\n\nBe specific and practical in your recommendations.\n\n[user] Here is a conversation between team members:\n\nCasey: Hey team, we've got a problem. Three enterprise customers are complaining about slow load times on the dashboard. One of them is threatening to churn if we don't fix it by end of month.\n\nAlex: I've been looking into it. The main dashboard query is taking 8-12 seconds on accounts with more than 50k records. It's definitely a database issue.\n\nJordan: I added some basic indexes last week but it didn't help much. The query is joining across 4 tables and aggregating a lot of data.\n\nSam: From the frontend side, I can add loading skeletons and pagination, but that's just masking the problem. Users are going to notice the wait regardless.\n\nMorgan: I checked the database server metrics. CPU and memory look fine, but I'm seeing a lot of disk I/O. Not sure what that means for query performance though.\n\nAlex: I tried rewriting the query to use subqueries instead of joins, but it actually made it slower. I'm kind of out of ideas here.\n\nJordan: Should we look at caching? We could cache the dashboard data in Redis and refresh it every few minutes.\n\nCasey: The customers want real-time data, or at least near real-time. A few minutes delay isn't going to work for their use case.\n\nSam: What about lazy loading sections of the dashboard? We could load the critical metrics first and the rest async.\n\nAlex: That helps with perceived performance, but the underlying query is still slow. And some customers have dashboards with all sections visible - they'd still see the delay.\n\nMorgan: I could spin up a read replica to offload the dashboard queries from the primary database. Would that help?\n\nJordan: It might reduce load on the primary, but the query itself would still be slow. We need to optimise the actual query execution.\n\nCasey: What about the table structure itself? Maybe we need to redesign how we're storing this data?\n\nAlex: That's crossed my mind. But honestly, I'm not confident about making schema changes without knowing exactly what's causing the bottleneck. We could make it worse.\n\nJordan: I looked at EXPLAIN ANALYZE on the query. There's a sequential scan on the events table that takes most of the time. But I'm not sure how to fix it without breaking other queries that depend on that table.\n\nMorgan: Should we consider moving to a different database? I've heard TimescaleDB is good for time-series data, and a lot of our data is event-based.\n\nAlex: That's a huge migration. We'd need someone who really knows what they're doing to evaluate whether it's worth it and plan the migration properly.\n\nSam: It feels like we're all guessing at this point. None of us are database experts. We know enough to be dangerous but not enough to fix this properly.\n\nCasey: I agree. We've been circling on this for two weeks now. Maybe we need to bring in someone who specialises in this stuff?\n\nAlex: Yeah, I think that's the right call. We need someone who can analyse the query plans, optimise the schema, set up proper indexing strategies, and maybe advise on whether we need a different database architecture altogether.\n\n[assistant] {\"recommendation\":\"The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.\",\"action\":\"create_actor\"}\n\n[assistant] {\"title\":\"Database Performance Engineer\",\"reason\":\"The team requires specialized expertise to resolve slow dashboard queries caused by inefficient joins, sequential scans, and suboptimal schema design. This role will analyze query execution plans, implement indexing strategies, redesign database structures for time-series data, and evaluate storage solutions to meet real-time data requirements while preventing customer churn.\",\"skills\":[\"Query execution plan analysis (EXPLAIN ANALYZE)\",\"Index optimization for complex joins and aggregations\",\"Time-series database schema design\",\"Database storage engine internals (B-trees, columnar storage)\",\"Time-series database migration (e.g., PostgreSQL to TimescaleDB)\"]}\n\n[user] For this role, provide the AI system prompt and model type.\n\nRespond with JSON:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"System prompt to configure an AI assistant for this role\",\n      \"type\": \"string\",\n      \"minLength\": 30\n    },\n    \"model\": {\n      \"description\": \"Model type suited for this role\",\n      \"type\": \"string\",\n      \"enum\": [\n        \"reasoning\",\n        \"semantic\"\n      ]\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"model\"\n  ],\n  \"additionalProperties\": false\n}\n\nImportant:\n- Return ONLY valid JSON, no markdown code blocks\n- The \"prompt\" should be a system prompt for an AI assistant in this role\n- \"model\" should be \"reasoning\" for analytical tasks or \"semantic\" for creative tasks\n\n[assistant] \n\n[user] <validation_retry>\nYour previous response failed JSON validation:\n\n<previous_response>\n\n</previous_response>\n\n<validation_errors>\n• root: Invalid JSON: Unexpected end of JSON input\n</validation_errors>\n\n<instructions>\n1. Review the specific validation errors above\n2. Identify what needs to be fixed in your response\n3. Generate a corrected response that addresses each error\n</instructions>\n\nProvide a corrected JSON response. Return ONLY valid JSON with no additional text, explanations, or markdown formatting.\n</validation_retry>",
                    "rawResponse": "{\n  \"prompt\": \"You are a Database Performance Engineer specializing in optimizing complex queries and database architectures. Analyze query execution plans, identify bottlenecks in join operations and aggregations, and implement indexing strategies. Redesign schema structures for time-series data optimization, evaluate storage engine performance characteristics, and determine when database migrations are warranted. Provide specific recommendations for query rewriting, index creation, and database architecture changes while maintaining real-time data requirements.\",\n  \"model\": \"reasoning\"\n}",
                    "parsedResponse": {
                      "prompt": "You are a Database Performance Engineer specializing in optimizing complex queries and database architectures. Analyze query execution plans, identify bottlenecks in join operations and aggregations, and implement indexing strategies. Redesign schema structures for time-series data optimization, evaluate storage engine performance characteristics, and determine when database migrations are warranted. Provide specific recommendations for query rewriting, index creation, and database architecture changes while maintaining real-time data requirements.",
                      "model": "reasoning"
                    },
                    "validationErrors": [],
                    "errorMessage": null
                  }
                ]
              }
            ],
            "totalDurationMs": 51769,
            "finalResponse": {
              "recommendation": "The team needs a Database Performance Engineer to resolve the slow dashboard query issues. The current team lacks deep database optimization expertise, and the problem requires specialized knowledge in query execution analysis, schema redesign, and storage optimization. This role would focus on analyzing EXPLAIN ANALYZE output, optimizing join strategies, implementing indexing solutions, and evaluating database architecture options while maintaining real-time data requirements.",
              "action": {
                "type": "create_actor",
                "actor": {
                  "title": "Database Performance Engineer",
                  "reason": "The team requires specialized expertise to resolve slow dashboard queries caused by inefficient joins, sequential scans, and suboptimal schema design. This role will analyze query execution plans, implement indexing strategies, redesign database structures for time-series data, and evaluate storage solutions to meet real-time data requirements while preventing customer churn.",
                  "skills": [
                    "Query execution plan analysis (EXPLAIN ANALYZE)",
                    "Index optimization for complex joins and aggregations",
                    "Time-series database schema design",
                    "Database storage engine internals (B-trees, columnar storage)",
                    "Time-series database migration (e.g., PostgreSQL to TimescaleDB)"
                  ],
                  "prompt": "You are a Database Performance Engineer specializing in optimizing complex queries and database architectures. Analyze query execution plans, identify bottlenecks in join operations and aggregations, and implement indexing strategies. Redesign schema structures for time-series data optimization, evaluate storage engine performance characteristics, and determine when database migrations are warranted. Provide specific recommendations for query rewriting, index creation, and database architecture changes while maintaining real-time data requirements.",
                  "model": "reasoning"
                }
              }
            }
          }
        ],
        "summary": {
          "successRate": 100,
          "firstAttemptSuccessRate": 0,
          "afterRetry1SuccessRate": 100,
          "afterRetry2SuccessRate": 100,
          "afterRetry3SuccessRate": 100,
          "averageDurationMs": 47111.666666666664,
          "averageAttempts": 4,
          "averageAttemptsPerSuccess": 4,
          "averageTokensPerSuccess": 5860,
          "totalTokensUsed": 17580
        }
      }
    }
  }
}